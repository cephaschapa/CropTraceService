(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PWebrtc = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PWebrtc=(()=>{var j2=Object.create;var bi=Object.defineProperty;var X2=Object.getOwnPropertyDescriptor;var Q2=Object.getOwnPropertyNames;var Z2=Object.getPrototypeOf,J2=Object.prototype.hasOwnProperty;var ey=(t,e,r)=>e in t?bi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Oe=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),$e=(t,e)=>{for(var r in e)bi(t,r,{get:e[r],enumerable:!0})},Iu=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Q2(e))!J2.call(t,i)&&i!==r&&bi(t,i,{get:()=>e[i],enumerable:!(n=X2(e,i))||n.enumerable});return t};var re=(t,e,r)=>(r=t!=null?j2(Z2(t)):{},Iu(e||!t||!t.__esModule?bi(r,"default",{value:t,enumerable:!0}):r,t)),ty=t=>Iu(bi({},"__esModule",{value:!0}),t);var co=(t,e,r)=>(ey(t,typeof e!="symbol"?e+"":e,r),r);var Ru=_((V6,Lu)=>{var An=1e3,Dn=An*60,Bn=Dn*60,Hr=Bn*24,ry=Hr*7,ny=Hr*365.25;Lu.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return iy(t);if(r==="number"&&isFinite(t))return e.long?sy(t):oy(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function iy(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*ny;case"weeks":case"week":case"w":return r*ry;case"days":case"day":case"d":return r*Hr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Bn;case"minutes":case"minute":case"mins":case"min":case"m":return r*Dn;case"seconds":case"second":case"secs":case"sec":case"s":return r*An;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function oy(t){var e=Math.abs(t);return e>=Hr?Math.round(t/Hr)+"d":e>=Bn?Math.round(t/Bn)+"h":e>=Dn?Math.round(t/Dn)+"m":e>=An?Math.round(t/An)+"s":t+"ms"}function sy(t){var e=Math.abs(t);return e>=Hr?fo(t,e,Hr,"day"):e>=Bn?fo(t,e,Bn,"hour"):e>=Dn?fo(t,e,Dn,"minute"):e>=An?fo(t,e,An,"second"):t+" ms"}function fo(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var fa=_((q6,Nu)=>{function ay(t){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=Ru(),r.destroy=u,Object.keys(t).forEach(f=>{r[f]=t[f]}),r.names=[],r.skips=[],r.formatters={};function e(f){let h=0;for(let d=0;d<f.length;d++)h=(h<<5)-h+f.charCodeAt(d),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(f){let h,d=null,p,l;function y(...g){if(!y.enabled)return;let x=y,w=Number(new Date),v=w-(h||w);x.diff=v,x.prev=h,x.curr=w,h=w,g[0]=r.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");let A=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,(S,B)=>{if(S==="%%")return"%";A++;let I=r.formatters[B];if(typeof I=="function"){let U=g[A];S=I.call(x,U),g.splice(A,1),A--}return S}),r.formatArgs.call(x,g),(x.log||r.log).apply(x,g)}return y.namespace=f,y.useColors=r.useColors(),y.color=r.selectColor(f),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(p!==r.namespaces&&(p=r.namespaces,l=r.enabled(f)),l),set:g=>{d=g}}),typeof r.init=="function"&&r.init(y),y}function n(f,h){let d=r(this.namespace+(typeof h>"u"?":":h)+f);return d.log=this.log,d}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let h,d=(typeof f=="string"?f:"").split(/[\s,]+/),p=d.length;for(h=0;h<p;h++)d[h]&&(f=d[h].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function o(){let f=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),f}function s(f){if(f[f.length-1]==="*")return!0;let h,d;for(h=0,d=r.skips.length;h<d;h++)if(r.skips[h].test(f))return!1;for(h=0,d=r.names.length;h<d;h++)if(r.names[h].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function c(f){return f instanceof Error?f.stack||f.message:f}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Nu.exports=ay});var Pu=_((ft,ho)=>{ft.formatArgs=uy;ft.save=fy;ft.load=hy;ft.useColors=cy;ft.storage=ly();ft.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ft.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function cy(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function uy(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+ho.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ft.log=console.debug||console.log||(()=>{});function fy(t){try{t?ft.storage.setItem("debug",t):ft.storage.removeItem("debug")}catch{}}function hy(){let t;try{t=ft.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function ly(){try{return localStorage}catch{}}ho.exports=fa()(ft);var{formatters:dy}=ho.exports;dy.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ou=_((H6,Uu)=>{"use strict";Uu.exports=(t,e)=>{e=e||process.argv;let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1?!0:n<i)}});var Mu=_((z6,Fu)=>{"use strict";var py=Oe("os"),Bt=Ou(),it=process.env,_n;Bt("no-color")||Bt("no-colors")||Bt("color=false")?_n=!1:(Bt("color")||Bt("colors")||Bt("color=true")||Bt("color=always"))&&(_n=!0);"FORCE_COLOR"in it&&(_n=it.FORCE_COLOR.length===0||parseInt(it.FORCE_COLOR,10)!==0);function yy(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function gy(t){if(_n===!1)return 0;if(Bt("color=16m")||Bt("color=full")||Bt("color=truecolor"))return 3;if(Bt("color=256"))return 2;if(t&&!t.isTTY&&_n!==!0)return 0;let e=_n?1:0;if(process.platform==="win32"){let r=py.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in it)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(r=>r in it)||it.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in it)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(it.TEAMCITY_VERSION)?1:0;if(it.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in it){let r=parseInt((it.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(it.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(it.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(it.TERM)||"COLORTERM"in it?1:(it.TERM==="dumb",e)}function ha(t){let e=gy(t);return yy(e)}Fu.exports={supportsColor:ha,stdout:ha(process.stdout),stderr:ha(process.stderr)}});var Vu=_((We,po)=>{var my=Oe("tty"),lo=Oe("util");We.init=Cy;We.log=wy;We.formatArgs=by;We.save=Ey;We.load=Sy;We.useColors=xy;We.destroy=lo.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");We.colors=[6,2,3,4,5,1];try{let t=Mu();t&&(t.stderr||t).level>=2&&(We.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}We.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function xy(){return"colors"in We.inspectOpts?!!We.inspectOpts.colors:my.isatty(process.stderr.fd)}function by(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+po.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=vy()+e+" "+t[0]}function vy(){return We.inspectOpts.hideDate?"":new Date().toISOString()+" "}function wy(...t){return process.stderr.write(lo.format(...t)+`
`)}function Ey(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Sy(){return process.env.DEBUG}function Cy(t){t.inspectOpts={};let e=Object.keys(We.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=We.inspectOpts[e[r]]}po.exports=fa()(We);var{formatters:Ku}=po.exports;Ku.o=function(t){return this.inspectOpts.colors=this.useColors,lo.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Ku.O=function(t){return this.inspectOpts.colors=this.useColors,lo.inspect(t,this.inspectOpts)}});var qu=_((G6,la)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?la.exports=Pu():la.exports=Vu()});var pf=_((X5,df)=>{df.exports=Fa;var lf=128,Pg=127,Ug=~Pg,Og=Math.pow(2,31);function Fa(t,e,r){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw Fa.bytes=0,new RangeError("Could not encode varint");e=e||[],r=r||0;for(var n=r;t>=Og;)e[r++]=t&255|lf,t/=128;for(;t&Ug;)e[r++]=t&255|lf,t>>>=7;return e[r]=t|0,Fa.bytes=r-n+1,e}});var mf=_((Q5,gf)=>{gf.exports=Ma;var Fg=128,yf=127;function Ma(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a||i>49)throw Ma.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&yf)<<i:(s&yf)*Math.pow(2,i),i+=7}while(s>=Fg);return Ma.bytes=o-n,r}});var bf=_((Z5,xf)=>{var Mg=Math.pow(2,7),Kg=Math.pow(2,14),Vg=Math.pow(2,21),qg=Math.pow(2,28),Hg=Math.pow(2,35),zg=Math.pow(2,42),Gg=Math.pow(2,49),$g=Math.pow(2,56),Wg=Math.pow(2,63);xf.exports=function(t){return t<Mg?1:t<Kg?2:t<Vg?3:t<qg?4:t<Hg?5:t<zg?6:t<Gg?7:t<$g?8:t<Wg?9:10}});var mo=_((J5,vf)=>{vf.exports={encode:pf(),decode:mf(),encodingLength:bf()}});var Yf=_(De=>{"use strict";var Of=De&&De.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(De,"__esModule",{value:!0});De.getNodeVersion=De.detectOS=De.parseUserAgent=De.browserName=De.detect=De.ReactNativeInfo=De.BotInfo=De.SearchBotDeviceInfo=De.NodeInfo=De.BrowserInfo=void 0;var Kf=function(){function t(e,r,n){this.name=e,this.version=r,this.os=n,this.type="browser"}return t}();De.BrowserInfo=Kf;var Vf=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}();De.NodeInfo=Vf;var qf=function(){function t(e,r,n,i){this.name=e,this.version=r,this.os=n,this.bot=i,this.type="bot-device"}return t}();De.SearchBotDeviceInfo=qf;var Hf=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}();De.BotInfo=Hf;var zf=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}();De.ReactNativeInfo=zf;var wm=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Em=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Ff=3,Sm=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",wm]],Mf=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Cm(t){return t?ic(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new zf:typeof navigator<"u"?ic(navigator.userAgent):Wf()}De.detect=Cm;function Gf(t){return t!==""&&Sm.reduce(function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]},!1)}function Am(t){var e=Gf(t);return e?e[0]:null}De.browserName=Am;function ic(t){var e=Gf(t);if(!e)return null;var r=e[0],n=e[1];if(r==="searchbot")return new Hf;var i=n[1]&&n[1].split(".").join("_").split("_").slice(0,3);i?i.length<Ff&&(i=Of(Of([],i,!0),Dm(Ff-i.length),!0)):i=[];var o=i.join("."),s=$f(t),a=Em.exec(t);return a&&a[1]?new qf(r,o,s,a[1]):new Kf(r,o,s)}De.parseUserAgent=ic;function $f(t){for(var e=0,r=Mf.length;e<r;e++){var n=Mf[e],i=n[0],o=n[1],s=o.exec(t);if(s)return i}return null}De.detectOS=$f;function Wf(){var t=typeof process<"u"&&process.version;return t?new Vf(process.version.slice(1)):null}De.getNodeVersion=Wf;function Dm(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}});var sc=_((XC,nh)=>{"use strict";function rh(t,e){for(let r in e)Object.defineProperty(t,r,{value:e[r],enumerable:!0,configurable:!0});return t}function Om(t,e,r){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof e=="object"&&(r=e,e=""),e&&(r.code=e);try{return rh(t,r)}catch{r.message=t.message,r.stack=t.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(t)),rh(new i,r)}}nh.exports=Om});var hh=_((SA,fh)=>{"use strict";fh.exports=$m;function $m(t,e){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,c){r[n]=function(f){if(o)if(o=!1,f)c(f);else{for(var h=new Array(arguments.length-1),d=0;d<h.length;)h[d++]=arguments[d];a.apply(null,h)}};try{t.apply(e||null,r)}catch(u){o&&(o=!1,c(u))}})}});var yh=_(ph=>{"use strict";var No=ph;No.length=function(e){var r=e.length;if(!r)return 0;for(var n=0;--r%4>1&&e.charAt(r)==="=";)++n;return Math.ceil(e.length*3)/4-n};var qn=new Array(64),dh=new Array(123);for(Tt=0;Tt<64;)dh[qn[Tt]=Tt<26?Tt+65:Tt<52?Tt+71:Tt<62?Tt-4:Tt-59|43]=Tt++;var Tt;No.encode=function(e,r,n){for(var i=null,o=[],s=0,a=0,c;r<n;){var u=e[r++];switch(a){case 0:o[s++]=qn[u>>2],c=(u&3)<<4,a=1;break;case 1:o[s++]=qn[c|u>>4],c=(u&15)<<2,a=2;break;case 2:o[s++]=qn[c|u>>6],o[s++]=qn[u&63],a=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return a&&(o[s++]=qn[c],o[s++]=61,a===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var lh="invalid encoding";No.decode=function(e,r,n){for(var i=n,o=0,s,a=0;a<e.length;){var c=e.charCodeAt(a++);if(c===61&&o>1)break;if((c=dh[c])===void 0)throw Error(lh);switch(o){case 0:s=c,o=1;break;case 1:r[n++]=s<<2|(c&48)>>4,s=c,o=2;break;case 2:r[n++]=(s&15)<<4|(c&60)>>2,s=c,o=3;break;case 3:r[n++]=(s&3)<<6|c,o=0;break}}if(o===1)throw Error(lh);return n-i};No.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}});var mh=_((AA,gh)=>{"use strict";gh.exports=Po;function Po(){this._listeners={}}Po.prototype.on=function(e,r,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:r,ctx:n||this}),this};Po.prototype.off=function(e,r){if(e===void 0)this._listeners={};else if(r===void 0)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};Po.prototype.emit=function(e){var r=this._listeners[e];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var Ch=_((DA,Sh)=>{"use strict";Sh.exports=xh(xh);function xh(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),r=new Uint8Array(e.buffer),n=r[3]===128;function i(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3]}function o(c,u,f){e[0]=c,u[f]=r[3],u[f+1]=r[2],u[f+2]=r[1],u[f+3]=r[0]}t.writeFloatLE=n?i:o,t.writeFloatBE=n?o:i;function s(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],e[0]}function a(c,u){return r[3]=c[u],r[2]=c[u+1],r[1]=c[u+2],r[0]=c[u+3],e[0]}t.readFloatLE=n?s:a,t.readFloatBE=n?a:s}():function(){function e(n,i,o,s){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var c=Math.floor(Math.log(i)/Math.LN2),u=Math.round(i*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|u)>>>0,o,s)}}t.writeFloatLE=e.bind(null,bh),t.writeFloatBE=e.bind(null,vh);function r(n,i,o){var s=n(i,o),a=(s>>31)*2+1,c=s>>>23&255,u=s&8388607;return c===255?u?NaN:a*(1/0):c===0?a*1401298464324817e-60*u:a*Math.pow(2,c-150)*(u+8388608)}t.readFloatLE=r.bind(null,wh),t.readFloatBE=r.bind(null,Eh)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),r=new Uint8Array(e.buffer),n=r[7]===128;function i(c,u,f){e[0]=c,u[f]=r[0],u[f+1]=r[1],u[f+2]=r[2],u[f+3]=r[3],u[f+4]=r[4],u[f+5]=r[5],u[f+6]=r[6],u[f+7]=r[7]}function o(c,u,f){e[0]=c,u[f]=r[7],u[f+1]=r[6],u[f+2]=r[5],u[f+3]=r[4],u[f+4]=r[3],u[f+5]=r[2],u[f+6]=r[1],u[f+7]=r[0]}t.writeDoubleLE=n?i:o,t.writeDoubleBE=n?o:i;function s(c,u){return r[0]=c[u],r[1]=c[u+1],r[2]=c[u+2],r[3]=c[u+3],r[4]=c[u+4],r[5]=c[u+5],r[6]=c[u+6],r[7]=c[u+7],e[0]}function a(c,u){return r[7]=c[u],r[6]=c[u+1],r[5]=c[u+2],r[4]=c[u+3],r[3]=c[u+4],r[2]=c[u+5],r[1]=c[u+6],r[0]=c[u+7],e[0]}t.readDoubleLE=n?s:a,t.readDoubleBE=n?a:s}():function(){function e(n,i,o,s,a,c){var u=s<0?1:0;if(u&&(s=-s),s===0)n(0,a,c+i),n(1/s>0?0:2147483648,a,c+o);else if(isNaN(s))n(0,a,c+i),n(2146959360,a,c+o);else if(s>17976931348623157e292)n(0,a,c+i),n((u<<31|2146435072)>>>0,a,c+o);else{var f;if(s<22250738585072014e-324)f=s/5e-324,n(f>>>0,a,c+i),n((u<<31|f/4294967296)>>>0,a,c+o);else{var h=Math.floor(Math.log(s)/Math.LN2);h===1024&&(h=1023),f=s*Math.pow(2,-h),n(f*4503599627370496>>>0,a,c+i),n((u<<31|h+1023<<20|f*1048576&1048575)>>>0,a,c+o)}}}t.writeDoubleLE=e.bind(null,bh,0,4),t.writeDoubleBE=e.bind(null,vh,4,0);function r(n,i,o,s,a){var c=n(s,a+i),u=n(s,a+o),f=(u>>31)*2+1,h=u>>>20&2047,d=4294967296*(u&1048575)+c;return h===2047?d?NaN:f*(1/0):h===0?f*5e-324*d:f*Math.pow(2,h-1075)*(d+4503599627370496)}t.readDoubleLE=r.bind(null,wh,0,4),t.readDoubleBE=r.bind(null,Eh,4,0)}(),t}function bh(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}function vh(t,e,r){e[r]=t>>>24,e[r+1]=t>>>16&255,e[r+2]=t>>>8&255,e[r+3]=t&255}function wh(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function Eh(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}});var Ah=_((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}});var Bh=_(Dh=>{"use strict";var hc=Dh;hc.length=function(e){for(var r=0,n=0,i=0;i<e.length;++i)n=e.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(e.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};hc.read=function(e,r,n){var i=n-r;if(i<1)return"";for(var o=null,s=[],a=0,c;r<n;)c=e[r++],c<128?s[a++]=c:c>191&&c<224?s[a++]=(c&31)<<6|e[r++]&63:c>239&&c<365?(c=((c&7)<<18|(e[r++]&63)<<12|(e[r++]&63)<<6|e[r++]&63)-65536,s[a++]=55296+(c>>10),s[a++]=56320+(c&1023)):s[a++]=(c&15)<<12|(e[r++]&63)<<6|e[r++]&63,a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};hc.write=function(e,r,n){for(var i=n,o,s,a=0;a<e.length;++a)o=e.charCodeAt(a),o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&((s=e.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++a,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128);return n-i}});var Th=_((_A,_h)=>{"use strict";_h.exports=Wm;function Wm(t,e,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(c){if(c<1||c>i)return t(c);s+c>n&&(o=t(n),s=0);var u=e.call(o,s,s+=c);return s&7&&(s=(s|7)+1),u}}});var kh=_((TA,Ih)=>{"use strict";Ih.exports=Ke;var Ti=Jr();function Ke(t,e){this.lo=t>>>0,this.hi=e>>>0}var Zr=Ke.zero=new Ke(0,0);Zr.toNumber=function(){return 0};Zr.zzEncode=Zr.zzDecode=function(){return this};Zr.length=function(){return 1};var Ym=Ke.zeroHash="\0\0\0\0\0\0\0\0";Ke.fromNumber=function(e){if(e===0)return Zr;var r=e<0;r&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new Ke(n,i)};Ke.from=function(e){if(typeof e=="number")return Ke.fromNumber(e);if(Ti.isString(e))if(Ti.Long)e=Ti.Long.fromString(e);else return Ke.fromNumber(parseInt(e,10));return e.low||e.high?new Ke(e.low>>>0,e.high>>>0):Zr};Ke.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};Ke.prototype.toLong=function(e){return Ti.Long?new Ti.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var _r=String.prototype.charCodeAt;Ke.fromHash=function(e){return e===Ym?Zr:new Ke((_r.call(e,0)|_r.call(e,1)<<8|_r.call(e,2)<<16|_r.call(e,3)<<24)>>>0,(_r.call(e,4)|_r.call(e,5)<<8|_r.call(e,6)<<16|_r.call(e,7)<<24)>>>0)};Ke.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};Ke.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this};Ke.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this};Ke.prototype.length=function(){var e=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?e<16384?e<128?1:2:e<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Jr=_(lc=>{"use strict";var O=lc;O.asPromise=hh();O.base64=yh();O.EventEmitter=mh();O.float=Ch();O.inquire=Ah();O.utf8=Bh();O.pool=Th();O.LongBits=kh();O.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);O.global=O.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||lc;O.emptyArray=Object.freeze?Object.freeze([]):[];O.emptyObject=Object.freeze?Object.freeze({}):{};O.isInteger=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};O.isString=function(e){return typeof e=="string"||e instanceof String};O.isObject=function(e){return e&&typeof e=="object"};O.isset=O.isSet=function(e,r){var n=e[r];return n!=null&&e.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};O.Buffer=function(){try{var t=O.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch{return null}}();O._Buffer_from=null;O._Buffer_allocUnsafe=null;O.newBuffer=function(e){return typeof e=="number"?O.Buffer?O._Buffer_allocUnsafe(e):new O.Array(e):O.Buffer?O._Buffer_from(e):typeof Uint8Array>"u"?e:new Uint8Array(e)};O.Array=typeof Uint8Array<"u"?Uint8Array:Array;O.Long=O.global.dcodeIO&&O.global.dcodeIO.Long||O.global.Long||O.inquire("long");O.key2Re=/^true|false|0|1$/;O.key32Re=/^-?(?:0|[1-9][0-9]*)$/;O.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;O.longToHash=function(e){return e?O.LongBits.from(e).toHash():O.LongBits.zeroHash};O.longFromHash=function(e,r){var n=O.LongBits.fromHash(e);return O.Long?O.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function Lh(t,e,r){for(var n=Object.keys(e),i=0;i<n.length;++i)(t[n[i]]===void 0||!r)&&(t[n[i]]=e[n[i]]);return t}O.merge=Lh;O.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)};function Rh(t){function e(r,n){if(!(this instanceof e))return new e(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Lh(this,n)}return e.prototype=Object.create(Error.prototype,{constructor:{value:e,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return t},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),e}O.newError=Rh;O.ProtocolError=Rh("ProtocolError");O.oneOfGetter=function(e){for(var r={},n=0;n<e.length;++n)r[e[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(r[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};O.oneOfSetter=function(e){return function(r){for(var n=0;n<e.length;++n)e[n]!==r&&delete this[e[n]]}};O.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};O._configure=function(){var t=O.Buffer;if(!t){O._Buffer_from=O._Buffer_allocUnsafe=null;return}O._Buffer_from=t.from!==Uint8Array.from&&t.from||function(r,n){return new t(r,n)},O._Buffer_allocUnsafe=t.allocUnsafe||function(r){return new t(r)}}});var yc=_((kA,Fh)=>{"use strict";Fh.exports=Ne;var Wt=Jr(),pc,Uh=Wt.LongBits,jm=Wt.utf8;function It(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Ne(t){this.buf=t,this.pos=0,this.len=t.length}var Nh=typeof Uint8Array<"u"?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Ne(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Ne(e);throw Error("illegal buffer")},Oh=function(){return Wt.Buffer?function(r){return(Ne.create=function(i){return Wt.Buffer.isBuffer(i)?new pc(i):Nh(i)})(r)}:Nh};Ne.create=Oh();Ne.prototype._slice=Wt.Array.prototype.subarray||Wt.Array.prototype.slice;Ne.prototype.uint32=function(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,It(this,10);return e}}();Ne.prototype.int32=function(){return this.uint32()|0};Ne.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(e&1)|0};function dc(){var t=new Uh(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw It(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw It(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Ne.prototype.bool=function(){return this.uint32()!==0};function Uo(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Ne.prototype.fixed32=function(){if(this.pos+4>this.len)throw It(this,4);return Uo(this.buf,this.pos+=4)};Ne.prototype.sfixed32=function(){if(this.pos+4>this.len)throw It(this,4);return Uo(this.buf,this.pos+=4)|0};function Ph(){if(this.pos+8>this.len)throw It(this,8);return new Uh(Uo(this.buf,this.pos+=4),Uo(this.buf,this.pos+=4))}Ne.prototype.float=function(){if(this.pos+4>this.len)throw It(this,4);var e=Wt.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Ne.prototype.double=function(){if(this.pos+8>this.len)throw It(this,4);var e=Wt.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Ne.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw It(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Ne.prototype.string=function(){var e=this.bytes();return jm.read(e,0,e.length)};Ne.prototype.skip=function(e){if(typeof e=="number"){if(this.pos+e>this.len)throw It(this,e);this.pos+=e}else do if(this.pos>=this.len)throw It(this);while(this.buf[this.pos++]&128);return this};Ne.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Ne._configure=function(t){pc=t,Ne.create=Oh(),pc._configure();var e=Wt.Long?"toLong":"toNumber";Wt.merge(Ne.prototype,{int64:function(){return dc.call(this)[e](!1)},uint64:function(){return dc.call(this)[e](!0)},sint64:function(){return dc.call(this).zzDecode()[e](!1)},fixed64:function(){return Ph.call(this)[e](!0)},sfixed64:function(){return Ph.call(this)[e](!1)}})}});var qh=_((LA,Vh)=>{"use strict";Vh.exports=en;var Kh=yc();(en.prototype=Object.create(Kh.prototype)).constructor=en;var Mh=Jr();function en(t){Kh.call(this,t)}en._configure=function(){Mh.Buffer&&(en.prototype._slice=Mh.Buffer.prototype.slice)};en.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};en._configure()});var Ec=_((RA,$h)=>{"use strict";$h.exports=oe;var wt=Jr(),gc,Oo=wt.LongBits,Hh=wt.base64,zh=wt.utf8;function Ii(t,e,r){this.fn=t,this.len=e,this.next=void 0,this.val=r}function xc(){}function Xm(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function oe(){this.len=0,this.head=new Ii(xc,0,0),this.tail=this.head,this.states=null}var Gh=function(){return wt.Buffer?function(){return(oe.create=function(){return new gc})()}:function(){return new oe}};oe.create=Gh();oe.alloc=function(e){return new wt.Array(e)};wt.Array!==Array&&(oe.alloc=wt.pool(oe.alloc,wt.Array.prototype.subarray));oe.prototype._push=function(e,r,n){return this.tail=this.tail.next=new Ii(e,r,n),this.len+=r,this};function bc(t,e,r){e[r]=t&255}function Qm(t,e,r){for(;t>127;)e[r++]=t&127|128,t>>>=7;e[r]=t}function vc(t,e){this.len=t,this.next=void 0,this.val=e}vc.prototype=Object.create(Ii.prototype);vc.prototype.fn=Qm;oe.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new vc((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};oe.prototype.int32=function(e){return e<0?this._push(wc,10,Oo.fromNumber(e)):this.uint32(e)};oe.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)};function wc(t,e,r){for(;t.hi;)e[r++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[r++]=t.lo&127|128,t.lo=t.lo>>>7;e[r++]=t.lo}oe.prototype.uint64=function(e){var r=Oo.from(e);return this._push(wc,r.length(),r)};oe.prototype.int64=oe.prototype.uint64;oe.prototype.sint64=function(e){var r=Oo.from(e).zzEncode();return this._push(wc,r.length(),r)};oe.prototype.bool=function(e){return this._push(bc,1,e?1:0)};function mc(t,e,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24}oe.prototype.fixed32=function(e){return this._push(mc,4,e>>>0)};oe.prototype.sfixed32=oe.prototype.fixed32;oe.prototype.fixed64=function(e){var r=Oo.from(e);return this._push(mc,4,r.lo)._push(mc,4,r.hi)};oe.prototype.sfixed64=oe.prototype.fixed64;oe.prototype.float=function(e){return this._push(wt.float.writeFloatLE,4,e)};oe.prototype.double=function(e){return this._push(wt.float.writeDoubleLE,8,e)};var Zm=wt.Array.prototype.set?function(e,r,n){r.set(e,n)}:function(e,r,n){for(var i=0;i<e.length;++i)r[n+i]=e[i]};oe.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(bc,1,0);if(wt.isString(e)){var n=oe.alloc(r=Hh.length(e));Hh.decode(e,n,0),e=n}return this.uint32(r)._push(Zm,r,e)};oe.prototype.string=function(e){var r=zh.length(e);return r?this.uint32(r)._push(zh.write,r,e):this._push(bc,1,0)};oe.prototype.fork=function(){return this.states=new Xm(this),this.head=this.tail=new Ii(xc,0,0),this.len=0,this};oe.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Ii(xc,0,0),this.len=0),this};oe.prototype.ldelim=function(){var e=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=r,this.len+=n),this};oe.prototype.finish=function(){for(var e=this.head.next,r=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,r,n),n+=e.len,e=e.next;return r};oe._configure=function(t){gc=t,oe.create=Gh(),gc._configure()}});var jh=_((NA,Yh)=>{"use strict";Yh.exports=Yt;var Wh=Ec();(Yt.prototype=Object.create(Wh.prototype)).constructor=Yt;var Tr=Jr();function Yt(){Wh.call(this)}Yt._configure=function(){Yt.alloc=Tr._Buffer_allocUnsafe,Yt.writeBytesBuffer=Tr.Buffer&&Tr.Buffer.prototype instanceof Uint8Array&&Tr.Buffer.prototype.set.name==="set"?function(e,r,n){r.set(e,n)}:function(e,r,n){if(e.copy)e.copy(r,n,0,e.length);else for(var i=0;i<e.length;)r[n++]=e[i++]}};Yt.prototype.bytes=function(e){Tr.isString(e)&&(e=Tr._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(Yt.writeBytesBuffer,r,e),this};function Jm(t,e,r){t.length<40?Tr.utf8.write(t,e,r):e.utf8Write?e.utf8Write(t,r):e.write(t,r)}Yt.prototype.string=function(e){var r=Tr.Buffer.byteLength(e);return this.uint32(r),r&&this._push(Jm,r,e),this};Yt._configure()});var Cl=_(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});function Ox(t,e){var r=t>>>16&65535,n=t&65535,i=e>>>16&65535,o=e&65535;return n*o+(r*o+n*i<<16>>>0)|0}mt.mul=Math.imul||Ox;function Fx(t,e){return t+e|0}mt.add=Fx;function Mx(t,e){return t-e|0}mt.sub=Mx;function Kx(t,e){return t<<e|t>>>32-e}mt.rotl=Kx;function Vx(t,e){return t<<32-e|t>>>e}mt.rotr=Vx;function qx(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}mt.isInteger=Number.isInteger||qx;mt.MAX_SAFE_INTEGER=9007199254740991;mt.isSafeInteger=function(t){return mt.isInteger(t)&&t>=-mt.MAX_SAFE_INTEGER&&t<=mt.MAX_SAFE_INTEGER}});var ts=_(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});var Al=Cl();function Hx(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}X.readInt16BE=Hx;function zx(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}X.readUint16BE=zx;function Gx(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}X.readInt16LE=Gx;function $x(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}X.readUint16LE=$x;function Dl(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}X.writeUint16BE=Dl;X.writeInt16BE=Dl;function Bl(t,e,r){return e===void 0&&(e=new Uint8Array(2)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}X.writeUint16LE=Bl;X.writeInt16LE=Bl;function zc(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}X.readInt32BE=zc;function Gc(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}X.readUint32BE=Gc;function $c(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}X.readInt32LE=$c;function Wc(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}X.readUint32LE=Wc;function Jo(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}X.writeUint32BE=Jo;X.writeInt32BE=Jo;function es(t,e,r){return e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}X.writeUint32LE=es;X.writeInt32LE=es;function Wx(t,e){e===void 0&&(e=0);var r=zc(t,e),n=zc(t,e+4);return r*4294967296+n-(n>>31)*4294967296}X.readInt64BE=Wx;function Yx(t,e){e===void 0&&(e=0);var r=Gc(t,e),n=Gc(t,e+4);return r*4294967296+n}X.readUint64BE=Yx;function jx(t,e){e===void 0&&(e=0);var r=$c(t,e),n=$c(t,e+4);return n*4294967296+r-(r>>31)*4294967296}X.readInt64LE=jx;function Xx(t,e){e===void 0&&(e=0);var r=Wc(t,e),n=Wc(t,e+4);return n*4294967296+r}X.readUint64LE=Xx;function _l(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),Jo(t/4294967296>>>0,e,r),Jo(t>>>0,e,r+4),e}X.writeUint64BE=_l;X.writeInt64BE=_l;function Tl(t,e,r){return e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0),es(t>>>0,e,r),es(t/4294967296>>>0,e,r+4),e}X.writeUint64LE=Tl;X.writeInt64LE=Tl;function Qx(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=t/8+r-1;o>=r;o--)n+=e[o]*i,i*=256;return n}X.readUintBE=Qx;function Zx(t,e,r){if(r===void 0&&(r=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=r;o<r+t/8;o++)n+=e[o]*i,i*=256;return n}X.readUintLE=Zx;function Jx(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!Al.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var i=1,o=t/8+n-1;o>=n;o--)r[o]=e/i&255,i*=256;return r}X.writeUintBE=Jx;function eb(t,e,r,n){if(r===void 0&&(r=new Uint8Array(t/8)),n===void 0&&(n=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!Al.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+t/8;o++)r[o]=e/i&255,i*=256;return r}X.writeUintLE=eb;function tb(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e)}X.readFloat32BE=tb;function rb(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat32(e,!0)}X.readFloat32LE=rb;function nb(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e)}X.readFloat64BE=nb;function ib(t,e){e===void 0&&(e=0);var r=new DataView(t.buffer,t.byteOffset,t.byteLength);return r.getFloat64(e,!0)}X.readFloat64LE=ib;function ob(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t),e}X.writeFloat32BE=ob;function sb(t,e,r){e===void 0&&(e=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat32(r,t,!0),e}X.writeFloat32LE=sb;function ab(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t),e}X.writeFloat64BE=ab;function cb(t,e,r){e===void 0&&(e=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.setFloat64(r,t,!0),e}X.writeFloat64LE=cb});var an=_(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});function ub(t){for(var e=0;e<t.length;e++)t[e]=0;return t}Yc.wipe=ub});var kl=_(rs=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});var ot=ts(),jc=an(),fb=20;function hb(t,e,r){for(var n=1634760805,i=857760878,o=2036477234,s=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],u=r[11]<<24|r[10]<<16|r[9]<<8|r[8],f=r[15]<<24|r[14]<<16|r[13]<<8|r[12],h=r[19]<<24|r[18]<<16|r[17]<<8|r[16],d=r[23]<<24|r[22]<<16|r[21]<<8|r[20],p=r[27]<<24|r[26]<<16|r[25]<<8|r[24],l=r[31]<<24|r[30]<<16|r[29]<<8|r[28],y=e[3]<<24|e[2]<<16|e[1]<<8|e[0],g=e[7]<<24|e[6]<<16|e[5]<<8|e[4],x=e[11]<<24|e[10]<<16|e[9]<<8|e[8],w=e[15]<<24|e[14]<<16|e[13]<<8|e[12],v=n,A=i,E=o,S=s,B=a,I=c,U=u,M=f,$=h,q=d,te=p,ce=l,K=y,z=g,D=x,H=w,ve=0;ve<fb;ve+=2)v=v+B|0,K^=v,K=K>>>32-16|K<<16,$=$+K|0,B^=$,B=B>>>32-12|B<<12,A=A+I|0,z^=A,z=z>>>32-16|z<<16,q=q+z|0,I^=q,I=I>>>32-12|I<<12,E=E+U|0,D^=E,D=D>>>32-16|D<<16,te=te+D|0,U^=te,U=U>>>32-12|U<<12,S=S+M|0,H^=S,H=H>>>32-16|H<<16,ce=ce+H|0,M^=ce,M=M>>>32-12|M<<12,E=E+U|0,D^=E,D=D>>>32-8|D<<8,te=te+D|0,U^=te,U=U>>>32-7|U<<7,S=S+M|0,H^=S,H=H>>>32-8|H<<8,ce=ce+H|0,M^=ce,M=M>>>32-7|M<<7,A=A+I|0,z^=A,z=z>>>32-8|z<<8,q=q+z|0,I^=q,I=I>>>32-7|I<<7,v=v+B|0,K^=v,K=K>>>32-8|K<<8,$=$+K|0,B^=$,B=B>>>32-7|B<<7,v=v+I|0,H^=v,H=H>>>32-16|H<<16,te=te+H|0,I^=te,I=I>>>32-12|I<<12,A=A+U|0,K^=A,K=K>>>32-16|K<<16,ce=ce+K|0,U^=ce,U=U>>>32-12|U<<12,E=E+M|0,z^=E,z=z>>>32-16|z<<16,$=$+z|0,M^=$,M=M>>>32-12|M<<12,S=S+B|0,D^=S,D=D>>>32-16|D<<16,q=q+D|0,B^=q,B=B>>>32-12|B<<12,E=E+M|0,z^=E,z=z>>>32-8|z<<8,$=$+z|0,M^=$,M=M>>>32-7|M<<7,S=S+B|0,D^=S,D=D>>>32-8|D<<8,q=q+D|0,B^=q,B=B>>>32-7|B<<7,A=A+U|0,K^=A,K=K>>>32-8|K<<8,ce=ce+K|0,U^=ce,U=U>>>32-7|U<<7,v=v+I|0,H^=v,H=H>>>32-8|H<<8,te=te+H|0,I^=te,I=I>>>32-7|I<<7;ot.writeUint32LE(v+n|0,t,0),ot.writeUint32LE(A+i|0,t,4),ot.writeUint32LE(E+o|0,t,8),ot.writeUint32LE(S+s|0,t,12),ot.writeUint32LE(B+a|0,t,16),ot.writeUint32LE(I+c|0,t,20),ot.writeUint32LE(U+u|0,t,24),ot.writeUint32LE(M+f|0,t,28),ot.writeUint32LE($+h|0,t,32),ot.writeUint32LE(q+d|0,t,36),ot.writeUint32LE(te+p|0,t,40),ot.writeUint32LE(ce+l|0,t,44),ot.writeUint32LE(K+y|0,t,48),ot.writeUint32LE(z+g|0,t,52),ot.writeUint32LE(D+x|0,t,56),ot.writeUint32LE(H+w|0,t,60)}function Il(t,e,r,n,i){if(i===void 0&&(i=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var o,s;if(i===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),s=o.length-e.length,o.set(e,s)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=e,s=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){hb(a,o,t);for(var u=c;u<c+64&&u<r.length;u++)n[u]=r[u]^a[u-c];db(o,0,s)}return jc.wipe(a),i===0&&jc.wipe(o),n}rs.streamXOR=Il;function lb(t,e,r,n){return n===void 0&&(n=0),jc.wipe(r),Il(t,e,r,r,n)}rs.stream=lb;function db(t,e,r){for(var n=1;r--;)n=n+(t[e]&255)|0,t[e]=n&255,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}});var Xc=_(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});function pb(t,e,r){return~(t-1)&e|t-1&r}Wn.select=pb;function yb(t,e){return(t|0)-(e|0)-1>>>31&1}Wn.lessOrEqual=yb;function Ll(t,e){if(t.length!==e.length)return 0;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return 1&r-1>>>8}Wn.compare=Ll;function gb(t,e){return t.length===0||e.length===0?!1:Ll(t,e)!==0}Wn.equal=gb});var Nl=_(pr=>{"use strict";Object.defineProperty(pr,"__esModule",{value:!0});var mb=Xc(),ns=an();pr.DIGEST_LENGTH=16;var Rl=function(){function t(e){this.digestLength=pr.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=e[0]|e[1]<<8;this._r[0]=r&8191;var n=e[2]|e[3]<<8;this._r[1]=(r>>>13|n<<3)&8191;var i=e[4]|e[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var o=e[6]|e[7]<<8;this._r[3]=(i>>>7|o<<9)&8191;var s=e[8]|e[9]<<8;this._r[4]=(o>>>4|s<<12)&255,this._r[5]=s>>>1&8190;var a=e[10]|e[11]<<8;this._r[6]=(s>>>14|a<<2)&8191;var c=e[12]|e[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var u=e[14]|e[15]<<8;this._r[8]=(c>>>8|u<<8)&8191,this._r[9]=u>>>5&127,this._pad[0]=e[16]|e[17]<<8,this._pad[1]=e[18]|e[19]<<8,this._pad[2]=e[20]|e[21]<<8,this._pad[3]=e[22]|e[23]<<8,this._pad[4]=e[24]|e[25]<<8,this._pad[5]=e[26]|e[27]<<8,this._pad[6]=e[28]|e[29]<<8,this._pad[7]=e[30]|e[31]<<8}return t.prototype._blocks=function(e,r,n){for(var i=this._fin?0:2048,o=this._h[0],s=this._h[1],a=this._h[2],c=this._h[3],u=this._h[4],f=this._h[5],h=this._h[6],d=this._h[7],p=this._h[8],l=this._h[9],y=this._r[0],g=this._r[1],x=this._r[2],w=this._r[3],v=this._r[4],A=this._r[5],E=this._r[6],S=this._r[7],B=this._r[8],I=this._r[9];n>=16;){var U=e[r+0]|e[r+1]<<8;o+=U&8191;var M=e[r+2]|e[r+3]<<8;s+=(U>>>13|M<<3)&8191;var $=e[r+4]|e[r+5]<<8;a+=(M>>>10|$<<6)&8191;var q=e[r+6]|e[r+7]<<8;c+=($>>>7|q<<9)&8191;var te=e[r+8]|e[r+9]<<8;u+=(q>>>4|te<<12)&8191,f+=te>>>1&8191;var ce=e[r+10]|e[r+11]<<8;h+=(te>>>14|ce<<2)&8191;var K=e[r+12]|e[r+13]<<8;d+=(ce>>>11|K<<5)&8191;var z=e[r+14]|e[r+15]<<8;p+=(K>>>8|z<<8)&8191,l+=z>>>5|i;var D=0,H=D;H+=o*y,H+=s*(5*I),H+=a*(5*B),H+=c*(5*S),H+=u*(5*E),D=H>>>13,H&=8191,H+=f*(5*A),H+=h*(5*v),H+=d*(5*w),H+=p*(5*x),H+=l*(5*g),D+=H>>>13,H&=8191;var ve=D;ve+=o*g,ve+=s*y,ve+=a*(5*I),ve+=c*(5*B),ve+=u*(5*S),D=ve>>>13,ve&=8191,ve+=f*(5*E),ve+=h*(5*A),ve+=d*(5*v),ve+=p*(5*w),ve+=l*(5*x),D+=ve>>>13,ve&=8191;var Z=D;Z+=o*x,Z+=s*g,Z+=a*y,Z+=c*(5*I),Z+=u*(5*B),D=Z>>>13,Z&=8191,Z+=f*(5*S),Z+=h*(5*E),Z+=d*(5*A),Z+=p*(5*v),Z+=l*(5*w),D+=Z>>>13,Z&=8191;var J=D;J+=o*w,J+=s*x,J+=a*g,J+=c*y,J+=u*(5*I),D=J>>>13,J&=8191,J+=f*(5*B),J+=h*(5*S),J+=d*(5*E),J+=p*(5*A),J+=l*(5*v),D+=J>>>13,J&=8191;var ee=D;ee+=o*v,ee+=s*w,ee+=a*x,ee+=c*g,ee+=u*y,D=ee>>>13,ee&=8191,ee+=f*(5*I),ee+=h*(5*B),ee+=d*(5*S),ee+=p*(5*E),ee+=l*(5*A),D+=ee>>>13,ee&=8191;var ue=D;ue+=o*A,ue+=s*v,ue+=a*w,ue+=c*x,ue+=u*g,D=ue>>>13,ue&=8191,ue+=f*y,ue+=h*(5*I),ue+=d*(5*B),ue+=p*(5*S),ue+=l*(5*E),D+=ue>>>13,ue&=8191;var fe=D;fe+=o*E,fe+=s*A,fe+=a*v,fe+=c*w,fe+=u*x,D=fe>>>13,fe&=8191,fe+=f*g,fe+=h*y,fe+=d*(5*I),fe+=p*(5*B),fe+=l*(5*S),D+=fe>>>13,fe&=8191;var he=D;he+=o*S,he+=s*E,he+=a*A,he+=c*v,he+=u*w,D=he>>>13,he&=8191,he+=f*x,he+=h*g,he+=d*y,he+=p*(5*I),he+=l*(5*B),D+=he>>>13,he&=8191;var le=D;le+=o*B,le+=s*S,le+=a*E,le+=c*A,le+=u*v,D=le>>>13,le&=8191,le+=f*w,le+=h*x,le+=d*g,le+=p*y,le+=l*(5*I),D+=le>>>13,le&=8191;var de=D;de+=o*I,de+=s*B,de+=a*S,de+=c*E,de+=u*A,D=de>>>13,de&=8191,de+=f*v,de+=h*w,de+=d*x,de+=p*g,de+=l*y,D+=de>>>13,de&=8191,D=(D<<2)+D|0,D=D+H|0,H=D&8191,D=D>>>13,ve+=D,o=H,s=ve,a=Z,c=J,u=ee,f=ue,h=fe,d=he,p=le,l=de,r+=16,n-=16}this._h[0]=o,this._h[1]=s,this._h[2]=a,this._h[3]=c,this._h[4]=u,this._h[5]=f,this._h[6]=h,this._h[7]=d,this._h[8]=p,this._h[9]=l},t.prototype.finish=function(e,r){r===void 0&&(r=0);var n=new Uint16Array(10),i,o,s,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=i,i=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,a=1;a<10;a++)n[a]=this._h[a]+i,i=n[a]>>>13,n[a]&=8191;for(n[9]-=8192,o=(i^1)-1,a=0;a<10;a++)n[a]&=o;for(o=~o,a=0;a<10;a++)this._h[a]=this._h[a]&o|n[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,s=this._h[0]+this._pad[0],this._h[0]=s&65535,a=1;a<8;a++)s=(this._h[a]+this._pad[a]|0)+(s>>>16)|0,this._h[a]=s&65535;return e[r+0]=this._h[0]>>>0,e[r+1]=this._h[0]>>>8,e[r+2]=this._h[1]>>>0,e[r+3]=this._h[1]>>>8,e[r+4]=this._h[2]>>>0,e[r+5]=this._h[2]>>>8,e[r+6]=this._h[3]>>>0,e[r+7]=this._h[3]>>>8,e[r+8]=this._h[4]>>>0,e[r+9]=this._h[4]>>>8,e[r+10]=this._h[5]>>>0,e[r+11]=this._h[5]>>>8,e[r+12]=this._h[6]>>>0,e[r+13]=this._h[6]>>>8,e[r+14]=this._h[7]>>>0,e[r+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(e){var r=0,n=e.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var o=0;o<i;o++)this._buffer[this._leftover+o]=e[r+o];if(n-=i,r+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(e,r,i),r+=i,n-=i),n){for(var o=0;o<n;o++)this._buffer[this._leftover+o]=e[r+o];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var e=new Uint8Array(16);return this.finish(e),e},t.prototype.clean=function(){return ns.wipe(this._buffer),ns.wipe(this._r),ns.wipe(this._h),ns.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();pr.Poly1305=Rl;function xb(t,e){var r=new Rl(t);r.update(e);var n=r.digest();return r.clean(),n}pr.oneTimeAuth=xb;function bb(t,e){return t.length!==pr.DIGEST_LENGTH||e.length!==pr.DIGEST_LENGTH?!1:mb.equal(t,e)}pr.equal=bb});var Qc=_(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});var is=kl(),vb=Nl(),Li=an(),Pl=ts(),wb=Xc();yr.KEY_LENGTH=32;yr.NONCE_LENGTH=12;yr.TAG_LENGTH=16;var Ul=new Uint8Array(16),Eb=function(){function t(e){if(this.nonceLength=yr.NONCE_LENGTH,this.tagLength=yr.TAG_LENGTH,e.length!==yr.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(e)}return t.prototype.seal=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(e,o.length-e.length);var s=new Uint8Array(32);is.stream(this._key,o,s,4);var a=r.length+this.tagLength,c;if(i){if(i.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(a);return is.streamXOR(this._key,o,r,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),s,c.subarray(0,c.length-this.tagLength),n),Li.wipe(o),c},t.prototype.open=function(e,r,n,i){if(e.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(e,o.length-e.length);var s=new Uint8Array(32);is.stream(this._key,o,s,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,s,r.subarray(0,r.length-this.tagLength),n),!wb.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var c=r.length-this.tagLength,u;if(i){if(i.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");u=i}else u=new Uint8Array(c);return is.streamXOR(this._key,o,r.subarray(0,r.length-this.tagLength),u,4),Li.wipe(o),u},t.prototype.clean=function(){return Li.wipe(this._key),this},t.prototype._authenticate=function(e,r,n,i){var o=new vb.Poly1305(r);i&&(o.update(i),i.length%16>0&&o.update(Ul.subarray(i.length%16))),o.update(n),n.length%16>0&&o.update(Ul.subarray(n.length%16));var s=new Uint8Array(8);i&&Pl.writeUint64LE(i.length,s),o.update(s),Pl.writeUint64LE(n.length,s),o.update(s);for(var a=o.digest(),c=0;c<a.length;c++)e[c]=a[c];o.clean(),Li.wipe(a),Li.wipe(s)},t}();yr.ChaCha20Poly1305=Eb});var Fl=_(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.BrowserRandomSource=void 0;var Ol=65536,Zc=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(e);for(let n=0;n<r.length;n+=Ol)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Ol)));return r}};os.BrowserRandomSource=Zc});var Ml=_(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.NodeRandomSource=void 0;var Sb=an(),Jc=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Oe<"u"){let e=Oe("crypto");e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(e);if(r.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(e);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,Sb.wipe)(r),n}};ss.NodeRandomSource=Jc});var Kl=_(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.SystemRandomSource=void 0;var Cb=Fl(),Ab=Ml(),e0=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Cb.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Ab.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}};as.SystemRandomSource=e0});var zl=_(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});st.randomStringForEntropy=st.randomString=st.randomUint32=st.randomBytes=st.defaultRandomSource=void 0;var Db=Kl(),Bb=ts(),Vl=an();st.defaultRandomSource=new Db.SystemRandomSource;function t0(t,e=st.defaultRandomSource){return e.randomBytes(t)}st.randomBytes=t0;function _b(t=st.defaultRandomSource){let e=t0(4,t),r=(0,Bb.readUint32LE)(e);return(0,Vl.wipe)(e),r}st.randomUint32=_b;var ql="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Hl(t,e=ql,r=st.defaultRandomSource){if(e.length<2)throw new Error("randomString charset is too short");if(e.length>256)throw new Error("randomString charset is too long");let n="",i=e.length,o=256-256%i;for(;t>0;){let s=t0(Math.ceil(t*256/o),r);for(let a=0;a<s.length&&t>0;a++){let c=s[a];c<o&&(n+=e.charAt(c%i),t--)}(0,Vl.wipe)(s)}return n}st.randomString=Hl;function Tb(t,e=ql,r=st.defaultRandomSource){let n=Math.ceil(t/(Math.log(e.length)/Math.LN2));return Hl(n,e,r)}st.randomStringForEntropy=Tb});var Yl=_(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.sharedKey=Ie.generateKeyPair=Ie.generateKeyPairFromSeed=Ie.scalarMultBase=Ie.scalarMult=Ie.SHARED_KEY_LENGTH=Ie.SECRET_KEY_LENGTH=Ie.PUBLIC_KEY_LENGTH=void 0;var Ib=zl(),kb=an();Ie.PUBLIC_KEY_LENGTH=32;Ie.SECRET_KEY_LENGTH=32;Ie.SHARED_KEY_LENGTH=32;function jt(t){let e=new Float64Array(16);if(t)for(let r=0;r<t.length;r++)e[r]=t[r];return e}var Gl=new Uint8Array(32);Gl[0]=9;var Lb=jt([56129,1]);function r0(t){let e=1;for(let r=0;r<16;r++){let n=t[r]+e+65535;e=Math.floor(n/65536),t[r]=n-e*65536}t[0]+=e-1+37*(e-1)}function Ri(t,e,r){let n=~(r-1);for(let i=0;i<16;i++){let o=n&(t[i]^e[i]);t[i]^=o,e[i]^=o}}function Rb(t,e){let r=jt(),n=jt();for(let i=0;i<16;i++)n[i]=e[i];r0(n),r0(n),r0(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let s=1;s<15;s++)r[s]=n[s]-65535-(r[s-1]>>16&1),r[s-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let o=r[15]>>16&1;r[14]&=65535,Ri(n,r,1-o)}for(let i=0;i<16;i++)t[2*i]=n[i]&255,t[2*i+1]=n[i]>>8}function Nb(t,e){for(let r=0;r<16;r++)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function cs(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]+r[n]}function us(t,e,r){for(let n=0;n<16;n++)t[n]=e[n]-r[n]}function gr(t,e,r){let n,i,o=0,s=0,a=0,c=0,u=0,f=0,h=0,d=0,p=0,l=0,y=0,g=0,x=0,w=0,v=0,A=0,E=0,S=0,B=0,I=0,U=0,M=0,$=0,q=0,te=0,ce=0,K=0,z=0,D=0,H=0,ve=0,Z=r[0],J=r[1],ee=r[2],ue=r[3],fe=r[4],he=r[5],le=r[6],de=r[7],Xe=r[8],Qe=r[9],Ze=r[10],Je=r[11],et=r[12],tt=r[13],rt=r[14],nt=r[15];n=e[0],o+=n*Z,s+=n*J,a+=n*ee,c+=n*ue,u+=n*fe,f+=n*he,h+=n*le,d+=n*de,p+=n*Xe,l+=n*Qe,y+=n*Ze,g+=n*Je,x+=n*et,w+=n*tt,v+=n*rt,A+=n*nt,n=e[1],s+=n*Z,a+=n*J,c+=n*ee,u+=n*ue,f+=n*fe,h+=n*he,d+=n*le,p+=n*de,l+=n*Xe,y+=n*Qe,g+=n*Ze,x+=n*Je,w+=n*et,v+=n*tt,A+=n*rt,E+=n*nt,n=e[2],a+=n*Z,c+=n*J,u+=n*ee,f+=n*ue,h+=n*fe,d+=n*he,p+=n*le,l+=n*de,y+=n*Xe,g+=n*Qe,x+=n*Ze,w+=n*Je,v+=n*et,A+=n*tt,E+=n*rt,S+=n*nt,n=e[3],c+=n*Z,u+=n*J,f+=n*ee,h+=n*ue,d+=n*fe,p+=n*he,l+=n*le,y+=n*de,g+=n*Xe,x+=n*Qe,w+=n*Ze,v+=n*Je,A+=n*et,E+=n*tt,S+=n*rt,B+=n*nt,n=e[4],u+=n*Z,f+=n*J,h+=n*ee,d+=n*ue,p+=n*fe,l+=n*he,y+=n*le,g+=n*de,x+=n*Xe,w+=n*Qe,v+=n*Ze,A+=n*Je,E+=n*et,S+=n*tt,B+=n*rt,I+=n*nt,n=e[5],f+=n*Z,h+=n*J,d+=n*ee,p+=n*ue,l+=n*fe,y+=n*he,g+=n*le,x+=n*de,w+=n*Xe,v+=n*Qe,A+=n*Ze,E+=n*Je,S+=n*et,B+=n*tt,I+=n*rt,U+=n*nt,n=e[6],h+=n*Z,d+=n*J,p+=n*ee,l+=n*ue,y+=n*fe,g+=n*he,x+=n*le,w+=n*de,v+=n*Xe,A+=n*Qe,E+=n*Ze,S+=n*Je,B+=n*et,I+=n*tt,U+=n*rt,M+=n*nt,n=e[7],d+=n*Z,p+=n*J,l+=n*ee,y+=n*ue,g+=n*fe,x+=n*he,w+=n*le,v+=n*de,A+=n*Xe,E+=n*Qe,S+=n*Ze,B+=n*Je,I+=n*et,U+=n*tt,M+=n*rt,$+=n*nt,n=e[8],p+=n*Z,l+=n*J,y+=n*ee,g+=n*ue,x+=n*fe,w+=n*he,v+=n*le,A+=n*de,E+=n*Xe,S+=n*Qe,B+=n*Ze,I+=n*Je,U+=n*et,M+=n*tt,$+=n*rt,q+=n*nt,n=e[9],l+=n*Z,y+=n*J,g+=n*ee,x+=n*ue,w+=n*fe,v+=n*he,A+=n*le,E+=n*de,S+=n*Xe,B+=n*Qe,I+=n*Ze,U+=n*Je,M+=n*et,$+=n*tt,q+=n*rt,te+=n*nt,n=e[10],y+=n*Z,g+=n*J,x+=n*ee,w+=n*ue,v+=n*fe,A+=n*he,E+=n*le,S+=n*de,B+=n*Xe,I+=n*Qe,U+=n*Ze,M+=n*Je,$+=n*et,q+=n*tt,te+=n*rt,ce+=n*nt,n=e[11],g+=n*Z,x+=n*J,w+=n*ee,v+=n*ue,A+=n*fe,E+=n*he,S+=n*le,B+=n*de,I+=n*Xe,U+=n*Qe,M+=n*Ze,$+=n*Je,q+=n*et,te+=n*tt,ce+=n*rt,K+=n*nt,n=e[12],x+=n*Z,w+=n*J,v+=n*ee,A+=n*ue,E+=n*fe,S+=n*he,B+=n*le,I+=n*de,U+=n*Xe,M+=n*Qe,$+=n*Ze,q+=n*Je,te+=n*et,ce+=n*tt,K+=n*rt,z+=n*nt,n=e[13],w+=n*Z,v+=n*J,A+=n*ee,E+=n*ue,S+=n*fe,B+=n*he,I+=n*le,U+=n*de,M+=n*Xe,$+=n*Qe,q+=n*Ze,te+=n*Je,ce+=n*et,K+=n*tt,z+=n*rt,D+=n*nt,n=e[14],v+=n*Z,A+=n*J,E+=n*ee,S+=n*ue,B+=n*fe,I+=n*he,U+=n*le,M+=n*de,$+=n*Xe,q+=n*Qe,te+=n*Ze,ce+=n*Je,K+=n*et,z+=n*tt,D+=n*rt,H+=n*nt,n=e[15],A+=n*Z,E+=n*J,S+=n*ee,B+=n*ue,I+=n*fe,U+=n*he,M+=n*le,$+=n*de,q+=n*Xe,te+=n*Qe,ce+=n*Ze,K+=n*Je,z+=n*et,D+=n*tt,H+=n*rt,ve+=n*nt,o+=38*E,s+=38*S,a+=38*B,c+=38*I,u+=38*U,f+=38*M,h+=38*$,d+=38*q,p+=38*te,l+=38*ce,y+=38*K,g+=38*z,x+=38*D,w+=38*H,v+=38*ve,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=v+i+65535,i=Math.floor(n/65536),v=n-i*65536,n=A+i+65535,i=Math.floor(n/65536),A=n-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=s,t[2]=a,t[3]=c,t[4]=u,t[5]=f,t[6]=h,t[7]=d,t[8]=p,t[9]=l,t[10]=y,t[11]=g,t[12]=x,t[13]=w,t[14]=v,t[15]=A}function Ni(t,e){gr(t,e,e)}function Pb(t,e){let r=jt();for(let n=0;n<16;n++)r[n]=e[n];for(let n=253;n>=0;n--)Ni(r,r),n!==2&&n!==4&&gr(r,r,e);for(let n=0;n<16;n++)t[n]=r[n]}function n0(t,e){let r=new Uint8Array(32),n=new Float64Array(80),i=jt(),o=jt(),s=jt(),a=jt(),c=jt(),u=jt();for(let p=0;p<31;p++)r[p]=t[p];r[31]=t[31]&127|64,r[0]&=248,Nb(n,e);for(let p=0;p<16;p++)o[p]=n[p];i[0]=a[0]=1;for(let p=254;p>=0;--p){let l=r[p>>>3]>>>(p&7)&1;Ri(i,o,l),Ri(s,a,l),cs(c,i,s),us(i,i,s),cs(s,o,a),us(o,o,a),Ni(a,c),Ni(u,i),gr(i,s,i),gr(s,o,c),cs(c,i,s),us(i,i,s),Ni(o,i),us(s,a,u),gr(i,s,Lb),cs(i,i,a),gr(s,s,i),gr(i,a,u),gr(a,o,n),Ni(o,c),Ri(i,o,l),Ri(s,a,l)}for(let p=0;p<16;p++)n[p+16]=i[p],n[p+32]=s[p],n[p+48]=o[p],n[p+64]=a[p];let f=n.subarray(32),h=n.subarray(16);Pb(f,f),gr(h,h,f);let d=new Uint8Array(32);return Rb(d,h),d}Ie.scalarMult=n0;function $l(t){return n0(t,Gl)}Ie.scalarMultBase=$l;function Wl(t){if(t.length!==Ie.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${Ie.SECRET_KEY_LENGTH} bytes`);let e=new Uint8Array(t);return{publicKey:$l(e),secretKey:e}}Ie.generateKeyPairFromSeed=Wl;function Ub(t){let e=(0,Ib.randomBytes)(32,t),r=Wl(e);return(0,kb.wipe)(e),r}Ie.generateKeyPair=Ub;function Ob(t,e,r=!1){if(t.length!==Ie.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(e.length!==Ie.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let n=n0(t,e);if(r){let i=0;for(let o=0;o<n.length;o++)i|=n[o];if(i===0)throw new Error("X25519: invalid shared key")}return n}Ie.sharedKey=Ob});var be=_((qB,id)=>{id.exports={options:{usePureJavaScript:!1}}});var ad=_((HB,sd)=>{var u0={};sd.exports=u0;var od={};u0.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=Mb(t,e);else{var i=0,o=e.length,s=e.charAt(0),a=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<a.length;++c)u+=a[c]<<8,a[c]=u%o,u=u/o|0;for(;u>0;)a.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=e[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};u0.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=od[e];if(!r){r=od[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),s=[0],n=0;n<t.length;n++){var a=r[t.charCodeAt(n)];if(a===void 0)return;for(var c=0,u=a;c<s.length;++c)u+=s[c]*i,s[c]=u&255,u>>=8;for(;u>0;)s.push(u&255),u>>=8}for(var f=0;t[f]===o&&f<t.length-1;++f)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Mb(t,e){var r=0,n=e.length,i=e.charAt(0),o=[0];for(r=0;r<t.length();++r){for(var s=0,a=t.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=e[o[r]];return c}});var Ue=_((zB,hd)=>{var cd=be(),ud=ad(),m=hd.exports=cd.util=cd.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){m.nextTick=process.nextTick,typeof setImmediate=="function"?m.setImmediate=setImmediate:m.setImmediate=m.nextTick;return}if(typeof setImmediate=="function"){m.setImmediate=function(){return setImmediate.apply(void 0,arguments)},m.nextTick=function(a){return setImmediate(a)};return}if(m.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(f){f()})}};var s=a,t="forge.setImmediate",e=[];m.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=m.setImmediate;m.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",n=!n))}}m.nextTick=m.setImmediate})();m.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;m.globalScope=function(){return m.isNodejs?globalThis:typeof self>"u"?window:self}();m.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};m.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};m.isArrayBufferView=function(t){return t&&m.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Oi(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}m.ByteBuffer=f0;function f0(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(m.isArrayBuffer(t)||m.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof f0||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}m.ByteStringBuffer=f0;var Kb=4096;m.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>Kb&&(this.data.substr(0,1),this._constructedStringLength=0)};m.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};m.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};m.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};m.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};m.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};m.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(m.encodeUtf8(t))};m.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};m.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};m.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};m.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};m.ByteStringBuffer.prototype.putInt=function(t,e){Oi(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};m.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};m.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};m.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};m.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};m.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};m.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};m.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};m.ByteStringBuffer.prototype.getInt=function(t){Oi(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};m.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};m.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};m.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};m.ByteStringBuffer.prototype.copy=function(){var t=m.createBuffer(this.data);return t.read=this.read,t};m.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};m.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};m.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};m.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.ByteStringBuffer.prototype.toString=function(){return m.decodeUtf8(this.bytes())};function Vb(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=m.isArrayBuffer(t),n=m.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}m.DataBuffer=Vb;m.DataBuffer.prototype.length=function(){return this.write-this.read};m.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};m.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};m.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};m.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};m.DataBuffer.prototype.putBytes=function(t,e){if(m.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(m.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof m.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&m.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof m.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=m.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=m.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=m.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};m.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};m.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};m.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};m.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};m.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};m.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};m.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};m.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};m.DataBuffer.prototype.putInt=function(t,e){Oi(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};m.DataBuffer.prototype.putSignedInt=function(t,e){return Oi(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};m.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};m.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};m.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};m.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};m.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};m.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};m.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};m.DataBuffer.prototype.getInt=function(t){Oi(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};m.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};m.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};m.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};m.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};m.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};m.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};m.DataBuffer.prototype.copy=function(){return new m.DataBuffer(this)};m.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};m.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};m.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};m.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};m.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return m.binary.raw.encode(e);if(t==="hex")return m.binary.hex.encode(e);if(t==="base64")return m.binary.base64.encode(e);if(t==="utf8")return m.text.utf8.decode(e);if(t==="utf16")return m.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};m.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=m.encodeUtf8(t)),new m.ByteBuffer(t)};m.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};m.xorBytes=function(t,e,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};m.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};m.bytesToHex=function(t){return m.createBuffer(t).toHex()};m.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ur=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],fd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";m.encode64=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.length;)i=t.charCodeAt(a++),o=t.charCodeAt(a++),s=t.charCodeAt(a++),r+=Pr.charAt(i>>2),r+=Pr.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Pr.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":Pr.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};m.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,o,s=0;s<t.length;)r=Ur[t.charCodeAt(s++)-43],n=Ur[t.charCodeAt(s++)-43],i=Ur[t.charCodeAt(s++)-43],o=Ur[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};m.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};m.decodeUtf8=function(t){return decodeURIComponent(escape(t))};m.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:ud.encode,decode:ud.decode}};m.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};m.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};m.binary.hex.encode=m.bytesToHex;m.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,o=r;for(t.length&1&&(i=1,n[o++]=parseInt(t[0],16));i<t.length;i+=2)n[o++]=parseInt(t.substr(i,2),16);return e?o-r:n};m.binary.base64.encode=function(t,e){for(var r="",n="",i,o,s,a=0;a<t.byteLength;)i=t[a++],o=t[a++],s=t[a++],r+=Pr.charAt(i>>2),r+=Pr.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=Pr.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":Pr.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};m.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,c=0,u=r;c<t.length;)i=Ur[t.charCodeAt(c++)-43],o=Ur[t.charCodeAt(c++)-43],s=Ur[t.charCodeAt(c++)-43],a=Ur[t.charCodeAt(c++)-43],n[u++]=i<<2|o>>4,s!==64&&(n[u++]=(o&15)<<4|s>>2,a!==64&&(n[u++]=(s&3)<<6|a));return e?u-r:n.subarray(0,u)};m.binary.base58.encode=function(t,e){return m.binary.baseN.encode(t,fd,e)};m.binary.base58.decode=function(t,e){return m.binary.baseN.decode(t,fd,e)};m.text={utf8:{},utf16:{}};m.text.utf8.encode=function(t,e,r){t=m.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,o=0;o<t.length;++o)n[i++]=t.charCodeAt(o);return e?i-r:n};m.text.utf8.decode=function(t){return m.decodeUtf8(String.fromCharCode.apply(null,t))};m.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<t.length;++a)i[s++]=t.charCodeAt(a),o+=2;return e?o-r:n};m.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};m.deflate=function(t,e,r){if(e=m.decode64(t.deflate(m.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};m.inflate=function(t,e,r){var n=t.inflate(m.encode64(e)).rval;return n===null?null:m.decode64(n)};var h0=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=m.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},l0=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(m.decode64(r))),r},qb=function(t,e,r,n){var i=l0(t,e);i===null&&(i={}),i[r]=n,h0(t,e,i)},Hb=function(t,e,r){var n=l0(t,e);return n!==null&&(n=r in n?n[r]:null),n},zb=function(t,e,r){var n=l0(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),h0(t,e,n)}},Gb=function(t,e){h0(t,e,null)},fs=function(t,e,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return n};m.setItem=function(t,e,r,n,i){fs(qb,arguments,i)};m.getItem=function(t,e,r,n){return fs(Hb,arguments,n)};m.removeItem=function(t,e,r,n){fs(zb,arguments,n)};m.clearItems=function(t,e,r){fs(Gb,arguments,r)};m.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};m.format=function(t){for(var e=/%./g,r,n,i=0,o=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&o.push(n),s=e.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(t.substring(s)),o.join("")};m.formatNumber=function(t,e,r,n){var i=t,o=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",f=u.length>3?u.length%3:0;return c+(f?u.substr(0,f)+a:"")+u.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-u).toFixed(o).slice(2):"")};m.formatSize=function(t){return t>=1073741824?t=m.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=m.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=m.formatNumber(t/1024,0)+" KiB":t=m.formatNumber(t,0)+" bytes",t};m.bytesFromIP=function(t){return t.indexOf(".")!==-1?m.bytesFromIPv4(t):t.indexOf(":")!==-1?m.bytesFromIPv6(t):null};m.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=m.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};m.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=m.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=m.hexToBytes(t[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};m.bytesToIP=function(t){return t.length===4?m.bytesToIPv4(t):t.length===16?m.bytesToIPv6(t):null};m.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};m.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var o=m.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=e.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};m.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in m&&!t.update)return e(null,m.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return m.cores=navigator.hardwareConcurrency,e(null,m.cores);if(typeof Worker>"u")return m.cores=1,e(null,m.cores);if(typeof Blob>"u")return m.cores=2,e(null,m.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,c){if(a===0){var u=Math.floor(s.reduce(function(f,h){return f+h},0)/s.length);return m.cores=Math.max(1,u),URL.revokeObjectURL(r),e(null,m.cores)}i(c,function(f,h){s.push(o(c,h)),n(s,a-1,c)})}function i(s,a){for(var c=[],u=[],f=0;f<s;++f){var h=new Worker(r);h.addEventListener("message",function(d){if(u.push(d.data),u.length===s){for(var p=0;p<s;++p)c[p].terminate();a(null,u)}}),c.push(h)}for(var f=0;f<s;++f)c[f].postMessage(f)}function o(s,a){for(var c=[],u=0;u<s;++u)for(var f=a[u],h=c[u]=[],d=0;d<s;++d)if(u!==d){var p=a[d];(f.st>p.st&&f.st<p.et||p.st>f.st&&p.st<f.et)&&h.push(d)}return c.reduce(function(l,y){return Math.max(l,y.length)},0)}}});var hs=_((GB,ld)=>{var Fi=be();Fi.pki=Fi.pki||{};var d0=ld.exports=Fi.pki.oids=Fi.oids=Fi.oids||{};function k(t,e){d0[t]=e,d0[e]=t}function me(t,e){d0[t]=e}k("1.2.840.113549.1.1.1","rsaEncryption");k("1.2.840.113549.1.1.4","md5WithRSAEncryption");k("1.2.840.113549.1.1.5","sha1WithRSAEncryption");k("1.2.840.113549.1.1.7","RSAES-OAEP");k("1.2.840.113549.1.1.8","mgf1");k("1.2.840.113549.1.1.9","pSpecified");k("1.2.840.113549.1.1.10","RSASSA-PSS");k("1.2.840.113549.1.1.11","sha256WithRSAEncryption");k("1.2.840.113549.1.1.12","sha384WithRSAEncryption");k("1.2.840.113549.1.1.13","sha512WithRSAEncryption");k("1.3.101.112","EdDSA25519");k("1.2.840.10040.4.3","dsa-with-sha1");k("1.3.14.3.2.7","desCBC");k("1.3.14.3.2.26","sha1");k("1.3.14.3.2.29","sha1WithRSASignature");k("2.16.840.1.101.3.4.2.1","sha256");k("2.16.840.1.101.3.4.2.2","sha384");k("2.16.840.1.101.3.4.2.3","sha512");k("2.16.840.1.101.3.4.2.4","sha224");k("2.16.840.1.101.3.4.2.5","sha512-224");k("2.16.840.1.101.3.4.2.6","sha512-256");k("1.2.840.113549.2.2","md2");k("1.2.840.113549.2.5","md5");k("1.2.840.113549.1.7.1","data");k("1.2.840.113549.1.7.2","signedData");k("1.2.840.113549.1.7.3","envelopedData");k("1.2.840.113549.1.7.4","signedAndEnvelopedData");k("1.2.840.113549.1.7.5","digestedData");k("1.2.840.113549.1.7.6","encryptedData");k("1.2.840.113549.1.9.1","emailAddress");k("1.2.840.113549.1.9.2","unstructuredName");k("1.2.840.113549.1.9.3","contentType");k("1.2.840.113549.1.9.4","messageDigest");k("1.2.840.113549.1.9.5","signingTime");k("1.2.840.113549.1.9.6","counterSignature");k("1.2.840.113549.1.9.7","challengePassword");k("1.2.840.113549.1.9.8","unstructuredAddress");k("1.2.840.113549.1.9.14","extensionRequest");k("1.2.840.113549.1.9.20","friendlyName");k("1.2.840.113549.1.9.21","localKeyId");k("1.2.840.113549.1.9.22.1","x509Certificate");k("1.2.840.113549.1.12.10.1.1","keyBag");k("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");k("1.2.840.113549.1.12.10.1.3","certBag");k("1.2.840.113549.1.12.10.1.4","crlBag");k("1.2.840.113549.1.12.10.1.5","secretBag");k("1.2.840.113549.1.12.10.1.6","safeContentsBag");k("1.2.840.113549.1.5.13","pkcs5PBES2");k("1.2.840.113549.1.5.12","pkcs5PBKDF2");k("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");k("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");k("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");k("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");k("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");k("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");k("1.2.840.113549.2.7","hmacWithSHA1");k("1.2.840.113549.2.8","hmacWithSHA224");k("1.2.840.113549.2.9","hmacWithSHA256");k("1.2.840.113549.2.10","hmacWithSHA384");k("1.2.840.113549.2.11","hmacWithSHA512");k("1.2.840.113549.3.7","des-EDE3-CBC");k("2.16.840.1.101.3.4.1.2","aes128-CBC");k("2.16.840.1.101.3.4.1.22","aes192-CBC");k("2.16.840.1.101.3.4.1.42","aes256-CBC");k("2.5.4.3","commonName");k("2.5.4.4","surname");k("2.5.4.5","serialNumber");k("2.5.4.6","countryName");k("2.5.4.7","localityName");k("2.5.4.8","stateOrProvinceName");k("2.5.4.9","streetAddress");k("2.5.4.10","organizationName");k("2.5.4.11","organizationalUnitName");k("2.5.4.12","title");k("2.5.4.13","description");k("2.5.4.15","businessCategory");k("2.5.4.17","postalCode");k("2.5.4.42","givenName");k("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");k("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");k("2.16.840.1.113730.1.1","nsCertType");k("2.16.840.1.113730.1.13","nsComment");me("2.5.29.1","authorityKeyIdentifier");me("2.5.29.2","keyAttributes");me("2.5.29.3","certificatePolicies");me("2.5.29.4","keyUsageRestriction");me("2.5.29.5","policyMapping");me("2.5.29.6","subtreesConstraint");me("2.5.29.7","subjectAltName");me("2.5.29.8","issuerAltName");me("2.5.29.9","subjectDirectoryAttributes");me("2.5.29.10","basicConstraints");me("2.5.29.11","nameConstraints");me("2.5.29.12","policyConstraints");me("2.5.29.13","basicConstraints");k("2.5.29.14","subjectKeyIdentifier");k("2.5.29.15","keyUsage");me("2.5.29.16","privateKeyUsagePeriod");k("2.5.29.17","subjectAltName");k("2.5.29.18","issuerAltName");k("2.5.29.19","basicConstraints");me("2.5.29.20","cRLNumber");me("2.5.29.21","cRLReason");me("2.5.29.22","expirationDate");me("2.5.29.23","instructionCode");me("2.5.29.24","invalidityDate");me("2.5.29.25","cRLDistributionPoints");me("2.5.29.26","issuingDistributionPoint");me("2.5.29.27","deltaCRLIndicator");me("2.5.29.28","issuingDistributionPoint");me("2.5.29.29","certificateIssuer");me("2.5.29.30","nameConstraints");k("2.5.29.31","cRLDistributionPoints");k("2.5.29.32","certificatePolicies");me("2.5.29.33","policyMappings");me("2.5.29.34","policyConstraints");k("2.5.29.35","authorityKeyIdentifier");me("2.5.29.36","policyConstraints");k("2.5.29.37","extKeyUsage");me("2.5.29.46","freshestCRL");me("2.5.29.54","inhibitAnyPolicy");k("1.3.6.1.4.1.11129.2.4.2","timestampList");k("1.3.6.1.5.5.7.1.1","authorityInfoAccess");k("1.3.6.1.5.5.7.3.1","serverAuth");k("1.3.6.1.5.5.7.3.2","clientAuth");k("1.3.6.1.5.5.7.3.3","codeSigning");k("1.3.6.1.5.5.7.3.4","emailProtection");k("1.3.6.1.5.5.7.3.8","timeStamping")});var Ki=_(($B,pd)=>{var Se=be();Ue();hs();var L=pd.exports=Se.asn1=Se.asn1||{};L.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};L.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};L.create=function(t,e,r,n,i){if(Se.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:t,type:e,constructed:r,composed:r||Se.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=L.copy(a)),a};L.copy=function(t,e){var r;if(Se.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(L.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:L.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};L.equals=function(t,e,r){if(Se.util.isArray(t)){if(!Se.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!L.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&L.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};L.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Mi(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var $b=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;Mi(t,e,o),n=t.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};L.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=Se.util.createBuffer(t));var r=t.length(),n=ls(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function ls(t,e,r,n){var i;Mi(t,e,2);var o=t.getByte();e--;var s=o&192,a=o&31;i=t.length();var c=$b(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(n.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var f,h,d=(o&32)===32;if(d)if(f=[],c===void 0)for(;;){if(Mi(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),f.push(ls(t,e,r+1,n)),e-=i-t.length()}else for(;c>0;)i=t.length(),f.push(ls(t,c,r+1,n)),e-=i-t.length(),c-=i-t.length();if(f===void 0&&s===L.Class.UNIVERSAL&&a===L.Type.BITSTRING&&(h=t.bytes(c)),f===void 0&&n.decodeBitStrings&&s===L.Class.UNIVERSAL&&a===L.Type.BITSTRING&&c>1){var p=t.read,l=e,y=0;if(a===L.Type.BITSTRING&&(Mi(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var g={strict:!0,decodeBitStrings:!0},x=ls(t,e,r+1,g),w=i-t.length();e-=w,a==L.Type.BITSTRING&&w++;var v=x.tagClass;w===c&&(v===L.Class.UNIVERSAL||v===L.Class.CONTEXT_SPECIFIC)&&(f=[x])}catch{}f===void 0&&(t.read=p,e=l)}if(f===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(a===L.Type.BMPSTRING)for(f="";c>0;c-=2)Mi(t,e,2),f+=String.fromCharCode(t.getInt16()),e-=2;else f=t.getBytes(c),e-=c}var A=h===void 0?null:{bitStringContents:h};return L.create(s,a,d,f,A)}L.toDer=function(t){var e=Se.util.createBuffer(),r=t.tagClass|t.type,n=Se.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=L.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&n.putBuffer(L.toDer(t.value[o]))}else if(t.type===L.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)n.putInt16(t.value.charCodeAt(o));else t.type===L.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)e.putByte(a.charCodeAt(o))}return e.putBuffer(n),e};L.oidToDer=function(t){var e=t.split("."),r=Se.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,o,s,a=2;a<e.length;++a){n=!0,i=[],o=parseInt(e[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};L.derToOid=function(t){var e;typeof t=="string"&&(t=Se.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};L.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),a=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(a=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var f=parseInt(t.substr(u+1,2),10),h=parseInt(t.substr(u+4,2),10),d=f*60+h;d*=6e4,c==="+"?e.setTime(+e-d):e.setTime(+e+d)}return e};L.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),a=parseInt(t.substr(12,2),10),c=0,u=0,f=!1;t.charAt(t.length-1)==="Z"&&(f=!0);var h=t.length-5,d=t.charAt(h);if(d==="+"||d==="-"){var p=parseInt(t.substr(h+1,2),10),l=parseInt(t.substr(h+4,2),10);u=p*60+l,u*=6e4,d==="+"&&(u*=-1),f=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),f?(e.setUTCFullYear(r,n,i),e.setUTCHours(o,s,a,c),e.setTime(+e+u)):(e.setFullYear(r,n,i),e.setHours(o,s,a,c)),e};L.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};L.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};L.integerToDer=function(t){var e=Se.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};L.derToInteger=function(t){typeof t=="string"&&(t=Se.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};L.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&Se.util.isArray(e.value))for(var o=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[o]&&(i=L.validate(t.value[o],e.value[s],r,n),i?++o:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var a;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var dd=/[^\\u0000-\\u00ff]/;L.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",o=0;o<e*r;++o)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case L.Class.UNIVERSAL:n+="Universal:";break;case L.Class.APPLICATION:n+="Application:";break;case L.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case L.Class.PRIVATE:n+="Private:";break}if(t.tagClass===L.Class.UNIVERSAL)switch(n+=t.type,t.type){case L.Type.NONE:n+=" (None)";break;case L.Type.BOOLEAN:n+=" (Boolean)";break;case L.Type.INTEGER:n+=" (Integer)";break;case L.Type.BITSTRING:n+=" (Bit string)";break;case L.Type.OCTETSTRING:n+=" (Octet string)";break;case L.Type.NULL:n+=" (Null)";break;case L.Type.OID:n+=" (Object Identifier)";break;case L.Type.ODESC:n+=" (Object Descriptor)";break;case L.Type.EXTERNAL:n+=" (External or Instance of)";break;case L.Type.REAL:n+=" (Real)";break;case L.Type.ENUMERATED:n+=" (Enumerated)";break;case L.Type.EMBEDDED:n+=" (Embedded PDV)";break;case L.Type.UTF8:n+=" (UTF8)";break;case L.Type.ROID:n+=" (Relative Object Identifier)";break;case L.Type.SEQUENCE:n+=" (Sequence)";break;case L.Type.SET:n+=" (Set)";break;case L.Type.PRINTABLESTRING:n+=" (Printable String)";break;case L.Type.IA5String:n+=" (IA5String (ASCII))";break;case L.Type.UTCTIME:n+=" (UTC time)";break;case L.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case L.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,a="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(s+=1,a+=L.prettyPrint(t.value[o],e+1,r),o+1<t.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",t.type===L.Type.OID){var c=L.derToOid(t.value);n+=c,Se.pki&&Se.pki.oids&&c in Se.pki.oids&&(n+=" ("+Se.pki.oids[c]+") ")}if(t.type===L.Type.INTEGER)try{n+=L.derToInteger(t.value)}catch{n+="0x"+Se.util.bytesToHex(t.value)}else if(t.type===L.Type.BITSTRING){if(t.value.length>1?n+="0x"+Se.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?n+=" (1 unused bit shown)":u>1&&(n+=" ("+u+" unused bits shown)")}}else if(t.type===L.Type.OCTETSTRING)dd.test(t.value)||(n+="("+t.value+") "),n+="0x"+Se.util.bytesToHex(t.value);else if(t.type===L.Type.UTF8)try{n+=Se.util.decodeUtf8(t.value)}catch(f){if(f.message==="URI malformed")n+="0x"+Se.util.bytesToHex(t.value)+" (malformed UTF8)";else throw f}else t.type===L.Type.PRINTABLESTRING||t.type===L.Type.IA5String?n+=t.value:dd.test(t.value)?n+="0x"+Se.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var y0=_((WB,yd)=>{var Ve=be();Ue();yd.exports=Ve.cipher=Ve.cipher||{};Ve.cipher.algorithms=Ve.cipher.algorithms||{};Ve.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ve.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ve.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Ve.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Ve.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Ve.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Ve.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Ve.cipher.algorithms[t]=e};Ve.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Ve.cipher.algorithms?Ve.cipher.algorithms[t]:null};var p0=Ve.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};p0.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Ve.util.createBuffer(),this.output=t.output||Ve.util.createBuffer(),this.mode.start(e)};p0.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};p0.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var m0=_((YB,gd)=>{var qe=be();Ue();qe.cipher=qe.cipher||{};var Q=gd.exports=qe.cipher.modes=qe.cipher.modes||{};Q.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Q.ecb.prototype.start=function(t){};Q.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Q.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};Q.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Q.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Q.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};Q.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=ds(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};Q.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};Q.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};Q.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};Q.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};Q.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0};Q.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ds(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Q.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Q.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Q.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0};Q.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ds(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Q.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};Q.ofb.prototype.decrypt=Q.ofb.prototype.encrypt;Q.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0};Q.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=ds(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};Q.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}ps(this._inBlock)};Q.ctr.prototype.decrypt=Q.ctr.prototype.encrypt;Q.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=qe.util.createBuffer(),this._partialBytes=0,this._R=3774873600};Q.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=qe.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=qe.util.createBuffer(t.additionalData):r=qe.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=qe.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(g0(n*8)))}this._inBlock=this._j0.slice(0),ps(this._inBlock),this._partialBytes=0,r=qe.util.createBuffer(r),this._aDataLength=g0(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};Q.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),ps(this._inBlock)};Q.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),ps(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};Q.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=qe.util.createBuffer();var n=this._aDataLength.concat(g0(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};Q.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};Q.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};Q.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,o=this._m[r][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};Q.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};Q.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=s/n|0,u=(n-1-s%n)*e;a[c]=1<<e-1<<u,o[s]=this.generateSubHashTable(this.multiply(a,t),e)}return o};Q.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var u=i[o^n];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function ds(t,e){if(typeof t=="string"&&(t=qe.util.createBuffer(t)),qe.util.isArray(t)&&t.length>4){var r=t;t=qe.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!qe.util.isArray(t)){for(var i=[],o=e/4,n=0;n<o;++n)i.push(t.getInt32());t=i}return t}function ps(t){t[t.length-1]=t[t.length-1]+1&4294967295}function g0(t){return[t/4294967296|0,t&4294967295]}});var w0=_((jB,vd)=>{var we=be();y0();m0();Ue();vd.exports=we.aes=we.aes||{};we.aes.startEncrypting=function(t,e,r,n){var i=ys({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};we.aes.createEncryptionCipher=function(t,e){return ys({key:t,output:null,decrypt:!1,mode:e})};we.aes.startDecrypting=function(t,e,r,n){var i=ys({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};we.aes.createDecryptionCipher=function(t,e){return ys({key:t,output:null,decrypt:!0,mode:e})};we.aes.Algorithm=function(t,e){v0||xd();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return b0(r._w,n,i,!1)},decrypt:function(n,i){return b0(r._w,n,i,!0)}}}),r._init=!1};we.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=we.util.createBuffer(e);else if(we.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=we.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!we.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!we.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=bd(e,t.decrypt&&!s),this._init=!0}};we.aes._expandKey=function(t,e){return v0||xd(),bd(t,e)};we.aes._updateBlock=b0;Zn("AES-ECB",we.cipher.modes.ecb);Zn("AES-CBC",we.cipher.modes.cbc);Zn("AES-CFB",we.cipher.modes.cfb);Zn("AES-OFB",we.cipher.modes.ofb);Zn("AES-CTR",we.cipher.modes.ctr);Zn("AES-GCM",we.cipher.modes.gcm);function Zn(t,e){var r=function(){return new we.aes.Algorithm(t,e)};we.cipher.registerAlgorithm(t,r)}var v0=!1,Qn=4,at,x0,md,cn,Pt;function xd(){v0=!0,md=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;at=new Array(256),x0=new Array(256),cn=new Array(4),Pt=new Array(4);for(var e=0;e<4;++e)cn[e]=new Array(256),Pt[e]=new Array(256);for(var r=0,n=0,i,o,s,a,c,u,f,e=0;e<256;++e){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,at[r]=a,x0[a]=r,c=t[a],i=t[r],o=t[i],s=t[o],u=c<<24^a<<16^a<<8^(a^c),f=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var h=0;h<4;++h)cn[h][r]=u,Pt[h][a]=f,u=u<<24|u>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function bd(t,e){for(var r=t.slice(0),n,i=1,o=r.length,s=o+6+1,a=Qn*s,c=o;c<a;++c)n=r[c-1],c%o===0?(n=at[n>>>16&255]<<24^at[n>>>8&255]<<16^at[n&255]<<8^at[n>>>24]^md[i]<<24,i++):o>6&&c%o===4&&(n=at[n>>>24]<<24^at[n>>>16&255]<<16^at[n>>>8&255]<<8^at[n&255]),r[c]=r[c-o]^n;if(e){var u,f=Pt[0],h=Pt[1],d=Pt[2],p=Pt[3],l=r.slice(0);a=r.length;for(var c=0,y=a-Qn;c<a;c+=Qn,y-=Qn)if(c===0||c===a-Qn)l[c]=r[y],l[c+1]=r[y+3],l[c+2]=r[y+2],l[c+3]=r[y+1];else for(var g=0;g<Qn;++g)u=r[y+g],l[c+(3&-g)]=f[at[u>>>24]]^h[at[u>>>16&255]]^d[at[u>>>8&255]]^p[at[u&255]];r=l}return r}function b0(t,e,r,n){var i=t.length/4-1,o,s,a,c,u;n?(o=Pt[0],s=Pt[1],a=Pt[2],c=Pt[3],u=x0):(o=cn[0],s=cn[1],a=cn[2],c=cn[3],u=at);var f,h,d,p,l,y,g;f=e[0]^t[0],h=e[n?3:1]^t[1],d=e[2]^t[2],p=e[n?1:3]^t[3];for(var x=3,w=1;w<i;++w)l=o[f>>>24]^s[h>>>16&255]^a[d>>>8&255]^c[p&255]^t[++x],y=o[h>>>24]^s[d>>>16&255]^a[p>>>8&255]^c[f&255]^t[++x],g=o[d>>>24]^s[p>>>16&255]^a[f>>>8&255]^c[h&255]^t[++x],p=o[p>>>24]^s[f>>>16&255]^a[h>>>8&255]^c[d&255]^t[++x],f=l,h=y,d=g;r[0]=u[f>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++x],r[n?3:1]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[f&255]^t[++x],r[2]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[f>>>8&255]<<8^u[h&255]^t[++x],r[n?1:3]=u[p>>>24]<<24^u[f>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++x]}function ys(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=we.cipher.createDecipher(r,t.key):n=we.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof we.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var Sd=_((XB,Ed)=>{var Be=be();y0();m0();Ue();Ed.exports=Be.des=Be.des||{};Be.des.startEncrypting=function(t,e,r,n){var i=gs({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Be.des.createEncryptionCipher=function(t,e){return gs({key:t,output:null,decrypt:!1,mode:e})};Be.des.startDecrypting=function(t,e,r,n){var i=gs({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};Be.des.createDecryptionCipher=function(t,e){return gs({key:t,output:null,decrypt:!0,mode:e})};Be.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return wd(r._keys,n,i,!1)},decrypt:function(n,i){return wd(r._keys,n,i,!0)}}}),r._init=!1};Be.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Be.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=tv(e),this._init=!0}};Xt("DES-ECB",Be.cipher.modes.ecb);Xt("DES-CBC",Be.cipher.modes.cbc);Xt("DES-CFB",Be.cipher.modes.cfb);Xt("DES-OFB",Be.cipher.modes.ofb);Xt("DES-CTR",Be.cipher.modes.ctr);Xt("3DES-ECB",Be.cipher.modes.ecb);Xt("3DES-CBC",Be.cipher.modes.cbc);Xt("3DES-CFB",Be.cipher.modes.cfb);Xt("3DES-OFB",Be.cipher.modes.ofb);Xt("3DES-CTR",Be.cipher.modes.ctr);function Xt(t,e){var r=function(){return new Be.des.Algorithm(t,e)};Be.cipher.registerAlgorithm(t,r)}var Wb=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Yb=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],jb=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Xb=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Qb=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Zb=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Jb=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],ev=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function tv(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],d=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],p=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],l=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,g=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],w=0,v,A=0;A<y;A++){var E=t.getInt32(),S=t.getInt32();v=(E>>>4^S)&252645135,S^=v,E^=v<<4,v=(S>>>-16^E)&65535,E^=v,S^=v<<-16,v=(E>>>2^S)&858993459,S^=v,E^=v<<2,v=(S>>>-16^E)&65535,E^=v,S^=v<<-16,v=(E>>>1^S)&1431655765,S^=v,E^=v<<1,v=(S>>>8^E)&16711935,E^=v,S^=v<<8,v=(E>>>1^S)&1431655765,S^=v,E^=v<<1,v=E<<8|S>>>20&240,E=S<<24|S<<8&16711680|S>>>8&65280|S>>>24&240,S=v;for(var B=0;B<x.length;++B){x[B]?(E=E<<2|E>>>26,S=S<<2|S>>>26):(E=E<<1|E>>>27,S=S<<1|S>>>27),E&=-15,S&=-15;var I=e[E>>>28]|r[E>>>24&15]|n[E>>>20&15]|i[E>>>16&15]|o[E>>>12&15]|s[E>>>8&15]|a[E>>>4&15],U=c[S>>>28]|u[S>>>24&15]|f[S>>>20&15]|h[S>>>16&15]|d[S>>>12&15]|p[S>>>8&15]|l[S>>>4&15];v=(U>>>16^I)&65535,g[w++]=I^v,g[w++]=U^v<<16}}return g}function wd(t,e,r,n){var i=t.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=e[0],c=e[1];s=(a>>>4^c)&252645135,c^=s,a^=s<<4,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var f=o[u+1],h=o[u+2],d=o[u];d!=f;d+=h){var p=c^t[d],l=(c>>>4|c<<28)^t[d+1];s=a,a=c,c=s^(Yb[p>>>24&63]|Xb[p>>>16&63]|Zb[p>>>8&63]|ev[p&63]|Wb[l>>>24&63]|jb[l>>>16&63]|Qb[l>>>8&63]|Jb[l&63])}s=a,a=c,c=s}a=a>>>1|a<<31,c=c>>>1|c<<31,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(a>>>4^c)&252645135,c^=s,a^=s<<4,r[0]=a,r[1]=c}function gs(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=Be.cipher.createDecipher(r,t.key):n=Be.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof Be.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var un=_((QB,Cd)=>{var ms=be();Cd.exports=ms.md=ms.md||{};ms.md.algorithms=ms.md.algorithms||{}});var Dd=_((ZB,Ad)=>{var mr=be();un();Ue();var rv=Ad.exports=mr.hmac=mr.hmac||{};rv.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in mr.md.algorithms)e=mr.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(s===null)s=t;else{if(typeof s=="string")s=mr.util.createBuffer(s);else if(mr.util.isArray(s)){var a=s;s=mr.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var u=s.length();u>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=mr.util.createBuffer(),n=mr.util.createBuffer(),u=s.length();for(var c=0;c<u;++c){var a=s.at(c);r.putByte(54^a),n.putByte(92^a)}if(u<e.blockLength)for(var a=e.blockLength-u,c=0;c<a;++c)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(n),e.update(o),e.digest()},i.digest=i.getMac,i}});var _d=_((JB,Bd)=>{var ct=be();Dd();un();Ue();var nv=ct.pkcs5=ct.pkcs5||{},xr;ct.util.isNodejs&&!ct.options.usePureJavaScript&&(xr=Oe("crypto"));Bd.exports=ct.pbkdf2=nv.pbkdf2=function(t,e,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),ct.util.isNodejs&&!ct.options.usePureJavaScript&&xr.pbkdf2&&(i===null||typeof i!="object")&&(xr.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?xr.pbkdf2Sync.length===4?xr.pbkdf2(t,e,r,n,function(v,A){if(v)return o(v);o(null,A.toString("binary"))}):xr.pbkdf2(t,e,r,n,i,function(v,A){if(v)return o(v);o(null,A.toString("binary"))}):xr.pbkdf2Sync.length===4?xr.pbkdf2Sync(t,e,r,n).toString("binary"):xr.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in ct.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=ct.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var c=Math.ceil(n/s),u=n-(c-1)*s,f=ct.hmac.create();f.start(i,t);var h="",d,p,l;if(!o){for(var y=1;y<=c;++y){f.start(null,null),f.update(e),f.update(ct.util.int32ToBytes(y)),d=l=f.digest().getBytes();for(var g=2;g<=r;++g)f.start(null,null),f.update(l),p=f.digest().getBytes(),d=ct.util.xorBytes(d,p,s),l=p;h+=y<c?d:d.substr(0,u)}return h}var y=1,g;function x(){if(y>c)return o(null,h);f.start(null,null),f.update(e),f.update(ct.util.int32ToBytes(y)),d=l=f.digest().getBytes(),g=2,w()}function w(){if(g<=r)return f.start(null,null),f.update(l),p=f.digest().getBytes(),d=ct.util.xorBytes(d,p,s),l=p,++g,ct.util.setImmediate(w);h+=y<c?d:d.substr(0,u),++y,x()}x()}});var kd=_((e_,Id)=>{var bs=be();Ue();var Td=Id.exports=bs.pem=bs.pem||{};Td.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=xs(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=xs(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=xs(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=xs(t.headers[i]);return t.procType&&(r+=`\r
`),r+=bs.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};Td.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(t),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:bs.util.decode64(o[3])};if(e.push(a),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var f=c[u].replace(/\s+$/,""),h=u+1;h<c.length;++h){var d=c[h];if(!/\s/.test(d[0]))break;f+=d,u=h}if(o=f.match(n),o){for(var p={name:o[1],values:[]},l=o[2].split(","),y=0;y<l.length;++y)p.values.push(iv(l[y]));if(a.procType)if(!a.contentDomain&&p.name==="Content-Domain")a.contentDomain=l[0]||"";else if(!a.dekInfo&&p.name==="DEK-Info"){if(p.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:l[0],parameters:l[1]||null}}else a.headers.push(p);else{if(p.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(p.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:l[0],type:l[1]}}}++u}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function xs(t){for(var e=t.name+": ",r=[],n=function(c,u){return" "+u},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<e.length;++i,++o)if(o>65&&s!==-1){var a=e[s];a===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+a+e.substr(s+1),o=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function iv(t){return t.replace(/^\s+/,"")}});var Od=_((t_,Ud)=>{var Qt=be();un();Ue();var Rd=Ud.exports=Qt.sha256=Qt.sha256||{};Qt.md.sha256=Qt.md.algorithms.sha256=Rd;Rd.create=function(){Nd||ov();var t=null,e=Qt.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Qt.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Qt.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),Ld(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Qt.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(E0.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};Ld(h,r,i);var d=Qt.util.createBuffer();return d.putInt32(h.h0),d.putInt32(h.h1),d.putInt32(h.h2),d.putInt32(h.h3),d.putInt32(h.h4),d.putInt32(h.h5),d.putInt32(h.h6),d.putInt32(h.h7),d},n};var E0=null,Nd=!1,Pd=null;function ov(){E0=String.fromCharCode(128),E0+=Qt.util.fillString(String.fromCharCode(0),64),Pd=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Nd=!0}function Ld(t,e,r){for(var n,i,o,s,a,c,u,f,h,d,p,l,y,g,x,w=r.length();w>=64;){for(u=0;u<16;++u)e[u]=r.getInt32();for(;u<64;++u)n=e[u-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=n+e[u-7]+i+e[u-16]|0;for(f=t.h0,h=t.h1,d=t.h2,p=t.h3,l=t.h4,y=t.h5,g=t.h6,x=t.h7,u=0;u<64;++u)s=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),a=g^l&(y^g),o=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),c=f&h|d&(f^h),n=x+s+a+Pd[u]+e[u],i=o+c,x=g,g=y,y=l,l=p+n>>>0,p=d,d=h,h=f,f=n+i>>>0;t.h0=t.h0+f|0,t.h1=t.h1+h|0,t.h2=t.h2+d|0,t.h3=t.h3+p|0,t.h4=t.h4+l|0,t.h5=t.h5+y|0,t.h6=t.h6+g|0,t.h7=t.h7+x|0,w-=64}}});var Md=_((r_,Fd)=>{var Zt=be();Ue();var vs=null;Zt.util.isNodejs&&!Zt.options.usePureJavaScript&&!process.versions["node-webkit"]&&(vs=Oe("crypto"));var sv=Fd.exports=Zt.prng=Zt.prng||{};sv.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(u,f){if(!f)return e.generateSync(u);var h=e.plugin.cipher,d=e.plugin.increment,p=e.plugin.formatKey,l=e.plugin.formatSeed,y=Zt.util.createBuffer();e.key=null,g();function g(x){if(x)return f(x);if(y.length()>=u)return f(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return Zt.util.nextTick(function(){o(g)});var w=h(e.key,e.seed);e.generated+=w.length,y.putBytes(w),e.key=p(h(e.key,d(e.seed))),e.seed=l(h(e.key,e.seed)),Zt.util.setImmediate(g)}},e.generateSync=function(u){var f=e.plugin.cipher,h=e.plugin.increment,d=e.plugin.formatKey,p=e.plugin.formatSeed;e.key=null;for(var l=Zt.util.createBuffer();l.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&s();var y=f(e.key,e.seed);e.generated+=y.length,l.putBytes(y),e.key=d(f(e.key,h(e.seed))),e.seed=p(f(e.key,e.seed))}return l.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return a(),u();var f=32-e.pools[0].messageLength<<5;e.seedFile(f,function(h,d){if(h)return u(h);e.collect(d),a(),u()})}function s(){if(e.pools[0].messageLength>=32)return a();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),a()}function a(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var f=1,h=0;h<32;++h)e.reseeds%f===0&&(u.update(e.pools[h].digest().getBytes()),e.pools[h].start()),f=f<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var d=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(d),e.generated=0}function c(u){var f=null,h=Zt.util.globalScope,d=h.crypto||h.msCrypto;d&&d.getRandomValues&&(f=function(E){return d.getRandomValues(E)});var p=Zt.util.createBuffer();if(f)for(;p.length()<u;){var l=Math.max(1,Math.min(u-p.length(),65536)/4),y=new Uint32Array(Math.floor(l));try{f(y);for(var g=0;g<y.length;++g)p.putInt32(y[g])}catch(E){if(!(typeof QuotaExceededError<"u"&&E instanceof QuotaExceededError))throw E}}if(p.length()<u)for(var x,w,v,A=Math.floor(Math.random()*65536);p.length()<u;){w=16807*(A&65535),x=16807*(A>>16),w+=(x&32767)<<16,w+=x>>15,w=(w&2147483647)+(w>>31),A=w&4294967295;for(var g=0;g<3;++g)v=A>>>(g<<3),v^=Math.floor(Math.random()*256),p.putByte(v&255)}return p.getBytes(u)}return vs?(e.seedFile=function(u,f){vs.randomBytes(u,function(h,d){if(h)return f(h);f(null,d.toString())})},e.seedFileSync=function(u){return vs.randomBytes(u).toString()}):(e.seedFile=function(u,f){try{f(null,c(u))}catch(h){f(h)}},e.seedFileSync=c),e.collect=function(u){for(var f=u.length,h=0;h<f;++h)e.pools[e.pool].update(u.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,f){for(var h="",d=0;d<f;d+=8)h+=String.fromCharCode(u>>d&255);e.collect(h)},e.registerWorker=function(u){if(u===self)e.seedFile=function(h,d){function p(l){var y=l.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",p),d(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",p),self.postMessage({forge:{prng:{needed:h}}})};else{var f=function(h){var d=h.data;d.forge&&d.forge.prng&&e.seedFile(d.forge.prng.needed,function(p,l){u.postMessage({forge:{prng:{err:p,bytes:l}}})})};u.addEventListener("message",f)}},e}});var Vi=_((n_,S0)=>{var He=be();w0();Od();Md();Ue();(function(){if(He.random&&He.random.getBytes){S0.exports=He.random;return}(function(t){var e={},r=new Array(4),n=He.util.createBuffer();e.formatKey=function(h){var d=He.util.createBuffer(h);return h=new Array(4),h[0]=d.getInt32(),h[1]=d.getInt32(),h[2]=d.getInt32(),h[3]=d.getInt32(),He.aes._expandKey(h,!1)},e.formatSeed=function(h){var d=He.util.createBuffer(h);return h=new Array(4),h[0]=d.getInt32(),h[1]=d.getInt32(),h[2]=d.getInt32(),h[3]=d.getInt32(),h},e.cipher=function(h,d){return He.aes._updateBlock(h,d,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(h){return++h[3],h},e.md=He.md.sha256;function i(){var h=He.prng.create(e);return h.getBytes=function(d,p){return h.generate(d,p)},h.getBytesSync=function(d){return h.generate(d)},h}var o=i(),s=null,a=He.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(s=function(h){return c.getRandomValues(h)}),He.options.usePureJavaScript||!He.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var f in navigator)try{typeof navigator[f]=="string"&&(u+=navigator[f])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(h){o.collectInt(h.clientX,16),o.collectInt(h.clientY,16)}),t().keypress(function(h){o.collectInt(h.charCode,8)}))}if(!He.random)He.random=o;else for(var f in o)He.random[f]=o[f];He.random.createInstance=i,S0.exports=He.random})(typeof jQuery<"u"?jQuery:null)})()});var Hd=_((i_,qd)=>{var ut=be();Ue();var C0=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Kd=[1,2,3,5],av=function(t,e){return t<<e&65535|(t&65535)>>16-e},cv=function(t,e){return(t&65535)>>e|t<<16-e&65535};qd.exports=ut.rc2=ut.rc2||{};ut.rc2.expandKey=function(t,e){typeof t=="string"&&(t=ut.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(C0[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,C0[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,C0[r.at(a+1)^r.at(a+o)]);return r};var Vd=function(t,e,r){var n=!1,i=null,o=null,s=null,a,c,u,f,h=[];for(t=ut.rc2.expandKey(t,e),u=0;u<64;u++)h.push(t.getInt16Le());r?(a=function(l){for(u=0;u<4;u++)l[u]+=h[f]+(l[(u+3)%4]&l[(u+2)%4])+(~l[(u+3)%4]&l[(u+1)%4]),l[u]=av(l[u],Kd[u]),f++},c=function(l){for(u=0;u<4;u++)l[u]+=h[l[(u+3)%4]&63]}):(a=function(l){for(u=3;u>=0;u--)l[u]=cv(l[u],Kd[u]),l[u]-=h[f]+(l[(u+3)%4]&l[(u+2)%4])+(~l[(u+3)%4]&l[(u+1)%4]),f--},c=function(l){for(u=3;u>=0;u--)l[u]-=h[l[(u+3)%4]&63]});var d=function(l){var y=[];for(u=0;u<4;u++){var g=i.getInt16Le();s!==null&&(r?g^=s.getInt16Le():s.putInt16Le(g)),y.push(g&65535)}f=r?0:63;for(var x=0;x<l.length;x++)for(var w=0;w<l[x][0];w++)l[x][1](y);for(u=0;u<4;u++)s!==null&&(r?s.putInt16Le(y[u]):y[u]^=s.getInt16Le()),o.putInt16Le(y[u])},p=null;return p={start:function(l,y){l&&typeof l=="string"&&(l=ut.util.createBuffer(l)),n=!1,i=ut.util.createBuffer(),o=y||new ut.util.createBuffer,s=l,p.output=o},update:function(l){for(n||i.putBuffer(l);i.length()>=8;)d([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(l){var y=!0;if(r)if(l)y=l(8,i,!r);else{var g=i.length()===8?8:8-i.length();i.fillWithByte(g,g)}if(y&&(n=!0,p.update()),!r&&(y=i.length()===0,y))if(l)y=l(8,o,!r);else{var x=o.length(),w=o.at(x-1);w>x?y=!1:o.truncate(w)}return y}},p};ut.rc2.startEncrypting=function(t,e,r){var n=ut.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};ut.rc2.createEncryptionCipher=function(t,e){return Vd(t,e,!0)};ut.rc2.startDecrypting=function(t,e,r){var n=ut.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};ut.rc2.createDecryptionCipher=function(t,e){return Vd(t,e,!1)}});var Ss=_((o_,Qd)=>{var A0=be();Qd.exports=A0.jsbn=A0.jsbn||{};var br,uv=0xdeadbeefcafe,zd=(uv&16777215)==15715070;function T(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}A0.jsbn.BigInteger=T;function se(){return new T(null)}function fv(t,e,r,n,i,o){for(;--o>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function hv(t,e,r,n,i,o){for(var s=e&32767,a=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,f=a*c+u*s;c=s*c+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(f>>>15)+a*u+(i>>>30),r.data[n++]=c&1073741823}return i}function Gd(t,e,r,n,i,o){for(var s=e&16383,a=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,f=a*c+u*s;c=s*c+((f&16383)<<14)+r.data[n]+i,i=(c>>28)+(f>>14)+a*u,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(T.prototype.am=Gd,br=28):zd&&navigator.appName=="Microsoft Internet Explorer"?(T.prototype.am=hv,br=30):zd&&navigator.appName!="Netscape"?(T.prototype.am=fv,br=26):(T.prototype.am=Gd,br=28);T.prototype.DB=br;T.prototype.DM=(1<<br)-1;T.prototype.DV=1<<br;var D0=52;T.prototype.FV=Math.pow(2,D0);T.prototype.F1=D0-br;T.prototype.F2=2*br-D0;var lv="0123456789abcdefghijklmnopqrstuvwxyz",ws=new Array,Jn,St;Jn="0".charCodeAt(0);for(St=0;St<=9;++St)ws[Jn++]=St;Jn="a".charCodeAt(0);for(St=10;St<36;++St)ws[Jn++]=St;Jn="A".charCodeAt(0);for(St=10;St<36;++St)ws[Jn++]=St;function $d(t){return lv.charAt(t)}function Wd(t,e){var r=ws[t.charCodeAt(e)];return r??-1}function dv(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function pv(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function Or(t){var e=se();return e.fromInt(t),e}function yv(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,o=0;--n>=0;){var s=r==8?t[n]&255:Wd(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&t[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&T.ZERO.subTo(this,this)}function gv(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function mv(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%e;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=$d(n));s>=0;)a<e?(n=(this.data[s]&(1<<a)-1)<<e-a,n|=this.data[--s]>>(a+=this.DB-e)):(n=this.data[s]>>(a-=e)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=$d(n));return i?o:"0"}function xv(){var t=se();return T.ZERO.subTo(this,t),t}function bv(){return this.s<0?this.negate():this}function vv(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Es(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function wv(){return this.t<=0?0:this.DB*(this.t-1)+Es(this.data[this.t-1]^this.s&this.DM)}function Ev(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function Sv(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function Cv(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(t/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)e.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)e.data[a]=0;e.data[o]=s,e.t=this.t+o+1,e.s=this.s,e.clamp()}function Av(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,o=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&o)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&o)<<i),e.t=this.t-r,e.clamp()}function Dv(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function Bv(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&T.ZERO.subTo(e,e)}function _v(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function Tv(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=se());var o=se(),s=this.s,a=t.s,c=this.DB-Es(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var u=o.t,f=o.data[u-1];if(f!=0){var h=f*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),d=this.FV/h,p=(1<<this.F1)/h,l=1<<this.F2,y=r.t,g=y-u,x=e??se();for(o.dlShiftTo(g,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),T.ONE.dlShiftTo(u,x),x.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--g>=0;){var w=r.data[--y]==f?this.DM:Math.floor(r.data[y]*d+(r.data[y-1]+l)*p);if((r.data[y]+=o.am(0,w,r,g,0,u))<w)for(o.dlShiftTo(g,x),r.subTo(x,r);r.data[y]<--w;)r.subTo(x,r)}e!=null&&(r.drShiftTo(u,e),s!=a&&T.ZERO.subTo(e,e)),r.t=u,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&T.ZERO.subTo(r,r)}}}function Iv(t){var e=se();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(T.ZERO)>0&&t.subTo(e,e),e}function fn(t){this.m=t}function kv(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function Lv(t){return t}function Rv(t){t.divRemTo(this.m,null,t)}function Nv(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function Pv(t,e){t.squareTo(e),this.reduce(e)}fn.prototype.convert=kv;fn.prototype.revert=Lv;fn.prototype.reduce=Rv;fn.prototype.mulTo=Nv;fn.prototype.sqrTo=Pv;function Uv(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function hn(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Ov(t){var e=se();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(T.ZERO)>0&&this.m.subTo(e,e),e}function Fv(t){var e=se();return t.copyTo(e),this.reduce(e),e}function Mv(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Kv(t,e){t.squareTo(e),this.reduce(e)}function Vv(t,e,r){t.multiplyTo(e,r),this.reduce(r)}hn.prototype.convert=Ov;hn.prototype.revert=Fv;hn.prototype.reduce=Mv;hn.prototype.mulTo=Vv;hn.prototype.sqrTo=Kv;function qv(){return(this.t>0?this.data[0]&1:this.s)==0}function Hv(t,e){if(t>4294967295||t<1)return T.ONE;var r=se(),n=se(),i=e.convert(this),o=Es(t)-1;for(i.copyTo(r);--o>=0;)if(e.sqrTo(r,n),(t&1<<o)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function zv(t,e){var r;return t<256||e.isEven()?r=new fn(e):r=new hn(e),this.exp(t,r)}T.prototype.copyTo=dv;T.prototype.fromInt=pv;T.prototype.fromString=yv;T.prototype.clamp=gv;T.prototype.dlShiftTo=Ev;T.prototype.drShiftTo=Sv;T.prototype.lShiftTo=Cv;T.prototype.rShiftTo=Av;T.prototype.subTo=Dv;T.prototype.multiplyTo=Bv;T.prototype.squareTo=_v;T.prototype.divRemTo=Tv;T.prototype.invDigit=Uv;T.prototype.isEven=qv;T.prototype.exp=Hv;T.prototype.toString=mv;T.prototype.negate=xv;T.prototype.abs=bv;T.prototype.compareTo=vv;T.prototype.bitLength=wv;T.prototype.mod=Iv;T.prototype.modPowInt=zv;T.ZERO=Or(0);T.ONE=Or(1);function Gv(){var t=se();return this.copyTo(t),t}function $v(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Wv(){return this.t==0?this.s:this.data[0]<<24>>24}function Yv(){return this.t==0?this.s:this.data[0]<<16>>16}function jv(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Xv(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Qv(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=Or(r),i=se(),o=se(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(t)+s}function Zv(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,o=0,s=0,a=0;a<t.length;++a){var c=Wd(t,a);if(c<0){t.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(s,0)),i&&T.ZERO.subTo(this,this)}function Jv(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(T.ONE.shiftLeft(t-1),B0,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(T.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function ew(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function tw(t){return this.compareTo(t)==0}function rw(t){return this.compareTo(t)<0?this:t}function nw(t){return this.compareTo(t)>0?this:t}function iw(t,e,r){var n,i,o=Math.min(t.t,this.t);for(n=0;n<o;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=o;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function ow(t,e){return t&e}function sw(t){var e=se();return this.bitwiseTo(t,ow,e),e}function B0(t,e){return t|e}function aw(t){var e=se();return this.bitwiseTo(t,B0,e),e}function Yd(t,e){return t^e}function cw(t){var e=se();return this.bitwiseTo(t,Yd,e),e}function jd(t,e){return t&~e}function uw(t){var e=se();return this.bitwiseTo(t,jd,e),e}function fw(){for(var t=se(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function hw(t){var e=se();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function lw(t){var e=se();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function dw(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function pw(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+dw(this.data[t]);return this.s<0?this.t*this.DB:-1}function yw(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function gw(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=yw(this.data[r]^e);return t}function mw(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function xw(t,e){var r=T.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function bw(t){return this.changeBit(t,B0)}function vw(t){return this.changeBit(t,jd)}function ww(t){return this.changeBit(t,Yd)}function Ew(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function Sw(t){var e=se();return this.addTo(t,e),e}function Cw(t){var e=se();return this.subTo(t,e),e}function Aw(t){var e=se();return this.multiplyTo(t,e),e}function Dw(t){var e=se();return this.divRemTo(t,e,null),e}function Bw(t){var e=se();return this.divRemTo(t,null,e),e}function _w(t){var e=se(),r=se();return this.divRemTo(t,e,r),new Array(e,r)}function Tw(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function Iw(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function qi(){}function Xd(t){return t}function kw(t,e,r){t.multiplyTo(e,r)}function Lw(t,e){t.squareTo(e)}qi.prototype.convert=Xd;qi.prototype.revert=Xd;qi.prototype.mulTo=kw;qi.prototype.sqrTo=Lw;function Rw(t){return this.exp(t,new qi)}function Nw(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function Pw(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function ei(t){this.r2=se(),this.q3=se(),T.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Uw(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=se();return t.copyTo(e),this.reduce(e),e}function Ow(t){return t}function Fw(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Mw(t,e){t.squareTo(e),this.reduce(e)}function Kw(t,e,r){t.multiplyTo(e,r),this.reduce(r)}ei.prototype.convert=Uw;ei.prototype.revert=Ow;ei.prototype.reduce=Fw;ei.prototype.mulTo=Kw;ei.prototype.sqrTo=Mw;function Vw(t,e){var r=t.bitLength(),n,i=Or(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new fn(e):e.isEven()?o=new ei(e):o=new hn(e);var s=new Array,a=3,c=n-1,u=(1<<n)-1;if(s[1]=o.convert(this),n>1){var f=se();for(o.sqrTo(s[1],f);a<=u;)s[a]=se(),o.mulTo(f,s[a-2],s[a]),a+=2}var h=t.t-1,d,p=!0,l=se(),y;for(r=Es(t.data[h])-1;h>=0;){for(r>=c?d=t.data[h]>>r-c&u:(d=(t.data[h]&(1<<r+1)-1)<<c-r,h>0&&(d|=t.data[h-1]>>this.DB+r-c)),a=n;!(d&1);)d>>=1,--a;if((r-=a)<0&&(r+=this.DB,--h),p)s[d].copyTo(i),p=!1;else{for(;a>1;)o.sqrTo(i,l),o.sqrTo(l,i),a-=2;a>0?o.sqrTo(i,l):(y=i,i=l,l=y),o.mulTo(l,s[d],i)}for(;h>=0&&!(t.data[h]&1<<r);)o.sqrTo(i,l),y=i,i=l,l=y,--r<0&&(r=this.DB-1,--h)}return o.revert(i)}function qw(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function Hw(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function zw(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return T.ZERO;for(var r=t.clone(),n=this.clone(),i=Or(1),o=Or(0),s=Or(0),a=Or(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(t,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),e&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(T.ONE)!=0)return T.ZERO;if(a.compareTo(t)>=0)return a.subtract(t);if(a.signum()<0)a.addTo(t,a);else return a;return a.signum()<0?a.add(t):a}var Ut=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],Gw=(1<<26)/Ut[Ut.length-1];function $w(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Ut[Ut.length-1]){for(e=0;e<Ut.length;++e)if(r.data[0]==Ut[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Ut.length;){for(var n=Ut[e],i=e+1;i<Ut.length&&n<Gw;)n*=Ut[i++];for(n=r.modInt(n);e<i;)if(n%Ut[e++]==0)return!1}return r.millerRabin(t)}function Ww(t){var e=this.subtract(T.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=Yw(),o,s=0;s<t;++s){do o=new T(this.bitLength(),i);while(o.compareTo(T.ONE)<=0||o.compareTo(e)>=0);var a=o.modPow(n,this);if(a.compareTo(T.ONE)!=0&&a.compareTo(e)!=0){for(var c=1;c++<r&&a.compareTo(e)!=0;)if(a=a.modPowInt(2,this),a.compareTo(T.ONE)==0)return!1;if(a.compareTo(e)!=0)return!1}}return!0}function Yw(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}T.prototype.chunkSize=jv;T.prototype.toRadix=Qv;T.prototype.fromRadix=Zv;T.prototype.fromNumber=Jv;T.prototype.bitwiseTo=iw;T.prototype.changeBit=xw;T.prototype.addTo=Ew;T.prototype.dMultiply=Tw;T.prototype.dAddOffset=Iw;T.prototype.multiplyLowerTo=Nw;T.prototype.multiplyUpperTo=Pw;T.prototype.modInt=Hw;T.prototype.millerRabin=Ww;T.prototype.clone=Gv;T.prototype.intValue=$v;T.prototype.byteValue=Wv;T.prototype.shortValue=Yv;T.prototype.signum=Xv;T.prototype.toByteArray=ew;T.prototype.equals=tw;T.prototype.min=rw;T.prototype.max=nw;T.prototype.and=sw;T.prototype.or=aw;T.prototype.xor=cw;T.prototype.andNot=uw;T.prototype.not=fw;T.prototype.shiftLeft=hw;T.prototype.shiftRight=lw;T.prototype.getLowestSetBit=pw;T.prototype.bitCount=gw;T.prototype.testBit=mw;T.prototype.setBit=bw;T.prototype.clearBit=vw;T.prototype.flipBit=ww;T.prototype.add=Sw;T.prototype.subtract=Cw;T.prototype.multiply=Aw;T.prototype.divide=Dw;T.prototype.remainder=Bw;T.prototype.divideAndRemainder=_w;T.prototype.modPow=Vw;T.prototype.modInverse=zw;T.prototype.pow=Rw;T.prototype.gcd=qw;T.prototype.isProbablePrime=$w});var rp=_((s_,tp)=>{var Jt=be();un();Ue();var Jd=tp.exports=Jt.sha1=Jt.sha1||{};Jt.md.sha1=Jt.md.algorithms.sha1=Jd;Jd.create=function(){ep||jw();var t=null,e=Jt.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return e=Jt.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Jt.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),Zd(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Jt.util.createBuffer();i.putBytes(e.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(_0.substr(0,n.blockLength-s));for(var a,c,u=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,c=a/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=a>>>0;i.putInt32(u);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};Zd(h,r,i);var d=Jt.util.createBuffer();return d.putInt32(h.h0),d.putInt32(h.h1),d.putInt32(h.h2),d.putInt32(h.h3),d.putInt32(h.h4),d},n};var _0=null,ep=!1;function jw(){_0=String.fromCharCode(128),_0+=Jt.util.fillString(String.fromCharCode(0),64),ep=!0}function Zd(t,e,r){for(var n,i,o,s,a,c,u,f,h=r.length();h>=64;){for(i=t.h0,o=t.h1,s=t.h2,a=t.h3,c=t.h4,f=0;f<16;++f)n=r.getInt32(),e[f]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<20;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=a^o&(s^a),n=(i<<5|i>>>27)+u+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<32;++f)n=e[f-3]^e[f-8]^e[f-14]^e[f-16],n=n<<1|n>>>31,e[f]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<40;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<60;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o&s|a&(o^s),n=(i<<5|i>>>27)+u+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;f<80;++f)n=e[f-6]^e[f-16]^e[f-28]^e[f-32],n=n<<2|n>>>30,e[f]=n,u=o^s^a,n=(i<<5|i>>>27)+u+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+s|0,t.h3=t.h3+a|0,t.h4=t.h4+c|0,h-=64}}});var op=_((a_,ip)=>{var er=be();Ue();Vi();rp();var np=ip.exports=er.pkcs1=er.pkcs1||{};np.encode_rsa_oaep=function(t,e,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=er.md.sha1.create(),s||(s=o);var a=Math.ceil(t.n.bitLength()/8),c=a-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}n||(n=""),o.update(n,"raw");for(var f=o.digest(),h="",d=c-e.length,p=0;p<d;p++)h+="\0";var l=f.getBytes()+h+""+e;if(!i)i=er.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=Cs(i,a-o.digestLength-1,s),g=er.util.xorBytes(l,y,l.length),x=Cs(g,o.digestLength,s),w=er.util.xorBytes(i,x,i.length);return"\0"+w+g};np.decode_rsa_oaep=function(t,e,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var g=new Error("RSAES-OAEP encoded message length is invalid.");throw g.length=e.length,g.expectedLength=s,g}if(i===void 0?i=er.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),f=e.substring(1+i.digestLength),h=Cs(f,i.digestLength,o),d=er.util.xorBytes(u,h,u.length),p=Cs(d,s-i.digestLength-1,o),l=er.util.xorBytes(f,p,f.length),y=l.substring(0,i.digestLength),g=c!=="\0",x=0;x<i.digestLength;++x)g|=a.charAt(x)!==y.charAt(x);for(var w=1,v=i.digestLength,A=i.digestLength;A<l.length;A++){var E=l.charCodeAt(A),S=E&1^1,B=w?65534:0;g|=E&B,w=w&S,v+=w}if(g||l.charCodeAt(v)!==1)throw new Error("Invalid RSAES-OAEP padding.");return l.substring(v+1)};function Cs(t,e,r){r||(r=er.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var sp=_((c_,T0)=>{var Fr=be();Ue();Ss();Vi();(function(){if(Fr.prime){T0.exports=Fr.prime;return}var t=T0.exports=Fr.prime=Fr.prime||{},e=Fr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(h,d){return h|d};t.generateProbablePrime=function(h,d,p){typeof d=="function"&&(p=d,d={}),d=d||{};var l=d.algorithm||"PRIMEINC";typeof l=="string"&&(l={name:l}),l.options=l.options||{};var y=d.prng||Fr.random,g={nextBytes:function(x){for(var w=y.getBytesSync(x.length),v=0;v<x.length;++v)x[v]=w.charCodeAt(v)}};if(l.name==="PRIMEINC")return o(h,g,l.options,p);throw new Error("Invalid prime generation algorithm: "+l.name)};function o(h,d,p,l){return"workers"in p?c(h,d,p,l):s(h,d,p,l)}function s(h,d,p,l){var y=u(h,d),g=0,x=f(y.bitLength());"millerRabinTests"in p&&(x=p.millerRabinTests);var w=10;"maxBlockTime"in p&&(w=p.maxBlockTime),a(y,h,d,g,x,w,l)}function a(h,d,p,l,y,g,x){var w=+new Date;do{if(h.bitLength()>d&&(h=u(d,p)),h.isProbablePrime(y))return x(null,h);h.dAddOffset(r[l++%8],0)}while(g<0||+new Date-w<g);Fr.util.setImmediate(function(){a(h,d,p,l,y,g,x)})}function c(h,d,p,l){if(typeof Worker>"u")return s(h,d,p,l);var y=u(h,d),g=p.workers,x=p.workLoad||100,w=x*30/8,v=p.workerScript||"forge/prime.worker.js";if(g===-1)return Fr.util.estimateCores(function(E,S){E&&(S=2),g=S-1,A()});A();function A(){g=Math.max(1,g);for(var E=[],S=0;S<g;++S)E[S]=new Worker(v);for(var B=g,S=0;S<g;++S)E[S].addEventListener("message",U);var I=!1;function U(M){if(!I){--B;var $=M.data;if($.found){for(var q=0;q<E.length;++q)E[q].terminate();return I=!0,l(null,new e($.prime,16))}y.bitLength()>h&&(y=u(h,d));var te=y.toString(16);M.target.postMessage({hex:te,workLoad:x}),y.dAddOffset(w,0)}}}}function u(h,d){var p=new e(h,d),l=h-1;return p.testBit(l)||p.bitwiseTo(e.ONE.shiftLeft(l),i,p),p.dAddOffset(31-p.mod(n).byteValue(),0),p}function f(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var k0=_((u_,dp)=>{var F=be();Ki();Ss();hs();op();sp();Vi();Ue();typeof ne>"u"&&(ne=F.jsbn.BigInteger);var ne,I0=F.util.isNodejs?Oe("crypto"):null,b=F.asn1,Ct=F.util;F.pki=F.pki||{};dp.exports=F.pki.rsa=F.rsa=F.rsa||{};var W=F.pki,Xw=[6,4,2,4,2,4,6,2],Qw={name:"PrivateKeyInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Zw={name:"RSAPrivateKey",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},Jw={name:"RSAPublicKey",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:b.Class.UNIVERSAL,type:b.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},e3=F.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:b.Class.UNIVERSAL,type:b.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},t3={name:"DigestInfo",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:b.Class.UNIVERSAL,type:b.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:b.Class.UNIVERSAL,type:b.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:b.Class.UNIVERSAL,type:b.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:b.Class.UNIVERSAL,type:b.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},r3=function(t){var e;if(t.algorithm in W.oids)e=W.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=b.oidToDer(e).getBytes(),i=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]),o=b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[]);o.value.push(b.create(b.Class.UNIVERSAL,b.Type.OID,!1,n)),o.value.push(b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,""));var s=b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(s),b.toDer(i).getBytes()},hp=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(ne.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(ne.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new ne(F.util.bytesToHex(F.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(ne.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var s=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};W.rsa.encrypt=function(t,e,r){var n=r,i,o=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=lp(t,e,r)):(i=F.util.createBuffer(),i.putBytes(t));for(var s=new ne(i.toHex(),16),a=hp(s,e,n),c=a.toString(16),u=F.util.createBuffer(),f=o-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(F.util.hexToBytes(c)),u.getBytes()};W.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var s=new ne(F.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=hp(s,e,r),c=a.toString(16),u=F.util.createBuffer(),f=i-Math.ceil(c.length/2);f>0;)u.putByte(0),--f;return u.putBytes(F.util.hexToBytes(c)),n!==!1?As(u.getBytes(),e,r):u.getBytes()};W.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||F.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),u=0;u<a.length;++u)a[u]=c.charCodeAt(u)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new ne(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};W.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new ne(null);r.fromInt(30);for(var n=0,i=function(h,d){return h|d},o=+new Date,s,a=0;t.keys===null&&(e<=0||a<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new ne(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(ne.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(i3(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(Xw[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(ne.ONE).gcd(t.e).compareTo(ne.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(ne.ONE),t.q1=t.q.subtract(ne.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(ne.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var f=t.e.modInverse(t.phi);t.keys={privateKey:W.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:W.rsa.setPublicKey(t.n,t.e)}}s=+new Date,a+=s-o,o=s}return t.keys!==null};W.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!F.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(ap("generateKeyPair"))return I0.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,u){if(a)return n(a);n(null,{privateKey:W.privateKeyFromPem(u),publicKey:W.publicKeyFromPem(c)})});if(cp("generateKey")&&cp("exportKey"))return Ct.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:fp(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return Ct.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=W.privateKeyFromAsn1(b.fromDer(F.util.createBuffer(a)));n(null,{privateKey:c,publicKey:W.setRsaPublicKey(c.n,c.e)})}});if(up("generateKey")&&up("exportKey")){var i=Ct.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:fp(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,u=Ct.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(f){var h=f.target.result,d=W.privateKeyFromAsn1(b.fromDer(F.util.createBuffer(h)));n(null,{privateKey:d,publicKey:W.setRsaPublicKey(d.n,d.e)})},u.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(ap("generateKeyPairSync")){var o=I0.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:W.privateKeyFromPem(o.privateKey),publicKey:W.publicKeyFromPem(o.publicKey)}}}var s=W.rsa.createKeyPairGenerationState(t,e,r);if(!n)return W.rsa.stepKeyPairGenerationState(s,0),s.keys;n3(s,r,n)};W.setRsaPublicKey=W.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,u){return lp(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return F.pkcs1.encode_rsa_oaep(c,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return W.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(c,u){u=As(u,r,!0);var f=b.fromDer(u,{parseAllBytes:s._parseAllDigestBytes}),h={},d=[];if(!b.validate(f,t3,h,d)){var p=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw p.errors=d,p}var l=b.derToOid(h.algorithmIdentifier);if(!(l===F.oids.md2||l===F.oids.md5||l===F.oids.sha1||l===F.oids.sha224||l===F.oids.sha256||l===F.oids.sha384||l===F.oids.sha512||l===F.oids["sha512-224"]||l===F.oids["sha512-256"])){var p=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw p.oid=l,p}if((l===F.oids.md2||l===F.oids.md5)&&!("parameters"in h))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===h.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(c,u){return u=As(u,r,!0),c===u}});var a=W.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};W.setRsaPrivateKey=W.rsa.setPrivateKey=function(t,e,r,n,i,o,s,a){var c={n:t,e,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return c.decrypt=function(u,f,h){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var d=W.rsa.decrypt(u,c,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:As};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(p,l){return F.pkcs1.decode_rsa_oaep(l,p,h)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(p){return p}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(d,c,!1)},c.sign=function(u,f){var h=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:r3},h=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return u}},h=1);var d=f.encode(u,c.n.bitLength());return W.rsa.encrypt(d,c,h)},c};W.wrapRsaPrivateKey=function(t){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(0).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(W.oids.rsaEncryption).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")]),b.create(b.Class.UNIVERSAL,b.Type.OCTETSTRING,!1,b.toDer(t).getBytes())])};W.privateKeyFromAsn1=function(t){var e={},r=[];if(b.validate(t,Qw,e,r)&&(t=b.fromDer(F.util.createBuffer(e.privateKey))),e={},r=[],!b.validate(t,Zw,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,c,u,f,h;return i=F.util.createBuffer(e.privateKeyModulus).toHex(),o=F.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=F.util.createBuffer(e.privateKeyPrivateExponent).toHex(),a=F.util.createBuffer(e.privateKeyPrime1).toHex(),c=F.util.createBuffer(e.privateKeyPrime2).toHex(),u=F.util.createBuffer(e.privateKeyExponent1).toHex(),f=F.util.createBuffer(e.privateKeyExponent2).toHex(),h=F.util.createBuffer(e.privateKeyCoefficient).toHex(),W.setRsaPrivateKey(new ne(i,16),new ne(o,16),new ne(s,16),new ne(a,16),new ne(c,16),new ne(u,16),new ne(f,16),new ne(h,16))};W.privateKeyToAsn1=W.privateKeyToRSAPrivateKey=function(t){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,b.integerToDer(0).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.n)),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.e)),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.d)),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.p)),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.q)),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.dP)),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.dQ)),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.qInv))])};W.publicKeyFromAsn1=function(t){var e={},r=[];if(b.validate(t,e3,e,r)){var n=b.derToOid(e.publicKeyOid);if(n!==W.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!b.validate(t,Jw,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=F.util.createBuffer(e.publicKeyModulus).toHex(),s=F.util.createBuffer(e.publicKeyExponent).toHex();return W.setRsaPublicKey(new ne(o,16),new ne(s,16))};W.publicKeyToAsn1=W.publicKeyToSubjectPublicKeyInfo=function(t){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.OID,!1,b.oidToDer(W.oids.rsaEncryption).getBytes()),b.create(b.Class.UNIVERSAL,b.Type.NULL,!1,"")]),b.create(b.Class.UNIVERSAL,b.Type.BITSTRING,!1,[W.publicKeyToRSAPublicKey(t)])])};W.publicKeyToRSAPublicKey=function(t){return b.create(b.Class.UNIVERSAL,b.Type.SEQUENCE,!0,[b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.n)),b.create(b.Class.UNIVERSAL,b.Type.INTEGER,!1,tr(t.e))])};function lp(t,e,r){var n=F.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-t.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<s;++c)n.putByte(a)}else for(;s>0;){for(var u=0,f=F.random.getBytes(s),c=0;c<s;++c)a=f.charCodeAt(c),a===0?++u:n.putByte(a);s=u}return n.putByte(0),n.putBytes(t),n}function As(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),o=F.util.createBuffer(t),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(a===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var f=o.getByte();if(f!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function n3(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){o(t.pBits,function(a,c){if(a)return r(a);if(t.p=c,t.q!==null)return s(a,t.q);o(t.qBits,s)})}function o(a,c){F.prime.generateProbablePrime(a,n,c)}function s(a,c){if(a)return r(a);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(ne.ONE).gcd(t.e).compareTo(ne.ONE)!==0){t.p=null,i();return}if(t.q.subtract(ne.ONE).gcd(t.e).compareTo(ne.ONE)!==0){t.q=null,o(t.qBits,s);return}if(t.p1=t.p.subtract(ne.ONE),t.q1=t.q.subtract(ne.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(ne.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,s);return}var f=t.e.modInverse(t.phi);t.keys={privateKey:W.rsa.setPrivateKey(t.n,t.e,f,t.p,t.q,f.mod(t.p1),f.mod(t.q1),t.q.modInverse(t.p)),publicKey:W.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function tr(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=F.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function i3(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function ap(t){return F.util.isNodejs&&typeof I0[t]=="function"}function cp(t){return typeof Ct.globalScope<"u"&&typeof Ct.globalScope.crypto=="object"&&typeof Ct.globalScope.crypto.subtle=="object"&&typeof Ct.globalScope.crypto.subtle[t]=="function"}function up(t){return typeof Ct.globalScope<"u"&&typeof Ct.globalScope.msCrypto=="object"&&typeof Ct.globalScope.msCrypto.subtle=="object"&&typeof Ct.globalScope.msCrypto.subtle[t]=="function"}function fp(t){for(var e=F.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var bp=_((f_,xp)=>{var N=be();w0();Ki();Sd();un();hs();_d();kd();Vi();Hd();k0();Ue();typeof pp>"u"&&(pp=N.jsbn.BigInteger);var pp,C=N.asn1,Y=N.pki=N.pki||{};xp.exports=Y.pbe=N.pbe=N.pbe||{};var ln=Y.oids,o3={name:"EncryptedPrivateKeyInfo",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},s3={name:"PBES2Algorithms",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},a3={name:"pkcs-12PbeParams",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"iterations"}]};Y.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=N.random.getBytesSync(r.saltSize),i=r.count,o=C.integerToDer(i),s,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var u,f,h;switch(r.algorithm){case"aes128":s=16,u=16,f=ln["aes128-CBC"],h=N.aes.createEncryptionCipher;break;case"aes192":s=24,u=16,f=ln["aes192-CBC"],h=N.aes.createEncryptionCipher;break;case"aes256":s=32,u=16,f=ln["aes256-CBC"],h=N.aes.createEncryptionCipher;break;case"des":s=8,u=8,f=ln.desCBC,h=N.des.createEncryptionCipher;break;default:var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var p="hmacWith"+r.prfAlgorithm.toUpperCase(),l=mp(p),y=N.pkcs5.pbkdf2(e,n,i,s,l),g=N.random.getBytesSync(u),x=h(y);x.start(g),x.update(C.toDer(t)),x.finish(),c=x.output.getBytes();var w=c3(n,o,s,p);a=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ln.pkcs5PBES2).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ln.pkcs5PBKDF2).getBytes()),w]),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(f).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,g)])])])}else if(r.algorithm==="3des"){s=24;var v=new N.util.ByteBuffer(n),y=Y.pbe.generatePkcs12Key(e,v,1,i,s),g=Y.pbe.generatePkcs12Key(e,v,2,i,s),x=N.des.createEncryptionCipher(y);x.start(g),x.update(C.toDer(t)),x.finish(),c=x.output.getBytes(),a=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(ln["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,n),C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,o.getBytes())])])}else{var d=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw d.algorithm=r.algorithm,d}var A=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[a,C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,c)]);return A};Y.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!C.validate(t,o3,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=C.derToOid(n.encryptionOid),a=Y.pbe.getCipher(s,n.encryptionParams,e),c=N.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=C.fromDer(a.output)),r};Y.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:C.toDer(t).getBytes()};return N.pem.encode(r,{maxline:e})};Y.encryptedPrivateKeyFromPem=function(t){var e=N.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return C.fromDer(e.body)};Y.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=Y.wrapRsaPrivateKey(Y.privateKeyToAsn1(t));return n=Y.encryptPrivateKeyInfo(n,e,r),Y.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=N.random.getBytesSync(16),a=N.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=N.random.getBytesSync(16),a=N.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=N.random.getBytesSync(16),a=N.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=N.random.getBytesSync(8),a=N.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=N.random.getBytesSync(8),a=N.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var u=N.pbe.opensslDeriveBytes(e,o.substr(0,8),s),f=a(u);f.start(o),f.update(C.toDer(Y.privateKeyToAsn1(t))),f.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:N.util.bytesToHex(o).toUpperCase()},body:f.output.getBytes()};return N.pem.encode(h)};Y.decryptRsaPrivateKey=function(t,e){var r=null,n=N.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=N.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=N.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=N.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=N.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=N.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(h){return N.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":o=8,s=function(h){return N.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":o=16,s=function(h){return N.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=N.util.hexToBytes(n.dekInfo.parameters),c=N.pbe.opensslDeriveBytes(e,a.substr(0,8),o),u=s(c);if(u.start(a),u.update(N.util.createBuffer(n.body)),u.finish())r=u.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=Y.decryptPrivateKeyInfo(C.fromDer(r),e):r=C.fromDer(r),r!==null&&(r=Y.privateKeyFromAsn1(r)),r};Y.pbe.generatePkcs12Key=function(t,e,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in N.md))throw new Error('"sha1" hash algorithm unavailable.');o=N.md.sha1.create()}var c=o.digestLength,u=o.blockLength,f=new N.util.ByteBuffer,h=new N.util.ByteBuffer;if(t!=null){for(a=0;a<t.length;a++)h.putInt16(t.charCodeAt(a));h.putInt16(0)}var d=h.length(),p=e.length(),l=new N.util.ByteBuffer;l.fillWithByte(r,u);var y=u*Math.ceil(p/u),g=new N.util.ByteBuffer;for(a=0;a<y;a++)g.putByte(e.at(a%p));var x=u*Math.ceil(d/u),w=new N.util.ByteBuffer;for(a=0;a<x;a++)w.putByte(h.at(a%d));var v=g;v.putBuffer(w);for(var A=Math.ceil(i/c),E=1;E<=A;E++){var S=new N.util.ByteBuffer;S.putBytes(l.bytes()),S.putBytes(v.bytes());for(var B=0;B<n;B++)o.start(),o.update(S.getBytes()),S=o.digest();var I=new N.util.ByteBuffer;for(a=0;a<u;a++)I.putByte(S.at(a%c));var U=Math.ceil(p/u)+Math.ceil(d/u),M=new N.util.ByteBuffer;for(s=0;s<U;s++){var $=new N.util.ByteBuffer(v.getBytes(u)),q=511;for(a=I.length()-1;a>=0;a--)q=q>>8,q+=I.at(a)+$.at(a),$.setAt(a,q&255);M.putBuffer($)}v=M,f.putBuffer(S)}return f.truncate(f.length()-i),f};Y.pbe.getCipher=function(t,e,r){switch(t){case Y.oids.pkcs5PBES2:return Y.pbe.getCipherForPBES2(t,e,r);case Y.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case Y.oids["pbewithSHAAnd40BitRC2-CBC"]:return Y.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};Y.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!C.validate(e,s3,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=C.derToOid(n.kdfOid),t!==Y.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=C.derToOid(n.encOid),t!==Y.oids["aes128-CBC"]&&t!==Y.oids["aes192-CBC"]&&t!==Y.oids["aes256-CBC"]&&t!==Y.oids["des-EDE3-CBC"]&&t!==Y.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=N.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,u;switch(Y.oids[t]){case"aes128-CBC":c=16,u=N.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=N.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=N.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=N.des.createDecryptionCipher;break;case"desCBC":c=8,u=N.des.createDecryptionCipher;break}var f=gp(n.prfOid),h=N.pkcs5.pbkdf2(r,s,a,c,f),d=n.encIv,p=u(h);return p.start(d),p};Y.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!C.validate(e,a3,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=N.util.createBuffer(n.salt),a=N.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,u,f;switch(t){case Y.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,f=N.des.startDecrypting;break;case Y.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,f=function(y,g){var x=N.rc2.createDecryptionCipher(y,40);return x.start(g,null),x};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var h=gp(n.prfOid),d=Y.pbe.generatePkcs12Key(r,s,1,a,c,h);h.start();var p=Y.pbe.generatePkcs12Key(r,s,2,a,u,h);return f(d,p)};Y.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n>"u"||n===null){if(!("md5"in N.md))throw new Error('"md5" hash algorithm unavailable.');n=N.md.md5.create()}e===null&&(e="");for(var i=[yp(n,t+e)],o=16,s=1;o<r;++s,o+=16)i.push(yp(n,i[s-1]+t+e));return i.join("").substr(0,r)};function yp(t,e){return t.start().update(e).digest().getBytes()}function gp(t){var e;if(!t)e="hmacWithSHA1";else if(e=Y.oids[C.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return mp(e)}function mp(t){var e=N.md;switch(t){case"hmacWithSHA224":e=N.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function c3(t,e,r,n){var i=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,t),C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,N.util.hexToBytes(r.toString(16))),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(Y.oids[n]).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")])),i}});var Rp=_((K_,Lp)=>{var Ce=be();un();Ue();var zi=Lp.exports=Ce.sha512=Ce.sha512||{};Ce.md.sha512=Ce.md.algorithms.sha512=zi;var Ip=Ce.sha384=Ce.sha512.sha384=Ce.sha512.sha384||{};Ip.create=function(){return zi.create("SHA-384")};Ce.md.sha384=Ce.md.algorithms.sha384=Ip;Ce.sha512.sha256=Ce.sha512.sha256||{create:function(){return zi.create("SHA-512/256")}};Ce.md["sha512/256"]=Ce.md.algorithms["sha512/256"]=Ce.sha512.sha256;Ce.sha512.sha224=Ce.sha512.sha224||{create:function(){return zi.create("SHA-512/224")}};Ce.md["sha512/224"]=Ce.md.algorithms["sha512/224"]=Ce.sha512.sha224;zi.create=function(t){if(kp||x3(),typeof t>"u"&&(t="SHA-512"),!(t in mn))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=mn[t],r=null,n=Ce.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,u=0;u<c;++u)a.fullMessageLength.push(0);n=Ce.util.createBuffer(),r=new Array(e.length);for(var u=0;u<e.length;++u)r[u]=e[u].slice(0);return a},a.start(),a.update=function(c,u){u==="utf8"&&(c=Ce.util.encodeUtf8(c));var f=c.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var h=a.fullMessageLength.length-1;h>=0;--h)a.fullMessageLength[h]+=f[1],f[1]=f[0]+(a.fullMessageLength[h]/4294967296>>>0),a.fullMessageLength[h]=a.fullMessageLength[h]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(c),Tp(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=Ce.util.createBuffer();c.putBytes(n.bytes());var u=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=u&a.blockLength-1;c.putBytes(P0.substr(0,a.blockLength-f));for(var h,d,p=a.fullMessageLength[0]*8,l=0;l<a.fullMessageLength.length-1;++l)h=a.fullMessageLength[l+1]*8,d=h/4294967296>>>0,p+=d,c.putInt32(p>>>0),p=h>>>0;c.putInt32(p);for(var y=new Array(r.length),l=0;l<r.length;++l)y[l]=r[l].slice(0);Tp(y,i,c);var g=Ce.util.createBuffer(),x;t==="SHA-512"?x=y.length:t==="SHA-384"?x=y.length-2:x=y.length-4;for(var l=0;l<x;++l)g.putInt32(y[l][0]),(l!==x-1||t!=="SHA-512/224")&&g.putInt32(y[l][1]);return g},a};var P0=null,kp=!1,U0=null,mn=null;function x3(){P0=String.fromCharCode(128),P0+=Ce.util.fillString(String.fromCharCode(0),128),U0=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],mn={},mn["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],mn["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],mn["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],mn["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],kp=!0}function Tp(t,e,r){for(var n,i,o,s,a,c,u,f,h,d,p,l,y,g,x,w,v,A,E,S,B,I,U,M,$,q,te,ce,K,z,D,H,ve,Z,J,ee=r.length();ee>=128;){for(K=0;K<16;++K)e[K][0]=r.getInt32()>>>0,e[K][1]=r.getInt32()>>>0;for(;K<80;++K)H=e[K-2],z=H[0],D=H[1],n=((z>>>19|D<<13)^(D>>>29|z<<3)^z>>>6)>>>0,i=((z<<13|D>>>19)^(D<<3|z>>>29)^(z<<26|D>>>6))>>>0,Z=e[K-15],z=Z[0],D=Z[1],o=((z>>>1|D<<31)^(z>>>8|D<<24)^z>>>7)>>>0,s=((z<<31|D>>>1)^(z<<24|D>>>8)^(z<<25|D>>>7))>>>0,ve=e[K-7],J=e[K-16],D=i+ve[1]+s+J[1],e[K][0]=n+ve[0]+o+J[0]+(D/4294967296>>>0)>>>0,e[K][1]=D>>>0;for(y=t[0][0],g=t[0][1],x=t[1][0],w=t[1][1],v=t[2][0],A=t[2][1],E=t[3][0],S=t[3][1],B=t[4][0],I=t[4][1],U=t[5][0],M=t[5][1],$=t[6][0],q=t[6][1],te=t[7][0],ce=t[7][1],K=0;K<80;++K)u=((B>>>14|I<<18)^(B>>>18|I<<14)^(I>>>9|B<<23))>>>0,f=((B<<18|I>>>14)^(B<<14|I>>>18)^(I<<23|B>>>9))>>>0,h=($^B&(U^$))>>>0,d=(q^I&(M^q))>>>0,a=((y>>>28|g<<4)^(g>>>2|y<<30)^(g>>>7|y<<25))>>>0,c=((y<<4|g>>>28)^(g<<30|y>>>2)^(g<<25|y>>>7))>>>0,p=(y&x|v&(y^x))>>>0,l=(g&w|A&(g^w))>>>0,D=ce+f+d+U0[K][1]+e[K][1],n=te+u+h+U0[K][0]+e[K][0]+(D/4294967296>>>0)>>>0,i=D>>>0,D=c+l,o=a+p+(D/4294967296>>>0)>>>0,s=D>>>0,te=$,ce=q,$=U,q=M,U=B,M=I,D=S+i,B=E+n+(D/4294967296>>>0)>>>0,I=D>>>0,E=v,S=A,v=x,A=w,x=y,w=g,D=i+s,y=n+o+(D/4294967296>>>0)>>>0,g=D>>>0;D=t[0][1]+g,t[0][0]=t[0][0]+y+(D/4294967296>>>0)>>>0,t[0][1]=D>>>0,D=t[1][1]+w,t[1][0]=t[1][0]+x+(D/4294967296>>>0)>>>0,t[1][1]=D>>>0,D=t[2][1]+A,t[2][0]=t[2][0]+v+(D/4294967296>>>0)>>>0,t[2][1]=D>>>0,D=t[3][1]+S,t[3][0]=t[3][0]+E+(D/4294967296>>>0)>>>0,t[3][1]=D>>>0,D=t[4][1]+I,t[4][0]=t[4][0]+B+(D/4294967296>>>0)>>>0,t[4][1]=D>>>0,D=t[5][1]+M,t[5][0]=t[5][0]+U+(D/4294967296>>>0)>>>0,t[5][1]=D>>>0,D=t[6][1]+q,t[6][0]=t[6][0]+$+(D/4294967296>>>0)>>>0,t[6][1]=D>>>0,D=t[7][1]+ce,t[7][0]=t[7][0]+te+(D/4294967296>>>0)>>>0,t[7][1]=D>>>0,ee-=128}}});var b1=_((kI,x1)=>{"use strict";function J3(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var n=0;n<t.length;n++){var i=t.charAt(n),o=i.charCodeAt(0);if(e[o]!==255)throw new TypeError(i+" is ambiguous");e[o]=n}var s=t.length,a=t.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function f(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var l=0,y=0,g=0,x=p.length;g!==x&&p[g]===0;)g++,l++;for(var w=(x-g)*u+1>>>0,v=new Uint8Array(w);g!==x;){for(var A=p[g],E=0,S=w-1;(A!==0||E<y)&&S!==-1;S--,E++)A+=256*v[S]>>>0,v[S]=A%s>>>0,A=A/s>>>0;if(A!==0)throw new Error("Non-zero carry");y=E,g++}for(var B=w-y;B!==w&&v[B]===0;)B++;for(var I=a.repeat(l);B<w;++B)I+=t.charAt(v[B]);return I}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var l=0;if(p[l]!==" "){for(var y=0,g=0;p[l]===a;)y++,l++;for(var x=(p.length-l)*c+1>>>0,w=new Uint8Array(x);p[l];){var v=e[p.charCodeAt(l)];if(v===255)return;for(var A=0,E=x-1;(v!==0||A<g)&&E!==-1;E--,A++)v+=s*w[E]>>>0,w[E]=v%256>>>0,v=v/256>>>0;if(v!==0)throw new Error("Non-zero carry");g=A,l++}if(p[l]!==" "){for(var S=x-g;S!==x&&w[S]===0;)S++;for(var B=new Uint8Array(y+(x-S)),I=y;S!==x;)B[I++]=w[S++];return B}}}function d(p){var l=h(p);if(l)return l;throw new Error("Non-base"+s+" character")}return{encode:f,decodeUnsafe:h,decode:d}}x1.exports=J3});var qs=_((LI,v1)=>{"use strict";var e8=new TextDecoder,t8=t=>e8.decode(t),r8=new TextEncoder,n8=t=>r8.encode(t);function i8(t,e){let r=new Uint8Array(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return r}v1.exports={decodeText:t8,encodeText:n8,concat:i8}});var E1=_((RI,w1)=>{"use strict";var{encodeText:o8}=qs(),Z0=class{constructor(e,r,n,i){this.name=e,this.code=r,this.codeBuf=o8(this.code),this.alphabet=i,this.codec=n(i)}encode(e){return this.codec.encode(e)}decode(e){for(let r of e)if(this.alphabet&&this.alphabet.indexOf(r)<0)throw new Error(`invalid character '${r}' in '${e}'`);return this.codec.decode(e)}};w1.exports=Z0});var C1=_((NI,S1)=>{"use strict";var s8=(t,e,r)=>{let n={};for(let u=0;u<e.length;++u)n[e[u]]=u;let i=t.length;for(;t[i-1]==="=";)--i;let o=new Uint8Array(i*r/8|0),s=0,a=0,c=0;for(let u=0;u<i;++u){let f=n[t[u]];if(f===void 0)throw new SyntaxError("Invalid character "+t[u]);a=a<<r|f,s+=r,s>=8&&(s-=8,o[c++]=255&a>>s)}if(s>=r||255&a<<8-s)throw new SyntaxError("Unexpected end of data");return o},a8=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},c8=t=>e=>({encode(r){return a8(r,e,t)},decode(r){return s8(r,e,t)}});S1.exports={rfc4648:c8}});var _1=_((PI,B1)=>{"use strict";var to=b1(),u8=E1(),{rfc4648:je}=C1(),{decodeText:f8,encodeText:h8}=qs(),l8=()=>({encode:f8,decode:h8}),A1=[["identity","\0",l8,""],["base2","0",je(1),"01"],["base8","7",je(3),"01234567"],["base10","9",to,"0123456789"],["base16","f",je(4),"0123456789abcdef"],["base16upper","F",je(4),"0123456789ABCDEF"],["base32hex","v",je(5),"0123456789abcdefghijklmnopqrstuv"],["base32hexupper","V",je(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV"],["base32hexpad","t",je(5),"0123456789abcdefghijklmnopqrstuv="],["base32hexpadupper","T",je(5),"0123456789ABCDEFGHIJKLMNOPQRSTUV="],["base32","b",je(5),"abcdefghijklmnopqrstuvwxyz234567"],["base32upper","B",je(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"],["base32pad","c",je(5),"abcdefghijklmnopqrstuvwxyz234567="],["base32padupper","C",je(5),"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567="],["base32z","h",je(5),"ybndrfg8ejkmcpqxot1uwisza345h769"],["base36","k",to,"0123456789abcdefghijklmnopqrstuvwxyz"],["base36upper","K",to,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"],["base58btc","z",to,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base58flickr","Z",to,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base64","m",je(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",je(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",je(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",je(6),"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],D1=A1.reduce((t,e)=>(t[e[0]]=new u8(e[0],e[1],e[2],e[3]),t),{}),d8=A1.reduce((t,e)=>(t[e[1]]=D1[e[0]],t),{});B1.exports={names:D1,codes:d8}});var k1=_((wr,I1)=>{"use strict";var fi=_1(),{encodeText:p8,decodeText:Hs,concat:T1}=qs();function y8(t,e){if(!e)throw new Error("requires an encoded Uint8Array");let{name:r,codeBuf:n}=En(t);return b8(r,e),T1([n,e],n.length+e.length)}function g8(t,e){let r=En(t),n=p8(r.encode(e));return T1([r.codeBuf,n],r.codeBuf.length+n.length)}function m8(t){t instanceof Uint8Array&&(t=Hs(t));let e=t[0];return["f","F","v","V","t","T","b","B","c","C","h","k","K"].includes(e)&&(t=t.toLowerCase()),En(t[0]).decode(t.substring(1))}function x8(t){if(t instanceof Uint8Array&&(t=Hs(t)),Object.prototype.toString.call(t)!=="[object String]")return!1;try{return En(t[0]).name}catch{return!1}}function b8(t,e){En(t).decode(Hs(e))}function En(t){if(Object.prototype.hasOwnProperty.call(fi.names,t))return fi.names[t];if(Object.prototype.hasOwnProperty.call(fi.codes,t))return fi.codes[t];throw new Error(`Unsupported encoding: ${t}`)}function v8(t){return t instanceof Uint8Array&&(t=Hs(t)),En(t[0])}wr=I1.exports=y8;wr.encode=g8;wr.decode=m8;wr.isEncoded=x8;wr.encoding=En;wr.encodingFromData=v8;var w8=Object.freeze(fi.names),E8=Object.freeze(fi.codes);wr.names=w8;wr.codes=E8});var P1=_((UI,N1)=>{N1.exports=R1;var L1=128,S8=127,C8=~S8,A8=Math.pow(2,31);function R1(t,e,r){e=e||[],r=r||0;for(var n=r;t>=A8;)e[r++]=t&255|L1,t/=128;for(;t&C8;)e[r++]=t&255|L1,t>>>=7;return e[r]=t|0,R1.bytes=r-n+1,e}});var F1=_((OI,O1)=>{O1.exports=J0;var D8=128,U1=127;function J0(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw J0.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&U1)<<i:(s&U1)*Math.pow(2,i),i+=7}while(s>=D8);return J0.bytes=o-n,r}});var K1=_((FI,M1)=>{var B8=Math.pow(2,7),_8=Math.pow(2,14),T8=Math.pow(2,21),I8=Math.pow(2,28),k8=Math.pow(2,35),L8=Math.pow(2,42),R8=Math.pow(2,49),N8=Math.pow(2,56),P8=Math.pow(2,63);M1.exports=function(t){return t<B8?1:t<_8?2:t<T8?3:t<I8?4:t<k8?5:t<L8?6:t<R8?7:t<N8?8:t<P8?9:10}});var q1=_((MI,V1)=>{V1.exports={encode:P1(),decode:F1(),encodingLength:K1()}});var z1=_((KI,H1)=>{"use strict";var U8=Object.freeze({identity:0,sha1:17,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:30,"murmur3-128":34,"murmur3-32":35,"dbl-sha2-256":86,md4:212,md5:213,bmt:214,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:4352,kangarootwelve:7425,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082});H1.exports={names:U8}});var $1=_((VI,G1)=>{"use strict";function O8(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function h(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";for(var y=0,g=0,x=0,w=l.length;x!==w&&l[x]===0;)x++,y++;for(var v=(w-x)*f+1>>>0,A=new Uint8Array(v);x!==w;){for(var E=l[x],S=0,B=v-1;(E!==0||S<g)&&B!==-1;B--,S++)E+=256*A[B]>>>0,A[B]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");g=S,x++}for(var I=v-g;I!==v&&A[I]===0;)I++;for(var U=c.repeat(y);I<v;++I)U+=t.charAt(A[I]);return U}function d(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;var y=0;if(l[y]!==" "){for(var g=0,x=0;l[y]===c;)g++,y++;for(var w=(l.length-y)*u+1>>>0,v=new Uint8Array(w);l[y];){var A=r[l.charCodeAt(y)];if(A===255)return;for(var E=0,S=w-1;(A!==0||E<x)&&S!==-1;S--,E++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");x=E,y++}if(l[y]!==" "){for(var B=w-x;B!==w&&v[B]===0;)B++;for(var I=new Uint8Array(g+(w-B)),U=g;B!==w;)I[U++]=v[B++];return I}}}function p(l){var y=d(l);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var F8=O8,M8=F8;G1.exports=M8});var ar=_(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});var W1=new Uint8Array(0),K8=t=>t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),V8=t=>{let e=t.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):W1},q8=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},H8=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},z8=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),G8=t=>new TextEncoder().encode(t),$8=t=>new TextDecoder().decode(t);sr.coerce=H8;sr.empty=W1;sr.equals=q8;sr.fromHex=V8;sr.fromString=G8;sr.isBinary=z8;sr.toHex=K8;sr.toString=$8});var Vt=_(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});var W8=$1(),Y8=ar(),eu=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},tu=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return nu(this,e)}},ru=class{constructor(e){this.decoders=e}or(e){return nu(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},nu=(t,e)=>new ru({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),zs=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new eu(e,r,n),this.decoder=new tu(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},iu=({name:t,prefix:e,encode:r,decode:n})=>new zs(t,e,r,n),j8=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=W8(r,e);return iu({prefix:t,name:e,encode:n,decode:o=>Y8.coerce(i(o))})},X8=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,c=0,u=0;for(let f=0;f<o;++f){let h=i[t[f]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},Q8=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},Z8=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>iu({prefix:e,name:t,encode(i){return Q8(i,n,r)},decode(i){return X8(i,n,r,t)}});Sn.Codec=zs;Sn.baseX=j8;Sn.from=iu;Sn.or=nu;Sn.rfc4648=Z8});var j1=_(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});var J8=Vt(),Y1=ar(),eE=J8.from({prefix:"\0",name:"identity",encode:t=>Y1.toString(t),decode:t=>Y1.fromString(t)});ou.identity=eE});var X1=_(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});var tE=Vt(),rE=tE.rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});su.base2=rE});var Q1=_(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});var nE=Vt(),iE=nE.rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});au.base8=iE});var Z1=_(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var oE=Vt(),sE=oE.baseX({prefix:"9",name:"base10",alphabet:"0123456789"});cu.base10=sE});var e2=_(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});var J1=Vt(),aE=J1.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),cE=J1.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});Gs.base16=aE;Gs.base16upper=cE});var uu=_(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});var Er=Vt(),uE=Er.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),fE=Er.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hE=Er.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),lE=Er.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),dE=Er.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),pE=Er.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),yE=Er.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),gE=Er.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),mE=Er.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});qt.base32=uE;qt.base32hex=dE;qt.base32hexpad=yE;qt.base32hexpadupper=gE;qt.base32hexupper=pE;qt.base32pad=hE;qt.base32padupper=lE;qt.base32upper=fE;qt.base32z=mE});var r2=_($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});var t2=Vt(),xE=t2.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),bE=t2.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});$s.base36=xE;$s.base36upper=bE});var fu=_(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});var n2=Vt(),vE=n2.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),wE=n2.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});Ws.base58btc=vE;Ws.base58flickr=wE});var i2=_(hi=>{"use strict";Object.defineProperty(hi,"__esModule",{value:!0});var Ys=Vt(),EE=Ys.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),SE=Ys.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),CE=Ys.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),AE=Ys.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});hi.base64=EE;hi.base64pad=SE;hi.base64url=CE;hi.base64urlpad=AE});var s2=_(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});var DE=Vt(),o2=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),BE=o2.reduce((t,e,r)=>(t[r]=e,t),[]),_E=o2.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function TE(t){return t.reduce((e,r)=>(e+=BE[r],e),"")}function IE(t){let e=[];for(let r of t){let n=_E[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var kE=DE.from({prefix:"\u{1F680}",name:"base256emoji",encode:TE,decode:IE});hu.base256emoji=kE});var h2=_((ek,f2)=>{"use strict";var LE=u2,a2=128,RE=127,NE=~RE,PE=Math.pow(2,31);function u2(t,e,r){e=e||[],r=r||0;for(var n=r;t>=PE;)e[r++]=t&255|a2,t/=128;for(;t&NE;)e[r++]=t&255|a2,t>>>=7;return e[r]=t|0,u2.bytes=r-n+1,e}var UE=lu,OE=128,c2=127;function lu(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw lu.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&c2)<<i:(s&c2)*Math.pow(2,i),i+=7}while(s>=OE);return lu.bytes=o-n,r}var FE=Math.pow(2,7),ME=Math.pow(2,14),KE=Math.pow(2,21),VE=Math.pow(2,28),qE=Math.pow(2,35),HE=Math.pow(2,42),zE=Math.pow(2,49),GE=Math.pow(2,56),$E=Math.pow(2,63),WE=function(t){return t<FE?1:t<ME?2:t<KE?3:t<VE?4:t<qE?5:t<HE?6:t<zE?7:t<GE?8:t<$E?9:10},YE={encode:LE,decode:UE,encodingLength:WE},jE=YE,XE=jE;f2.exports=XE});var no=_(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});var js=h2(),QE=(t,e=0)=>[js.decode(t,e),js.decode.bytes],ZE=(t,e,r=0)=>(js.encode(t,e,r),e),JE=t=>js.encodingLength(t);ro.decode=QE;ro.encodeTo=ZE;ro.encodingLength=JE});var pi=_(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});var l2=ar(),li=no(),e4=(t,e)=>{let r=e.byteLength,n=li.encodingLength(t),i=n+li.encodingLength(r),o=new Uint8Array(i+r);return li.encodeTo(t,o,0),li.encodeTo(r,o,n),o.set(e,i),new io(t,r,e,o)},t4=t=>{let e=l2.coerce(t),[r,n]=li.decode(e),[i,o]=li.decode(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new io(r,i,s,e)},r4=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&l2.equals(t.bytes,e.bytes),io=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};di.Digest=io;di.create=e4;di.decode=t4;di.equals=r4});var Zs=_(Qs=>{"use strict";Object.defineProperty(Qs,"__esModule",{value:!0});var d2=pi(),n4=({name:t,code:e,encode:r})=>new Xs(t,e,r),Xs=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?d2.create(this.code,r):r.then(n=>d2.create(this.code,n))}else throw Error("Unknown type, must be binary type")}};Qs.Hasher=Xs;Qs.from=n4});var m2=_(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var i4=Oe("crypto"),p2=Zs(),y2=ar();function o4(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var g2=o4(i4),s4=p2.from({name:"sha2-256",code:18,encode:t=>y2.coerce(g2.default.createHash("sha256").update(t).digest())}),a4=p2.from({name:"sha2-512",code:19,encode:t=>y2.coerce(g2.default.createHash("sha512").update(t).digest())});Js.sha256=s4;Js.sha512=a4});var v2=_(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});var c4=ar(),u4=pi(),x2=0,f4="identity",b2=c4.coerce,h4=t=>u4.create(x2,b2(t)),l4={code:x2,name:f4,encode:b2,digest:h4};du.identity=l4});var E2=_(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});var w2=ar(),d4="raw",p4=85,y4=t=>w2.coerce(t),g4=t=>w2.coerce(t);yi.code=p4;yi.decode=g4;yi.encode=y4;yi.name=d4});var S2=_(gi=>{"use strict";Object.defineProperty(gi,"__esModule",{value:!0});var m4=new TextEncoder,x4=new TextDecoder,b4="json",v4=512,w4=t=>m4.encode(JSON.stringify(t)),E4=t=>JSON.parse(x4.decode(t));gi.code=v4;gi.decode=E4;gi.encode=w4;gi.name=b4});var yu=_(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});var so=no(),ea=pi(),qr=fu(),na=uu(),S4=ar(),Ge=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:ra,byteLength:ra,code:ta,version:ta,multihash:ta,bytes:ta,_baseCache:ra,asCID:ra})}toV0(){switch(this.version){case 0:return this;default:{let{code:e,multihash:r}=this;if(e!==oo)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==B4)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ge.createV0(r)}}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=ea.create(e,r);return Ge.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&ea.equals(this.multihash,e.multihash)}toString(e){let{bytes:r,version:n,_baseCache:i}=this;switch(n){case 0:return A4(r,i,e||qr.base58btc.encoder);default:return D4(r,i,e||na.base32.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return T4(/^0\.0/,I4),!!(e&&(e[A2]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Ge)return e;if(e!=null&&e.asCID===e){let{version:r,code:n,multihash:i,bytes:o}=e;return new Ge(r,n,i,o||C2(r,n,i.bytes))}else if(e!=null&&e[A2]===!0){let{version:r,multihash:n,code:i}=e,o=ea.decode(n);return Ge.create(r,i,o)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==oo)throw new Error(`Version 0 CID must use dag-pb (code: ${oo}) block encoding`);return new Ge(e,r,n,n.bytes)}case 1:{let i=C2(e,r,n.bytes);return new Ge(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return Ge.create(0,oo,e)}static createV1(e,r){return Ge.create(1,e,r)}static decode(e){let[r,n]=Ge.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=Ge.inspectBytes(e),n=r.size-r.multihashSize,i=S4.coerce(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new ea.Digest(r.multihashCode,r.digestSize,o,i);return[r.version===0?Ge.createV0(s):Ge.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[h,d]=so.decode(e.subarray(r));return r+=d,h},i=n(),o=oo;if(i===18?(i=0,r=0):i===1&&(o=n()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),c=n(),u=r+c,f=u-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[n,i]=C4(e,r),o=Ge.decode(i);return o._baseCache.set(n,e),o}},C4=(t,e)=>{switch(t[0]){case"Q":{let r=e||qr.base58btc;return[qr.base58btc.prefix,r.decode(`${qr.base58btc.prefix}${t}`)]}case qr.base58btc.prefix:{let r=e||qr.base58btc;return[qr.base58btc.prefix,r.decode(t)]}case na.base32.prefix:{let r=e||na.base32;return[na.base32.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},A4=(t,e,r)=>{let{prefix:n}=r;if(n!==qr.base58btc.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},D4=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},oo=112,B4=18,C2=(t,e,r)=>{let n=so.encodingLength(t),i=n+so.encodingLength(e),o=new Uint8Array(i+r.byteLength);return so.encodeTo(t,o,0),so.encodeTo(e,o,n),o.set(r,i),o},A2=Symbol.for("@ipld/js-cid/CID"),ta={writable:!1,configurable:!1,enumerable:!0},ra={writable:!1,enumerable:!1,configurable:!1},_4="0.0.0-dev",T4=(t,e)=>{if(t.test(_4))console.warn(e);else throw new Error(e)},I4=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;pu.CID=Ge});var D2=_(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});var k4=yu(),L4=no(),R4=ar(),N4=Zs(),P4=pi();Cn.CID=k4.CID;Cn.varint=L4;Cn.bytes=R4;Cn.hasher=N4;Cn.digest=P4});var B2=_(cr=>{"use strict";Object.defineProperty(cr,"__esModule",{value:!0});var U4=j1(),O4=X1(),F4=Q1(),M4=Z1(),K4=e2(),V4=uu(),q4=r2(),H4=fu(),z4=i2(),G4=s2(),$4=m2(),W4=v2(),Y4=E2(),j4=S2();D2();var X4=yu(),Q4=Zs(),Z4=pi(),J4=no(),e6=ar(),t6={...U4,...O4,...F4,...M4,...K4,...V4,...q4,...H4,...z4,...G4},r6={...$4,...W4},n6={raw:Y4,json:j4};cr.CID=X4.CID;cr.hasher=Q4;cr.digest=Z4;cr.varint=J4;cr.bytes=e6;cr.bases=t6;cr.codecs=n6;cr.hashes=r6});var ia=_(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});function i6(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}gu.asUint8Array=i6});var mu=_(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});var _2=ia();function o6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null?_2.asUint8Array(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function s6(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?_2.asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}oa.alloc=o6;oa.allocUnsafe=s6});var bu=_((dk,L2)=>{"use strict";var T2=B2(),a6=mu();function k2(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var I2=k2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),xu=k2("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=a6.allocUnsafe(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),c6={utf8:I2,"utf-8":I2,hex:T2.bases.base16,latin1:xu,ascii:xu,binary:xu,...T2.bases};L2.exports=c6});var R2=_(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});var u6=bu();function f6(t,e="utf8"){let r=u6[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}vu.toString=f6});var N2=_(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});var h6=bu(),l6=ia();function d6(t,e="utf8"){let r=h6[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?l6.asUint8Array(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}wu.fromString=d6});var P2=_(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});var p6=mu(),y6=ia();function g6(t,e){e||(e=t.reduce((i,o)=>i+o.length,0));let r=p6.allocUnsafe(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return y6.asUint8Array(r)}Eu.concat=g6});var Cu=_((mk,V2)=>{"use strict";var U2=k1(),mi=q1(),{names:ao}=z1(),{toString:sa}=R2(),{fromString:m6}=N2(),{concat:x6}=P2(),xi={};for(let t in ao){let e=t;xi[ao[e]]=e}Object.freeze(xi);function b6(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return sa(t,"base16")}function v6(t){return m6(t,"base16")}function w6(t){if(!(t instanceof Uint8Array))throw new Error("must be passed a Uint8Array");return sa(U2.encode("base58btc",t)).slice(1)}function E6(t){let e=t instanceof Uint8Array?sa(t):t;return U2.decode("z"+e)}function O2(t){if(!(t instanceof Uint8Array))throw new Error("multihash must be a Uint8Array");if(t.length<2)throw new Error("multihash too short. must be > 2 bytes.");let e=mi.decode(t);if(!M2(e))throw new Error(`multihash unknown function code: 0x${e.toString(16)}`);t=t.slice(mi.decode.bytes);let r=mi.decode(t);if(r<0)throw new Error(`multihash invalid length: ${r}`);if(t=t.slice(mi.decode.bytes),t.length!==r)throw new Error(`multihash length inconsistent: 0x${sa(t,"base16")}`);return{code:e,name:xi[e],length:r,digest:t}}function S6(t,e,r){if(!t||e===void 0)throw new Error("multihash encode requires at least two args: digest, code");let n=F2(e);if(!(t instanceof Uint8Array))throw new Error("digest should be a Uint8Array");if(r==null&&(r=t.length),r&&t.length!==r)throw new Error("digest length should be equal to specified length.");let i=mi.encode(n),o=mi.encode(r);return x6([i,o,t],i.length+o.length+t.length)}function F2(t){let e=t;if(typeof t=="string"){if(ao[t]===void 0)throw new Error(`Unrecognized hash function named: ${t}`);e=ao[t]}if(typeof e!="number")throw new Error(`Hash function code should be a number. Got: ${e}`);if(xi[e]===void 0&&!Su(e))throw new Error(`Unrecognized function code: ${e}`);return e}function Su(t){return t>0&&t<16}function M2(t){return!!(Su(t)||xi[t])}function K2(t){O2(t)}function C6(t){return K2(t),t.subarray(0,2)}V2.exports={names:ao,codes:xi,toHexString:b6,fromHexString:v6,toB58String:w6,fromB58String:E6,decode:O2,encode:S6,coerceCode:F2,isAppCode:Su,validate:K2,prefix:C6,isValidCode:M2}});var U6={};$e(U6,{webRTC:()=>P6,webRTCDirect:()=>N6});var uo=Symbol.for("@libp2p/transport");var ku;(function(t){t[t.FATAL_ALL=0]="FATAL_ALL",t[t.NO_FATAL=1]="NO_FATAL"})(ku||(ku={}));var G=class extends Error{code;props;constructor(e,r,n){super(e),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var ht=re(qu(),1);var ma={};$e(ma,{base58btc:()=>Le,base58flickr:()=>Iy});function Ay(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=t.length,c=t.charAt(0),u=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function h(l){if(l instanceof Uint8Array||(ArrayBuffer.isView(l)?l=new Uint8Array(l.buffer,l.byteOffset,l.byteLength):Array.isArray(l)&&(l=Uint8Array.from(l))),!(l instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(l.length===0)return"";for(var y=0,g=0,x=0,w=l.length;x!==w&&l[x]===0;)x++,y++;for(var v=(w-x)*f+1>>>0,A=new Uint8Array(v);x!==w;){for(var E=l[x],S=0,B=v-1;(E!==0||S<g)&&B!==-1;B--,S++)E+=256*A[B]>>>0,A[B]=E%a>>>0,E=E/a>>>0;if(E!==0)throw new Error("Non-zero carry");g=S,x++}for(var I=v-g;I!==v&&A[I]===0;)I++;for(var U=c.repeat(y);I<v;++I)U+=t.charAt(A[I]);return U}function d(l){if(typeof l!="string")throw new TypeError("Expected String");if(l.length===0)return new Uint8Array;var y=0;if(l[y]!==" "){for(var g=0,x=0;l[y]===c;)g++,y++;for(var w=(l.length-y)*u+1>>>0,v=new Uint8Array(w);l[y];){var A=r[l.charCodeAt(y)];if(A===255)return;for(var E=0,S=w-1;(A!==0||E<x)&&S!==-1;S--,E++)A+=a*v[S]>>>0,v[S]=A%256>>>0,A=A/256>>>0;if(A!==0)throw new Error("Non-zero carry");x=E,y++}if(l[y]!==" "){for(var B=w-x;B!==w&&v[B]===0;)B++;for(var I=new Uint8Array(g+(w-B)),U=g;B!==w;)I[U++]=v[B++];return I}}}function p(l){var y=d(l);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:p}}var Dy=Ay,By=Dy,Hu=By;var W6=new Uint8Array(0);var zu=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},bt=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var Gu=t=>new TextEncoder().encode(t),$u=t=>new TextDecoder().decode(t);var da=class{constructor(e,r,n){this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},pa=class{constructor(e,r,n){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Yu(this,e)}},ya=class{constructor(e){this.decoders=e}or(e){return Yu(this,e)}decode(e){let r=e[0],n=this.decoders[r];if(n)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Yu=(t,e)=>new ya({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}}),ga=class{constructor(e,r,n,i){this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new da(e,r,n),this.decoder=new pa(e,r,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}},Tn=({name:t,prefix:e,encode:r,decode:n})=>new ga(t,e,r,n),Sr=({prefix:t,name:e,alphabet:r})=>{let{encode:n,decode:i}=Hu(r,e);return Tn({prefix:t,name:e,encode:n,decode:o=>bt(i(o))})},_y=(t,e,r,n)=>{let i={};for(let f=0;f<e.length;++f)i[e[f]]=f;let o=t.length;for(;t[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,c=0,u=0;for(let f=0;f<o;++f){let h=i[t[f]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,s[u++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},Ty=(t,e,r)=>{let n=e[e.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let c=0;c<t.length;++c)for(a=a<<8|t[c],s+=8;s>r;)s-=r,o+=e[i&a>>s];if(s&&(o+=e[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},Te=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>Tn({prefix:e,name:t,encode(i){return Ty(i,n,r)},decode(i){return _y(i,n,r,t)}});var Le=Sr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Iy=Sr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var xa={};$e(xa,{base32:()=>_t,base32hex:()=>Ny,base32hexpad:()=>Uy,base32hexpadupper:()=>Oy,base32hexupper:()=>Py,base32pad:()=>Ly,base32padupper:()=>Ry,base32upper:()=>ky,base32z:()=>Fy});var _t=Te({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ky=Te({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Ly=Te({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ry=Te({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Ny=Te({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Py=Te({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Uy=Te({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Oy=Te({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Fy=Te({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var ba={};$e(ba,{base64:()=>In,base64pad:()=>My,base64url:()=>Ky,base64urlpad:()=>Vy});var In=Te({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),My=Te({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ky=Te({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Vy=Te({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});ht.default.formatters.b=t=>t==null?"undefined":Le.baseEncode(t);ht.default.formatters.t=t=>t==null?"undefined":_t.baseEncode(t);ht.default.formatters.m=t=>t==null?"undefined":In.baseEncode(t);ht.default.formatters.p=t=>t==null?"undefined":t.toString();ht.default.formatters.c=t=>t==null?"undefined":t.toString();ht.default.formatters.k=t=>t==null?"undefined":t.toString();ht.default.formatters.a=t=>t==null?"undefined":t.toString();function qy(t){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=t,e.destroy=()=>!0,e.extend=()=>e,e}function Me(t){let e=qy(`${t}:trace`);return ht.default.enabled(`${t}:trace`)&&ht.default.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(e=(0,ht.default)(`${t}:trace`)),Object.assign((0,ht.default)(t),{error:(0,ht.default)(`${t}:error`),trace:e})}var ju=Symbol.for("@libp2p/peer-id");var va={};$e(va,{identity:()=>Hy});var Hy=Tn({prefix:"\0",name:"identity",encode:t=>$u(t),decode:t=>Gu(t)});var wa={};$e(wa,{base2:()=>zy});var zy=Te({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Ea={};$e(Ea,{base8:()=>Gy});var Gy=Te({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Sa={};$e(Sa,{base10:()=>$y});var $y=Sr({prefix:"9",name:"base10",alphabet:"0123456789"});var Ca={};$e(Ca,{base16:()=>Wy,base16upper:()=>Yy});var Wy=Te({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Yy=Te({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Aa={};$e(Aa,{base36:()=>jy,base36upper:()=>Xy});var jy=Sr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Xy=Sr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Da={};$e(Da,{base256emoji:()=>tg});var Xu=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Qy=Xu.reduce((t,e,r)=>(t[r]=e,t),[]),Zy=Xu.reduce((t,e,r)=>(t[e.codePointAt(0)]=r,t),[]);function Jy(t){return t.reduce((e,r)=>(e+=Qy[r],e),"")}function eg(t){let e=[];for(let r of t){let n=Zy[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(n)}return new Uint8Array(e)}var tg=Tn({prefix:"\u{1F680}",name:"base256emoji",encode:Jy,decode:eg});var ka={};$e(ka,{sha256:()=>Ye,sha512:()=>vg});var Ia=re(Oe("crypto"),1);var rg=Ju,Qu=128,ng=127,ig=~ng,og=Math.pow(2,31);function Ju(t,e,r){e=e||[],r=r||0;for(var n=r;t>=og;)e[r++]=t&255|Qu,t/=128;for(;t&ig;)e[r++]=t&255|Qu,t>>>=7;return e[r]=t|0,Ju.bytes=r-n+1,e}var sg=Ba,ag=128,Zu=127;function Ba(t,n){var r=0,n=n||0,i=0,o=n,s,a=t.length;do{if(o>=a)throw Ba.bytes=0,new RangeError("Could not decode varint");s=t[o++],r+=i<28?(s&Zu)<<i:(s&Zu)*Math.pow(2,i),i+=7}while(s>=ag);return Ba.bytes=o-n,r}var cg=Math.pow(2,7),ug=Math.pow(2,14),fg=Math.pow(2,21),hg=Math.pow(2,28),lg=Math.pow(2,35),dg=Math.pow(2,42),pg=Math.pow(2,49),yg=Math.pow(2,56),gg=Math.pow(2,63),mg=function(t){return t<cg?1:t<ug?2:t<fg?3:t<hg?4:t<lg?5:t<dg?6:t<pg?7:t<yg?8:t<gg?9:10},xg={encode:rg,decode:sg,encodingLength:mg},bg=xg,vi=bg;var wi=(t,e=0)=>[vi.decode(t,e),vi.decode.bytes],kn=(t,e,r=0)=>(vi.encode(t,e,r),e),Ln=t=>vi.encodingLength(t);var Ht=(t,e)=>{let r=e.byteLength,n=Ln(t),i=n+Ln(r),o=new Uint8Array(i+r);return kn(t,o,0),kn(r,o,n),o.set(e,i),new Rn(t,r,e,o)},zr=t=>{let e=bt(t),[r,n]=wi(e),[i,o]=wi(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Rn(r,i,s,e)},ef=(t,e)=>{if(t===e)return!0;{let r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&zu(t.bytes,r.bytes)}},Rn=class{constructor(e,r,n,i){this.code=e,this.size=r,this.digest=n,this.bytes=i}};var Ta=({name:t,code:e,encode:r})=>new _a(t,e,r),_a=class{constructor(e,r,n){this.name=e,this.code=r,this.encode=n}digest(e){if(e instanceof Uint8Array){let r=this.encode(e);return r instanceof Uint8Array?Ht(this.code,r):r.then(n=>Ht(this.code,n))}else throw Error("Unknown type, must be binary type")}};var Ye=Ta({name:"sha2-256",code:18,encode:t=>bt(Ia.default.createHash("sha256").update(t).digest())}),vg=Ta({name:"sha2-512",code:19,encode:t=>bt(Ia.default.createHash("sha512").update(t).digest())});var La={};$e(La,{identity:()=>Cr});var rf=0,wg="identity",nf=bt,Eg=t=>Ht(rf,nf(t)),Cr={code:rf,name:wg,encode:nf,digest:Eg};var v5=new TextEncoder,w5=new TextDecoder;var of=(t,e)=>{let{bytes:r,version:n}=t;switch(n){case 0:return Dg(r,Ra(t),e||Le.encoder);default:return Bg(r,Ra(t),e||_t.encoder)}};var sf=new WeakMap,Ra=t=>{let e=sf.get(t);if(e==null){let r=new Map;return sf.set(t,r),r}return e},xe=class{constructor(e,r,n,i){this.code=r,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:r}=this;if(e!==Ei)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==_g)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return xe.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:r}=this.multihash,n=Ht(e,r);return xe.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return xe.equals(this,e)}static equals(e,r){let n=r;return n&&e.code===n.code&&e.version===n.version&&ef(e.multihash,n.multihash)}toString(e){return of(this,e)}toJSON(){return{"/":of(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let r=e;if(r instanceof xe)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new xe(n,i,o,s||af(n,i,o.bytes))}else if(r[Tg]===!0){let{version:n,multihash:i,code:o}=r,s=zr(i);return xe.create(n,o,s)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==Ei)throw new Error(`Version 0 CID must use dag-pb (code: ${Ei}) block encoding`);return new xe(e,r,n,n.bytes)}case 1:{let i=af(e,r,n.bytes);return new xe(e,r,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return xe.create(0,Ei,e)}static createV1(e,r){return xe.create(1,e,r)}static decode(e){let[r,n]=xe.decodeFirst(e);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(e){let r=xe.inspectBytes(e),n=r.size-r.multihashSize,i=bt(e.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Rn(r.multihashCode,r.digestSize,o,i);return[r.version===0?xe.createV0(s):xe.createV1(r.codec,s),e.subarray(r.size)]}static inspectBytes(e){let r=0,n=()=>{let[h,d]=wi(e.subarray(r));return r+=d,h},i=n(),o=Ei;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),c=n(),u=r+c,f=u-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:f,size:u}}static parse(e,r){let[n,i]=Ag(e,r),o=xe.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ra(o).set(n,e),o}},Ag=(t,e)=>{switch(t[0]){case"Q":{let r=e||Le;return[Le.prefix,r.decode(`${Le.prefix}${t}`)]}case Le.prefix:{let r=e||Le;return[Le.prefix,r.decode(t)]}case _t.prefix:{let r=e||_t;return[_t.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},Dg=(t,e,r)=>{let{prefix:n}=r;if(n!==Le.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=e.get(n);if(i==null){let o=r.encode(t).slice(1);return e.set(n,o),o}else return i},Bg=(t,e,r)=>{let{prefix:n}=r,i=e.get(n);if(i==null){let o=r.encode(t);return e.set(n,o),o}else return i},Ei=112,_g=18,af=(t,e,r)=>{let n=Ln(t),i=n+Ln(e),o=new Uint8Array(i+r.byteLength);return kn(t,o,0),kn(e,o,n),o.set(r,i),o},Tg=Symbol.for("@ipld/js-cid/CID");var zt={...va,...wa,...Ea,...Sa,...Ca,...xa,...Aa,...ma,...ba,...Da},k5={...ka,...La};function Fe(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}var Ig=Symbol.for("nodejs.util.inspect.custom"),cf=Object.values(zt).map(t=>t.decoder).reduce((t,e)=>t.or(e),zt.identity.decoder),uf=114,Na=36,Pa=37,Si=class{type;multihash;privateKey;publicKey;string;constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[ju]=!0;toString(){return this.string==null&&(this.string=Le.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return xe.createV1(uf,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return Fe(this.multihash.bytes,e);if(typeof e=="string")return Ci(e).equals(this);if(e?.multihash?.bytes!=null)return Fe(this.multihash.bytes,e.multihash.bytes);throw new Error("not valid Id")}[Ig](){return`PeerId(${this.toString()})`}},Nn=class extends Si{type="RSA";publicKey;constructor(e){super({...e,type:"RSA"}),this.publicKey=e.publicKey}},Pn=class extends Si{type="Ed25519";publicKey;constructor(e){super({...e,type:"Ed25519"}),this.publicKey=e.multihash.digest}},Un=class extends Si{type="secp256k1";publicKey;constructor(e){super({...e,type:"secp256k1"}),this.publicKey=e.multihash.digest}};function Ci(t,e){if(e=e??cf,t.charAt(0)==="1"||t.charAt(0)==="Q"){let r=zr(Le.decode(`z${t}`));return t.startsWith("12D")?new Pn({multihash:r}):t.startsWith("16U")?new Un({multihash:r}):new Nn({multihash:r})}return kg(cf.decode(t))}function kg(t){try{let e=zr(t);if(e.code===Cr.code){if(e.digest.length===Na)return new Pn({multihash:e});if(e.digest.length===Pa)return new Un({multihash:e})}if(e.code===Ye.code)return new Nn({multihash:e})}catch{return Lg(xe.decode(t))}throw new Error("Supplied PeerID CID is invalid")}function Lg(t){if(t==null||t.multihash==null||t.version==null||t.version===1&&t.code!==uf)throw new Error("Supplied PeerID CID is invalid");let e=t.multihash;if(e.code===Ye.code)return new Nn({multihash:t.multihash});if(e.code===Cr.code){if(e.digest.length===Na)return new Pn({multihash:t.multihash});if(e.digest.length===Pa)return new Un({multihash:t.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Ua(t,e){return t.length===Na?new Pn({multihash:Ht(Cr.code,t),privateKey:e}):t.length===Pa?new Un({multihash:Ht(Cr.code,t),privateKey:e}):new Nn({multihash:await Ye.digest(t),publicKey:t,privateKey:e})}function Ar(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function ur(t=0){return globalThis.Buffer?.alloc!=null?Ar(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function vt(t=0){return globalThis.Buffer?.allocUnsafe!=null?Ar(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function hf(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var ff=hf("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Oa=hf("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);let e=vt(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Ng={utf8:ff,"utf-8":ff,hex:zt.base16,latin1:Oa,ascii:Oa,binary:Oa,...zt},go=Ng;function j(t,e="utf8"){let r=go[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):r.encoder.encode(t).substring(1)}var ja=re(mo(),1);function pe(t,e){e==null&&(e=t.reduce((i,o)=>i+o.length,0));let r=vt(e),n=0;for(let i of t)r.set(i,n),n+=i.length;return Ar(r)}var On=re(mo(),1);var xo=class{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){let r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){let r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,i){return this.readAtomically(()=>{let o=0,s=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",u=2**(8*i)-1;for(;;){let f=this.readAtomically(()=>{let h=this.readChar();if(h===void 0)return;let d=Number.parseInt(h,e);if(!Number.isNaN(d))return d});if(f===void 0)break;if(o*=e,o+=f,o>u||(s+=1,r!==void 0&&s>r))return}if(s!==0)return!n&&c&&s>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let r=0;r<e.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){let e=r=>{for(let n=0;n<r.length/2;n++){let i=n*2;if(n<r.length-3){let s=this.readSeparator(":",n,()=>this.readIPv4Addr());if(s!==void 0)return r[i]=s[0],r[i+1]=s[1],r[i+2]=s[2],r[i+3]=s[3],[i+4,!0]}let o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[i,!1];r[i]=o>>8,r[i+1]=o&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,i]=e(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let o=new Uint8Array(14),s=16-(n+2),[a]=e(o.subarray(0,s));return r.set(o.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var oS=new xo;var dS=parseInt("0xFFFF",16),pS=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function Ee(t,e="utf8"){let r=go[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ar(globalThis.Buffer.from(t,"utf-8")):r.decoder.decode(`${r.prefix}${t}`)}var Gt=re(mo(),1);var Dr=Oe("node:net");function bo(t){return!!(0,Dr.isIP)(t)}var Sf=Dr.isIPv4,Jg=Dr.isIPv6,Ka=function(t){let e=0;if(t=t.toString().trim(),Sf(t)){let r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(Jg(t)){let r=t.split(":",8),n;for(n=0;n<r.length;n++){let o=Sf(r[n]),s;o&&(s=Ka(r[n]),r[n]=j(s.slice(0,2),"base16")),s!=null&&++n<8&&r.splice(n,0,j(s.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let o=[n,1];for(n=9-r.length;n>0;n--)o.push("0");r.splice.apply(r,o)}let i=new Uint8Array(e+16);for(n=0;n<r.length;n++){let o=parseInt(r[n],16);i[e++]=o>>8&255,i[e++]=o&255}return i}throw new Error("invalid ip address")},Cf=function(t,e=0,r){e=~~e,r=r??t.length-e;let n=new DataView(t.buffer);if(r===4){let i=[];for(let o=0;o<r;o++)i.push(t[e+o]);return i.join(".")}if(r===16){let i=[];for(let o=0;o<r;o+=2)i.push(n.getUint16(e+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Ai={},Va={},tm=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];tm.forEach(t=>{let e=rm(...t);Va[e.code]=e,Ai[e.name]=e});function rm(t,e,r,n,i){return{code:t,size:e,name:r,resolvable:!!n,path:!!i}}function ye(t){if(typeof t=="number"){if(Va[t]!=null)return Va[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(Ai[t]!=null)return Ai[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var tC=ye("ip4"),rC=ye("ip6"),nC=ye("ipcidr");function Tf(t,e){switch(ye(t).code){case 4:case 41:return im(e);case 42:return Bf(e);case 6:case 273:case 33:case 132:return kf(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Bf(e);case 421:return cm(e);case 444:return _f(e);case 445:return _f(e);case 466:return am(e);default:return j(e,"base16")}}function If(t,e){switch(ye(t).code){case 4:return Af(e);case 41:return Af(e);case 42:return Df(e);case 6:case 273:case 33:case 132:return Ha(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Df(e);case 421:return om(e);case 444:return um(e);case 445:return fm(e);case 466:return sm(e);default:return Ee(e,"base16")}}var qa=Object.values(zt).map(t=>t.decoder),nm=function(){let t=qa[0].or(qa[1]);return qa.slice(2).forEach(e=>t=t.or(e)),t}();function Af(t){if(!bo(t))throw new Error("invalid ip address");return Ka(t)}function im(t){let e=Cf(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!bo(e))throw new Error("invalid ip address");return e}function Ha(t){let e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function kf(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function Df(t){let e=Ee(t),r=Uint8Array.from(Gt.default.encode(e.length));return pe([r,e],r.length+e.length)}function Bf(t){let e=Gt.default.decode(t);if(t=t.slice(Gt.default.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return j(t)}function om(t){let e;t[0]==="Q"||t[0]==="1"?e=zr(Le.decode(`z${t}`)).bytes:e=xe.parse(t).multihash.bytes;let r=Uint8Array.from(Gt.default.encode(e.length));return pe([r,e],r.length+e.length)}function sm(t){let e=nm.decode(t),r=Uint8Array.from(Gt.default.encode(e.length));return pe([r,e],r.length+e.length)}function am(t){let e=Gt.default.decode(t),r=t.slice(Gt.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return"u"+j(r,"base64url")}function cm(t){let e=Gt.default.decode(t),r=t.slice(Gt.default.decode.bytes);if(r.length!==e)throw new Error("inconsistent lengths");return j(r,"base58btc")}function um(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);let r=_t.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Ha(n);return pe([r,i],r.length+i.length)}function fm(t){let e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);let r=_t.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=Ha(n);return pe([r,i],r.length+i.length)}function _f(t){let e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=j(e,"base32"),i=kf(r);return`${n}:${i}`}function hm(t){let e=[],r=t.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],o=ye(i);if(o.size===0){e.push([i]);continue}if(n++,n>=r.length)throw Rf("invalid address: "+t);if(o.path===!0){e.push([i,Ya(r.slice(n).join("/"))]);break}e.push([i,r[n]])}return e}function lm(t){let e=[];return t.map(r=>{let n=Eo(r);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),Ya(e.join("/"))}function dm(t){return t.map(e=>{Array.isArray(e)||(e=[e]);let r=Eo(e);return e.length>1?[r.code,If(r.code,e[1])]:[r.code]})}function za(t){return t.map(e=>{let r=Eo(e);return e[1]!=null?[r.code,Tf(r.code,e[1])]:[r.code]})}function Ga(t){return wo(pe(t.map(e=>{let r=Eo(e),n=Uint8Array.from(On.default.encode(r.code));return e.length>1&&e[1]!=null&&(n=pe([n,e[1]])),n})))}function $a(t,e){return t.size>0?t.size/8:t.size===0?0:On.default.decode(e)+(On.default.decode.bytes??0)}function vo(t){let e=[],r=0;for(;r<t.length;){let n=On.default.decode(t,r),i=On.default.decode.bytes??0,o=ye(n),s=$a(o,t.slice(r+i));if(s===0){e.push([n]),r+=i;continue}let a=t.slice(r+i,r+i+s);if(r+=s+i,r>t.length)throw Rf("Invalid address Uint8Array: "+j(t,"base16"));e.push([n,a])}return e}function Wa(t){let e=vo(t),r=za(e);return lm(r)}function pm(t){t=Ya(t);let e=hm(t),r=dm(e);return Ga(r)}function Lf(t){return pm(t)}function wo(t){let e=ym(t);if(e!=null)throw e;return Uint8Array.from(t)}function ym(t){try{vo(t)}catch(e){return e}}function Ya(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function Rf(t){return new Error("Error parsing address: "+t)}function Eo(t){return ye(t[0])}var mm=Symbol.for("nodejs.util.inspect.custom"),xm=[ye("dns").code,ye("dns4").code,ye("dns6").code,ye("dnsaddr").code],bm=new Map,Nf=Symbol.for("@multiformats/js-multiaddr/multiaddr");function vm(t){return!!t?.[Nf]}var hr=class{bytes;#e;#r;#n;#t;[Nf]=!0;constructor(e){if(e==null&&(e=""),e instanceof Uint8Array)this.bytes=wo(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=Lf(e)}else if(vm(e))this.bytes=wo(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return this.#e==null&&(this.#e=Wa(this.bytes)),this.#e}toJSON(){return this.toString()}toOptions(){let e,r,n,i,o="",s=ye("tcp"),a=ye("udp"),c=ye("ip4"),u=ye("ip6"),f=ye("dns6"),h=ye("ip6zone");for(let[p,l]of this.stringTuples())p===h.code&&(o=`%${l??""}`),xm.includes(p)&&(r=s.name,i=443,n=`${l??""}${o}`,e=p===f.code?6:4),(p===s.code||p===a.code)&&(r=ye(p).name,i=parseInt(l??"")),(p===c.code||p===u.code)&&(r=ye(p).name,n=`${l??""}${o}`,e=p===u.code?6:4);if(e==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:i}}protos(){return this.protoCodes().map(e=>Object.assign({},ye(e)))}protoCodes(){let e=[],r=this.bytes,n=0;for(;n<r.length;){let i=ja.default.decode(r,n),o=ja.default.decode.bytes??0,s=ye(i),a=$a(s,r.slice(n+o));n+=a+o,e.push(i)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return this.#r==null&&(this.#r=vo(this.bytes)),this.#r}stringTuples(){return this.#n==null&&(this.#n=za(this.tuples())),this.#n}encapsulate(e){return e=new hr(e),new hr(this.toString()+e.toString())}decapsulate(e){let r=e.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new hr(n.slice(0,i))}decapsulateCode(e){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new hr(Ga(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===Ai.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?j(Le.decode(`z${n}`),"base58btc"):j(xe.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){if(this.#t===void 0)try{this.#t=this.stringTuples().filter(e=>ye(e[0]).path===!0)[0][1],this.#t==null&&(this.#t=null)}catch{this.#t=null}return this.#t}equals(e){return Fe(this.bytes,e.bytes)}async resolve(e){let r=this.protos().find(o=>o.resolvable);if(r==null)return[this];let n=bm.get(r.name);if(n==null)throw new G(`no available resolver for ${r.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,e)).map(o=>new hr(o))}nodeAddress(){let e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[mm](){return`Multiaddr(${Wa(this.bytes)})`}};function fr(t){return new hr(t)}var lt;(function(t){t.ERR_ALREADY_ABORTED="ERR_ALREADY_ABORTED",t.ERR_DATA_CHANNEL="ERR_DATA_CHANNEL",t.ERR_CONNECTION_CLOSED="ERR_CONNECTION_CLOSED",t.ERR_HASH_NOT_SUPPORTED="ERR_HASH_NOT_SUPPORTED",t.ERR_INVALID_MULTIADDR="ERR_INVALID_MULTIADDR",t.ERR_INVALID_FINGERPRINT="ERR_INVALID_FINGERPRINT",t.ERR_INVALID_PARAMETERS="ERR_INVALID_PARAMETERS",t.ERR_NOT_IMPLEMENTED="ERR_NOT_IMPLEMENTED",t.ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_INBOUND_PROTOCOL_STREAMS",t.ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS="ERR_TOO_MANY_OUTBOUND_PROTOCOL_STREAMS"})(lt||(lt={}));var Br=class extends G{constructor(e,r){super(`WebRTC transport error: ${e}`,r??""),this.name="WebRTCTransportError"}};var Xa=class extends Br{constructor(e,r){super(`[stream: ${e}] data channel error: ${r}`,lt.ERR_DATA_CHANNEL),this.name="WebRTC/DataChannelError"}};function rc(t,e){return new Xa(t,e)}var Qa=class extends Br{constructor(e){super(`There was a problem with the Multiaddr which was passed in: ${e}`,lt.ERR_INVALID_MULTIADDR),this.name="WebRTC/InappropriateMultiaddrError"}};function So(t){return new Qa(t)}var Za=class extends Br{constructor(e){super(`There was a problem with a provided argument: ${e}`,lt.ERR_INVALID_PARAMETERS),this.name="WebRTC/InvalidArgumentError"}};function Di(t){return new Za(t)}var Ja=class extends Br{constructor(e,r){super(`Invalid fingerprint "${e}" within ${r}`,lt.ERR_INVALID_FINGERPRINT),this.name="WebRTC/InvalidFingerprintError"}};function nc(t,e){return new Ja(t,e)}var ec=class extends Br{constructor(e){super(`A method (${e}) was called though it has been intentionally left unimplemented.`,lt.ERR_NOT_IMPLEMENTED),this.name="WebRTC/UnimplementedError"}};function Pf(t){return new ec(t)}var tc=class extends Br{constructor(e){super(`unsupported hash algorithm: ${e}`,lt.ERR_HASH_NOT_SUPPORTED),this.name="WebRTC/UnsupportedHashAlgorithmError"}};function Uf(t){return new tc(t)}var Xf=re(Yf(),1),jf=(0,Xf.detect)(),Bi=jf!=null&&jf.name==="firefox",Co=async function*(){},Ao=async t=>{};var Qf=Me("libp2p:webrtc:connection"),$r=class{peerConnection;remoteAddr;timeline;metrics;source=Co();sink=Ao;constructor(e){this.remoteAddr=e.remoteAddr,this.timeline=e.timeline,this.peerConnection=e.peerConnection,this.peerConnection.onconnectionstatechange=()=>{(this.peerConnection.connectionState==="closed"||this.peerConnection.connectionState==="disconnected"||this.peerConnection.connectionState==="failed")&&(this.timeline.close=Date.now())}}async close(e){e!==void 0&&Qf.error("error closing connection",e),Qf.trace("closing connection"),this.timeline.close=Date.now(),this.peerConnection.close(),this.metrics?.increment({close:!0})}};var _i=class extends Error{constructor(e,r){super(e??"The operation was aborted"),this.type="aborted",this.code=r??"ABORT_ERR"}};function Zf(t){if(t!=null){if(typeof t[Symbol.iterator]=="function")return t[Symbol.iterator]();if(typeof t[Symbol.asyncIterator]=="function")return t[Symbol.asyncIterator]();if(typeof t.next=="function")return t}throw new Error("argument is not an iterator or iterable")}function Do(t,e,r){let n=r??{},i=Zf(t);async function*o(){let s,a=()=>{s?.()};for(e.addEventListener("abort",a);;){let c;try{if(e.aborted){let{abortMessage:f,abortCode:h}=n;throw new _i(f,h)}let u=new Promise((f,h)=>{s=()=>{let{abortMessage:d,abortCode:p}=n;h(new _i(d,p))}});c=await Promise.race([u,i.next()]),s=null}catch(u){e.removeEventListener("abort",a);let f=u.type==="aborted"&&e.aborted;if(f&&n.onAbort!=null&&n.onAbort(t),typeof i.return=="function")try{let h=i.return();h instanceof Promise&&h.catch(d=>{n.onReturnError!=null&&n.onReturnError(d)})}catch(h){n.onReturnError!=null&&n.onReturnError(h)}if(f&&n.returnOnAbort===!0)return;throw u}if(c.done===!0)break;yield c.value}e.removeEventListener("abort",a)}return o()}function Bm(t,e,r){return n=>t(Do(n,e,r))}function oc(t,e,r){return{sink:Bm(t.sink,e,{...r,onAbort:void 0}),source:Do(t.source,e,r)}}var eh=Symbol.for("@achingbrain/uint8arraylist");function Jf(t,e){if(e==null||e<0)throw new RangeError("index is out of bounds");let r=0;for(let n of t){let i=r+n.byteLength;if(e<i)return{buf:n,index:e-r};r=i}throw new RangeError("index is out of bounds")}function Bo(t){return!!t?.[eh]}var Re=class{constructor(...e){Object.defineProperty(this,eh,{value:!0}),this.bufs=[],this.length=0,e.length>0&&this.appendAll(e)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...e){this.appendAll(e)}appendAll(e){let r=0;for(let n of e)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(Bo(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...e){this.prependAll(e)}prependAll(e){let r=0;for(let n of e.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(Bo(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(e){let r=Jf(this.bufs,e);return r.buf[r.index]}set(e,r){let n=Jf(this.bufs,e);n.buf[n.index]=r}write(e,r=0){if(e instanceof Uint8Array)for(let n=0;n<e.length;n++)this.set(r+n,e[n]);else if(Bo(e))for(let n=0;n<e.length;n++)this.set(r+n,e.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(e){if(e=Math.trunc(e),!(Number.isNaN(e)||e<=0)){if(e===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(e>=this.bufs[0].byteLength)e-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(e),this.length-=e;break}}}slice(e,r){let{bufs:n,length:i}=this._subList(e,r);return pe(n,i)}subarray(e,r){let{bufs:n,length:i}=this._subList(e,r);return n.length===1?n[0]:pe(n,i)}sublist(e,r){let{bufs:n,length:i}=this._subList(e,r),o=new Re;return o.length=i,o.bufs=n,o}_subList(e,r){if(e=e??0,r=r??this.length,e<0&&(e=this.length+e),r<0&&(r=this.length+r),e<0||r>this.length)throw new RangeError("index is out of bounds");if(e===r)return{bufs:[],length:0};if(e===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let o=0;o<this.bufs.length;o++){let s=this.bufs[o],a=i,c=a+s.byteLength;if(i=c,e>=c)continue;let u=e>=a&&e<c,f=r>a&&r<=c;if(u&&f){if(e===a&&r===c){n.push(s);break}let h=e-a;n.push(s.subarray(h,h+(r-e)));break}if(u){if(e===0){n.push(s);continue}n.push(s.subarray(e-a));continue}if(f){if(r===c){n.push(s);break}n.push(s.subarray(0,r-a));break}n.push(s)}return{bufs:n,length:r-e}}indexOf(e,r=0){if(!Bo(e)&&!(e instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=e instanceof Uint8Array?e:e.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),e.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let o=256,s=new Int32Array(o);for(let h=0;h<o;h++)s[h]=-1;for(let h=0;h<i;h++)s[n[h]]=h;let a=s,c=this.byteLength-n.byteLength,u=n.byteLength-1,f;for(let h=r;h<=c;h+=f){f=0;for(let d=u;d>=0;d--){let p=this.get(h+d);if(n[d]!==p){f=Math.max(1,d-a[p]);break}}if(f===0)return h}return-1}getInt8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(e,r){let n=vt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,e)}getInt16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(e,r,n){let i=ur(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,e)}getInt32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(e,r,n){let i=ur(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,e)}getBigInt64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(e,r,n){let i=ur(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,e)}getUint8(e){let r=this.subarray(e,e+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(e,r){let n=vt(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,e)}getUint16(e,r){let n=this.subarray(e,e+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(e,r,n){let i=ur(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,e)}getUint32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(e,r,n){let i=ur(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,e)}getBigUint64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(e,r,n){let i=ur(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,e)}getFloat32(e,r){let n=this.subarray(e,e+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(e,r,n){let i=ur(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,e)}getFloat64(e,r){let n=this.subarray(e,e+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(e,r,n){let i=ur(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,e)}equals(e){if(e==null||!(e instanceof Re)||e.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!Fe(this.bufs[r],e.bufs[r]))return!1;return!0}static fromUint8Arrays(e,r){let n=new Re;return n.bufs=e,r==null&&(r=e.reduce((i,o)=>i+o.byteLength,0)),n.length=r,n}};function _o(t){return t instanceof Uint8Array?{get(e){return t[e]},set(e,r){t[e]=r}}:{get(e){return t.get(e)},set(e,r){t.set(e,r)}}}var th=4294967296,dt=class{constructor(e=0,r=0){this.hi=e,this.lo=r}toBigInt(e){if(e===!0)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(e){return Number(this.toBigInt(e))}zzDecode(){let e=-(this.lo&1),r=((this.lo>>>1|this.hi<<31)^e)>>>0,n=(this.hi>>>1^e)>>>0;return new dt(n,r)}zzEncode(){let e=this.hi>>31,r=((this.hi<<1|this.lo>>>31)^e)>>>0,n=(this.lo<<1^e)>>>0;return new dt(r,n)}toBytes(e,r=0){let n=_o(e);for(;this.hi>0;)n.set(r++,this.lo&127|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)n.set(r++,this.lo&127|128),this.lo=this.lo>>>7;n.set(r++,this.lo)}static fromBigInt(e){if(e===0n)return new dt;let r=e<0;r&&(e=-e);let n=Number(e>>32n)|0,i=Number(e-(BigInt(n)<<32n))|0;return r&&(n=~n>>>0,i=~i>>>0,++i>th&&(i=0,++n>th&&(n=0))),new dt(n,i)}static fromNumber(e){if(e===0)return new dt;let r=e<0;r&&(e=-e);let n=e>>>0,i=(e-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new dt(i,n)}static fromBytes(e,r=0){let n=_o(e),i=new dt,o=0;if(e.length-r>4){for(;o<4;++o)if(i.lo=(i.lo|(n.get(r)&127)<<o*7)>>>0,n.get(r++)<128)return i;if(i.lo=(i.lo|(n.get(r)&127)<<28)>>>0,i.hi=(i.hi|(n.get(r)&127)>>4)>>>0,n.get(r++)<128)return i;o=0}else for(;o<4;++o){if(r>=e.length)throw RangeError(`index out of range: ${r} > ${e.length}`);if(i.lo=(i.lo|(n.get(r)&127)<<o*7)>>>0,n.get(r++)<128)return i}if(e.length-r>4){for(;o<5;++o)if(i.hi=(i.hi|(n.get(r)&127)<<o*7+3)>>>0,n.get(r++)<128)return i}else if(r<e.byteLength)for(;o<5;++o){if(r>=e.length)throw RangeError(`index out of range: ${r} > ${e.length}`);if(i.hi=(i.hi|(n.get(r)&127)<<o*7+3)>>>0,n.get(r++)<128)return i}throw RangeError("invalid varint encoding")}};var _m=Math.pow(2,7),Tm=Math.pow(2,14),Im=Math.pow(2,21),km=Math.pow(2,28),Lm=Math.pow(2,35),Rm=Math.pow(2,42),Nm=Math.pow(2,49),Pm=Math.pow(2,56),Um=Math.pow(2,63),lr={encodingLength(t){return t<_m?1:t<Tm?2:t<Im?3:t<km?4:t<Lm?5:t<Rm?6:t<Nm?7:t<Pm?8:t<Um?9:10},encode(t,e,r=0){if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return e==null&&(e=vt(lr.encodingLength(t))),dt.fromNumber(t).toBytes(e,r),e},decode(t,e=0){return dt.fromBytes(t,e).toNumber(!0)}};function To(t){return t[Symbol.asyncIterator]!=null}var Io=t=>{let e=lr.encodingLength(t),r=vt(e);return lr.encode(t,r),Io.bytes=e,r};Io.bytes=0;function Wr(t,e){e=e??{};let r=e.lengthEncoder??Io;function*n(i){let o=r(i.byteLength);o instanceof Uint8Array?yield o:yield*o,i instanceof Uint8Array?yield i:yield*i}return To(t)?async function*(){for await(let i of t)yield*n(i)}():function*(){for(let i of t)yield*n(i)}()}Wr.single=(t,e)=>{e=e??{};let r=e.lengthEncoder??Io;return new Re(r(t.byteLength),t)};var Fn=re(sc(),1);var Fm=8,Mm=1024*1024*4,Yr;(function(t){t[t.LENGTH=0]="LENGTH",t[t.DATA=1]="DATA"})(Yr||(Yr={}));var ac=t=>{let e=lr.decode(t);return ac.bytes=lr.encodingLength(e),e};ac.bytes=0;function jr(t,e){let r=new Re,n=Yr.LENGTH,i=-1,o=e?.lengthDecoder??ac,s=e?.maxLengthLength??Fm,a=e?.maxDataLength??Mm;function*c(){for(;r.byteLength>0;){if(n===Yr.LENGTH)try{if(i=o(r),i<0)throw(0,Fn.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw(0,Fn.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let u=o.bytes;r.consume(u),e?.onLength!=null&&e.onLength(i),n=Yr.DATA}catch(u){if(u instanceof RangeError){if(r.byteLength>s)throw(0,Fn.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw u}if(n===Yr.DATA){if(r.byteLength<i)break;let u=r.sublist(0,i);r.consume(i),e?.onData!=null&&e.onData(u),yield u,n=Yr.LENGTH}}}return To(t)?async function*(){for await(let u of t)r.append(u),yield*c();if(r.byteLength>0)throw(0,Fn.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(let u of t)r.append(u),yield*c();if(r.byteLength>0)throw(0,Fn.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}jr.fromReader=(t,e)=>{let r=1,n=async function*(){for(;;)try{let{done:o,value:s}=await t.next(r);if(o===!0)return;s!=null&&(yield s)}catch(o){if(o.code==="ERR_UNDER_READ")return{done:!0,value:null};throw o}finally{r=1}}();return jr(n,{...e??{},onLength:o=>{r=o}})};var ko=class{constructor(e){if(!(e>0)||e-1&e)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(e),this.mask=e-1,this.top=0,this.btm=0,this.next=null}push(e){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=e,this.top=this.top+1&this.mask,!0)}shift(){let e=this.buffer[this.btm];if(e!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,e}isEmpty(){return this.buffer[this.btm]===void 0}},Mn=class{constructor(e={}){this.hwm=e.splitLimit??16,this.head=new ko(this.hwm),this.tail=this.head,this.size=0}calculateSize(e){return e?.byteLength!=null?e.byteLength:1}push(e){if(e?.value!=null&&(this.size+=this.calculateSize(e.value)),!this.head.push(e)){let r=this.head;this.head=r.next=new ko(2*this.head.buffer.length),this.head.push(e)}}shift(){let e=this.tail.shift();if(e===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,e=this.tail.shift()}return e?.value!=null&&(this.size-=this.calculateSize(e.value)),e}isEmpty(){return this.head.isEmpty()}};function $t(t={}){return Km(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},t)}function Km(t,e){e=e??{};let r=e.onEnd,n=new Mn,i,o,s,a=async()=>n.isEmpty()?s?{done:!0}:await new Promise((y,g)=>{o=x=>{o=null,n.push(x);try{y(t(n))}catch(w){g(w)}return i}}):t(n),c=y=>o!=null?o(y):(n.push(y),i),u=y=>(n=new Mn,o!=null?o({error:y}):(n.push({error:y}),i)),f=y=>{if(s)return i;if(e?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:y})},h=y=>s?i:(s=!0,y!=null?u(y):c({done:!0})),d=()=>(n=new Mn,h(),{done:!0}),p=y=>(h(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:d,throw:p,push:f,end:h,get readableLength(){return n.size}},r==null)return i;let l=i;return i={[Symbol.asyncIterator](){return this},next(){return l.next()},throw(y){return l.throw(y),r!=null&&(r(y),r=void 0),{done:!0}},return(){return l.return(),r!=null&&(r(),r=void 0),{done:!0}},push:f,end(y){return l.end(y),r!=null&&(r(y),r=void 0),i},get readableLength(){return l.readableLength}},i}var Lo=re(sc(),1),oh=t=>lr.decode(t);oh.bytes=0;function Kn(t,e){let r=$t();t.sink(r).catch(s=>{r.end(s)}),t.sink=async s=>{for await(let a of s)r.push(a);r.end()};let n=t.source;t.source[Symbol.iterator]!=null?n=t.source[Symbol.iterator]():t.source[Symbol.asyncIterator]!=null&&(n=t.source[Symbol.asyncIterator]());let i=new Re,o={read:async s=>{if(s==null){let{done:c,value:u}=await n.next();return c===!0?new Re:u}for(;i.byteLength<s;){let{value:c,done:u}=await n.next();if(u===!0)throw(0,Lo.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");i.append(c)}let a=i.sublist(0,s);return i.consume(s),a},readLP:async()=>{let s=-1,a=new Re,c=e?.lengthDecoder??oh;for(;;){a.append(await o.read(1));try{s=c(a)}catch(u){if(u instanceof RangeError)continue;throw u}if(s>-1)break;if(e?.maxLengthLength!=null&&a.byteLength>e.maxLengthLength)throw(0,Lo.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG")}if(e?.maxDataLength!=null&&s>e.maxDataLength)throw(0,Lo.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");return await o.read(s)},readPB:async s=>{let a=await o.readLP();if(a==null)throw new Error("Value is null");let c=a instanceof Uint8Array?a:a.subarray();return s.decode(c)},write:s=>{s instanceof Uint8Array?r.push(s):r.push(s.subarray())},writeLP:s=>{o.write(Wr.single(s,e))},writePB:(s,a)=>{o.writeLP(a.encode(s))},pb:s=>({read:async()=>await o.readPB(s),write:a=>{o.writePB(a,s)},unwrap:()=>o}),unwrap:()=>{let s=t.source;return t.source=async function*(){yield*i,yield*s}(),t}};return o}function Xr(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t}function sh(t){let e=new globalThis.AbortController;function r(){e.abort();for(let o of t)o?.removeEventListener!=null&&o.removeEventListener("abort",r)}for(let o of t){if(o?.aborted===!0){r();break}o?.addEventListener!=null&&o.addEventListener("abort",r)}function n(){for(let o of t)o?.removeEventListener!=null&&o.removeEventListener("abort",r)}let i=e.signal;return i.clear=n,i}var pt=Me("libp2p:stream"),cc="ERR_STREAM_RESET",Vm="ERR_STREAM_ABORT",qm="ERR_SINK_ENDED",Hm="ERR_DOUBLE_SINK";function Qr(t){return t!=null&&typeof t.then=="function"}var Ro=class{id;stat;metadata;source;abortController;resetController;closeController;sourceEnded;sinkEnded;sinkSunk;endErr;streamSource;onEnd;maxDataSize;constructor(e){this.abortController=new AbortController,this.resetController=new AbortController,this.closeController=new AbortController,this.sourceEnded=!1,this.sinkEnded=!1,this.sinkSunk=!1,this.id=e.id,this.metadata=e.metadata??{},this.stat={direction:e.direction,timeline:{open:Date.now()}},this.maxDataSize=e.maxDataSize,this.onEnd=e.onEnd,this.source=this.streamSource=$t({onEnd:()=>{if(this.stat.timeline.reset!==null){let r=this.sendCloseRead();Qr(r)&&r.catch(n=>{pt.error("error while sending close read",n)})}this.onSourceEnd()}}),this.sink=this.sink.bind(this)}onSourceEnd(e){this.sourceEnded||(this.stat.timeline.closeRead=Date.now(),this.sourceEnded=!0,pt.trace("%s stream %s source end - err: %o",this.stat.direction,this.id,e),e!=null&&this.endErr==null&&(this.endErr=e),this.sinkEnded&&(this.stat.timeline.close=Date.now(),this.onEnd!=null&&this.onEnd(this.endErr)))}onSinkEnd(e){this.sinkEnded||(this.stat.timeline.closeWrite=Date.now(),this.sinkEnded=!0,pt.trace("%s stream %s sink end - err: %o",this.stat.direction,this.id,e),e!=null&&this.endErr==null&&(this.endErr=e),this.sourceEnded&&(this.stat.timeline.close=Date.now(),this.onEnd!=null&&this.onEnd(this.endErr)))}close(){pt.trace("%s stream %s close",this.stat.direction,this.id),this.closeRead(),this.closeWrite()}closeRead(){pt.trace("%s stream %s closeRead",this.stat.direction,this.id),!this.sourceEnded&&this.streamSource.end()}closeWrite(){if(pt.trace("%s stream %s closeWrite",this.stat.direction,this.id),!this.sinkEnded){this.closeController.abort();try{let e=this.sendCloseWrite();Qr(e)&&e.catch(r=>{pt.error("error while sending close write",r)})}catch(e){pt.trace("%s stream %s error sending close",this.stat.direction,this.id,e)}this.onSinkEnd()}}abort(e){pt.trace("%s stream %s abort",this.stat.direction,this.id,e),this.streamSource.end(e),this.abortController.abort(),this.onSinkEnd(e)}reset(){let e=new G("stream reset",cc);this.resetController.abort(),this.streamSource.end(e),this.onSinkEnd(e)}async sink(e){if(this.sinkSunk)throw new G("sink already called on stream",Hm);if(this.sinkSunk=!0,this.sinkEnded)throw new G("stream closed for writing",qm);let r=sh([this.abortController.signal,this.resetController.signal,this.closeController.signal]);try{if(e=Do(e,r),this.stat.direction==="outbound"){let n=this.sendNewStream();Qr(n)&&await n}for await(let n of e)for(;n.length>0;){if(n.length<=this.maxDataSize){let o=this.sendData(n instanceof Uint8Array?new Re(n):n);Qr(o)&&await o;break}n=n instanceof Uint8Array?new Re(n):n;let i=this.sendData(n.sublist(0,this.maxDataSize));Qr(i)&&await i,n.consume(this.maxDataSize)}}catch(n){if(n.type==="aborted"&&n.message==="The operation was aborted"){if(this.closeController.signal.aborted)return;this.resetController.signal.aborted&&(n.message="stream reset",n.code=cc),this.abortController.signal.aborted&&(n.message="stream aborted",n.code=Vm)}if(n.code===cc)pt.trace("%s stream %s reset",this.stat.direction,this.id);else{pt.trace("%s stream %s error",this.stat.direction,this.id,n);try{let i=this.sendReset();Qr(i)&&await i,this.stat.timeline.reset=Date.now()}catch(i){pt.trace("%s stream %s error sending reset",this.stat.direction,this.id,i)}}throw this.streamSource.end(n),this.onSinkEnd(n),n}finally{r.clear()}try{let n=this.sendCloseWrite();Qr(n)&&await n}catch(n){pt.trace("%s stream %s error sending close",this.stat.direction,this.id,n)}this.onSinkEnd()}sourcePush(e){this.streamSource.push(e)}sourceReadableLength(){return this.streamSource.readableLength}};var Vn=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},uc=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}},ah=t=>globalThis.DOMException===void 0?new uc(t):new DOMException(t),ch=t=>{let e=t.reason===void 0?ah("This operation was aborted."):t.reason;return e instanceof Error?e:ah(e)};function fc(t,e){let{milliseconds:r,fallback:n,message:i,customTimers:o={setTimeout,clearTimeout}}=e,s,c=new Promise((u,f)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(e.signal){let{signal:d}=e;d.aborted&&f(ch(d)),d.addEventListener("abort",()=>{f(ch(d))})}if(r===Number.POSITIVE_INFINITY){t.then(u,f);return}let h=new Vn;s=o.setTimeout.call(void 0,()=>{if(n){try{u(n())}catch(d){f(d)}return}typeof t.cancel=="function"&&t.cancel(),i===!1?u():i instanceof Error?f(i):(h.message=i??`Promise timed out after ${r} milliseconds`,f(h))},r),(async()=>{try{u(await t)}catch(d){f(d)}})()}).finally(()=>{c.clear()});return c.clear=()=>{o.clearTimeout.call(void 0,s),s=void 0},c}var zm=t=>{let e=t.on||t.addListener||t.addEventListener,r=t.off||t.removeListener||t.removeEventListener;if(!e||!r)throw new TypeError("Emitter is not compatible");return{addListener:e.bind(t),removeListener:r.bind(t)}};function Gm(t,e,r){let n,i=new Promise((o,s)=>{if(r={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...r},!(r.count>=0&&(r.count===Number.POSITIVE_INFINITY||Number.isInteger(r.count))))throw new TypeError("The `count` option should be at least 0 or more");r.signal?.throwIfAborted();let a=[e].flat(),c=[],{addListener:u,removeListener:f}=zm(t),h=(...p)=>{let l=r.multiArgs?p:p[0];r.filter&&!r.filter(l)||(c.push(l),r.count===c.length&&(n(),o(c)))},d=p=>{n(),s(p)};n=()=>{for(let p of a)f(p,h);for(let p of r.rejectionEvents)f(p,d)};for(let p of a)u(p,h);for(let p of r.rejectionEvents)u(p,d);r.signal&&r.signal.addEventListener("abort",()=>{d(r.signal.reason)},{once:!0}),r.resolveImmediately&&o(c)});if(i.cancel=n,typeof r.timeout=="number"){let o=fc(i,{milliseconds:r.timeout});return o.cancel=n,o}return i}function uh(t,e,r){typeof r=="function"&&(r={filter:r}),r={...r,count:1,resolveImmediately:!1};let n=Gm(t,e,r),i=n.then(o=>o[0]);return i.cancel=n.cancel,i}var Sc=re(yc(),1),Xh=re(qh(),1),Qh=re(Jr(),1),Cc=re(Ec(),1),Zh=re(jh(),1);function ex(){Qh.default._configure(),Sc.default._configure(Xh.default),Cc.default._configure(Zh.default)}ex();var Jh=["uint64","int64","sint64","fixed64","sfixed64"];function tx(t){for(let e of Jh){if(t[e]==null)continue;let r=t[e];t[e]=function(){return BigInt(r.call(this).toString())}}return t}function Ac(t){return tx(new Sc.default(t))}function rx(t){for(let e of Jh){if(t[e]==null)continue;let r=t[e];t[e]=function(n){return r.call(this,n.toString())}}return t}function Dc(){return rx(Cc.default.create())}function kt(t,e){let r=Ac(t instanceof Uint8Array?t:t.subarray());return e.decode(r)}function Lt(t,e){let r=Dc();return e.encode(t,r,{lengthDelimited:!1}),r.finish()}var Hn;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(Hn||(Hn={}));function Fo(t,e,r,n){return{name:t,type:e,encode:r,decode:n}}function tn(t){function e(i){if(t[i.toString()]==null)throw new Error("Invalid enum value");return t[i]}let r=function(o,s){let a=e(o);s.int32(a)},n=function(o){let s=o.int32();return e(s)};return Fo("enum",Hn.VARINT,r,n)}function Rt(t,e){return Fo("message",Hn.LENGTH_DELIMITED,t,e)}var Et;(function(t){let e;(function(i){i.FIN="FIN",i.STOP_SENDING="STOP_SENDING",i.RESET="RESET"})(e=t.Flag||(t.Flag={}));let r;(function(i){i[i.FIN=0]="FIN",i[i.STOP_SENDING=1]="STOP_SENDING",i[i.RESET=2]="RESET"})(r||(r={})),function(i){i.codec=()=>tn(r)}(e=t.Flag||(t.Flag={}));let n;t.codec=()=>(n==null&&(n=Rt((i,o,s={})=>{s.lengthDelimited!==!1&&o.fork(),i.flag!=null&&(o.uint32(8),t.Flag.codec().encode(i.flag,o)),i.message!=null&&(o.uint32(18),o.bytes(i.message)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:s.flag=t.Flag.codec().decode(i);break;case 2:s.message=i.bytes();break;default:i.skipType(c&7);break}}return s})),n),t.encode=i=>Lt(i,t.codec()),t.decode=i=>kt(i,t.codec())})(Et||(Et={}));var Mo=Me("libp2p:webrtc:stream"),el=16*1024,nx=16*1024*1024,ix=30*1e3,ox=3,Bc=class extends Ro{channel;dataChannelOptions;incomingData;messageQueue;constructor(e){switch(super(e),this.channel=e.channel,this.channel.binaryType="arraybuffer",this.incomingData=$t(),this.messageQueue=new Re,this.dataChannelOptions={bufferedAmountLowEventTimeout:e.dataChannelOptions?.bufferedAmountLowEventTimeout??ix,maxBufferedAmount:e.dataChannelOptions?.maxBufferedAmount??nx,maxMessageSize:e.dataChannelOptions?.maxMessageSize??el},this.channel.readyState){case"open":break;case"closed":case"closing":(this.stat.timeline.close===void 0||this.stat.timeline.close===0)&&(this.stat.timeline.close=Date.now());break;case"connecting":break;default:throw Mo.error("unknown datachannel state %s",this.channel.readyState),new G("Unknown datachannel state","ERR_INVALID_STATE")}this.channel.onopen=n=>{this.stat.timeline.open=new Date().getTime(),this.messageQueue!=null&&(this._sendMessage(this.messageQueue).catch(i=>{this.abort(i)}),this.messageQueue=void 0)},this.channel.onclose=n=>{this.close()},this.channel.onerror=n=>{let i=n.error;this.abort(i)};let r=this;this.channel.onmessage=async n=>{let{data:i}=n;i===null||i.byteLength===0||this.incomingData.push(new Uint8Array(i,0,i.byteLength))},Promise.resolve().then(async()=>{for await(let n of jr(this.incomingData)){let i=r.processIncomingProtobuf(n.subarray());i!=null&&r.sourcePush(new Re(i))}}).catch(n=>{Mo.error("error processing incoming data channel messages",n)})}sendNewStream(){}async _sendMessage(e,r=!0){if(r&&this.channel.bufferedAmount>this.dataChannelOptions.maxBufferedAmount)try{await uh(this.channel,"bufferedamountlow",{timeout:this.dataChannelOptions.bufferedAmountLowEventTimeout})}catch(n){throw n instanceof Vn?(this.abort(n),new Error("Timed out waiting for DataChannel buffer to clear")):n}if(this.channel.readyState==="closed"||this.channel.readyState==="closing")throw new G("Invalid datachannel state - closed or closing","ERR_INVALID_STATE");if(this.channel.readyState==="open")for(let n of e)this.channel.send(n);else if(this.channel.readyState==="connecting")this.messageQueue==null&&(this.messageQueue=new Re),this.messageQueue.append(e);else throw Mo.error("unknown datachannel state %s",this.channel.readyState),new G("Unknown datachannel state","ERR_INVALID_STATE")}async sendData(e){let r=Et.encode({message:e.subarray()}),n=Wr.single(r);await this._sendMessage(n)}async sendReset(){await this._sendFlag(Et.Flag.RESET)}async sendCloseWrite(){await this._sendFlag(Et.Flag.FIN)}async sendCloseRead(){await this._sendFlag(Et.Flag.STOP_SENDING)}processIncomingProtobuf(e){let r=Et.decode(e);return r.flag!==void 0&&(r.flag===Et.Flag.FIN&&(this.incomingData.end(),this.closeRead()),r.flag===Et.Flag.RESET&&this.reset(),r.flag===Et.Flag.STOP_SENDING&&this.closeWrite()),r.message}async _sendFlag(e){Mo.trace("Sending flag: %s",e.toString());let r=Et.encode({flag:e}),n=Wr.single(r);await this._sendMessage(n,!1)}};function zn(t){let{channel:e,direction:r,onEnd:n,dataChannelOptions:i}=t;return new Bc({id:r==="inbound"?`i${e.id}`:`r${e.id}`,direction:r,maxDataSize:(i?.maxMessageSize??el)-ox,dataChannelOptions:i,onEnd:n,channel:e})}var tl="/webrtc",rn=class{protocol;peerConnection;streamBuffer=[];metrics;dataChannelOptions;constructor(e){this.peerConnection=e.peerConnection,this.metrics=e.metrics,this.protocol=e.protocol??tl,this.dataChannelOptions=e.dataChannelOptions,this.peerConnection.ondatachannel=({channel:r})=>{let n=zn({channel:r,direction:"inbound",dataChannelOptions:e.dataChannelOptions,onEnd:()=>{this.streamBuffer=this.streamBuffer.filter(i=>i.id!==n.id)}});this.streamBuffer.push(n)}}createStreamMuxer(e){return new _c({...e,peerConnection:this.peerConnection,dataChannelOptions:this.dataChannelOptions,metrics:this.metrics,streams:this.streamBuffer,protocol:this.protocol})}},_c=class{init;streams;protocol;peerConnection;dataChannelOptions;metrics;close=()=>{};source=Co();sink=Ao;constructor(e){this.init=e,this.streams=e.streams,this.peerConnection=e.peerConnection,this.protocol=e.protocol??tl,this.metrics=e.metrics,this.peerConnection.ondatachannel=({channel:n})=>{let i=zn({channel:n,direction:"inbound",dataChannelOptions:this.dataChannelOptions,onEnd:()=>{this.streams=this.streams.filter(o=>o.id!==i.id),this.metrics?.increment({stream_end:!0}),e?.onStreamEnd?.(i)}});this.streams.push(i),e?.onIncomingStream!=null&&(this.metrics?.increment({incoming_stream:!0}),e.onIncomingStream(i))};let r=e?.onIncomingStream;r!=null&&this.streams.forEach(n=>{r(n)})}newStream(){let e=this.peerConnection.createDataChannel(""),r=zn({channel:e,direction:"outbound",dataChannelOptions:this.dataChannelOptions,onEnd:()=>{this.streams=this.streams.filter(n=>n.id!==r.id),this.metrics?.increment({stream_end:!0}),this.init?.onStreamEnd?.(r)}});return this.streams.push(r),this.metrics?.increment({outgoing_stream:!0}),r}};var yt;(function(t){let e;(function(i){i.SDP_OFFER="SDP_OFFER",i.SDP_ANSWER="SDP_ANSWER",i.ICE_CANDIDATE="ICE_CANDIDATE"})(e=t.Type||(t.Type={}));let r;(function(i){i[i.SDP_OFFER=0]="SDP_OFFER",i[i.SDP_ANSWER=1]="SDP_ANSWER",i[i.ICE_CANDIDATE=2]="ICE_CANDIDATE"})(r||(r={})),function(i){i.codec=()=>tn(r)}(e=t.Type||(t.Type={}));let n;t.codec=()=>(n==null&&(n=Rt((i,o,s={})=>{s.lengthDelimited!==!1&&o.fork(),i.type!=null&&(o.uint32(8),t.Type.codec().encode(i.type,o)),i.data!=null&&(o.uint32(18),o.string(i.data)),s.lengthDelimited!==!1&&o.ldelim()},(i,o)=>{let s={},a=o==null?i.len:i.pos+o;for(;i.pos<a;){let c=i.uint32();switch(c>>>3){case 1:s.type=t.Type.codec().decode(i);break;case 2:s.data=i.string();break;default:i.skipType(c&7);break}}return s})),n),t.encode=i=>Lt(i,t.codec()),t.decode=i=>kt(i,t.codec())})(yt||(yt={}));var Ko=Me("libp2p:webrtc:peer:util"),Tc=async(t,e,r)=>{for(;;){let n=await Promise.race([t.promise,r.read()]);if(n instanceof Object){let i=n;if(i.type!==yt.Type.ICE_CANDIDATE)throw new Error("expected only ice candidates");if(i.data==null||i.data===""){Ko.trace("end-of-candidates received");break}Ko.trace("received new ICE candidate: %s",i.data);try{await e.addIceCandidate(new RTCIceCandidate(JSON.parse(i.data)))}catch(o){throw Ko.error("bad candidate received: ",o),new Error("bad candidate received")}}else break}await t.promise};function Ic(t,e){t[Bi?"oniceconnectionstatechange":"onconnectionstatechange"]=r=>{switch(Ko.trace("receiver peerConnectionState state: ",t.connectionState),Bi?t.iceConnectionState:t.connectionState){case"connected":e.resolve();break;case"failed":case"disconnected":case"closed":e.reject(new Error("RTCPeerConnection was closed"));break;default:break}}}var sx=30*1e3,nn=Me("libp2p:webrtc:peer");async function rl({rtcConfiguration:t,dataChannelOptions:e,stream:r}){let n=AbortSignal.timeout(sx),i=Kn(oc(r,n)).pb(yt),o=new RTCPeerConnection(t),s=new rn({peerConnection:o,dataChannelOptions:e}),a=Xr(),c=Xr();n.onabort=()=>{a.reject()},o.onicecandidate=({candidate:p})=>{c.promise.then(()=>{i.write({type:yt.Type.ICE_CANDIDATE,data:p!=null?JSON.stringify(p.toJSON()):""})},l=>{nn.error("cannot set candidate since sending answer failed",l)})},Ic(o,a);let u=await i.read();if(u.type!==yt.Type.SDP_OFFER)throw new Error(`expected message type SDP_OFFER, received: ${u.type??"undefined"} `);let f=new RTCSessionDescription({type:"offer",sdp:u.data});await o.setRemoteDescription(f).catch(p=>{throw nn.error("could not execute setRemoteDescription",p),new Error("Failed to set remoteDescription")});let h=await o.createAnswer().catch(p=>{throw nn.error("could not execute createAnswer",p),c.reject(p),new Error("Failed to create answer")});i.write({type:yt.Type.SDP_ANSWER,data:h.sdp}),await o.setLocalDescription(h).catch(p=>{throw nn.error("could not execute setLocalDescription",p),c.reject(p),new Error("Failed to set localDescription")}),c.resolve(),await Tc(a,o,i);let d=il(o.currentRemoteDescription?.sdp??"");return{pc:o,muxerFactory:s,remoteAddress:d}}async function nl({rtcConfiguration:t,dataChannelOptions:e,signal:r,stream:n}){let i=Kn(oc(n,r)).pb(yt),o=new RTCPeerConnection(t),s=new rn({peerConnection:o,dataChannelOptions:e}),a=Xr();Ic(o,a),r.onabort=a.reject;let c=o.createDataChannel("init");o.onicecandidate=({candidate:p})=>{i.write({type:yt.Type.ICE_CANDIDATE,data:p!=null?JSON.stringify(p.toJSON()):""})};let u=await o.createOffer();i.write({type:yt.Type.SDP_OFFER,data:u.sdp}),await o.setLocalDescription(u).catch(p=>{throw nn.error("could not execute setLocalDescription",p),new Error("Failed to set localDescription")});let f=await i.read();if(f.type!==yt.Type.SDP_ANSWER)throw new Error("remote should send an SDP answer");let h=new RTCSessionDescription({type:"answer",sdp:f.data});await o.setRemoteDescription(h).catch(p=>{throw nn.error("could not execute setRemoteDescription",p),new Error("Failed to set remoteDescription")}),await Tc(a,o,i),c.close();let d=il(o.currentRemoteDescription?.sdp??"");return{pc:o,muxerFactory:s,remoteAddress:d}}function il(t){let e=t.split(`\r
`).filter(n=>n.startsWith("a=candidate")).pop(),r=e?.split(" ");return e==null||r==null||r.length<5?(nn("could not parse remote address from",e),"/webrtc"):`/dnsaddr/${r[4]}/${r[2].toLowerCase()}/${r[3]}/webrtc`}var Vo=class extends EventTarget{#e=new Map;listenerCount(e){let r=this.#e.get(e);return r==null?0:r.length}addEventListener(e,r,n){super.addEventListener(e,r,n);let i=this.#e.get(e);i==null&&(i=[],this.#e.set(e,i)),i.push({callback:r,once:(n!==!0&&n!==!1&&n?.once)??!1})}removeEventListener(e,r,n){super.removeEventListener(e.toString(),r??null,n);let i=this.#e.get(e);i!=null&&(i=i.filter(({callback:o})=>o!==r),this.#e.set(e,i))}dispatchEvent(e){let r=super.dispatchEvent(e),n=this.#e.get(e.type);return n==null||(n=n.filter(({once:i})=>!i),this.#e.set(e.type,n)),r}safeDispatchEvent(e,r){return this.dispatchEvent(new ax(e,r))}},kc=class extends Event{detail;constructor(e,r){super(e,r),this.detail=r?.detail}},ax=globalThis.CustomEvent??kc;var cx=R("dns4"),ux=R("dns6"),fx=R("dnsaddr"),on=Pe(R("dns"),fx,cx,ux),zo=Pe(R("ip4"),R("ip6")),Gn=Pe(V(zo,R("tcp")),V(on,R("tcp"))),Go=V(zo,R("udp")),hx=V(Go,R("utp")),lx=V(Go,R("quic")),dx=V(Go,R("quic-v1")),Lc=Pe(V(Gn,R("ws")),V(on,R("ws"))),qo=Pe(V(Lc,R("p2p")),Lc),Rc=Pe(V(Gn,R("wss")),V(on,R("wss")),V(Gn,R("tls"),R("ws")),V(on,R("tls"),R("ws"))),Ho=Pe(V(Rc,R("p2p")),Rc),Nc=Pe(V(Gn,R("http")),V(zo,R("http")),V(on,R("http"))),Pc=Pe(V(Gn,R("https")),V(zo,R("https")),V(on,R("https"))),ol=V(Go,R("webrtc-direct"),R("certhash")),cl=Pe(V(ol,R("p2p")),ol),sl=V(dx,R("webtransport"),R("certhash"),R("certhash")),ul=Pe(V(sl,R("p2p")),sl),fl=Pe(V(qo,R("p2p-webrtc-star"),R("p2p")),V(Ho,R("p2p-webrtc-star"),R("p2p")),V(qo,R("p2p-webrtc-star")),V(Ho,R("p2p-webrtc-star"))),DD=Pe(V(qo,R("p2p-websocket-star"),R("p2p")),V(Ho,R("p2p-websocket-star"),R("p2p")),V(qo,R("p2p-websocket-star")),V(Ho,R("p2p-websocket-star"))),hl=Pe(V(Nc,R("p2p-webrtc-direct"),R("p2p")),V(Pc,R("p2p-webrtc-direct"),R("p2p")),V(Nc,R("p2p-webrtc-direct")),V(Pc,R("p2p-webrtc-direct"))),sn=Pe(Lc,Rc,Nc,Pc,fl,hl,Gn,hx,lx,on,cl,ul),BD=Pe(V(sn,R("p2p-stardust"),R("p2p")),V(sn,R("p2p-stardust"))),Ir=Pe(V(sn,R("p2p")),fl,hl,cl,ul,R("p2p")),al=Pe(V(Ir,R("p2p-circuit"),Ir),V(Ir,R("p2p-circuit")),V(R("p2p-circuit"),Ir),V(sn,R("p2p-circuit")),V(R("p2p-circuit"),sn),R("p2p-circuit")),ll=()=>Pe(V(al,ll),al),dr=ll(),_D=Pe(V(dr,Ir,dr),V(Ir,dr),V(dr,Ir),dr,Ir);var TD=Pe(V(dr,R("webrtc"),R("p2p")),V(dr,R("webrtc")),V(sn,R("webrtc"),R("p2p")),V(sn,R("webrtc")),R("webrtc"));function dl(t){function e(r){let n;try{n=fr(r)}catch{return!1}let i=t(n.protoNames());return i===null?!1:i===!0||i===!1?i:i.length===0}return e}function V(...t){function e(r){if(r.length<t.length)return null;let n=r;return t.some(i=>(n=typeof i=="function"?i().partialMatch(r):i.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:dl(e),partialMatch:e}}function Pe(...t){function e(n){let i=null;return t.some(o=>{let s=typeof o=="function"?o().partialMatch(n):o.partialMatch(n);return s!=null?(i=s,!0):!1}),i}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:dl(e),partialMatch:e}}function R(t){let e=t;function r(i){let o;try{o=fr(i)}catch{return!1}let s=o.protoNames();return s.length===1&&s[0]===e}function n(i){return i.length===0?null:i[0]===e?i.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:n}}var $o=class extends Vo{peerId;transportManager;constructor(e){super(),this.peerId=e.peerId,this.transportManager=e.transportManager}async listen(){this.safeDispatchEvent("listening",{})}getAddrs(){return this.transportManager.getListeners().filter(e=>e!==this).map(e=>e.getAddrs().filter(r=>dr.matches(r)).map(r=>r.encapsulate(`/webrtc/p2p/${this.peerId}`))).flat()}async close(){this.safeDispatchEvent("close",{})}};var pl=Me("libp2p:webrtc:peer"),px="/webrtc",yx="/p2p-circuit",Uc="/webrtc-signaling/0.0.1",gx=ye("webrtc").code,Wo=class{components;init;_started=!1;constructor(e,r={}){this.components=e,this.init=r}isStarted(){return this._started}async start(){await this.components.registrar.handle(Uc,e=>{this._onProtocol(e).catch(r=>{pl.error("failed to handle incoming connect from %p",e.connection.remotePeer,r)})}),this._started=!0}async stop(){await this.components.registrar.unhandle(Uc),this._started=!1}createListener(e){return new $o(this.components)}[Symbol.toStringTag]="@libp2p/webrtc";[uo]=!0;filter(e){return e.filter(r=>r.protoCodes().includes(gx))}async dial(e,r){pl.trace("dialing address: ",e);let{baseAddr:n,peerId:i}=mx(e);if(r.signal==null){let a=new AbortController;r.signal=a.signal}let o=await this.components.transportManager.dial(n,r),s=await o.newStream([Uc],r);try{let{pc:a,muxerFactory:c,remoteAddress:u}=await nl({stream:s,rtcConfiguration:this.init.rtcConfiguration,dataChannelOptions:this.init.dataChannel,signal:r.signal}),f=await r.upgrader.upgradeOutbound(new $r({peerConnection:a,timeline:{open:Date.now()},remoteAddr:fr(u).encapsulate(`/p2p/${i.toString()}`)}),{skipProtection:!0,skipEncryption:!0,muxerFactory:c});return s.close(),f}catch(a){throw s.reset(),a}finally{await o.close()}}async _onProtocol({connection:e,stream:r}){try{let{pc:n,muxerFactory:i,remoteAddress:o}=await rl({rtcConfiguration:this.init.rtcConfiguration,connection:e,stream:r,dataChannelOptions:this.init.dataChannel});await this.components.upgrader.upgradeInbound(new $r({peerConnection:n,timeline:{open:new Date().getTime()},remoteAddr:fr(o).encapsulate(`/p2p/${e.remotePeer.toString()}`)}),{skipEncryption:!0,skipProtection:!0,muxerFactory:i})}catch(n){throw r.reset(),n}finally{await e.close()}}};function mx(t){let e=t.toString().split(px+"/");if(e.length!==2)throw new G("webrtc protocol was not present in multiaddr",lt.ERR_INVALID_MULTIADDR);if(!e[0].includes(yx))throw new G("p2p-circuit protocol was not present in multiaddr",lt.ERR_INVALID_MULTIADDR);let r=fr(e[0]),i=fr("/"+e[1]).getPeerId();if(i==null)throw new G("destination peer id was missing",lt.ERR_INVALID_MULTIADDR);let o=r.protos().pop();if(o===void 0)throw new G("invalid multiaddr",lt.ERR_INVALID_MULTIADDR);return o.name!=="p2p"&&(r=r.encapsulate(`/p2p/${i}`)),{baseAddr:r,peerId:Ci(i)}}function Oc(){let t=Xr(),e=!1;return{sink:async r=>{if(e)throw new Error("already piped");e=!0,t.resolve(r)},source:async function*(){yield*await t.promise}()}}function yl(){let t=Oc(),e=Oc();return[{source:t.source,sink:e.sink},{source:e.source,sink:t.sink}]}function xx(t){return t[Symbol.asyncIterator]!=null}function bx(...t){let e=[];for(let r of t)xx(r)||e.push(r);return e.length===t.length?function*(){for(let r of e)yield*r}():async function*(){let r=$t({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(t.map(async n=>{for await(let i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}var gl=bx;function ml(t,...e){if(t==null)throw new Error("Empty pipeline");if(Fc(t)){let n=t;t=()=>n.source}else if(bl(t)||xl(t)){let n=t;t=()=>n}let r=[t,...e];if(r.length>1&&Fc(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)Fc(r[n])&&(r[n]=wx(r[n]));return vx(...r)}var vx=(...t)=>{let e;for(;t.length>0;)e=t.shift()(e);return e},xl=t=>t?.[Symbol.asyncIterator]!=null,bl=t=>t?.[Symbol.iterator]!=null,Fc=t=>t==null?!1:t.sink!=null&&t.source!=null,wx=t=>e=>{let r=t.sink(e);if(r?.then!=null){let n=$t({objectMode:!0});r.then(()=>{n.end()},s=>{n.end(s)});let i,o=t.source;if(xl(o))i=async function*(){yield*o,n.end()};else if(bl(o))i=function*(){yield*o,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return gl(n,i())}return t.source};var vl=!!globalThis.process?.env?.DUMP_SESSION_KEYS;function Mc(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`Wrong positive integer: ${t}`)}function Ex(t){if(typeof t!="boolean")throw new Error(`Expected boolean, not ${t}`)}function wl(t,...e){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(t.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${t.length}`)}function Sx(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Mc(t.outputLen),Mc(t.blockLen)}function Cx(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Ax(t,e){wl(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Dx={number:Mc,bool:Ex,bytes:wl,hash:Sx,exists:Cx,output:Ax},gt=Dx;var ki=re(Oe("node:crypto"),1),Bx=ki&&typeof ki=="object"&&"webcrypto"in ki?ki.webcrypto:void 0;var _x=t=>t instanceof Uint8Array;var Yo=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),Nt=(t,e)=>t<<32-e|t>>>e,Tx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Tx)throw new Error("Non little-endian hardware is not supported");var nB=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ix(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function kr(t){if(typeof t=="string"&&(t=Ix(t)),!_x(t))throw new Error(`expected Uint8Array, got ${typeof t}`);return t}var $n=class{clone(){return this._cloneInto()}};function Kc(t){let e=n=>t().update(kr(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}var jo=class extends $n{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,gt.hash(e);let n=kr(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?e.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=e.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(e){return gt.exists(this),this.iHash.update(e),this}digestInto(e){gt.exists(this),gt.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=o,e.blockLen=s,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Xo=(t,e,r)=>new jo(t,e).update(r).digest();Xo.create=(t,e)=>new jo(t,e);function kx(t,e,r){return gt.hash(t),r===void 0&&(r=new Uint8Array(t.outputLen)),Xo(t,kr(r),kr(e))}var Vc=new Uint8Array([0]),El=new Uint8Array;function Lx(t,e,r,n=32){if(gt.hash(t),gt.number(n),n>255*t.outputLen)throw new Error("Length should be <= 255*HashLen");let i=Math.ceil(n/t.outputLen);r===void 0&&(r=El);let o=new Uint8Array(i*t.outputLen),s=Xo.create(t,e),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let u=0;u<i;u++)Vc[0]=u+1,a.update(u===0?El:c).update(r).update(Vc).digestInto(c),o.set(c,t.outputLen*u),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),Vc.fill(0),o.slice(0,n)}var Sl=(t,e,r,n,i)=>Lx(t,kx(t,e,r),n,i);function Rx(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,u=n?0:4;t.setUint32(e+c,s,n),t.setUint32(e+u,a,n)}var Qo=class extends $n{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Yo(this.buffer)}update(e){gt.exists(this);let{view:r,buffer:n,blockLen:i}=this;e=kr(e);let o=e.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=Yo(e);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){gt.exists(this),gt.output(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let h=s;h<i;h++)r[h]=0;Rx(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=Yo(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,f=this.get();if(u>f.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<u;h++)a.setUint32(4*h,f[h],o)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=o,e.destroyed=s,i%r&&e.buffer.set(n),e}};var Nx=(t,e,r)=>t&e^~t&r,Px=(t,e,r)=>t&e^t&r^e&r,Ux=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Lr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Rr=new Uint32Array(64),Zo=class extends Qo{constructor(){super(64,32,8,!1),this.A=Lr[0]|0,this.B=Lr[1]|0,this.C=Lr[2]|0,this.D=Lr[3]|0,this.E=Lr[4]|0,this.F=Lr[5]|0,this.G=Lr[6]|0,this.H=Lr[7]|0}get(){let{A:e,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[e,r,n,i,o,s,a,c]}set(e,r,n,i,o,s,a,c){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(e,r){for(let h=0;h<16;h++,r+=4)Rr[h]=e.getUint32(r,!1);for(let h=16;h<64;h++){let d=Rr[h-15],p=Rr[h-2],l=Nt(d,7)^Nt(d,18)^d>>>3,y=Nt(p,17)^Nt(p,19)^p>>>10;Rr[h]=y+Rr[h-7]+l+Rr[h-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:u,H:f}=this;for(let h=0;h<64;h++){let d=Nt(a,6)^Nt(a,11)^Nt(a,25),p=f+d+Nx(a,c,u)+Ux[h]+Rr[h]|0,y=(Nt(n,2)^Nt(n,13)^Nt(n,22))+Px(n,i,o)|0;f=u,u=c,c=a,a=s+p|0,s=o,o=i,i=n,n=p+y|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,u=u+this.G|0,f=f+this.H|0,this.set(n,i,o,s,a,c,u,f)}roundClean(){Rr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},qc=class extends Zo{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Hc=Kc(()=>new Zo),mB=Kc(()=>new qc);var i0=re(Qc(),1),Yn=re(Yl(),1),o0={hashSHA256(t){return Hc(t)},getHKDF(t,e){let r=Sl(Hc,e,t,void 0,96),n=r.subarray(0,32),i=r.subarray(32,64),o=r.subarray(64,96);return[n,i,o]},generateX25519KeyPair(){let t=Yn.generateKeyPair();return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519KeyPairFromSeed(t){let e=Yn.generateKeyPairFromSeed(t);return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519SharedKey(t,e){return Yn.sharedKey(t,e)},chaCha20Poly1305Encrypt(t,e,r,n){return new i0.ChaCha20Poly1305(n).seal(e,t,r)},chaCha20Poly1305Decrypt(t,e,r,n,i){return new i0.ChaCha20Poly1305(n).open(e,t,r,i)}};var s0=re(Qc(),1);var Fb=t=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t),jn=t=>{let e=Fb(2);return new DataView(e.buffer,e.byteOffset,e.byteLength).setUint16(0,t,!1),e};jn.bytes=2;var Pi=t=>{if(t.length<2)throw RangeError("Could not decode int16BE");return t instanceof Uint8Array?new DataView(t.buffer,t.byteOffset,t.byteLength).getUint16(0,!1):t.getUint16(0)};Pi.bytes=2;function jl(t){return pe([t.ne,t.ciphertext],t.ne.length+t.ciphertext.length)}function Xl(t){return pe([t.ne,t.ns,t.ciphertext],t.ne.length+t.ns.length+t.ciphertext.length)}function Ql(t){return pe([t.ns,t.ciphertext],t.ns.length+t.ciphertext.length)}function Zl(t){if(t.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:t.subarray(0,32),ciphertext:t.subarray(32,t.length),ns:new Uint8Array(0)}}function Jl(t){if(t.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:t.subarray(0,32),ns:t.subarray(32,80),ciphertext:t.subarray(80,t.length)}}function ed(t){if(t.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:t.subarray(0,48),ciphertext:t.subarray(48,t.length)}}function rd(t,e){return async function*(r){for await(let n of r)for(let i=0;i<n.length;i+=65519){let o=i+65519;o>n.length&&(o=n.length);let s=t.encrypt(n.subarray(i,o),t.session);e?.encryptedPackets.increment(),yield jn(s.byteLength),yield s}}}function nd(t,e){return async function*(r){for await(let n of r)for(let i=0;i<n.length;i+=65535){let o=i+65535;if(o>n.length&&(o=n.length),o-s0.TAG_LENGTH<i)throw new Error("Invalid chunk");let s=n.subarray(i,o),a=n.subarray(i,o-s0.TAG_LENGTH),{plaintext:c,valid:u}=t.decrypt(s,t.session,a);if(!u)throw e?.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");e?.decryptedPackets.increment(),yield c}}}var a0=class extends Error{code;constructor(e="Unexpected Peer"){super(e),this.code=a0.code}},Xn=a0;co(Xn,"code","ERR_UNEXPECTED_PEER");var c0=class extends Error{code;constructor(e="Invalid crypto exchange"){super(e),this.code=c0.code}},Nr=c0;co(Nr,"code","ERR_INVALID_CRYPTO_EXCHANGE");var vT=re(Ki(),1),wT=re(bp(),1);var j3=re(be(),1);var N0={};$e(N0,{Ed25519PrivateKey:()=>gn,Ed25519PublicKey:()=>Hi,generateKeyPair:()=>p3,generateKeyPairFromSeed:()=>_p,unmarshalEd25519PrivateKey:()=>l3,unmarshalEd25519PublicKey:()=>d3});var dn=re(Oe("crypto"),1),vp=Oe("util");var u3=(0,vp.promisify)(dn.default.generateKeyPair),pn=32,rr=64,Ds=32,f3=64;function wp(t){let r=dn.default.createPrivateKey({format:"jwk",key:{crv:"Ed25519",x:"",d:j(t,"base64url"),kty:"OKP"}}).export({format:"jwk"});if(r.x==null||r.x==="")throw new Error("Could not export JWK public key");return Ee(r.x,"base64url")}async function Ep(){let t=await u3("ed25519",{publicKeyEncoding:{type:"spki",format:"jwk"},privateKeyEncoding:{type:"pkcs8",format:"jwk"}}),e=Ee(t.privateKey.d,"base64url"),r=Ee(t.privateKey.x,"base64url");return{privateKey:Dp(e,r),publicKey:r}}async function Sp(t){if(t.length!==Ds)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let e=wp(t);return{privateKey:Dp(t,e),publicKey:e}}async function Cp(t,e){if(!(t instanceof Uint8Array))throw new TypeError('"key" must be a node.js Buffer, or Uint8Array.');let r,n;if(t.byteLength===rr)r=t.subarray(0,32),n=t.subarray(32);else if(t.byteLength===Ds)r=t.subarray(0,32),n=wp(r);else throw new TypeError('"key" must be 64 or 32 bytes in length.');let i=dn.default.createPrivateKey({format:"jwk",key:{crv:"Ed25519",d:j(r,"base64url"),x:j(n,"base64url"),kty:"OKP"}});return dn.default.sign(null,e,i)}async function Ap(t,e,r){if(t.byteLength!==pn)throw new TypeError('"key" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"key" must be a node.js Buffer, or Uint8Array.');if(e.byteLength!==f3)throw new TypeError('"sig" must be 64 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"sig" must be a node.js Buffer, or Uint8Array.');let n=dn.default.createPublicKey({format:"jwk",key:{crv:"Ed25519",x:j(t,"base64url"),kty:"OKP"}});return dn.default.verify(null,r,n,e)}function Dp(t,e){let r=new Uint8Array(rr);for(let n=0;n<Ds;n++)r[n]=t[n],r[Ds+n]=e[n];return r}var yn=re(Oe("crypto"),1);function L0(t){let e=t?.algorithm??"aes-128-gcm",r=t?.keyLength??16,n=t?.nonceLength??12,i=t?.digest??"sha256",o=t?.saltLength??16,s=t?.iterations??32767,a=t?.algorithmTagLength??16;async function c(p,l){let y=yn.default.randomBytes(n),g=yn.default.createCipheriv(e,l,y),x=pe([g.update(p),g.final()]);return pe([y,x,g.getAuthTag()])}async function u(p,l){let y=yn.default.randomBytes(o);typeof l=="string"&&(l=Ee(l));let g=yn.default.pbkdf2Sync(l,y,s,r,i);return pe([y,await c(Uint8Array.from(p),g)])}async function f(p,l){let y=p.subarray(0,n),g=p.subarray(n,p.length-a),x=p.subarray(g.length+n),w=yn.default.createDecipheriv(e,l,y);return w.setAuthTag(x),pe([w.update(g),w.final()])}async function h(p,l){let y=p.subarray(0,o),g=p.subarray(o);typeof l=="string"&&(l=Ee(l));let x=yn.default.pbkdf2Sync(l,y,s,r,i);return f(g,x)}return{encrypt:u,decrypt:h}}async function ti(t,e){let n=await L0().encrypt(t,e);return In.encode(n)}var _e;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(_e||(_e={}));var R0;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(R0||(R0={}));(function(t){t.codec=()=>tn(R0)})(_e||(_e={}));var nr;(function(t){let e;t.codec=()=>(e==null&&(e=Rt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),_e.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Type=_e.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>Lt(r,t.codec()),t.decode=r=>kt(r,t.codec())})(nr||(nr={}));var ir;(function(t){let e;t.codec=()=>(e==null&&(e=Rt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),_e.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Type=_e.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>Lt(r,t.codec()),t.decode=r=>kt(r,t.codec())})(ir||(ir={}));var Hi=class{_key;constructor(e){this._key=ri(e,pn)}async verify(e,r){return Ap(this._key,r,e)}marshal(){return this._key}get bytes(){return nr.encode({Type:_e.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Fe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ye.digest(this.bytes);return e}},gn=class{_key;_publicKey;constructor(e,r){this._key=ri(e,rr),this._publicKey=ri(r,pn)}async sign(e){return Cp(this._key,e)}get public(){return new Hi(this._publicKey)}marshal(){return this._key}get bytes(){return ir.encode({Type:_e.Ed25519,Data:this.marshal()}).subarray()}equals(e){return Fe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ye.digest(this.bytes);return e}async id(){let e=Cr.digest(this.public.bytes);return Le.encode(e.bytes).substring(1)}async export(e,r="libp2p-key"){if(r==="libp2p-key")return ti(this.bytes,e);throw new G(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function l3(t){if(t.length>rr){t=ri(t,rr+pn);let n=t.subarray(0,rr),i=t.subarray(rr,t.length);return new gn(n,i)}t=ri(t,rr);let e=t.subarray(0,rr),r=t.subarray(pn);return new gn(e,r)}function d3(t){return t=ri(t,pn),new Hi(t)}async function p3(){let{privateKey:t,publicKey:e}=await Ep();return new gn(t,e)}async function _p(t){let{privateKey:e,publicKey:r}=await Sp(t);return new gn(e,r)}function ri(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw new G(`Key must be a Uint8Array of length ${e}, got ${t.length}`,"ERR_INVALID_KEY_TYPE");return t}var y3={"P-256":"prime256v1","P-384":"secp384r1","P-521":"secp521r1"},g3=Object.keys(y3),A_=g3.join(" / ");var z0={};$e(z0,{RsaPrivateKey:()=>ui,RsaPublicKey:()=>Xi,fromJwk:()=>H3,generateKeyPair:()=>z3,unmarshalRsaPrivateKey:()=>V3,unmarshalRsaPublicKey:()=>q3});var ji=re(be(),1);var aT=re(Rp(),1);var vn=re(Oe("crypto"),1),jp=Oe("util");var b3=re(Oe("crypto"),1);var ie=BigInt(0),Ae=BigInt(1),Kr=BigInt(2),$i=BigInt(3),Np=BigInt(8),ke=Object.freeze({a:ie,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Ae,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Pp=(t,e)=>(t+e/Kr)/e,_s={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){let{n:e}=ke,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Ae*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=Pp(o*t,e),c=Pp(-n*t,e),u=P(t-a*r-c*i,e),f=P(-a*n-c*o,e),h=u>s,d=f>s;if(h&&(u=e-u),d&&(f=e-f),u>s||f>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:h,k1:u,k2neg:d,k2:f}}},Ot=32,oi=32,v3=32,Up=Ot+1,Op=2*Ot+1;function Fp(t){let{a:e,b:r}=ke,n=P(t*t),i=P(n*t);return P(i+e*t+r)}var Ts=ke.a===ie,Ls=class extends Error{constructor(e){super(e)}};function Mp(t){if(!(t instanceof ae))throw new TypeError("JacobianPoint expected")}var ae=class{constructor(e,r,n){this.x=e,this.y=r,this.z=n}static fromAffine(e){if(!(e instanceof ge))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(ge.ZERO)?ae.ZERO:new ae(e.x,e.y,Ae)}static toAffineBatch(e){let r=A3(e.map(n=>n.z));return e.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(e){return ae.toAffineBatch(e).map(ae.fromAffine)}equals(e){Mp(e);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=e,c=P(i*i),u=P(a*a),f=P(r*u),h=P(o*c),d=P(P(n*a)*u),p=P(P(s*i)*c);return f===h&&d===p}negate(){return new ae(this.x,P(-this.y),this.z)}double(){let{x:e,y:r,z:n}=this,i=P(e*e),o=P(r*r),s=P(o*o),a=e+o,c=P(Kr*(P(a*a)-i-s)),u=P($i*i),f=P(u*u),h=P(f-Kr*c),d=P(u*(c-h)-Np*s),p=P(Kr*r*n);return new ae(h,d,p)}add(e){Mp(e);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=e;if(o===ie||s===ie)return this;if(r===ie||n===ie)return e;let c=P(i*i),u=P(a*a),f=P(r*u),h=P(o*c),d=P(P(n*a)*u),p=P(P(s*i)*c),l=P(h-f),y=P(p-d);if(l===ie)return y===ie?this.double():ae.ZERO;let g=P(l*l),x=P(l*g),w=P(f*g),v=P(y*y-x-Kr*w),A=P(y*(w-v)-d*x),E=P(i*a*l);return new ae(v,A,E)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let r=ae.ZERO;if(typeof e=="bigint"&&e===ie)return r;let n=qp(e);if(n===Ae)return this;if(!Ts){let h=r,d=this;for(;n>ie;)n&Ae&&(h=h.add(d)),d=d.double(),n>>=Ae;return h}let{k1neg:i,k1:o,k2neg:s,k2:a}=_s.splitScalar(n),c=r,u=r,f=this;for(;o>ie||a>ie;)o&Ae&&(c=c.add(f)),a&Ae&&(u=u.add(f)),f=f.double(),o>>=Ae,a>>=Ae;return i&&(c=c.negate()),s&&(u=u.negate()),u=new ae(P(u.x*_s.beta),u.y,u.z),c.add(u)}precomputeWindow(e){let r=Ts?128/e+1:256/e+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(e-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(e,r){!r&&this.equals(ae.BASE)&&(r=ge.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&F0.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=ae.normalizeZ(i),F0.set(r,i)));let o=ae.ZERO,s=ae.BASE,a=1+(Ts?128/n:256/n),c=2**(n-1),u=BigInt(2**n-1),f=2**n,h=BigInt(n);for(let d=0;d<a;d++){let p=d*c,l=Number(e&u);e>>=h,l>c&&(l-=f,e+=Ae);let y=p,g=p+Math.abs(l)-1,x=d%2!==0,w=l<0;l===0?s=s.add(Is(x,i[y])):o=o.add(Is(w,i[g]))}return{p:o,f:s}}multiply(e,r){let n=qp(e),i,o;if(Ts){let{k1neg:s,k1:a,k2neg:c,k2:u}=_s.splitScalar(n),{p:f,f:h}=this.wNAF(a,r),{p:d,f:p}=this.wNAF(u,r);f=Is(s,f),d=Is(c,d),d=new ae(P(d.x*_s.beta),d.y,d.z),i=f.add(d),o=h.add(p)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return ae.normalizeZ([i,o])[0]}toAffine(e){let{x:r,y:n,z:i}=this,o=this.equals(ae.ZERO);e==null&&(e=o?Np:ci(i));let s=e,a=P(s*s),c=P(a*s),u=P(r*a),f=P(n*c),h=P(i*s);if(o)return ge.ZERO;if(h!==Ae)throw new Error("invZ was invalid");return new ge(u,f)}};ae.BASE=new ae(ke.Gx,ke.Gy,Ae);ae.ZERO=new ae(ie,Ae,ie);function Is(t,e){let r=e.negate();return t?r:e}var F0=new WeakMap,ge=class{constructor(e,r){this.x=e,this.y=r}_setWindowSize(e){this._WINDOW_SIZE=e,F0.delete(this)}hasEvenY(){return this.y%Kr===ie}static fromCompressedHex(e){let r=e.length===32,n=Vr(r?e:e.subarray(1));if(!O0(n))throw new Error("Point is not on curve");let i=Fp(n),o=C3(i),s=(o&Ae)===Ae;r?s&&(o=P(-o)):(e[0]&1)===1!==s&&(o=P(-o));let a=new ge(n,o);return a.assertValidity(),a}static fromUncompressedHex(e){let r=Vr(e.subarray(1,Ot+1)),n=Vr(e.subarray(Ot+1,Ot*2+1)),i=new ge(r,n);return i.assertValidity(),i}static fromHex(e){let r=ai(e),n=r.length,i=r[0];if(n===Ot)return this.fromCompressedHex(r);if(n===Up&&(i===2||i===3))return this.fromCompressedHex(r);if(n===Op&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Up} compressed bytes or ${Op} uncompressed bytes, not ${n}`)}static fromPrivateKey(e){return ge.BASE.multiply(Ns(e))}static fromSignature(e,r,n){let{r:i,s:o}=Hp(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=V0(ai(e)),{n:a}=ke,c=n===2||n===3?i+a:i,u=ci(c,a),f=P(-s*u,a),h=P(o*u,a),d=n&1?"03":"02",p=ge.fromHex(d+ni(c)),l=ge.BASE.multiplyAndAddUnsafe(p,f,h);if(!l)throw new Error("Cannot recover signature: point at infinify");return l.assertValidity(),l}toRawBytes(e=!1){return xn(this.toHex(e))}toHex(e=!1){let r=ni(this.x);return e?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${ni(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:r,y:n}=this;if(!O0(r)||!O0(n))throw new Error(e);let i=P(n*n),o=Fp(r);if(P(i-o)!==ie)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new ge(this.x,P(-this.y))}double(){return ae.fromAffine(this).double().toAffine()}add(e){return ae.fromAffine(this).add(ae.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ae.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,r,n){let i=ae.fromAffine(this),o=r===ie||r===Ae||this!==ge.BASE?i.multiplyUnsafe(r):i.multiply(r),s=ae.fromAffine(e).multiplyUnsafe(n),a=o.add(s);return a.equals(ae.ZERO)?void 0:a.toAffine()}};ge.BASE=new ge(ke.Gx,ke.Gy);ge.ZERO=new ge(ie,ie);function Kp(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function Vp(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${si(t)}`);let e=t[1],r=t.subarray(2,e+2);if(!e||r.length!==e)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Vr(r),left:t.subarray(e+2)}}function w3(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${si(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");let{data:e,left:r}=Vp(t.subarray(2)),{data:n,left:i}=Vp(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${si(i)}`);return{r:e,s:n}}var or=class{constructor(e,r){this.r=e,this.s=r,this.assertValidity()}static fromCompact(e){let r=e instanceof Uint8Array,n="Signature.fromCompact";if(typeof e!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?si(e):e;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new or(Rs(i.slice(0,64)),Rs(i.slice(64,128)))}static fromDER(e){let r=e instanceof Uint8Array;if(typeof e!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=w3(r?e:xn(e));return new or(n,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:r}=this;if(!Yi(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Yi(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=ke.n>>Ae;return this.s>e}normalizeS(){return this.hasHighS()?new or(this.r,P(-this.s,ke.n)):this}toDERRawBytes(){return xn(this.toDERHex())}toDERHex(){let e=Kp(Gi(this.s)),r=Kp(Gi(this.r)),n=e.length/2,i=r.length/2,o=Gi(n),s=Gi(i);return`30${Gi(i+n+4)}02${s}${r}02${o}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return xn(this.toCompactHex())}toCompactHex(){return ni(this.r)+ni(this.s)}};function Mr(...t){if(!t.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let o=t[n];r.set(o,i),i+=o.length}return r}var E3=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function si(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let r=0;r<t.length;r++)e+=E3[t[r]];return e}var S3=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function ni(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(ie<=t&&t<S3))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function M0(t){let e=xn(ni(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function Gi(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function Rs(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function xn(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2,i=t.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");e[r]=o}return e}function Vr(t){return Rs(si(t))}function ai(t){return t instanceof Uint8Array?Uint8Array.from(t):xn(t)}function qp(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&Yi(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function P(t,e=ke.P){let r=t%e;return r>=ie?r:e+r}function At(t,e){let{P:r}=ke,n=t;for(;e-- >ie;)n*=n,n%=r;return n}function C3(t){let{P:e}=ke,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=t*t*t%e,u=c*c*t%e,f=At(u,$i)*u%e,h=At(f,$i)*u%e,d=At(h,Kr)*c%e,p=At(d,n)*d%e,l=At(p,i)*p%e,y=At(l,s)*l%e,g=At(y,a)*y%e,x=At(g,s)*l%e,w=At(x,$i)*u%e,v=At(w,o)*p%e,A=At(v,r)*c%e,E=At(A,Kr);if(E*E%e!==t)throw new Error("Cannot find square root");return E}function ci(t,e=ke.P){if(t===ie||e<=ie)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=P(t,e),n=e,i=ie,o=Ae,s=Ae,a=ie;for(;r!==ie;){let u=n/r,f=n%r,h=i-s*u,d=o-a*u;n=r,r=f,i=s,o=a,s=h,a=d}if(n!==Ae)throw new Error("invert: does not exist");return P(i,e)}function A3(t,e=ke.P){let r=new Array(t.length),n=t.reduce((o,s,a)=>s===ie?o:(r[a]=o,P(o*s,e)),Ae),i=ci(n,e);return t.reduceRight((o,s,a)=>s===ie?o:(r[a]=P(o*r[a],e),P(o*s,e)),i),r}function D3(t){let e=t.length*8-oi*8,r=Vr(t);return e>0?r>>BigInt(e):r}function V0(t,e=!1){let r=D3(t);if(e)return r;let{n}=ke;return r>=n?r-n:r}var ii,Wi,K0=class{constructor(e,r){if(this.hashLen=e,this.qByteLen=r,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return Ft.hmacSha256(this.k,...e)}hmacSync(...e){return Wi(this.k,...e)}checkSync(){if(typeof Wi!="function")throw new Ls("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0,r=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),e+=this.v.length}return Mr(...r)}generateSync(){this.checkSync(),this.incr();let e=0,r=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),e+=this.v.length}return Mr(...r)}};function Yi(t){return ie<t&&t<ke.n}function O0(t){return ie<t&&t<ke.P}function B3(t,e,r,n=!0){let{n:i}=ke,o=V0(t,!0);if(!Yi(o))return;let s=ci(o,i),a=ge.BASE.multiply(o),c=P(a.x,i);if(c===ie)return;let u=P(s*P(e+r*c,i),i);if(u===ie)return;let f=new or(c,u),h=(a.x===f.r?0:2)|Number(a.y&Ae);return n&&f.hasHighS()&&(f=f.normalizeS(),h^=1),{sig:f,recovery:h}}function Ns(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*oi)throw new Error("Expected 32 bytes of private key");e=Rs(t)}else if(t instanceof Uint8Array){if(t.length!==oi)throw new Error("Expected 32 bytes of private key");e=Vr(t)}else throw new TypeError("Expected valid private key");if(!Yi(e))throw new Error("Expected private key: 0 < key < n");return e}function _3(t){return t instanceof ge?(t.assertValidity(),t):ge.fromHex(t)}function Hp(t){if(t instanceof or)return t.assertValidity(),t;try{return or.fromDER(t)}catch{return or.fromCompact(t)}}function q0(t,e=!1){return ge.fromPrivateKey(t).toRawBytes(e)}function zp(t){let e=t.length>Ot?t.slice(0,Ot):t;return Vr(e)}function T3(t){let e=zp(t),r=P(e,ke.n);return Gp(r<ie?e:r)}function Gp(t){return M0(t)}function I3(t,e,r){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);let n=ai(t),i=Ns(e),o=[Gp(i),T3(n)];if(r!=null){r===!0&&(r=Ft.randomBytes(Ot));let c=ai(r);if(c.length!==Ot)throw new Error(`sign: Expected ${Ot} bytes of extra data`);o.push(c)}let s=Mr(...o),a=zp(n);return{seed:s,m:a,d:i}}function k3(t,e){let{sig:r,recovery:n}=t,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},e),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}async function $p(t,e,r={}){let{seed:n,m:i,d:o}=I3(t,e,r.extraEntropy),s=new K0(v3,oi);await s.reseed(n);let a;for(;!(a=B3(await s.generate(),i,o,r.canonical));)await s.reseed();return k3(a,r)}var L3={strict:!0};function Wp(t,e,r,n=L3){let i;try{i=Hp(t),e=ai(e)}catch{return!1}let{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;let a=V0(e),c;try{c=_3(r)}catch{return!1}let{n:u}=ke,f=ci(s,u),h=P(a*f,u),d=P(o*f,u),p=ge.BASE.multiplyAndAddUnsafe(c,h,d);return p?P(p.x,u)===o:!1}ge.BASE._setWindowSize(8);var xt={node:b3,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var ks={},Ft={bytesToHex:si,hexToBytes:xn,concatBytes:Mr,mod:P,invert:ci,isValidPrivateKey(t){try{return Ns(t),!0}catch{return!1}},_bigintTo32Bytes:M0,_normalizePrivateKey:Ns,hashToPrivateKey:t=>{t=ai(t);let e=oi+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=P(Vr(t),ke.n-Ae)+Ae;return M0(r)},randomBytes:(t=32)=>{if(xt.web)return xt.web.getRandomValues(new Uint8Array(t));if(xt.node){let{randomBytes:e}=xt.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Ft.hashToPrivateKey(Ft.randomBytes(oi+8)),precompute(t=8,e=ge.BASE){let r=e===ge.BASE?e:new ge(e.x,e.y);return r._setWindowSize(t),r.multiply($i),r},sha256:async(...t)=>{if(xt.web){let e=await xt.web.subtle.digest("SHA-256",Mr(...t));return new Uint8Array(e)}else if(xt.node){let{createHash:e}=xt.node,r=e("sha256");return t.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(xt.web){let r=await xt.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Mr(...e),i=await xt.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(xt.node){let{createHmac:r}=xt.node,n=r("sha256",t);return e.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let r=ks[t];if(r===void 0){let n=await Ft.sha256(Uint8Array.from(t,i=>i.charCodeAt(0)));r=Mr(n,n),ks[t]=r}return Ft.sha256(r,...e)},taggedHashSync:(t,...e)=>{if(typeof ii!="function")throw new Ls("sha256Sync is undefined, you need to set it");let r=ks[t];if(r===void 0){let n=ii(Uint8Array.from(t,i=>i.charCodeAt(0)));r=Mr(n,n),ks[t]=r}return ii(r,...e)},_JacobianPoint:ae};Object.defineProperties(Ft,{sha256Sync:{configurable:!1,get(){return ii},set(t){ii||(ii=t)}},hmacSha256Sync:{configurable:!1,get(){return Wi},set(t){Wi||(Wi=t)}}});function Ps(t){if(isNaN(t)||t<=0)throw new G("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Ft.randomBytes(t)}var bn={};$e(bn,{jwkToPkcs1:()=>U3,jwkToPkix:()=>F3,pkcs1ToJwk:()=>P3,pkixToJwk:()=>O3});var X_=re(Ki(),1),Q_=re(k0(),1);var vr=re(be(),1);var z_=re(Ue(),1),G_=re(Ss(),1),Yp=re(be(),1);function Mt(t,e){let r=Uint8Array.from(t.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=pe([new Uint8Array(e-r.length),r])}return j(r,"base64url")}function Kt(t){let e=N3(t);return new Yp.default.jsbn.BigInteger(j(e,"base16"),16)}function N3(t,e){let r=Ee(t,"base64urlpad");if(e!=null){if(r.length>e)throw new Error("byte array longer than desired length");r=pe([new Uint8Array(e-r.length),r])}return r}function P3(t){let e=vr.default.asn1.fromDer(j(t,"ascii")),r=vr.default.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:Mt(r.n),e:Mt(r.e),d:Mt(r.d),p:Mt(r.p),q:Mt(r.q),dp:Mt(r.dP),dq:Mt(r.dQ),qi:Mt(r.qInv),alg:"RS256"}}function U3(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw new G("JWK was missing components","ERR_INVALID_PARAMETERS");let e=vr.default.pki.privateKeyToAsn1({n:Kt(t.n),e:Kt(t.e),d:Kt(t.d),p:Kt(t.p),q:Kt(t.q),dP:Kt(t.dp),dQ:Kt(t.dq),qInv:Kt(t.qi)});return Ee(vr.default.asn1.toDer(e).getBytes(),"ascii")}function O3(t){let e=vr.default.asn1.fromDer(j(t,"ascii")),r=vr.default.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:Mt(r.n),e:Mt(r.e)}}function F3(t){if(t.n==null||t.e==null)throw new G("JWK was missing components","ERR_INVALID_PARAMETERS");let e=vr.default.pki.publicKeyToAsn1({n:Kt(t.n),e:Kt(t.e)});return Ee(vr.default.asn1.toDer(e).getBytes(),"ascii")}var M3=(0,jp.promisify)(vn.default.generateKeyPair);async function Xp(t){let e=await M3("rsa",{modulusLength:t,publicKeyEncoding:{type:"pkcs1",format:"jwk"},privateKeyEncoding:{type:"pkcs1",format:"jwk"}});return{privateKey:e.privateKey,publicKey:e.publicKey}}async function H0(t){if(t==null)throw new G("Missing key parameter","ERR_MISSING_KEY");return{privateKey:t,publicKey:{kty:t.kty,n:t.n,e:t.e}}}async function Qp(t,e){return vn.default.createSign("RSA-SHA256").update(e).sign({format:"jwk",key:t})}async function Zp(t,e,r){return vn.default.createVerify("RSA-SHA256").update(r).verify({format:"jwk",key:t},e)}var Jp=vn.default.constants.RSA_PKCS1_PADDING;function e1(t,e){return vn.default.publicEncrypt({format:"jwk",key:t,padding:Jp},e)}function t1(t,e){return vn.default.privateDecrypt({format:"jwk",key:t,padding:Jp},e)}var Xi=class{_key;constructor(e){this._key=e}async verify(e,r){return Zp(this._key,r,e)}marshal(){return bn.jwkToPkix(this._key)}get bytes(){return nr.encode({Type:_e.RSA,Data:this.marshal()}).subarray()}encrypt(e){return e1(this._key,e)}equals(e){return Fe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ye.digest(this.bytes);return e}},ui=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r}genSecret(){return Ps(16)}async sign(e){return Qp(this._key,e)}get public(){if(this._publicKey==null)throw new G("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Xi(this._publicKey)}decrypt(e){return t1(this._key,e)}marshal(){return bn.jwkToPkcs1(this._key)}get bytes(){return ir.encode({Type:_e.RSA,Data:this.marshal()}).subarray()}equals(e){return Fe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ye.digest(this.bytes);return e}async id(){let e=await this.public.hash();return j(e,"base58btc")}async export(e,r="pkcs-8"){if(r==="pkcs-8"){let n=new ji.default.util.ByteBuffer(this.marshal()),i=ji.default.asn1.fromDer(n),o=ji.default.pki.privateKeyFromAsn1(i),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return ji.default.pki.encryptRsaPrivateKey(o,e,s)}else{if(r==="libp2p-key")return ti(this.bytes,e);throw new G(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function V3(t){let e=bn.pkcs1ToJwk(t),r=await H0(e);return new ui(r.privateKey,r.publicKey)}function q3(t){let e=bn.pkixToJwk(t);return new Xi(e)}async function H3(t){let e=await H0(t);return new ui(e.privateKey,e.publicKey)}async function z3(t){let e=await Xp(t);return new ui(e.privateKey,e.publicKey)}var $0={};$e($0,{Secp256k1PrivateKey:()=>Zi,Secp256k1PublicKey:()=>Qi,generateKeyPair:()=>Y3,unmarshalSecp256k1PrivateKey:()=>$3,unmarshalSecp256k1PublicKey:()=>W3});function r1(){return Ft.randomPrivateKey()}async function n1(t,e){let{digest:r}=await Ye.digest(e);try{return await $p(r,t)}catch(n){throw new G(String(n),"ERR_INVALID_INPUT")}}async function i1(t,e,r){try{let{digest:n}=await Ye.digest(r);return Wp(e,n,t)}catch(n){throw new G(String(n),"ERR_INVALID_INPUT")}}function o1(t){return ge.fromHex(t).toRawBytes(!0)}function s1(t){try{q0(t,!0)}catch(e){throw new G(String(e),"ERR_INVALID_PRIVATE_KEY")}}function G0(t){try{ge.fromHex(t)}catch(e){throw new G(String(e),"ERR_INVALID_PUBLIC_KEY")}}function a1(t){try{return q0(t,!0)}catch(e){throw new G(String(e),"ERR_INVALID_PRIVATE_KEY")}}var Qi=class{_key;constructor(e){G0(e),this._key=e}async verify(e,r){return i1(this._key,r,e)}marshal(){return o1(this._key)}get bytes(){return nr.encode({Type:_e.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Fe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ye.digest(this.bytes);return e}},Zi=class{_key;_publicKey;constructor(e,r){this._key=e,this._publicKey=r??a1(e),s1(this._key),G0(this._publicKey)}async sign(e){return n1(this._key,e)}get public(){return new Qi(this._publicKey)}marshal(){return this._key}get bytes(){return ir.encode({Type:_e.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return Fe(this.bytes,e.bytes)}async hash(){let{bytes:e}=await Ye.digest(this.bytes);return e}async id(){let e=await this.public.hash();return j(e,"base58btc")}async export(e,r="libp2p-key"){if(r==="libp2p-key")return ti(this.bytes,e);throw new G(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function $3(t){return new Zi(t)}function W3(t){return new Qi(t)}async function Y3(){let t=r1();return new Zi(t)}var wn={rsa:z0,ed25519:N0,secp256k1:$0};function c1(t){let e=Object.keys(wn).join(" / ");return new G(`invalid or unsupported key type ${t}. Must be ${e}`,"ERR_UNSUPPORTED_KEY_TYPE")}function u1(t){let e=nr.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case _e.RSA:return wn.rsa.unmarshalRsaPublicKey(r);case _e.Ed25519:return wn.ed25519.unmarshalEd25519PublicKey(r);case _e.Secp256k1:return wn.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw c1(e.Type??"RSA")}}async function f1(t){let e=ir.decode(t),r=e.Data??new Uint8Array;switch(e.Type){case _e.RSA:return wn.rsa.unmarshalRsaPrivateKey(r);case _e.Ed25519:return wn.ed25519.unmarshalEd25519PrivateKey(r);case _e.Secp256k1:return wn.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw c1(e.Type??"RSA")}}var Us;(function(t){let e;t.codec=()=>(e==null&&(e=Rt((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.webtransportCerthashes!=null)for(let o of r.webtransportCerthashes)n.uint32(10),n.bytes(o);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={webtransportCerthashes:[]},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.webtransportCerthashes.push(r.bytes());break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>Lt(r,t.codec()),t.decode=r=>kt(r,t.codec())})(Us||(Us={}));var Ji;(function(t){let e;t.codec=()=>(e==null&&(e=Rt((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||r.identityKey!=null&&r.identityKey.byteLength>0)&&(n.uint32(10),n.bytes(r.identityKey??new Uint8Array(0))),(i.writeDefaults===!0||r.identitySig!=null&&r.identitySig.byteLength>0)&&(n.uint32(18),n.bytes(r.identitySig??new Uint8Array(0))),r.extensions!=null&&(n.uint32(34),Us.codec().encode(r.extensions,n,{writeDefaults:!1})),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0)},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.identityKey=r.bytes();break;case 2:i.identitySig=r.bytes();break;case 4:i.extensions=Us.codec().decode(r,r.uint32());break;default:r.skipType(s&7);break}}return i})),e),t.encode=r=>Lt(r,t.codec()),t.decode=r=>kt(r,t.codec())})(Ji||(Ji={}));async function h1(t,e,r){let n=await Q3(t,l1(e));if(t.publicKey==null)throw new Error("PublicKey was missing from local PeerId");return X3(t.publicKey,n,r)}function X3(t,e,r){return Ji.encode({identityKey:t,identitySig:e,extensions:r??{webtransportCerthashes:[]}}).subarray()}async function Q3(t,e){if(t.privateKey==null)throw new Error("PrivateKey was missing from PeerId");return(await f1(t.privateKey)).sign(e)}async function W0(t){return Ua(t.identityKey)}function Y0(t){return Ji.decode(t)}function l1(t){let e=Ee("noise-libp2p-static-key:");return pe([e,t],e.length+t.length)}async function j0(t,e,r){let n=await Ua(e.identityKey);if(!n.equals(r))throw new Error(`Payload identity key ${n.toString()} does not match expected remote peer ${r.toString()}`);let i=l1(t);if(n.publicKey==null)throw new Error("PublicKey was missing from PeerId");if(e.identitySig==null)throw new Error("Signature was missing from message");if(!await u1(n.publicKey).verify(i,e.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return n}function eo(t){return!(!(t instanceof Uint8Array)||t.length!==32)}var ze=Me("libp2p:noise");var Dt;vl?Dt=ze:Dt=Object.assign(()=>{},{enabled:!1,trace:()=>{},error:()=>{}});function d1(t){Dt(`LOCAL_STATIC_PUBLIC_KEY ${j(t.publicKey,"hex")}`),Dt(`LOCAL_STATIC_PRIVATE_KEY ${j(t.privateKey,"hex")}`)}function X0(t){t?(Dt(`LOCAL_PUBLIC_EPHEMERAL_KEY ${j(t.publicKey,"hex")}`),Dt(`LOCAL_PRIVATE_EPHEMERAL_KEY ${j(t.privateKey,"hex")}`)):Dt("Missing local ephemeral keys.")}function p1(t){Dt(`REMOTE_STATIC_PUBLIC_KEY ${j(t,"hex")}`)}function Q0(t){Dt(`REMOTE_EPHEMERAL_PUBLIC_KEY ${j(t,"hex")}`)}function y1(t){t.cs1&&t.cs2?(Dt(`CIPHER_STATE_1 ${t.cs1.n.getUint64()} ${j(t.cs1.k,"hex")}`),Dt(`CIPHER_STATE_2 ${t.cs2.n.getUint64()} ${j(t.cs2.k,"hex")}`)):Dt("Missing cipher state.")}var Z3="Cipherstate has reached maximum n, a new handshake must be performed",Os=class{n;bytes;view;constructor(e=0){this.n=e,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,e,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>4294967295)throw new Error(Z3)}};var Fs=class{crypto;constructor(e){this.crypto=e}encryptWithAd(e,r,n){let i=this.encrypt(e.k,e.n,r,n);return e.n.increment(),i}decryptWithAd(e,r,n,i){let{plaintext:o,valid:s}=this.decrypt(e.k,e.n,r,n,i);return s&&e.n.increment(),{plaintext:o,valid:s}}hasKey(e){return!this.isEmptyKey(e.k)}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(e){let r=this.createEmptyKey();return Fe(r,e)}encrypt(e,r,n,i){return r.assertValue(),this.crypto.chaCha20Poly1305Encrypt(i,r.getBytes(),n,e)}encryptAndHash(e,r){let n;return this.hasKey(e.cs)?n=this.encryptWithAd(e.cs,e.h,r):n=r,this.mixHash(e,n),n}decrypt(e,r,n,i,o){r.assertValue();let s=this.crypto.chaCha20Poly1305Decrypt(i,r.getBytes(),n,e,o);return s?{plaintext:s,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(e,r){let n,i=!0;return this.hasKey(e.cs)?{plaintext:n,valid:i}=this.decryptWithAd(e.cs,e.h,r):n=r,this.mixHash(e,r),{plaintext:n,valid:i}}dh(e,r){try{let n=this.crypto.generateX25519SharedKey(e,r);return n.length===32?n:n.subarray(0,32)}catch(n){let i=n;return ze.error(i),new Uint8Array(32)}}mixHash(e,r){e.h=this.getHash(e.h,r)}getHash(e,r){return this.crypto.hashSHA256(pe([e,r],e.length+r.length))}mixKey(e,r){let[n,i]=this.crypto.getHKDF(e.ck,r);e.cs=this.initializeKey(i),e.ck=n}initializeKey(e){return{k:e,n:new Os}}initializeSymmetric(e){let r=Ee(e,"utf-8"),n=this.hashProtocolName(r),i=n,o=this.createEmptyKey();return{cs:this.initializeKey(o),ck:i,h:n}}hashProtocolName(e){if(e.length<=32){let r=new Uint8Array(32);return r.set(e),r}else return this.getHash(e,new Uint8Array(0))}split(e){let[r,n]=this.crypto.getHKDF(e.ck,new Uint8Array(0)),i=this.initializeKey(r),o=this.initializeKey(n);return{cs1:i,cs2:o}}writeMessageRegular(e,r){let n=this.encryptWithAd(e,new Uint8Array(0),r),i=this.createEmptyKey(),o=new Uint8Array(0);return{ne:i,ns:o,ciphertext:n}}readMessageRegular(e,r){return this.decryptWithAd(e,new Uint8Array(0),r.ciphertext)}};var Ms=class extends Fs{initializeInitiator(e,r,n,i){let o="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(o);this.mixHash(s,e);let a=new Uint8Array(32);return{ss:s,s:r,rs:n,psk:i,re:a}}initializeResponder(e,r,n,i){let o="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(o);this.mixHash(s,e);let a=new Uint8Array(32);return{ss:s,s:r,rs:n,psk:i,re:a}}writeMessageA(e,r,n){let i=new Uint8Array(0);n!==void 0?e.e=n:e.e=this.crypto.generateX25519KeyPair();let o=e.e.publicKey;this.mixHash(e.ss,o);let s=this.encryptAndHash(e.ss,r);return{ne:o,ns:i,ciphertext:s}}writeMessageB(e,r){e.e=this.crypto.generateX25519KeyPair();let n=e.e.publicKey;this.mixHash(e.ss,n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let i=e.s.publicKey,o=this.encryptAndHash(e.ss,i);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let s=this.encryptAndHash(e.ss,r);return{ne:n,ns:o,ciphertext:s}}writeMessageC(e,r){let n=e.s.publicKey,i=this.encryptAndHash(e.ss,n);this.mixKey(e.ss,this.dh(e.s.privateKey,e.re));let o=this.encryptAndHash(e.ss,r),a={ne:this.createEmptyKey(),ns:i,ciphertext:o},{cs1:c,cs2:u}=this.split(e.ss);return{h:e.ss.h,messageBuffer:a,cs1:c,cs2:u}}readMessageA(e,r){return eo(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),this.decryptAndHash(e.ss,r.ciphertext)}readMessageB(e,r){if(eo(r.ne)&&(e.re=r.ne),this.mixHash(e.ss,e.re),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.re));let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ns);i&&eo(n)&&(e.rs=n),this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:o,valid:s}=this.decryptAndHash(e.ss,r.ciphertext);return{plaintext:o,valid:i&&s}}readMessageC(e,r){let{plaintext:n,valid:i}=this.decryptAndHash(e.ss,r.ns);if(i&&eo(n)&&(e.rs=n),!e.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(e.ss,this.dh(e.e.privateKey,e.rs));let{plaintext:o,valid:s}=this.decryptAndHash(e.ss,r.ciphertext),{cs1:a,cs2:c}=this.split(e.ss);return{h:e.ss.h,plaintext:o,valid:i&&s,cs1:a,cs2:c}}initSession(e,r,n){let i=this.createEmptyKey(),o=new Uint8Array(32),s;return e?s=this.initializeInitiator(r,n,o,i):s=this.initializeResponder(r,n,o,i),{hs:s,i:e,mc:0}}sendMessage(e,r,n){let i;if(e.mc===0)i=this.writeMessageA(e.hs,r,n);else if(e.mc===1)i=this.writeMessageB(e.hs,r);else if(e.mc===2){let{h:o,messageBuffer:s,cs1:a,cs2:c}=this.writeMessageC(e.hs,r);i=s,e.h=o,e.cs1=a,e.cs2=c}else if(e.mc>2)if(e.i){if(!e.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(e.cs1,r)}else{if(!e.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(e.cs2,r)}else throw new Error("Session invalid.");return e.mc++,i}recvMessage(e,r){let n=new Uint8Array(0),i=!1;if(e.mc===0)({plaintext:n,valid:i}=this.readMessageA(e.hs,r));else if(e.mc===1)({plaintext:n,valid:i}=this.readMessageB(e.hs,r));else if(e.mc===2){let{h:o,plaintext:s,valid:a,cs1:c,cs2:u}=this.readMessageC(e.hs,r);n=s,i=a,e.h=o,e.cs1=c,e.cs2=u}return e.mc++,{plaintext:n,valid:i}}};var Ks=class{isInitiator;session;remotePeer;remoteExtensions={webtransportCerthashes:[]};payload;connection;xx;staticKeypair;prologue;constructor(e,r,n,i,o,s,a,c){this.isInitiator=e,this.payload=r,this.prologue=n,this.staticKeypair=o,this.connection=s,a&&(this.remotePeer=a),this.xx=c??new Ms(i),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){if(d1(this.session.hs.s),this.isInitiator){ze.trace("Stage 0 - Initiator starting to send first message.");let e=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(jl(e)),ze.trace("Stage 0 - Initiator finished sending first message."),X0(this.session.hs.e)}else{ze.trace("Stage 0 - Responder waiting to receive first message...");let e=Zl((await this.connection.readLP()).subarray()),{valid:r}=this.xx.recvMessage(this.session,e);if(!r)throw new Nr("xx handshake stage 0 validation fail");ze.trace("Stage 0 - Responder received first message."),Q0(this.session.hs.re)}}async exchange(){if(this.isInitiator){ze.trace("Stage 1 - Initiator waiting to receive first message from responder...");let e=Jl((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Nr("xx handshake stage 1 validation fail");ze.trace("Stage 1 - Initiator received the message."),Q0(this.session.hs.re),p1(this.session.hs.rs),ze.trace("Initiator going to check remote's signature...");try{let i=Y0(r);this.remotePeer=this.remotePeer||await W0(i),await j0(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let o=i;throw new Xn(`Error occurred while verifying signed payload: ${o.message}`)}ze.trace("All good with the signature!")}else{ze.trace("Stage 1 - Responder sending out first message with signed payload and static key.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(Xl(e)),ze.trace("Stage 1 - Responder sent the second handshake message with signed payload."),X0(this.session.hs.e)}}async finish(){if(this.isInitiator){ze.trace("Stage 2 - Initiator sending third handshake message.");let e=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(Ql(e)),ze.trace("Stage 2 - Initiator sent message with signed payload.")}else{ze.trace("Stage 2 - Responder waiting for third handshake message...");let e=ed((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,e);if(!n)throw new Nr("xx handshake stage 2 validation fail");ze.trace("Stage 2 - Responder received the message, finished handshake.");try{let i=Y0(r);this.remotePeer=this.remotePeer||await W0(i),await j0(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let o=i;throw new Xn(`Error occurred while verifying signed payload: ${o.message}`)}}y1(this.session)}encrypt(e,r){let n=this.getCS(r);return this.xx.encryptWithAd(n,new Uint8Array(0),e)}decrypt(e,r,n){let i=this.getCS(r,!1);return this.xx.decryptWithAd(i,new Uint8Array(0),e,n)}getRemoteStaticKey(){return this.session.hs.rs}getCS(e,r=!0){if(!e.cs1||!e.cs2)throw new Nr("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?e.cs1:e.cs2:r?e.cs2:e.cs1}setRemoteNoiseExtension(e){e&&(this.remoteExtensions=e)}};function g1(t){return{xxHandshakeSuccesses:t.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:t.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:t.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:t.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:t.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}var Vs=class{protocol="/noise";crypto;prologue;staticKeys;extensions;metrics;constructor(e={}){let{staticNoiseKey:r,extensions:n,crypto:i,prologueBytes:o,metrics:s}=e;this.crypto=i??o0,this.extensions=n,this.metrics=s?g1(s):void 0,r?this.staticKeys=this.crypto.generateX25519KeyPairFromSeed(r):this.staticKeys=this.crypto.generateX25519KeyPair(),this.prologue=o??new Uint8Array(0)}async secureOutbound(e,r,n){let i=Kn(r,{lengthEncoder:jn,lengthDecoder:Pi,maxDataLength:65535}),o=await this.performHandshake({connection:i,isInitiator:!0,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,o),remoteExtensions:o.remoteExtensions,remotePeer:o.remotePeer}}async secureInbound(e,r,n){let i=Kn(r,{lengthEncoder:jn,lengthDecoder:Pi,maxDataLength:65535}),o=await this.performHandshake({connection:i,isInitiator:!1,localPeer:e,remotePeer:n});return{conn:await this.createSecureConnection(i,o),remotePeer:o.remotePeer,remoteExtensions:o.remoteExtensions}}async performHandshake(e){let r=await h1(e.localPeer,this.staticKeys.publicKey,this.extensions);return this.performXXHandshake(e,r)}async performXXHandshake(e,r){let{isInitiator:n,remotePeer:i,connection:o}=e,s=new Ks(n,r,this.prologue,this.crypto,this.staticKeys,o,i);try{await s.propose(),await s.exchange(),await s.finish(),this.metrics?.xxHandshakeSuccesses.increment()}catch(a){if(this.metrics?.xxHandshakeErrors.increment(),a instanceof Error)throw a.message=`Error occurred during XX handshake: ${a.message}`,a}return s}async createSecureConnection(e,r){let[n,i]=yl(),o=e.unwrap();return await ml(n,rd(r,this.metrics),o,s=>jr(s,{lengthDecoder:Pi}),nd(r,this.metrics),n),i}};function m1(t={}){return()=>new Vs(t)}var Y2=re(Cu(),1);var q2=re(Cu(),1);var Au=Me("libp2p:webrtc:sdp"),Du=Object.values(zt).map(t=>t.decoder).reduce((t,e)=>t.or(e));function H2(t){let e=t.getConfiguration().certificates?.at(0);if(e==null||e.getFingerprints==null){Au.trace("fetching fingerprint from local SDP");let n=t.localDescription;return n==null?void 0:D6(n.sdp)}if(Au.trace("fetching fingerprint from local certificate"),e.getFingerprints().length===0)return;let r=e.getFingerprints()[0].value;if(r==null)throw nc("","no fingerprint on local certificate");return r}var A6=/^a=fingerprint:(?:\w+-[0-9]+)\s(?<fingerprint>(:?[0-9a-fA-F]{2})+)$/m;function D6(t){return t.match(A6)?.groups?.fingerprint}function B6(t){for(let e of t.protoNames())if(e.startsWith("ip"))return e.toUpperCase();return Au("Warning: multiaddr does not appear to contain IP4 or IP6, defaulting to IP6",t),"IP6"}function aa(t){let r=t.stringTuples().filter(n=>n[0]===Tu).map(n=>n[1])[0];if(r===void 0||r==="")throw So(`Couldn't find a certhash component of multiaddr: ${t.toString()}`);return r}function Bu(t){let e=Du.decode(t);return q2.decode(e)}function _6(t){let e=Bu(aa(t)),r=_u(e.name),n=e.digest.reduce((o,s)=>o+s.toString(16).padStart(2,"0"),""),i=n.match(/.{1,2}/g);if(i==null)throw nc(n,t.toString());return[`${r.toUpperCase()} ${i.join(":").toUpperCase()}`,n]}function _u(t){switch(t){case"sha1":return"sha-1";case"sha2-256":return"sha-256";case"sha2-512":return"sha-512";default:throw Uf(t)}}function T6(t,e){let{host:r,port:n}=t.toOptions(),i=B6(t),[o]=_6(t);return`v=0
o=- 0 0 IN ${i} ${r}
s=-
c=IN ${i} ${r}
t=0 0
a=ice-lite
m=application ${n} UDP/DTLS/SCTP webrtc-datachannel
a=mid:0
a=setup:passive
a=ice-ufrag:${e}
a=ice-pwd:${e}
a=fingerprint:${o}
a=sctp-port:5000
a=max-message-size:100000
a=candidate:1467250027 1 UDP 1467250027 ${r} ${n} typ host\r
`}function z2(t,e){return{type:"answer",sdp:T6(t,e)}}function G2(t,e){if(t.sdp===void 0)throw Di("Can't munge a missing SDP");return t.sdp=t.sdp.replace(/\na=ice-ufrag:[^\n]*\n/,`
a=ice-ufrag:`+e+`
`).replace(/\na=ice-pwd:[^\n]*\n/,`
a=ice-pwd:`+e+`
`),t}var $2=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),W2=t=>[...Array(t)].map(()=>$2.at(Math.floor(Math.random()*$2.length))).join("");var ca=Me("libp2p:webrtc:transport"),k6=1e4,L6=ye("webrtc-direct").code,Tu=ye("certhash").code,ua=class{metrics;components;init;constructor(e,r={}){this.components=e,this.init=r,e.metrics!=null&&(this.metrics={dialerEvents:e.metrics.registerCounterGroup("libp2p_webrtc_dialer_events_total",{label:"event",help:"Total count of WebRTC dial events by type"})})}async dial(e,r){let n=await this._connect(e,r);return ca(`dialing address - ${e.toString()}`),n}createListener(e){throw Pf("WebRTCTransport.createListener")}filter(e){return e.filter(R6)}[Symbol.toStringTag]="@libp2p/webrtc-direct";[uo]=!0;async _connect(e,r){let n=new AbortController,i=n.signal,o=e.getPeerId();if(o===null)throw So("we need to have the remote's PeerId");let s=Ci(o),a=Bu(aa(e)),c=await RTCPeerConnection.generateCertificate({name:"ECDSA",namedCurve:"P-256",hash:_u(a.name)}),u=new RTCPeerConnection({certificates:[c]}),f=new Promise((I,U)=>{let M=u.createDataChannel("",{negotiated:!0,id:0}),$=setTimeout(()=>{let q=`Data channel was never opened: state: ${M.readyState}`;ca.error(q),this.metrics?.dialerEvents.increment({open_error:!0}),U(rc("data",q))},k6);M.onopen=q=>{clearTimeout($),I(M)},M.onerror=q=>{clearTimeout($);let ce=`Error opening a data channel for handshaking: ${q.target?.toString()??"not specified"}`;ca.error(ce),this.metrics?.dialerEvents.increment({unknown_error:!0}),U(rc("data",ce))}}),h="libp2p+webrtc+v1/"+W2(32),d=await u.createOffer(),p=G2(d,h);await u.setLocalDescription(p);let l=z2(e,h);await u.setRemoteDescription(l);let y=await f,g=this.components.peerId,x=this.generateNoisePrologue(u,a.code,e),w=m1({prologueBytes:x})(),v=zn({channel:y,direction:"inbound",dataChannelOptions:this.init.dataChannel}),A={...v,sink:v.sink.bind(v),source:async function*(){for await(let I of v.source)for(let U of I)yield U}()},E=new $r({peerConnection:u,remoteAddr:e,timeline:{open:Date.now()},metrics:this.metrics?.dialerEvents}),S=Bi?"iceconnectionstatechange":"connectionstatechange";u.addEventListener(S,()=>{switch(u.connectionState){case"failed":case"disconnected":case"closed":E.close().catch(I=>{ca.error("error closing connection",I)}).finally(()=>{n.abort()});break;default:break}},{signal:i}),this.metrics?.dialerEvents.increment({peer_connection:!0});let B=new rn({peerConnection:u,metrics:this.metrics?.dialerEvents,dataChannelOptions:this.init.dataChannel});return await w.secureInbound(g,A,s),r.upgrader.upgradeOutbound(E,{skipProtection:!0,skipEncryption:!0,muxerFactory:B})}generateNoisePrologue(e,r,n){if(e.getConfiguration().certificates?.length===0)throw Di("no local certificate");let i=H2(e);if(i==null)throw Di("no local fingerprint found");let o=i.trim().toLowerCase().replaceAll(":",""),s=Ee(o,"hex"),a=Y2.encode(s,r),c=Du.decode(aa(n)),u=Ee("libp2p-webrtc-noise:");return pe([u,a,c])}};function R6(t){let e=t.protoCodes();return e.includes(L6)&&e.includes(Tu)&&t.getPeerId()!=null&&!e.includes(ye("p2p-circuit").code)}function N6(t){return e=>new ua(e,t)}function P6(t){return e=>new Wo(e,t)}return ty(U6);})();
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
return Libp2PWebrtc}));
