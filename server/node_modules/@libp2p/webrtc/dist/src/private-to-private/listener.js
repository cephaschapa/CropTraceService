import { EventEmitter } from '@libp2p/interfaces/events';
import { Circuit } from '@multiformats/mafmt';
export class WebRTCPeerListener extends EventEmitter {
    peerId;
    transportManager;
    constructor(opts) {
        super();
        this.peerId = opts.peerId;
        this.transportManager = opts.transportManager;
    }
    async listen() {
        this.safeDispatchEvent('listening', {});
    }
    getAddrs() {
        return this.transportManager
            .getListeners()
            .filter(l => l !== this)
            .map(l => l.getAddrs()
            .filter(ma => Circuit.matches(ma))
            .map(ma => {
            return ma.encapsulate(`/webrtc/p2p/${this.peerId}`);
        }))
            .flat();
    }
    async close() {
        this.safeDispatchEvent('close', {});
    }
}
//# sourceMappingURL=listener.js.map