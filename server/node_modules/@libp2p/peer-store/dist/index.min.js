(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PPeerStore = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PPeerStore=(()=>{var Cl=Object.create;var ni=Object.defineProperty;var Il=Object.getOwnPropertyDescriptor;var Tl=Object.getOwnPropertyNames;var _l=Object.getPrototypeOf,Rl=Object.prototype.hasOwnProperty;var K=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Rt=(e,t)=>{for(var r in t)ni(e,r,{get:t[r],enumerable:!0})},Ka=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Tl(t))!Rl.call(e,i)&&i!==r&&ni(e,i,{get:()=>t[i],enumerable:!(n=Il(t,i))||n.enumerable});return e};var it=(e,t,r)=>(r=e!=null?Cl(_l(e)):{},Ka(t||!e||!e.__esModule?ni(r,"default",{value:e,enumerable:!0}):r,e)),kl=e=>Ka(ni({},"__esModule",{value:!0}),e);var Ma=K((qg,Fa)=>{var Ur=1e3,Kr=Ur*60,Fr=Kr*60,fr=Fr*24,Pl=fr*7,Ll=fr*365.25;Fa.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Nl(e);if(r==="number"&&isFinite(e))return t.long?Ul(e):Dl(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Nl(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Ll;case"weeks":case"week":case"w":return r*Pl;case"days":case"day":case"d":return r*fr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Fr;case"minutes":case"minute":case"mins":case"min":case"m":return r*Kr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Ur;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Dl(e){var t=Math.abs(e);return t>=fr?Math.round(e/fr)+"d":t>=Fr?Math.round(e/Fr)+"h":t>=Kr?Math.round(e/Kr)+"m":t>=Ur?Math.round(e/Ur)+"s":e+"ms"}function Ul(e){var t=Math.abs(e);return t>=fr?ii(e,t,fr,"day"):t>=Fr?ii(e,t,Fr,"hour"):t>=Kr?ii(e,t,Kr,"minute"):t>=Ur?ii(e,t,Ur,"second"):e+" ms"}function ii(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Va=K((zg,Oa)=>{function Kl(e){r.debug=r,r.default=r,r.coerce=u,r.disable=s,r.enable=i,r.enabled=o,r.humanize=Ma(),r.destroy=c,Object.keys(e).forEach(f=>{r[f]=e[f]}),r.names=[],r.skips=[],r.formatters={};function t(f){let l=0;for(let h=0;h<f.length;h++)l=(l<<5)-l+f.charCodeAt(h),l|=0;return r.colors[Math.abs(l)%r.colors.length]}r.selectColor=t;function r(f){let l,h=null,d,p;function g(...x){if(!g.enabled)return;let v=g,S=Number(new Date),B=S-(l||S);v.diff=B,v.prev=l,v.curr=S,l=S,x[0]=r.coerce(x[0]),typeof x[0]!="string"&&x.unshift("%O");let P=0;x[0]=x[0].replace(/%([a-zA-Z%])/g,(T,V)=>{if(T==="%%")return"%";P++;let z=r.formatters[V];if(typeof z=="function"){let Et=x[P];T=z.call(v,Et),x.splice(P,1),P--}return T}),r.formatArgs.call(v,x),(v.log||r.log).apply(v,x)}return g.namespace=f,g.useColors=r.useColors(),g.color=r.selectColor(f),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>h!==null?h:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(f)),p),set:x=>{h=x}}),typeof r.init=="function"&&r.init(g),g}function n(f,l){let h=r(this.namespace+(typeof l>"u"?":":l)+f);return h.log=this.log,h}function i(f){r.save(f),r.namespaces=f,r.names=[],r.skips=[];let l,h=(typeof f=="string"?f:"").split(/[\s,]+/),d=h.length;for(l=0;l<d;l++)h[l]&&(f=h[l].replace(/\*/g,".*?"),f[0]==="-"?r.skips.push(new RegExp("^"+f.slice(1)+"$")):r.names.push(new RegExp("^"+f+"$")))}function s(){let f=[...r.names.map(a),...r.skips.map(a).map(l=>"-"+l)].join(",");return r.enable(""),f}function o(f){if(f[f.length-1]==="*")return!0;let l,h;for(l=0,h=r.skips.length;l<h;l++)if(r.skips[l].test(f))return!1;for(l=0,h=r.names.length;l<h;l++)if(r.names[l].test(f))return!0;return!1}function a(f){return f.toString().substring(2,f.toString().length-2).replace(/\.\*\?$/,"*")}function u(f){return f instanceof Error?f.stack||f.message:f}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Oa.exports=Kl});var qa=K((Qt,si)=>{Qt.formatArgs=Ml;Qt.save=Ol;Qt.load=Vl;Qt.useColors=Fl;Qt.storage=ql();Qt.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Qt.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Fl(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ml(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+si.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}Qt.log=console.debug||console.log||(()=>{});function Ol(e){try{e?Qt.storage.setItem("debug",e):Qt.storage.removeItem("debug")}catch{}}function Vl(){let e;try{e=Qt.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function ql(){try{return localStorage}catch{}}si.exports=Va()(Qt);var{formatters:zl}=si.exports;zl.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var j=K((qm,f0)=>{f0.exports={options:{usePureJavaScript:!1}}});var p0=K((zm,h0)=>{var Vs={};h0.exports=Vs;var l0={};Vs.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=Zh(e,t);else{var i=0,s=t.length,o=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var u=0,c=e[i];u<a.length;++u)c+=a[u]<<8,a[u]=c%s,c=c/s|0;for(;c>0;)a.push(c%s),c=c/s|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=o;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}if(r){var f=new RegExp(".{1,"+r+"}","g");n=n.match(f).join(`\r
`)}return n};Vs.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=l0[t];if(!r){r=l0[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,s=t.charAt(0),o=[0],n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(a===void 0)return;for(var u=0,c=a;u<o.length;++u)c+=o[u]*i,o[u]=c&255,c>>=8;for(;c>0;)o.push(c&255),c>>=8}for(var f=0;e[f]===s&&f<e.length-1;++f)o.push(0);return typeof Buffer<"u"?Buffer.from(o.reverse()):new Uint8Array(o.reverse())};function Zh(e,t){var r=0,n=t.length,i=t.charAt(0),s=[0];for(r=0;r<e.length();++r){for(var o=0,a=e.at(r);o<s.length;++o)a+=s[o]<<8,s[o]=a%n,a=a/n|0;for(;a>0;)s.push(a%n),a=a/n|0}var u="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)u+=i;for(r=s.length-1;r>=0;--r)u+=t[s[r]];return u}});var wt=K((Hm,m0)=>{var d0=j(),y0=p0(),y=m0.exports=d0.util=d0.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){y.nextTick=process.nextTick,typeof setImmediate=="function"?y.setImmediate=setImmediate:y.setImmediate=y.nextTick;return}if(typeof setImmediate=="function"){y.setImmediate=function(){return setImmediate.apply(void 0,arguments)},y.nextTick=function(a){return setImmediate(a)};return}if(y.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(u){if(u.source===window&&u.data===e){u.stopPropagation();var c=t.slice();t.length=0,c.forEach(function(f){f()})}};var o=a,e="forge.setImmediate",t=[];y.setImmediate=function(u){t.push(u),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var u=t.slice();t.length=0,u.forEach(function(c){c()})}).observe(i,{attributes:!0});var s=y.setImmediate;y.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),s(u)):(t.push(u),t.length===1&&i.setAttribute("a",n=!n))}}y.nextTick=y.setImmediate})();y.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;y.globalScope=function(){return y.isNodejs?globalThis:typeof self>"u"?window:self}();y.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};y.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};y.isArrayBufferView=function(e){return e&&y.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function vn(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}y.ByteBuffer=qs;function qs(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(y.isArrayBuffer(e)||y.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof qs||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}y.ByteStringBuffer=qs;var Xh=4096;y.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>Xh&&(this.data.substr(0,1),this._constructedStringLength=0)};y.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};y.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};y.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};y.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};y.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};y.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(y.encodeUtf8(e))};y.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};y.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};y.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};y.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};y.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};y.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};y.ByteStringBuffer.prototype.putInt=function(e,t){vn(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};y.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};y.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};y.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};y.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};y.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};y.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};y.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};y.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};y.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};y.ByteStringBuffer.prototype.getInt=function(e){vn(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};y.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};y.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};y.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};y.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};y.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};y.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};y.ByteStringBuffer.prototype.copy=function(){var e=y.createBuffer(this.data);return e.read=this.read,e};y.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};y.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};y.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};y.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};y.ByteStringBuffer.prototype.toString=function(){return y.decodeUtf8(this.bytes())};function Jh(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=y.isArrayBuffer(e),n=y.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}y.DataBuffer=Jh;y.DataBuffer.prototype.length=function(){return this.write-this.read};y.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};y.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};y.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};y.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};y.DataBuffer.prototype.putBytes=function(e,t){if(y.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(y.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof y.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&y.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof y.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var s;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),s=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.hex.decode(e,s,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),s=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.base64.decode(e,s,this.write),this;if(t==="utf8"&&(e=y.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),s=new Uint8Array(this.data.buffer,this.write),this.write+=y.binary.raw.decode(s),this;if(t==="utf16")return this.accommodate(e.length*2),s=new Uint16Array(this.data.buffer,this.write),this.write+=y.text.utf16.encode(s),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};y.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};y.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};y.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};y.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};y.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};y.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};y.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};y.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};y.DataBuffer.prototype.putInt=function(e,t){vn(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};y.DataBuffer.prototype.putSignedInt=function(e,t){return vn(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};y.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};y.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};y.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};y.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};y.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};y.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};y.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};y.DataBuffer.prototype.getInt=function(e){vn(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};y.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};y.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};y.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};y.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};y.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};y.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};y.DataBuffer.prototype.copy=function(){return new y.DataBuffer(this)};y.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};y.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};y.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};y.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};y.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return y.binary.raw.encode(t);if(e==="hex")return y.binary.hex.encode(t);if(e==="base64")return y.binary.base64.encode(t);if(e==="utf8")return y.text.utf8.decode(t);if(e==="utf16")return y.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};y.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=y.encodeUtf8(e)),new y.ByteBuffer(e)};y.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};y.xorBytes=function(e,t,r){for(var n="",i="",s="",o=0,a=0;r>0;--r,++o)i=e.charCodeAt(o)^t.charCodeAt(o),a>=10&&(n+=s,s="",a=0),s+=String.fromCharCode(i),++a;return n+=s,n};y.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};y.bytesToHex=function(e){return y.createBuffer(e).toHex()};y.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var Ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",We=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],g0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";y.encode64=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.length;)i=e.charCodeAt(a++),s=e.charCodeAt(a++),o=e.charCodeAt(a++),r+=Ge.charAt(i>>2),r+=Ge.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Ge.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Ge.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};y.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,s,o=0;o<e.length;)r=We[e.charCodeAt(o++)-43],n=We[e.charCodeAt(o++)-43],i=We[e.charCodeAt(o++)-43],s=We[e.charCodeAt(o++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),s!==64&&(t+=String.fromCharCode((i&3)<<6|s)));return t};y.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};y.decodeUtf8=function(e){return decodeURIComponent(escape(e))};y.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:y0.encode,decode:y0.decode}};y.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};y.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};y.binary.hex.encode=y.bytesToHex;y.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,s=r;for(e.length&1&&(i=1,n[s++]=parseInt(e[0],16));i<e.length;i+=2)n[s++]=parseInt(e.substr(i,2),16);return t?s-r:n};y.binary.base64.encode=function(e,t){for(var r="",n="",i,s,o,a=0;a<e.byteLength;)i=e[a++],s=e[a++],o=e[a++],r+=Ge.charAt(i>>2),r+=Ge.charAt((i&3)<<4|s>>4),isNaN(s)?r+="==":(r+=Ge.charAt((s&15)<<2|o>>6),r+=isNaN(o)?"=":Ge.charAt(o&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};y.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,s,o,a,u=0,c=r;u<e.length;)i=We[e.charCodeAt(u++)-43],s=We[e.charCodeAt(u++)-43],o=We[e.charCodeAt(u++)-43],a=We[e.charCodeAt(u++)-43],n[c++]=i<<2|s>>4,o!==64&&(n[c++]=(s&15)<<4|o>>2,a!==64&&(n[c++]=(o&3)<<6|a));return t?c-r:n.subarray(0,c)};y.binary.base58.encode=function(e,t){return y.binary.baseN.encode(e,g0,t)};y.binary.base58.decode=function(e,t){return y.binary.baseN.decode(e,g0,t)};y.text={utf8:{},utf16:{}};y.text.utf8.encode=function(e,t,r){e=y.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,s=0;s<e.length;++s)n[i++]=e.charCodeAt(s);return t?i-r:n};y.text.utf8.decode=function(e){return y.decodeUtf8(String.fromCharCode.apply(null,e))};y.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var s=r,o=r,a=0;a<e.length;++a)i[o++]=e.charCodeAt(a),s+=2;return t?s-r:n};y.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};y.deflate=function(e,t,r){if(t=y.decode64(e.deflate(y.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};y.inflate=function(e,t,r){var n=e.inflate(y.encode64(t)).rval;return n===null?null:y.decode64(n)};var zs=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=y.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},Hs=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(y.decode64(r))),r},jh=function(e,t,r,n){var i=Hs(e,t);i===null&&(i={}),i[r]=n,zs(e,t,i)},tp=function(e,t,r){var n=Hs(e,t);return n!==null&&(n=r in n?n[r]:null),n},ep=function(e,t,r){var n=Hs(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var s in n){i=!1;break}i&&(n=null),zs(e,t,n)}},rp=function(e,t){zs(e,t,null)},ui=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,s=!1,o=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),s=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),s=!0)}catch(u){o=u}if(s)break}if(!s)throw o;return n};y.setItem=function(e,t,r,n,i){ui(jh,arguments,i)};y.getItem=function(e,t,r,n){return ui(tp,arguments,n)};y.removeItem=function(e,t,r,n){ui(ep,arguments,n)};y.clearItems=function(e,t,r){ui(rp,arguments,r)};y.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};y.format=function(e){for(var t=/%./g,r,n,i=0,s=[],o=0;r=t.exec(e);){n=e.substring(o,t.lastIndex-2),n.length>0&&s.push(n),o=t.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?s.push(arguments[i+++1]):s.push("<?>");break;case"%":s.push("%");break;default:s.push("<%"+a+"?>")}}return s.push(e.substring(o)),s.join("")};y.formatNumber=function(e,t,r,n){var i=e,s=isNaN(t=Math.abs(t))?2:t,o=r===void 0?",":r,a=n===void 0?".":n,u=i<0?"-":"",c=parseInt(i=Math.abs(+i||0).toFixed(s),10)+"",f=c.length>3?c.length%3:0;return u+(f?c.substr(0,f)+a:"")+c.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+a)+(s?o+Math.abs(i-c).toFixed(s).slice(2):"")};y.formatSize=function(e){return e>=1073741824?e=y.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=y.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=y.formatNumber(e/1024,0)+" KiB":e=y.formatNumber(e,0)+" bytes",e};y.bytesFromIP=function(e){return e.indexOf(".")!==-1?y.bytesFromIPv4(e):e.indexOf(":")!==-1?y.bytesFromIPv6(e):null};y.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=y.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};y.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(o){return o.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=y.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var s=y.hexToBytes(e[i]);s.length<2&&n.putByte(0),n.putBytes(s)}return n.getBytes()};y.bytesToIP=function(e){return e.length===4?y.bytesToIPv4(e):e.length===16?y.bytesToIPv6(e):null};y.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};y.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var s=y.bytesToHex(e[i]+e[i+1]);s[0]==="0"&&s!=="0";)s=s.substr(1);if(s==="0"){var o=r[r.length-1],a=t.length;!o||a!==o.end+1?r.push({start:a,end:a}):(o.end=a,o.end-o.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(s)}if(r.length>0){var u=r[n];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),u.start===0&&t.unshift(""),u.end===7&&t.push(""))}return t.join(":")};y.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in y&&!e.update)return t(null,y.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return y.cores=navigator.hardwareConcurrency,t(null,y.cores);if(typeof Worker>"u")return y.cores=1,t(null,y.cores);if(typeof Blob>"u")return y.cores=2,t(null,y.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(o){for(var a=Date.now(),u=a+4;Date.now()<u;);self.postMessage({st:a,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(o,a,u){if(a===0){var c=Math.floor(o.reduce(function(f,l){return f+l},0)/o.length);return y.cores=Math.max(1,c),URL.revokeObjectURL(r),t(null,y.cores)}i(u,function(f,l){o.push(s(u,l)),n(o,a-1,u)})}function i(o,a){for(var u=[],c=[],f=0;f<o;++f){var l=new Worker(r);l.addEventListener("message",function(h){if(c.push(h.data),c.length===o){for(var d=0;d<o;++d)u[d].terminate();a(null,c)}}),u.push(l)}for(var f=0;f<o;++f)u[f].postMessage(f)}function s(o,a){for(var u=[],c=0;c<o;++c)for(var f=a[c],l=u[c]=[],h=0;h<o;++h)if(c!==h){var d=a[h];(f.st>d.st&&f.st<d.et||d.st>f.st&&d.st<f.et)&&l.push(h)}return u.reduce(function(p,g){return Math.max(p,g.length)},0)}}});var ci=K((Gm,x0)=>{var wn=j();wn.pki=wn.pki||{};var Gs=x0.exports=wn.pki.oids=wn.oids=wn.oids||{};function A(e,t){Gs[e]=t,Gs[t]=e}function X(e,t){Gs[e]=t}A("1.2.840.113549.1.1.1","rsaEncryption");A("1.2.840.113549.1.1.4","md5WithRSAEncryption");A("1.2.840.113549.1.1.5","sha1WithRSAEncryption");A("1.2.840.113549.1.1.7","RSAES-OAEP");A("1.2.840.113549.1.1.8","mgf1");A("1.2.840.113549.1.1.9","pSpecified");A("1.2.840.113549.1.1.10","RSASSA-PSS");A("1.2.840.113549.1.1.11","sha256WithRSAEncryption");A("1.2.840.113549.1.1.12","sha384WithRSAEncryption");A("1.2.840.113549.1.1.13","sha512WithRSAEncryption");A("1.3.101.112","EdDSA25519");A("1.2.840.10040.4.3","dsa-with-sha1");A("1.3.14.3.2.7","desCBC");A("1.3.14.3.2.26","sha1");A("1.3.14.3.2.29","sha1WithRSASignature");A("2.16.840.1.101.3.4.2.1","sha256");A("2.16.840.1.101.3.4.2.2","sha384");A("2.16.840.1.101.3.4.2.3","sha512");A("2.16.840.1.101.3.4.2.4","sha224");A("2.16.840.1.101.3.4.2.5","sha512-224");A("2.16.840.1.101.3.4.2.6","sha512-256");A("1.2.840.113549.2.2","md2");A("1.2.840.113549.2.5","md5");A("1.2.840.113549.1.7.1","data");A("1.2.840.113549.1.7.2","signedData");A("1.2.840.113549.1.7.3","envelopedData");A("1.2.840.113549.1.7.4","signedAndEnvelopedData");A("1.2.840.113549.1.7.5","digestedData");A("1.2.840.113549.1.7.6","encryptedData");A("1.2.840.113549.1.9.1","emailAddress");A("1.2.840.113549.1.9.2","unstructuredName");A("1.2.840.113549.1.9.3","contentType");A("1.2.840.113549.1.9.4","messageDigest");A("1.2.840.113549.1.9.5","signingTime");A("1.2.840.113549.1.9.6","counterSignature");A("1.2.840.113549.1.9.7","challengePassword");A("1.2.840.113549.1.9.8","unstructuredAddress");A("1.2.840.113549.1.9.14","extensionRequest");A("1.2.840.113549.1.9.20","friendlyName");A("1.2.840.113549.1.9.21","localKeyId");A("1.2.840.113549.1.9.22.1","x509Certificate");A("1.2.840.113549.1.12.10.1.1","keyBag");A("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");A("1.2.840.113549.1.12.10.1.3","certBag");A("1.2.840.113549.1.12.10.1.4","crlBag");A("1.2.840.113549.1.12.10.1.5","secretBag");A("1.2.840.113549.1.12.10.1.6","safeContentsBag");A("1.2.840.113549.1.5.13","pkcs5PBES2");A("1.2.840.113549.1.5.12","pkcs5PBKDF2");A("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");A("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");A("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");A("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");A("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");A("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");A("1.2.840.113549.2.7","hmacWithSHA1");A("1.2.840.113549.2.8","hmacWithSHA224");A("1.2.840.113549.2.9","hmacWithSHA256");A("1.2.840.113549.2.10","hmacWithSHA384");A("1.2.840.113549.2.11","hmacWithSHA512");A("1.2.840.113549.3.7","des-EDE3-CBC");A("2.16.840.1.101.3.4.1.2","aes128-CBC");A("2.16.840.1.101.3.4.1.22","aes192-CBC");A("2.16.840.1.101.3.4.1.42","aes256-CBC");A("2.5.4.3","commonName");A("2.5.4.4","surname");A("2.5.4.5","serialNumber");A("2.5.4.6","countryName");A("2.5.4.7","localityName");A("2.5.4.8","stateOrProvinceName");A("2.5.4.9","streetAddress");A("2.5.4.10","organizationName");A("2.5.4.11","organizationalUnitName");A("2.5.4.12","title");A("2.5.4.13","description");A("2.5.4.15","businessCategory");A("2.5.4.17","postalCode");A("2.5.4.42","givenName");A("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");A("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");A("2.16.840.1.113730.1.1","nsCertType");A("2.16.840.1.113730.1.13","nsComment");X("2.5.29.1","authorityKeyIdentifier");X("2.5.29.2","keyAttributes");X("2.5.29.3","certificatePolicies");X("2.5.29.4","keyUsageRestriction");X("2.5.29.5","policyMapping");X("2.5.29.6","subtreesConstraint");X("2.5.29.7","subjectAltName");X("2.5.29.8","issuerAltName");X("2.5.29.9","subjectDirectoryAttributes");X("2.5.29.10","basicConstraints");X("2.5.29.11","nameConstraints");X("2.5.29.12","policyConstraints");X("2.5.29.13","basicConstraints");A("2.5.29.14","subjectKeyIdentifier");A("2.5.29.15","keyUsage");X("2.5.29.16","privateKeyUsagePeriod");A("2.5.29.17","subjectAltName");A("2.5.29.18","issuerAltName");A("2.5.29.19","basicConstraints");X("2.5.29.20","cRLNumber");X("2.5.29.21","cRLReason");X("2.5.29.22","expirationDate");X("2.5.29.23","instructionCode");X("2.5.29.24","invalidityDate");X("2.5.29.25","cRLDistributionPoints");X("2.5.29.26","issuingDistributionPoint");X("2.5.29.27","deltaCRLIndicator");X("2.5.29.28","issuingDistributionPoint");X("2.5.29.29","certificateIssuer");X("2.5.29.30","nameConstraints");A("2.5.29.31","cRLDistributionPoints");A("2.5.29.32","certificatePolicies");X("2.5.29.33","policyMappings");X("2.5.29.34","policyConstraints");A("2.5.29.35","authorityKeyIdentifier");X("2.5.29.36","policyConstraints");A("2.5.29.37","extKeyUsage");X("2.5.29.46","freshestCRL");X("2.5.29.54","inhibitAnyPolicy");A("1.3.6.1.4.1.11129.2.4.2","timestampList");A("1.3.6.1.5.5.7.1.1","authorityInfoAccess");A("1.3.6.1.5.5.7.3.1","serverAuth");A("1.3.6.1.5.5.7.3.2","clientAuth");A("1.3.6.1.5.5.7.3.3","codeSigning");A("1.3.6.1.5.5.7.3.4","emailProtection");A("1.3.6.1.5.5.7.3.8","timeStamping")});var En=K((Wm,w0)=>{var st=j();wt();ci();var I=w0.exports=st.asn1=st.asn1||{};I.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};I.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};I.create=function(e,t,r,n,i){if(st.util.isArray(n)){for(var s=[],o=0;o<n.length;++o)n[o]!==void 0&&s.push(n[o]);n=s}var a={tagClass:e,type:t,constructed:r,composed:r||st.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=I.copy(a)),a};I.copy=function(e,t){var r;if(st.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(I.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:I.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};I.equals=function(e,t,r){if(st.util.isArray(e)){if(!st.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!I.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&I.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};I.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function bn(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var np=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var s=r&127;bn(e,t,s),n=e.getInt(s<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};I.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=st.util.createBuffer(e));var r=e.length(),n=fi(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function fi(e,t,r,n){var i;bn(e,t,2);var s=e.getByte();t--;var o=s&192,a=s&31;i=e.length();var u=np(e,t);if(t-=i-e.length(),u!==void 0&&u>t){if(n.strict){var c=new Error("Too few bytes to read ASN.1 value.");throw c.available=e.length(),c.remaining=t,c.requested=u,c}u=t}var f,l,h=(s&32)===32;if(h)if(f=[],u===void 0)for(;;){if(bn(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),f.push(fi(e,t,r+1,n)),t-=i-e.length()}else for(;u>0;)i=e.length(),f.push(fi(e,u,r+1,n)),t-=i-e.length(),u-=i-e.length();if(f===void 0&&o===I.Class.UNIVERSAL&&a===I.Type.BITSTRING&&(l=e.bytes(u)),f===void 0&&n.decodeBitStrings&&o===I.Class.UNIVERSAL&&a===I.Type.BITSTRING&&u>1){var d=e.read,p=t,g=0;if(a===I.Type.BITSTRING&&(bn(e,t,1),g=e.getByte(),t--),g===0)try{i=e.length();var x={strict:!0,decodeBitStrings:!0},v=fi(e,t,r+1,x),S=i-e.length();t-=S,a==I.Type.BITSTRING&&S++;var B=v.tagClass;S===u&&(B===I.Class.UNIVERSAL||B===I.Class.CONTEXT_SPECIFIC)&&(f=[v])}catch{}f===void 0&&(e.read=d,t=p)}if(f===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=t}if(a===I.Type.BMPSTRING)for(f="";u>0;u-=2)bn(e,t,2),f+=String.fromCharCode(e.getInt16()),t-=2;else f=e.getBytes(u),t-=u}var P=l===void 0?null:{bitStringContents:l};return I.create(o,a,h,f,P)}I.toDer=function(e){var t=st.util.createBuffer(),r=e.tagClass|e.type,n=st.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=I.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var s=0;s<e.value.length;++s)e.value[s]!==void 0&&n.putBuffer(I.toDer(e.value[s]))}else if(e.type===I.Type.BMPSTRING)for(var s=0;s<e.value.length;++s)n.putInt16(e.value.charCodeAt(s));else e.type===I.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var o=n.length(),a="";do a+=String.fromCharCode(o&255),o=o>>>8;while(o>0);t.putByte(a.length|128);for(var s=a.length-1;s>=0;--s)t.putByte(a.charCodeAt(s))}return t.putBuffer(n),t};I.oidToDer=function(e){var t=e.split("."),r=st.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,s,o,a=2;a<t.length;++a){n=!0,i=[],s=parseInt(t[a],10);do o=s&127,s=s>>>7,n||(o|=128),i.push(o),n=!1;while(s>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};I.derToOid=function(e){var t;typeof e=="string"&&(e=st.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};I.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),s=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var u=e.charAt(10),c=10;u!=="+"&&u!=="-"&&(a=parseInt(e.substr(10,2),10),c+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,0),c&&(u=e.charAt(c),u==="+"||u==="-")){var f=parseInt(e.substr(c+1,2),10),l=parseInt(e.substr(c+4,2),10),h=f*60+l;h*=6e4,u==="+"?t.setTime(+t-h):t.setTime(+t+h)}return t};I.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),u=0,c=0,f=!1;e.charAt(e.length-1)==="Z"&&(f=!0);var l=e.length-5,h=e.charAt(l);if(h==="+"||h==="-"){var d=parseInt(e.substr(l+1,2),10),p=parseInt(e.substr(l+4,2),10);c=d*60+p,c*=6e4,h==="+"&&(c*=-1),f=!0}return e.charAt(14)==="."&&(u=parseFloat(e.substr(14),10)*1e3),f?(t.setUTCFullYear(r,n,i),t.setUTCHours(s,o,a,u),t.setTime(+t+c)):(t.setFullYear(r,n,i),t.setHours(s,o,a,u)),t};I.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};I.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};I.integerToDer=function(e){var t=st.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};I.derToInteger=function(e){typeof e=="string"&&(e=st.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};I.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&st.util.isArray(t.value))for(var s=0,o=0;i&&o<t.value.length;++o)i=t.value[o].optional||!1,e.value[s]&&(i=I.validate(e.value[s],t.value[o],r,n),i?++s:t.value[o].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var a;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var u=e.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var v0=/[^\\u0000-\\u00ff]/;I.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",s=0;s<t*r;++s)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case I.Class.UNIVERSAL:n+="Universal:";break;case I.Class.APPLICATION:n+="Application:";break;case I.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case I.Class.PRIVATE:n+="Private:";break}if(e.tagClass===I.Class.UNIVERSAL)switch(n+=e.type,e.type){case I.Type.NONE:n+=" (None)";break;case I.Type.BOOLEAN:n+=" (Boolean)";break;case I.Type.INTEGER:n+=" (Integer)";break;case I.Type.BITSTRING:n+=" (Bit string)";break;case I.Type.OCTETSTRING:n+=" (Octet string)";break;case I.Type.NULL:n+=" (Null)";break;case I.Type.OID:n+=" (Object Identifier)";break;case I.Type.ODESC:n+=" (Object Descriptor)";break;case I.Type.EXTERNAL:n+=" (External or Instance of)";break;case I.Type.REAL:n+=" (Real)";break;case I.Type.ENUMERATED:n+=" (Enumerated)";break;case I.Type.EMBEDDED:n+=" (Embedded PDV)";break;case I.Type.UTF8:n+=" (UTF8)";break;case I.Type.ROID:n+=" (Relative Object Identifier)";break;case I.Type.SEQUENCE:n+=" (Sequence)";break;case I.Type.SET:n+=" (Set)";break;case I.Type.PRINTABLESTRING:n+=" (Printable String)";break;case I.Type.IA5String:n+=" (IA5String (ASCII))";break;case I.Type.UTCTIME:n+=" (UTC time)";break;case I.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case I.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var o=0,a="",s=0;s<e.value.length;++s)e.value[s]!==void 0&&(o+=1,a+=I.prettyPrint(e.value[s],t+1,r),s+1<e.value.length&&(a+=","));n+=i+"Sub values: "+o+a}else{if(n+=i+"Value: ",e.type===I.Type.OID){var u=I.derToOid(e.value);n+=u,st.pki&&st.pki.oids&&u in st.pki.oids&&(n+=" ("+st.pki.oids[u]+") ")}if(e.type===I.Type.INTEGER)try{n+=I.derToInteger(e.value)}catch{n+="0x"+st.util.bytesToHex(e.value)}else if(e.type===I.Type.BITSTRING){if(e.value.length>1?n+="0x"+st.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var c=e.value.charCodeAt(0);c==1?n+=" (1 unused bit shown)":c>1&&(n+=" ("+c+" unused bits shown)")}}else if(e.type===I.Type.OCTETSTRING)v0.test(e.value)||(n+="("+e.value+") "),n+="0x"+st.util.bytesToHex(e.value);else if(e.type===I.Type.UTF8)try{n+=st.util.decodeUtf8(e.value)}catch(f){if(f.message==="URI malformed")n+="0x"+st.util.bytesToHex(e.value)+" (malformed UTF8)";else throw f}else e.type===I.Type.PRINTABLESTRING||e.type===I.Type.IA5String?n+=e.value:v0.test(e.value)?n+="0x"+st.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var $s=K(($m,b0)=>{var Bt=j();wt();b0.exports=Bt.cipher=Bt.cipher||{};Bt.cipher.algorithms=Bt.cipher.algorithms||{};Bt.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Bt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Bt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};Bt.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Bt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Bt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};Bt.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Bt.cipher.algorithms[e]=t};Bt.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Bt.cipher.algorithms?Bt.cipher.algorithms[e]:null};var Ws=Bt.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};Ws.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Bt.util.createBuffer(),this.output=e.output||Bt.util.createBuffer(),this.mode.start(t)};Ws.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};Ws.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var Ys=K((Qm,E0)=>{var Ct=j();wt();Ct.cipher=Ct.cipher||{};var O=E0.exports=Ct.cipher.modes=Ct.cipher.modes||{};O.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};O.ecb.prototype.start=function(e){};O.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};O.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};O.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};O.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};O.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};O.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=li(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};O.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};O.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};O.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};O.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};O.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Ct.util.createBuffer(),this._partialBytes=0};O.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=li(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};O.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};O.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};O.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ct.util.createBuffer(),this._partialBytes=0};O.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=li(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};O.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};O.ofb.prototype.decrypt=O.ofb.prototype.encrypt;O.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ct.util.createBuffer(),this._partialBytes=0};O.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=li(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};O.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}hi(this._inBlock)};O.ctr.prototype.decrypt=O.ctr.prototype.encrypt;O.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Ct.util.createBuffer(),this._partialBytes=0,this._R=3774873600};O.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=Ct.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=Ct.util.createBuffer(e.additionalData):r=Ct.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=Ct.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Qs(n*8)))}this._inBlock=this._j0.slice(0),hi(this._inBlock),this._partialBytes=0,r=Ct.util.createBuffer(r),this._aDataLength=Qs(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};O.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var s=(this.blockSize-n)%this.blockSize;s>0&&(s=this.blockSize-s),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(s<=0||r){if(r){var o=n%this.blockSize;this._cipherLength+=o,this._partialOutput.truncate(this.blockSize-o)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),s>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(s-this._partialBytes)),this._partialBytes=s,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),hi(this._inBlock)};O.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),hi(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};O.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=Ct.util.createBuffer();var n=this._aDataLength.concat(Qs(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var s=0;s<this._ints;++s)this.tag.putInt32(this._s[s]^i[s]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};O.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var s=e[i/32|0]&1<<31-i%32;s&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};O.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};O.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,s=this._m[r][i];t[0]^=s[0],t[1]^=s[1],t[2]^=s[2],t[3]^=s[3]}return t};O.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};O.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,s=new Array(i),o=0;o<i;++o){var a=[0,0,0,0],u=o/n|0,c=(n-1-o%n)*t;a[u]=1<<t-1<<c,s[o]=this.generateSubHashTable(this.multiply(a,e),t)}return s};O.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var s=n>>>1;s>0;)this.pow(i[2*s],i[s]=[]),s>>=1;for(s=2;s<n;){for(var o=1;o<s;++o){var a=i[s],u=i[o];i[s+o]=[a[0]^u[0],a[1]^u[1],a[2]^u[2],a[3]^u[3]]}s*=2}for(i[0]=[0,0,0,0],s=n+1;s<r;++s){var c=i[s^n];i[s]=[e[0]^c[0],e[1]^c[1],e[2]^c[2],e[3]^c[3]]}return i};function li(e,t){if(typeof e=="string"&&(e=Ct.util.createBuffer(e)),Ct.util.isArray(e)&&e.length>4){var r=e;e=Ct.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!Ct.util.isArray(e)){for(var i=[],s=t/4,n=0;n<s;++n)i.push(e.getInt32());e=i}return e}function hi(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Qs(e){return[e/4294967296|0,e&4294967295]}});var js=K((Ym,C0)=>{var et=j();$s();Ys();wt();C0.exports=et.aes=et.aes||{};et.aes.startEncrypting=function(e,t,r,n){var i=pi({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};et.aes.createEncryptionCipher=function(e,t){return pi({key:e,output:null,decrypt:!1,mode:t})};et.aes.startDecrypting=function(e,t,r,n){var i=pi({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};et.aes.createDecryptionCipher=function(e,t){return pi({key:e,output:null,decrypt:!0,mode:t})};et.aes.Algorithm=function(e,t){Js||A0();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return Xs(r._w,n,i,!1)},decrypt:function(n,i){return Xs(r._w,n,i,!0)}}}),r._init=!1};et.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=et.util.createBuffer(t);else if(et.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=et.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!et.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!et.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var s=this.mode.name,o=["CFB","OFB","CTR","GCM"].indexOf(s)!==-1;this._w=B0(t,e.decrypt&&!o),this._init=!0}};et.aes._expandKey=function(e,t){return Js||A0(),B0(e,t)};et.aes._updateBlock=Xs;Gr("AES-ECB",et.cipher.modes.ecb);Gr("AES-CBC",et.cipher.modes.cbc);Gr("AES-CFB",et.cipher.modes.cfb);Gr("AES-OFB",et.cipher.modes.ofb);Gr("AES-CTR",et.cipher.modes.ctr);Gr("AES-GCM",et.cipher.modes.gcm);function Gr(e,t){var r=function(){return new et.aes.Algorithm(e,t)};et.cipher.registerAlgorithm(e,r)}var Js=!1,Hr=4,Ut,Zs,S0,dr,ue;function A0(){Js=!0,S0=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;Ut=new Array(256),Zs=new Array(256),dr=new Array(4),ue=new Array(4);for(var t=0;t<4;++t)dr[t]=new Array(256),ue[t]=new Array(256);for(var r=0,n=0,i,s,o,a,u,c,f,t=0;t<256;++t){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,Ut[r]=a,Zs[a]=r,u=e[a],i=e[r],s=e[i],o=e[s],c=u<<24^a<<16^a<<8^(a^u),f=(i^s^o)<<24^(r^o)<<16^(r^s^o)<<8^(r^i^o);for(var l=0;l<4;++l)dr[l][r]=c,ue[l][a]=f,c=c<<24|c>>>8,f=f<<24|f>>>8;r===0?r=n=1:(r=i^e[e[e[i^o]]],n^=e[e[n]])}}function B0(e,t){for(var r=e.slice(0),n,i=1,s=r.length,o=s+6+1,a=Hr*o,u=s;u<a;++u)n=r[u-1],u%s===0?(n=Ut[n>>>16&255]<<24^Ut[n>>>8&255]<<16^Ut[n&255]<<8^Ut[n>>>24]^S0[i]<<24,i++):s>6&&u%s===4&&(n=Ut[n>>>24]<<24^Ut[n>>>16&255]<<16^Ut[n>>>8&255]<<8^Ut[n&255]),r[u]=r[u-s]^n;if(t){var c,f=ue[0],l=ue[1],h=ue[2],d=ue[3],p=r.slice(0);a=r.length;for(var u=0,g=a-Hr;u<a;u+=Hr,g-=Hr)if(u===0||u===a-Hr)p[u]=r[g],p[u+1]=r[g+3],p[u+2]=r[g+2],p[u+3]=r[g+1];else for(var x=0;x<Hr;++x)c=r[g+x],p[u+(3&-x)]=f[Ut[c>>>24]]^l[Ut[c>>>16&255]]^h[Ut[c>>>8&255]]^d[Ut[c&255]];r=p}return r}function Xs(e,t,r,n){var i=e.length/4-1,s,o,a,u,c;n?(s=ue[0],o=ue[1],a=ue[2],u=ue[3],c=Zs):(s=dr[0],o=dr[1],a=dr[2],u=dr[3],c=Ut);var f,l,h,d,p,g,x;f=t[0]^e[0],l=t[n?3:1]^e[1],h=t[2]^e[2],d=t[n?1:3]^e[3];for(var v=3,S=1;S<i;++S)p=s[f>>>24]^o[l>>>16&255]^a[h>>>8&255]^u[d&255]^e[++v],g=s[l>>>24]^o[h>>>16&255]^a[d>>>8&255]^u[f&255]^e[++v],x=s[h>>>24]^o[d>>>16&255]^a[f>>>8&255]^u[l&255]^e[++v],d=s[d>>>24]^o[f>>>16&255]^a[l>>>8&255]^u[h&255]^e[++v],f=p,l=g,h=x;r[0]=c[f>>>24]<<24^c[l>>>16&255]<<16^c[h>>>8&255]<<8^c[d&255]^e[++v],r[n?3:1]=c[l>>>24]<<24^c[h>>>16&255]<<16^c[d>>>8&255]<<8^c[f&255]^e[++v],r[2]=c[h>>>24]<<24^c[d>>>16&255]<<16^c[f>>>8&255]<<8^c[l&255]^e[++v],r[n?1:3]=c[d>>>24]<<24^c[f>>>16&255]<<16^c[l>>>8&255]<<8^c[h&255]^e[++v]}function pi(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=et.cipher.createDecipher(r,e.key):n=et.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof et.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var _0=K((Zm,T0)=>{var ct=j();$s();Ys();wt();T0.exports=ct.des=ct.des||{};ct.des.startEncrypting=function(e,t,r,n){var i=di({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};ct.des.createEncryptionCipher=function(e,t){return di({key:e,output:null,decrypt:!1,mode:t})};ct.des.startDecrypting=function(e,t,r,n){var i=di({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};ct.des.createDecryptionCipher=function(e,t){return di({key:e,output:null,decrypt:!0,mode:t})};ct.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return I0(r._keys,n,i,!1)},decrypt:function(n,i){return I0(r._keys,n,i,!0)}}}),r._init=!1};ct.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=ct.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=hp(t),this._init=!0}};me("DES-ECB",ct.cipher.modes.ecb);me("DES-CBC",ct.cipher.modes.cbc);me("DES-CFB",ct.cipher.modes.cfb);me("DES-OFB",ct.cipher.modes.ofb);me("DES-CTR",ct.cipher.modes.ctr);me("3DES-ECB",ct.cipher.modes.ecb);me("3DES-CBC",ct.cipher.modes.cbc);me("3DES-CFB",ct.cipher.modes.cfb);me("3DES-OFB",ct.cipher.modes.ofb);me("3DES-CTR",ct.cipher.modes.ctr);function me(e,t){var r=function(){return new ct.des.Algorithm(e,t)};ct.cipher.registerAlgorithm(e,r)}var ip=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],sp=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],op=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],ap=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],up=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],cp=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],fp=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],lp=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function hp(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],s=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],o=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],c=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],f=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],l=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],h=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],g=e.length()>8?3:1,x=[],v=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],S=0,B,P=0;P<g;P++){var C=e.getInt32(),T=e.getInt32();B=(C>>>4^T)&252645135,T^=B,C^=B<<4,B=(T>>>-16^C)&65535,C^=B,T^=B<<-16,B=(C>>>2^T)&858993459,T^=B,C^=B<<2,B=(T>>>-16^C)&65535,C^=B,T^=B<<-16,B=(C>>>1^T)&1431655765,T^=B,C^=B<<1,B=(T>>>8^C)&16711935,C^=B,T^=B<<8,B=(C>>>1^T)&1431655765,T^=B,C^=B<<1,B=C<<8|T>>>20&240,C=T<<24|T<<8&16711680|T>>>8&65280|T>>>24&240,T=B;for(var V=0;V<v.length;++V){v[V]?(C=C<<2|C>>>26,T=T<<2|T>>>26):(C=C<<1|C>>>27,T=T<<1|T>>>27),C&=-15,T&=-15;var z=t[C>>>28]|r[C>>>24&15]|n[C>>>20&15]|i[C>>>16&15]|s[C>>>12&15]|o[C>>>8&15]|a[C>>>4&15],Et=u[T>>>28]|c[T>>>24&15]|f[T>>>20&15]|l[T>>>16&15]|h[T>>>12&15]|d[T>>>8&15]|p[T>>>4&15];B=(Et>>>16^z)&65535,x[S++]=z^B,x[S++]=Et^B<<16}}return x}function I0(e,t,r,n){var i=e.length===32?3:9,s;i===3?s=n?[30,-2,-2]:[0,32,2]:s=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var o,a=t[0],u=t[1];o=(a>>>4^u)&252645135,u^=o,a^=o<<4,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,a=a<<1|a>>>31,u=u<<1|u>>>31;for(var c=0;c<i;c+=3){for(var f=s[c+1],l=s[c+2],h=s[c];h!=f;h+=l){var d=u^e[h],p=(u>>>4|u<<28)^e[h+1];o=a,a=u,u=o^(sp[d>>>24&63]|ap[d>>>16&63]|cp[d>>>8&63]|lp[d&63]|ip[p>>>24&63]|op[p>>>16&63]|up[p>>>8&63]|fp[p&63])}o=a,a=u,u=o}a=a>>>1|a<<31,u=u>>>1|u<<31,o=(a>>>1^u)&1431655765,u^=o,a^=o<<1,o=(u>>>8^a)&16711935,a^=o,u^=o<<8,o=(u>>>2^a)&858993459,a^=o,u^=o<<2,o=(a>>>16^u)&65535,u^=o,a^=o<<16,o=(a>>>4^u)&252645135,u^=o,a^=o<<4,r[0]=a,r[1]=u}function di(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=ct.cipher.createDecipher(r,e.key):n=ct.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(s,o){var a=null;o instanceof ct.util.ByteBuffer&&(a=o,o={}),o=o||{},o.output=a,o.iv=s,i.call(n,o)},n}});var yr=K((Xm,R0)=>{var yi=j();R0.exports=yi.md=yi.md||{};yi.md.algorithms=yi.md.algorithms||{}});var P0=K((Jm,k0)=>{var Le=j();yr();wt();var pp=k0.exports=Le.hmac=Le.hmac||{};pp.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(s,o){if(s!==null)if(typeof s=="string")if(s=s.toLowerCase(),s in Le.md.algorithms)t=Le.md.algorithms[s].create();else throw new Error('Unknown hash algorithm "'+s+'"');else t=s;if(o===null)o=e;else{if(typeof o=="string")o=Le.util.createBuffer(o);else if(Le.util.isArray(o)){var a=o;o=Le.util.createBuffer();for(var u=0;u<a.length;++u)o.putByte(a[u])}var c=o.length();c>t.blockLength&&(t.start(),t.update(o.bytes()),o=t.digest()),r=Le.util.createBuffer(),n=Le.util.createBuffer(),c=o.length();for(var u=0;u<c;++u){var a=o.at(u);r.putByte(54^a),n.putByte(92^a)}if(c<t.blockLength)for(var a=t.blockLength-c,u=0;u<a;++u)r.putByte(54),n.putByte(92);e=o,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(s){t.update(s)},i.getMac=function(){var s=t.digest().bytes();return t.start(),t.update(n),t.update(s),t.digest()},i.digest=i.getMac,i}});var Wr=K(()=>{});var N0=K((e2,L0)=>{var Kt=j();P0();yr();wt();var dp=Kt.pkcs5=Kt.pkcs5||{},Ne;Kt.util.isNodejs&&!Kt.options.usePureJavaScript&&(Ne=Wr());L0.exports=Kt.pbkdf2=dp.pbkdf2=function(e,t,r,n,i,s){if(typeof i=="function"&&(s=i,i=null),Kt.util.isNodejs&&!Kt.options.usePureJavaScript&&Ne.pbkdf2&&(i===null||typeof i!="object")&&(Ne.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),s?Ne.pbkdf2Sync.length===4?Ne.pbkdf2(e,t,r,n,function(B,P){if(B)return s(B);s(null,P.toString("binary"))}):Ne.pbkdf2(e,t,r,n,i,function(B,P){if(B)return s(B);s(null,P.toString("binary"))}):Ne.pbkdf2Sync.length===4?Ne.pbkdf2Sync(e,t,r,n).toString("binary"):Ne.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Kt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Kt.md[i].create()}var o=i.digestLength;if(n>4294967295*o){var a=new Error("Derived key is too long.");if(s)return s(a);throw a}var u=Math.ceil(n/o),c=n-(u-1)*o,f=Kt.hmac.create();f.start(i,e);var l="",h,d,p;if(!s){for(var g=1;g<=u;++g){f.start(null,null),f.update(t),f.update(Kt.util.int32ToBytes(g)),h=p=f.digest().getBytes();for(var x=2;x<=r;++x)f.start(null,null),f.update(p),d=f.digest().getBytes(),h=Kt.util.xorBytes(h,d,o),p=d;l+=g<u?h:h.substr(0,c)}return l}var g=1,x;function v(){if(g>u)return s(null,l);f.start(null,null),f.update(t),f.update(Kt.util.int32ToBytes(g)),h=p=f.digest().getBytes(),x=2,S()}function S(){if(x<=r)return f.start(null,null),f.update(p),d=f.digest().getBytes(),h=Kt.util.xorBytes(h,d,o),p=d,++x,Kt.util.setImmediate(S);l+=g<u?h:h.substr(0,c),++g,v()}v()}});var K0=K((r2,U0)=>{var mi=j();wt();var D0=U0.exports=mi.pem=mi.pem||{};D0.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=gi(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=gi(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=gi(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=gi(e.headers[i]);return e.procType&&(r+=`\r
`),r+=mi.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};D0.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,s;s=r.exec(e),!!s;){var o=s[1];o==="NEW CERTIFICATE REQUEST"&&(o="CERTIFICATE REQUEST");var a={type:o,procType:null,contentDomain:null,dekInfo:null,headers:[],body:mi.util.decode64(s[3])};if(t.push(a),!!s[2]){for(var u=s[2].split(i),c=0;s&&c<u.length;){for(var f=u[c].replace(/\s+$/,""),l=c+1;l<u.length;++l){var h=u[l];if(!/\s/.test(h[0]))break;f+=h,c=l}if(s=f.match(n),s){for(var d={name:s[1],values:[]},p=s[2].split(","),g=0;g<p.length;++g)d.values.push(yp(p[g]));if(a.procType)if(!a.contentDomain&&d.name==="Content-Domain")a.contentDomain=p[0]||"";else if(!a.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:p[0],parameters:p[1]||null}}else a.headers.push(d);else{if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:p[0],type:p[1]}}}++c}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function gi(e){for(var t=e.name+": ",r=[],n=function(u,c){return" "+c},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var s=0,o=-1,i=0;i<t.length;++i,++s)if(s>65&&o!==-1){var a=t[o];a===","?(++o,t=t.substr(0,o)+`\r
 `+t.substr(o)):t=t.substr(0,o)+`\r
`+a+t.substr(o+1),s=i-o-1,o=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(o=i);return t}function yp(e){return e.replace(/^\s+/,"")}});var z0=K((n2,q0)=>{var xe=j();yr();wt();var M0=q0.exports=xe.sha256=xe.sha256||{};xe.md.sha256=xe.md.algorithms.sha256=M0;M0.create=function(){O0||gp();var e=null,t=xe.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=xe.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=xe.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),F0(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=xe.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(to.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};F0(l,r,i);var h=xe.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h.putInt32(l.h5),h.putInt32(l.h6),h.putInt32(l.h7),h},n};var to=null,O0=!1,V0=null;function gp(){to=String.fromCharCode(128),to+=xe.util.fillString(String.fromCharCode(0),64),V0=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],O0=!0}function F0(e,t,r){for(var n,i,s,o,a,u,c,f,l,h,d,p,g,x,v,S=r.length();S>=64;){for(c=0;c<16;++c)t[c]=r.getInt32();for(;c<64;++c)n=t[c-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[c-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[c]=n+t[c-7]+i+t[c-16]|0;for(f=e.h0,l=e.h1,h=e.h2,d=e.h3,p=e.h4,g=e.h5,x=e.h6,v=e.h7,c=0;c<64;++c)o=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),a=x^p&(g^x),s=(f>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),u=f&l|h&(f^l),n=v+o+a+V0[c]+t[c],i=s+u,v=x,x=g,g=p,p=d+n>>>0,d=h,h=l,l=f,f=n+i>>>0;e.h0=e.h0+f|0,e.h1=e.h1+l|0,e.h2=e.h2+h|0,e.h3=e.h3+d|0,e.h4=e.h4+p|0,e.h5=e.h5+g|0,e.h6=e.h6+x|0,e.h7=e.h7+v|0,S-=64}}});var G0=K((i2,H0)=>{var ve=j();wt();var xi=null;ve.util.isNodejs&&!ve.options.usePureJavaScript&&!process.versions["node-webkit"]&&(xi=Wr());var mp=H0.exports=ve.prng=ve.prng||{};mp.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(c,f){if(!f)return t.generateSync(c);var l=t.plugin.cipher,h=t.plugin.increment,d=t.plugin.formatKey,p=t.plugin.formatSeed,g=ve.util.createBuffer();t.key=null,x();function x(v){if(v)return f(v);if(g.length()>=c)return f(null,g.getBytes(c));if(t.generated>1048575&&(t.key=null),t.key===null)return ve.util.nextTick(function(){s(x)});var S=l(t.key,t.seed);t.generated+=S.length,g.putBytes(S),t.key=d(l(t.key,h(t.seed))),t.seed=p(l(t.key,t.seed)),ve.util.setImmediate(x)}},t.generateSync=function(c){var f=t.plugin.cipher,l=t.plugin.increment,h=t.plugin.formatKey,d=t.plugin.formatSeed;t.key=null;for(var p=ve.util.createBuffer();p.length()<c;){t.generated>1048575&&(t.key=null),t.key===null&&o();var g=f(t.key,t.seed);t.generated+=g.length,p.putBytes(g),t.key=h(f(t.key,l(t.seed))),t.seed=d(f(t.key,t.seed))}return p.getBytes(c)};function s(c){if(t.pools[0].messageLength>=32)return a(),c();var f=32-t.pools[0].messageLength<<5;t.seedFile(f,function(l,h){if(l)return c(l);t.collect(h),a(),c()})}function o(){if(t.pools[0].messageLength>=32)return a();var c=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(c)),a()}function a(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var c=t.plugin.md.create();c.update(t.keyBytes);for(var f=1,l=0;l<32;++l)t.reseeds%f===0&&(c.update(t.pools[l].digest().getBytes()),t.pools[l].start()),f=f<<1;t.keyBytes=c.digest().getBytes(),c.start(),c.update(t.keyBytes);var h=c.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(h),t.generated=0}function u(c){var f=null,l=ve.util.globalScope,h=l.crypto||l.msCrypto;h&&h.getRandomValues&&(f=function(C){return h.getRandomValues(C)});var d=ve.util.createBuffer();if(f)for(;d.length()<c;){var p=Math.max(1,Math.min(c-d.length(),65536)/4),g=new Uint32Array(Math.floor(p));try{f(g);for(var x=0;x<g.length;++x)d.putInt32(g[x])}catch(C){if(!(typeof QuotaExceededError<"u"&&C instanceof QuotaExceededError))throw C}}if(d.length()<c)for(var v,S,B,P=Math.floor(Math.random()*65536);d.length()<c;){S=16807*(P&65535),v=16807*(P>>16),S+=(v&32767)<<16,S+=v>>15,S=(S&2147483647)+(S>>31),P=S&4294967295;for(var x=0;x<3;++x)B=P>>>(x<<3),B^=Math.floor(Math.random()*256),d.putByte(B&255)}return d.getBytes(c)}return xi?(t.seedFile=function(c,f){xi.randomBytes(c,function(l,h){if(l)return f(l);f(null,h.toString())})},t.seedFileSync=function(c){return xi.randomBytes(c).toString()}):(t.seedFile=function(c,f){try{f(null,u(c))}catch(l){f(l)}},t.seedFileSync=u),t.collect=function(c){for(var f=c.length,l=0;l<f;++l)t.pools[t.pool].update(c.substr(l,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(c,f){for(var l="",h=0;h<f;h+=8)l+=String.fromCharCode(c>>h&255);t.collect(l)},t.registerWorker=function(c){if(c===self)t.seedFile=function(l,h){function d(p){var g=p.data;g.forge&&g.forge.prng&&(self.removeEventListener("message",d),h(g.forge.prng.err,g.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:l}}})};else{var f=function(l){var h=l.data;h.forge&&h.forge.prng&&t.seedFile(h.forge.prng.needed,function(d,p){c.postMessage({forge:{prng:{err:d,bytes:p}}})})};c.addEventListener("message",f)}},t}});var Sn=K((s2,eo)=>{var It=j();js();z0();G0();wt();(function(){if(It.random&&It.random.getBytes){eo.exports=It.random;return}(function(e){var t={},r=new Array(4),n=It.util.createBuffer();t.formatKey=function(l){var h=It.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),It.aes._expandKey(l,!1)},t.formatSeed=function(l){var h=It.util.createBuffer(l);return l=new Array(4),l[0]=h.getInt32(),l[1]=h.getInt32(),l[2]=h.getInt32(),l[3]=h.getInt32(),l},t.cipher=function(l,h){return It.aes._updateBlock(l,h,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(l){return++l[3],l},t.md=It.md.sha256;function i(){var l=It.prng.create(t);return l.getBytes=function(h,d){return l.generate(h,d)},l.getBytesSync=function(h){return l.generate(h)},l}var s=i(),o=null,a=It.util.globalScope,u=a.crypto||a.msCrypto;if(u&&u.getRandomValues&&(o=function(l){return u.getRandomValues(l)}),It.options.usePureJavaScript||!It.util.isNodejs&&!o){if(typeof window>"u"||window.document,s.collectInt(+new Date,32),typeof navigator<"u"){var c="";for(var f in navigator)try{typeof navigator[f]=="string"&&(c+=navigator[f])}catch{}s.collect(c),c=null}e&&(e().mousemove(function(l){s.collectInt(l.clientX,16),s.collectInt(l.clientY,16)}),e().keypress(function(l){s.collectInt(l.charCode,8)}))}if(!It.random)It.random=s;else for(var f in s)It.random[f]=s[f];It.random.createInstance=i,eo.exports=It.random})(typeof jQuery<"u"?jQuery:null)})()});var Y0=K((o2,Q0)=>{var Ht=j();wt();var ro=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],W0=[1,2,3,5],xp=function(e,t){return e<<t&65535|(e&65535)>>16-t},vp=function(e,t){return(e&65535)>>t|e<<16-t&65535};Q0.exports=Ht.rc2=Ht.rc2||{};Ht.rc2.expandKey=function(e,t){typeof e=="string"&&(e=Ht.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,s=Math.ceil(i/8),o=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(ro[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-s,ro[r.at(128-s)&o]),a=127-s;a>=0;a--)r.setAt(a,ro[r.at(a+1)^r.at(a+s)]);return r};var $0=function(e,t,r){var n=!1,i=null,s=null,o=null,a,u,c,f,l=[];for(e=Ht.rc2.expandKey(e,t),c=0;c<64;c++)l.push(e.getInt16Le());r?(a=function(p){for(c=0;c<4;c++)p[c]+=l[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),p[c]=xp(p[c],W0[c]),f++},u=function(p){for(c=0;c<4;c++)p[c]+=l[p[(c+3)%4]&63]}):(a=function(p){for(c=3;c>=0;c--)p[c]=vp(p[c],W0[c]),p[c]-=l[f]+(p[(c+3)%4]&p[(c+2)%4])+(~p[(c+3)%4]&p[(c+1)%4]),f--},u=function(p){for(c=3;c>=0;c--)p[c]-=l[p[(c+3)%4]&63]});var h=function(p){var g=[];for(c=0;c<4;c++){var x=i.getInt16Le();o!==null&&(r?x^=o.getInt16Le():o.putInt16Le(x)),g.push(x&65535)}f=r?0:63;for(var v=0;v<p.length;v++)for(var S=0;S<p[v][0];S++)p[v][1](g);for(c=0;c<4;c++)o!==null&&(r?o.putInt16Le(g[c]):g[c]^=o.getInt16Le()),s.putInt16Le(g[c])},d=null;return d={start:function(p,g){p&&typeof p=="string"&&(p=Ht.util.createBuffer(p)),n=!1,i=Ht.util.createBuffer(),s=g||new Ht.util.createBuffer,o=p,d.output=s},update:function(p){for(n||i.putBuffer(p);i.length()>=8;)h([[5,a],[1,u],[6,a],[1,u],[5,a]])},finish:function(p){var g=!0;if(r)if(p)g=p(8,i,!r);else{var x=i.length()===8?8:8-i.length();i.fillWithByte(x,x)}if(g&&(n=!0,d.update()),!r&&(g=i.length()===0,g))if(p)g=p(8,s,!r);else{var v=s.length(),S=s.at(v-1);S>v?g=!1:s.truncate(S)}return g}},d};Ht.rc2.startEncrypting=function(e,t,r){var n=Ht.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};Ht.rc2.createEncryptionCipher=function(e,t){return $0(e,t,!0)};Ht.rc2.startDecrypting=function(e,t,r){var n=Ht.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};Ht.rc2.createDecryptionCipher=function(e,t){return $0(e,t,!1)}});var bi=K((a2,nu)=>{var no=j();nu.exports=no.jsbn=no.jsbn||{};var De,wp=0xdeadbeefcafe,Z0=(wp&16777215)==15715070;function b(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}no.jsbn.BigInteger=b;function $(){return new b(null)}function bp(e,t,r,n,i,s){for(;--s>=0;){var o=t*this.data[e++]+r.data[n]+i;i=Math.floor(o/67108864),r.data[n++]=o&67108863}return i}function Ep(e,t,r,n,i,s){for(var o=t&32767,a=t>>15;--s>=0;){var u=this.data[e]&32767,c=this.data[e++]>>15,f=a*u+c*o;u=o*u+((f&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(f>>>15)+a*c+(i>>>30),r.data[n++]=u&1073741823}return i}function X0(e,t,r,n,i,s){for(var o=t&16383,a=t>>14;--s>=0;){var u=this.data[e]&16383,c=this.data[e++]>>14,f=a*u+c*o;u=o*u+((f&16383)<<14)+r.data[n]+i,i=(u>>28)+(f>>14)+a*c,r.data[n++]=u&268435455}return i}typeof navigator>"u"?(b.prototype.am=X0,De=28):Z0&&navigator.appName=="Microsoft Internet Explorer"?(b.prototype.am=Ep,De=30):Z0&&navigator.appName!="Netscape"?(b.prototype.am=bp,De=26):(b.prototype.am=X0,De=28);b.prototype.DB=De;b.prototype.DM=(1<<De)-1;b.prototype.DV=1<<De;var io=52;b.prototype.FV=Math.pow(2,io);b.prototype.F1=io-De;b.prototype.F2=2*De-io;var Sp="0123456789abcdefghijklmnopqrstuvwxyz",vi=new Array,$r,ne;$r="0".charCodeAt(0);for(ne=0;ne<=9;++ne)vi[$r++]=ne;$r="a".charCodeAt(0);for(ne=10;ne<36;++ne)vi[$r++]=ne;$r="A".charCodeAt(0);for(ne=10;ne<36;++ne)vi[$r++]=ne;function J0(e){return Sp.charAt(e)}function j0(e,t){var r=vi[e.charCodeAt(t)];return r??-1}function Ap(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function Bp(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function $e(e){var t=$();return t.fromInt(e),t}function Cp(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,s=0;--n>=0;){var o=r==8?e[n]&255:j0(e,n);if(o<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,s==0?this.data[this.t++]=o:s+r>this.DB?(this.data[this.t-1]|=(o&(1<<this.DB-s)-1)<<s,this.data[this.t++]=o>>this.DB-s):this.data[this.t-1]|=o<<s,s+=r,s>=this.DB&&(s-=this.DB)}r==8&&e[0]&128&&(this.s=-1,s>0&&(this.data[this.t-1]|=(1<<this.DB-s)-1<<s)),this.clamp(),i&&b.ZERO.subTo(this,this)}function Ip(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Tp(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,s="",o=this.t,a=this.DB-o*this.DB%t;if(o-- >0)for(a<this.DB&&(n=this.data[o]>>a)>0&&(i=!0,s=J0(n));o>=0;)a<t?(n=(this.data[o]&(1<<a)-1)<<t-a,n|=this.data[--o]>>(a+=this.DB-t)):(n=this.data[o]>>(a-=t)&r,a<=0&&(a+=this.DB,--o)),n>0&&(i=!0),i&&(s+=J0(n));return i?s:"0"}function _p(){var e=$();return b.ZERO.subTo(this,e),e}function Rp(){return this.s<0?this.negate():this}function kp(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function wi(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function Pp(){return this.t<=0?0:this.DB*(this.t-1)+wi(this.data[this.t-1]^this.s&this.DM)}function Lp(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function Np(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function Dp(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,s=Math.floor(e/this.DB),o=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)t.data[a+s+1]=this.data[a]>>n|o,o=(this.data[a]&i)<<r;for(a=s-1;a>=0;--a)t.data[a]=0;t.data[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()}function Up(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,s=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var o=r+1;o<this.t;++o)t.data[o-r-1]|=(this.data[o]&s)<<i,t.data[o-r]=this.data[o]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&s)<<i),t.t=this.t-r,t.clamp()}function Kp(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function Fp(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&b.ZERO.subTo(t,t)}function Mp(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function Op(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=$());var s=$(),o=this.s,a=e.s,u=this.DB-wi(n.data[n.t-1]);u>0?(n.lShiftTo(u,s),i.lShiftTo(u,r)):(n.copyTo(s),i.copyTo(r));var c=s.t,f=s.data[c-1];if(f!=0){var l=f*(1<<this.F1)+(c>1?s.data[c-2]>>this.F2:0),h=this.FV/l,d=(1<<this.F1)/l,p=1<<this.F2,g=r.t,x=g-c,v=t??$();for(s.dlShiftTo(x,v),r.compareTo(v)>=0&&(r.data[r.t++]=1,r.subTo(v,r)),b.ONE.dlShiftTo(c,v),v.subTo(s,s);s.t<c;)s.data[s.t++]=0;for(;--x>=0;){var S=r.data[--g]==f?this.DM:Math.floor(r.data[g]*h+(r.data[g-1]+p)*d);if((r.data[g]+=s.am(0,S,r,x,0,c))<S)for(s.dlShiftTo(x,v),r.subTo(v,r);r.data[g]<--S;)r.subTo(v,r)}t!=null&&(r.drShiftTo(c,t),o!=a&&b.ZERO.subTo(t,t)),r.t=c,r.clamp(),u>0&&r.rShiftTo(u,r),o<0&&b.ZERO.subTo(r,r)}}}function Vp(e){var t=$();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(b.ZERO)>0&&e.subTo(t,t),t}function gr(e){this.m=e}function qp(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function zp(e){return e}function Hp(e){e.divRemTo(this.m,null,e)}function Gp(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function Wp(e,t){e.squareTo(t),this.reduce(t)}gr.prototype.convert=qp;gr.prototype.revert=zp;gr.prototype.reduce=Hp;gr.prototype.mulTo=Gp;gr.prototype.sqrTo=Wp;function $p(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function mr(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Qp(e){var t=$();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(b.ZERO)>0&&this.m.subTo(t,t),t}function Yp(e){var t=$();return e.copyTo(t),this.reduce(t),t}function Zp(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Xp(e,t){e.squareTo(t),this.reduce(t)}function Jp(e,t,r){e.multiplyTo(t,r),this.reduce(r)}mr.prototype.convert=Qp;mr.prototype.revert=Yp;mr.prototype.reduce=Zp;mr.prototype.mulTo=Jp;mr.prototype.sqrTo=Xp;function jp(){return(this.t>0?this.data[0]&1:this.s)==0}function td(e,t){if(e>4294967295||e<1)return b.ONE;var r=$(),n=$(),i=t.convert(this),s=wi(e)-1;for(i.copyTo(r);--s>=0;)if(t.sqrTo(r,n),(e&1<<s)>0)t.mulTo(n,i,r);else{var o=r;r=n,n=o}return t.revert(r)}function ed(e,t){var r;return e<256||t.isEven()?r=new gr(t):r=new mr(t),this.exp(e,r)}b.prototype.copyTo=Ap;b.prototype.fromInt=Bp;b.prototype.fromString=Cp;b.prototype.clamp=Ip;b.prototype.dlShiftTo=Lp;b.prototype.drShiftTo=Np;b.prototype.lShiftTo=Dp;b.prototype.rShiftTo=Up;b.prototype.subTo=Kp;b.prototype.multiplyTo=Fp;b.prototype.squareTo=Mp;b.prototype.divRemTo=Op;b.prototype.invDigit=$p;b.prototype.isEven=jp;b.prototype.exp=td;b.prototype.toString=Tp;b.prototype.negate=_p;b.prototype.abs=Rp;b.prototype.compareTo=kp;b.prototype.bitLength=Pp;b.prototype.mod=Vp;b.prototype.modPowInt=ed;b.ZERO=$e(0);b.ONE=$e(1);function rd(){var e=$();return this.copyTo(e),e}function nd(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function id(){return this.t==0?this.s:this.data[0]<<24>>24}function sd(){return this.t==0?this.s:this.data[0]<<16>>16}function od(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function ad(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function ud(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=$e(r),i=$(),s=$(),o="";for(this.divRemTo(n,i,s);i.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,i.divRemTo(n,i,s);return s.intValue().toString(e)+o}function cd(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,s=0,o=0,a=0;a<e.length;++a){var u=j0(e,a);if(u<0){e.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}o=t*o+u,++s>=r&&(this.dMultiply(n),this.dAddOffset(o,0),s=0,o=0)}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),i&&b.ZERO.subTo(this,this)}function fd(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(b.ONE.shiftLeft(e-1),so,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(b.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function ld(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function hd(e){return this.compareTo(e)==0}function pd(e){return this.compareTo(e)<0?this:e}function dd(e){return this.compareTo(e)>0?this:e}function yd(e,t,r){var n,i,s=Math.min(e.t,this.t);for(n=0;n<s;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=s;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=s;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function gd(e,t){return e&t}function md(e){var t=$();return this.bitwiseTo(e,gd,t),t}function so(e,t){return e|t}function xd(e){var t=$();return this.bitwiseTo(e,so,t),t}function tu(e,t){return e^t}function vd(e){var t=$();return this.bitwiseTo(e,tu,t),t}function eu(e,t){return e&~t}function wd(e){var t=$();return this.bitwiseTo(e,eu,t),t}function bd(){for(var e=$(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Ed(e){var t=$();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function Sd(e){var t=$();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Ad(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function Bd(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+Ad(this.data[e]);return this.s<0?this.t*this.DB:-1}function Cd(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function Id(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Cd(this.data[r]^t);return e}function Td(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function _d(e,t){var r=b.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function Rd(e){return this.changeBit(e,so)}function kd(e){return this.changeBit(e,eu)}function Pd(e){return this.changeBit(e,tu)}function Ld(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function Nd(e){var t=$();return this.addTo(e,t),t}function Dd(e){var t=$();return this.subTo(e,t),t}function Ud(e){var t=$();return this.multiplyTo(e,t),t}function Kd(e){var t=$();return this.divRemTo(e,t,null),t}function Fd(e){var t=$();return this.divRemTo(e,null,t),t}function Md(e){var t=$(),r=$();return this.divRemTo(e,t,r),new Array(t,r)}function Od(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function Vd(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function An(){}function ru(e){return e}function qd(e,t,r){e.multiplyTo(t,r)}function zd(e,t){e.squareTo(t)}An.prototype.convert=ru;An.prototype.revert=ru;An.prototype.mulTo=qd;An.prototype.sqrTo=zd;function Hd(e){return this.exp(e,new An)}function Gd(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function Wd(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Qr(e){this.r2=$(),this.q3=$(),b.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function $d(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=$();return e.copyTo(t),this.reduce(t),t}function Qd(e){return e}function Yd(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function Zd(e,t){e.squareTo(t),this.reduce(t)}function Xd(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Qr.prototype.convert=$d;Qr.prototype.revert=Qd;Qr.prototype.reduce=Yd;Qr.prototype.mulTo=Xd;Qr.prototype.sqrTo=Zd;function Jd(e,t){var r=e.bitLength(),n,i=$e(1),s;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?s=new gr(t):t.isEven()?s=new Qr(t):s=new mr(t);var o=new Array,a=3,u=n-1,c=(1<<n)-1;if(o[1]=s.convert(this),n>1){var f=$();for(s.sqrTo(o[1],f);a<=c;)o[a]=$(),s.mulTo(f,o[a-2],o[a]),a+=2}var l=e.t-1,h,d=!0,p=$(),g;for(r=wi(e.data[l])-1;l>=0;){for(r>=u?h=e.data[l]>>r-u&c:(h=(e.data[l]&(1<<r+1)-1)<<u-r,l>0&&(h|=e.data[l-1]>>this.DB+r-u)),a=n;!(h&1);)h>>=1,--a;if((r-=a)<0&&(r+=this.DB,--l),d)o[h].copyTo(i),d=!1;else{for(;a>1;)s.sqrTo(i,p),s.sqrTo(p,i),a-=2;a>0?s.sqrTo(i,p):(g=i,i=p,p=g),s.mulTo(p,o[h],i)}for(;l>=0&&!(e.data[l]&1<<r);)s.sqrTo(i,p),g=i,i=p,p=g,--r<0&&(r=this.DB-1,--l)}return s.revert(i)}function jd(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),s=r.getLowestSetBit();if(s<0)return t;for(i<s&&(s=i),s>0&&(t.rShiftTo(s,t),r.rShiftTo(s,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return s>0&&r.lShiftTo(s,r),r}function ty(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function ey(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return b.ZERO;for(var r=e.clone(),n=this.clone(),i=$e(1),s=$e(0),o=$e(0),a=$e(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!s.isEven())&&(i.addTo(this,i),s.subTo(e,s)),i.rShiftTo(1,i)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);for(;n.isEven();)n.rShiftTo(1,n),t?((!o.isEven()||!a.isEven())&&(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(o,i),s.subTo(a,s)):(n.subTo(r,n),t&&o.subTo(i,o),a.subTo(s,a))}if(n.compareTo(b.ONE)!=0)return b.ZERO;if(a.compareTo(e)>=0)return a.subtract(e);if(a.signum()<0)a.addTo(e,a);else return a;return a.signum()<0?a.add(e):a}var ce=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],ry=(1<<26)/ce[ce.length-1];function ny(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=ce[ce.length-1]){for(t=0;t<ce.length;++t)if(r.data[0]==ce[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<ce.length;){for(var n=ce[t],i=t+1;i<ce.length&&n<ry;)n*=ce[i++];for(n=r.modInt(n);t<i;)if(n%ce[t++]==0)return!1}return r.millerRabin(e)}function iy(e){var t=this.subtract(b.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=sy(),s,o=0;o<e;++o){do s=new b(this.bitLength(),i);while(s.compareTo(b.ONE)<=0||s.compareTo(t)>=0);var a=s.modPow(n,this);if(a.compareTo(b.ONE)!=0&&a.compareTo(t)!=0){for(var u=1;u++<r&&a.compareTo(t)!=0;)if(a=a.modPowInt(2,this),a.compareTo(b.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0}function sy(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}b.prototype.chunkSize=od;b.prototype.toRadix=ud;b.prototype.fromRadix=cd;b.prototype.fromNumber=fd;b.prototype.bitwiseTo=yd;b.prototype.changeBit=_d;b.prototype.addTo=Ld;b.prototype.dMultiply=Od;b.prototype.dAddOffset=Vd;b.prototype.multiplyLowerTo=Gd;b.prototype.multiplyUpperTo=Wd;b.prototype.modInt=ty;b.prototype.millerRabin=iy;b.prototype.clone=rd;b.prototype.intValue=nd;b.prototype.byteValue=id;b.prototype.shortValue=sd;b.prototype.signum=ad;b.prototype.toByteArray=ld;b.prototype.equals=hd;b.prototype.min=pd;b.prototype.max=dd;b.prototype.and=md;b.prototype.or=xd;b.prototype.xor=vd;b.prototype.andNot=wd;b.prototype.not=bd;b.prototype.shiftLeft=Ed;b.prototype.shiftRight=Sd;b.prototype.getLowestSetBit=Bd;b.prototype.bitCount=Id;b.prototype.testBit=Td;b.prototype.setBit=Rd;b.prototype.clearBit=kd;b.prototype.flipBit=Pd;b.prototype.add=Nd;b.prototype.subtract=Dd;b.prototype.multiply=Ud;b.prototype.divide=Kd;b.prototype.remainder=Fd;b.prototype.divideAndRemainder=Md;b.prototype.modPow=Jd;b.prototype.modInverse=ey;b.prototype.pow=Hd;b.prototype.gcd=jd;b.prototype.isProbablePrime=ny});var uu=K((u2,au)=>{var we=j();yr();wt();var su=au.exports=we.sha1=we.sha1||{};we.md.sha1=we.md.algorithms.sha1=su;su.create=function(){ou||oy();var e=null,t=we.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,s=0;s<i;++s)n.fullMessageLength.push(0);return t=we.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,s){s==="utf8"&&(i=we.util.encodeUtf8(i));var o=i.length;n.messageLength+=o,o=[o/4294967296>>>0,o>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=o[1],o[1]=o[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,o[0]=o[1]/4294967296>>>0;return t.putBytes(i),iu(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=we.util.createBuffer();i.putBytes(t.bytes());var s=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,o=s&n.blockLength-1;i.putBytes(oo.substr(0,n.blockLength-o));for(var a,u,c=n.fullMessageLength[0]*8,f=0;f<n.fullMessageLength.length-1;++f)a=n.fullMessageLength[f+1]*8,u=a/4294967296>>>0,c+=u,i.putInt32(c>>>0),c=a>>>0;i.putInt32(c);var l={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};iu(l,r,i);var h=we.util.createBuffer();return h.putInt32(l.h0),h.putInt32(l.h1),h.putInt32(l.h2),h.putInt32(l.h3),h.putInt32(l.h4),h},n};var oo=null,ou=!1;function oy(){oo=String.fromCharCode(128),oo+=we.util.fillString(String.fromCharCode(0),64),ou=!0}function iu(e,t,r){for(var n,i,s,o,a,u,c,f,l=r.length();l>=64;){for(i=e.h0,s=e.h1,o=e.h2,a=e.h3,u=e.h4,f=0;f<16;++f)n=r.getInt32(),t[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<20;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,c=a^s&(o^a),n=(i<<5|i>>>27)+c+u+1518500249+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<32;++f)n=t[f-3]^t[f-8]^t[f-14]^t[f-16],n=n<<1|n>>>31,t[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<40;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+1859775393+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<60;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=s&o|a&(s^o),n=(i<<5|i>>>27)+c+u+2400959708+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;for(;f<80;++f)n=t[f-6]^t[f-16]^t[f-28]^t[f-32],n=n<<2|n>>>30,t[f]=n,c=s^o^a,n=(i<<5|i>>>27)+c+u+3395469782+n,u=a,a=o,o=(s<<30|s>>>2)>>>0,s=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+s|0,e.h2=e.h2+o|0,e.h3=e.h3+a|0,e.h4=e.h4+u|0,l-=64}}});var lu=K((c2,fu)=>{var be=j();wt();Sn();uu();var cu=fu.exports=be.pkcs1=be.pkcs1||{};cu.encode_rsa_oaep=function(e,t,r){var n,i,s,o;typeof r=="string"?(n=r,i=arguments[3]||void 0,s=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,s=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md)),s?s.start():s=be.md.sha1.create(),o||(o=s);var a=Math.ceil(e.n.bitLength()/8),u=a-2*s.digestLength-2;if(t.length>u){var c=new Error("RSAES-OAEP input message length is too long.");throw c.length=t.length,c.maxLength=u,c}n||(n=""),s.update(n,"raw");for(var f=s.digest(),l="",h=u-t.length,d=0;d<h;d++)l+="\0";var p=f.getBytes()+l+""+t;if(!i)i=be.random.getBytes(s.digestLength);else if(i.length!==s.digestLength){var c=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw c.seedLength=i.length,c.digestLength=s.digestLength,c}var g=Ei(i,a-s.digestLength-1,o),x=be.util.xorBytes(p,g,p.length),v=Ei(x,s.digestLength,o),S=be.util.xorBytes(i,v,i.length);return"\0"+S+x};cu.decode_rsa_oaep=function(e,t,r){var n,i,s;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md));var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var x=new Error("RSAES-OAEP encoded message length is invalid.");throw x.length=t.length,x.expectedLength=o,x}if(i===void 0?i=be.md.sha1.create():i.start(),s||(s=i),o<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),u=t.charAt(0),c=t.substring(1,i.digestLength+1),f=t.substring(1+i.digestLength),l=Ei(f,i.digestLength,s),h=be.util.xorBytes(c,l,c.length),d=Ei(h,o-i.digestLength-1,s),p=be.util.xorBytes(f,d,f.length),g=p.substring(0,i.digestLength),x=u!=="\0",v=0;v<i.digestLength;++v)x|=a.charAt(v)!==g.charAt(v);for(var S=1,B=i.digestLength,P=i.digestLength;P<p.length;P++){var C=p.charCodeAt(P),T=C&1^1,V=S?65534:0;x|=C&V,S=S&T,B+=S}if(x||p.charCodeAt(B)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(B+1)};function Ei(e,t,r){r||(r=be.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),s=0;s<i;++s){var o=String.fromCharCode(s>>24&255,s>>16&255,s>>8&255,s&255);r.start(),r.update(e+o),n+=r.digest().getBytes()}return n.substring(0,t)}});var hu=K((f2,ao)=>{var Qe=j();wt();bi();Sn();(function(){if(Qe.prime){ao.exports=Qe.prime;return}var e=ao.exports=Qe.prime=Qe.prime||{},t=Qe.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(l,h){return l|h};e.generateProbablePrime=function(l,h,d){typeof h=="function"&&(d=h,h={}),h=h||{};var p=h.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var g=h.prng||Qe.random,x={nextBytes:function(v){for(var S=g.getBytesSync(v.length),B=0;B<v.length;++B)v[B]=S.charCodeAt(B)}};if(p.name==="PRIMEINC")return s(l,x,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function s(l,h,d,p){return"workers"in d?u(l,h,d,p):o(l,h,d,p)}function o(l,h,d,p){var g=c(l,h),x=0,v=f(g.bitLength());"millerRabinTests"in d&&(v=d.millerRabinTests);var S=10;"maxBlockTime"in d&&(S=d.maxBlockTime),a(g,l,h,x,v,S,p)}function a(l,h,d,p,g,x,v){var S=+new Date;do{if(l.bitLength()>h&&(l=c(h,d)),l.isProbablePrime(g))return v(null,l);l.dAddOffset(r[p++%8],0)}while(x<0||+new Date-S<x);Qe.util.setImmediate(function(){a(l,h,d,p,g,x,v)})}function u(l,h,d,p){if(typeof Worker>"u")return o(l,h,d,p);var g=c(l,h),x=d.workers,v=d.workLoad||100,S=v*30/8,B=d.workerScript||"forge/prime.worker.js";if(x===-1)return Qe.util.estimateCores(function(C,T){C&&(T=2),x=T-1,P()});P();function P(){x=Math.max(1,x);for(var C=[],T=0;T<x;++T)C[T]=new Worker(B);for(var V=x,T=0;T<x;++T)C[T].addEventListener("message",Et);var z=!1;function Et(ae){if(!z){--V;var $t=ae.data;if($t.found){for(var Dt=0;Dt<C.length;++Dt)C[Dt].terminate();return z=!0,p(null,new t($t.prime,16))}g.bitLength()>l&&(g=c(l,h));var Dr=g.toString(16);ae.target.postMessage({hex:Dr,workLoad:v}),g.dAddOffset(S,0)}}}}function c(l,h){var d=new t(l,h),p=l-1;return d.testBit(p)||d.bitwiseTo(t.ONE.shiftLeft(p),i,d),d.dAddOffset(31-d.mod(n).byteValue(),0),d}function f(l){return l<=100?27:l<=150?18:l<=200?15:l<=250?12:l<=300?9:l<=350?8:l<=400?7:l<=500?6:l<=600?5:l<=800?4:l<=1250?3:2}})()});var Ai=K((l2,vu)=>{var N=j();En();bi();ci();lu();hu();Sn();wt();typeof H>"u"&&(H=N.jsbn.BigInteger);var H,uo=N.util.isNodejs?Wr():null,m=N.asn1,ie=N.util;N.pki=N.pki||{};vu.exports=N.pki.rsa=N.rsa=N.rsa||{};var F=N.pki,ay=[6,4,2,4,2,4,6,2],uy={name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},cy={name:"RSAPrivateKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},fy={name:"RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:m.Class.UNIVERSAL,type:m.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},ly=N.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},hy={name:"DigestInfo",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:m.Class.UNIVERSAL,type:m.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:m.Class.UNIVERSAL,type:m.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:m.Class.UNIVERSAL,type:m.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:m.Class.UNIVERSAL,type:m.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},py=function(e){var t;if(e.algorithm in F.oids)t=F.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=m.oidToDer(t).getBytes(),i=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]),s=m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[]);s.value.push(m.create(m.Class.UNIVERSAL,m.Type.OID,!1,n)),s.value.push(m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,""));var o=m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(s),i.value.push(o),m.toDer(i).getBytes()},mu=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(H.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(H.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new H(N.util.bytesToHex(N.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(H.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),s=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(s)<0;)i=i.add(t.p);var o=i.subtract(s).multiply(t.qInv).mod(t.p).multiply(t.q).add(s);return o=o.multiply(n.modInverse(t.n)).mod(t.n),o};F.rsa.encrypt=function(e,t,r){var n=r,i,s=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=xu(e,t,r)):(i=N.util.createBuffer(),i.putBytes(e));for(var o=new H(i.toHex(),16),a=mu(o,t,n),u=a.toString(16),c=N.util.createBuffer(),f=s-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(N.util.hexToBytes(u)),c.getBytes()};F.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var s=new Error("Encrypted message length is invalid.");throw s.length=e.length,s.expected=i,s}var o=new H(N.util.createBuffer(e).toHex(),16);if(o.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=mu(o,t,r),u=a.toString(16),c=N.util.createBuffer(),f=i-Math.ceil(u.length/2);f>0;)c.putByte(0),--f;return c.putBytes(N.util.hexToBytes(u)),n!==!1?Si(c.getBytes(),t,r):c.getBytes()};F.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||N.random,i={nextBytes:function(a){for(var u=n.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=u.charCodeAt(c)}},s=r.algorithm||"PRIMEINC",o;if(s==="PRIMEINC")o={algorithm:s,state:0,bits:e,rng:i,eInt:t||65537,e:new H(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},o.e.fromInt(o.eInt);else throw new Error("Invalid key generation algorithm: "+s);return o};F.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new H(null);r.fromInt(30);for(var n=0,i=function(l,h){return l|h},s=+new Date,o,a=0;e.keys===null&&(t<=0||a<t);){if(e.state===0){var u=e.p===null?e.pBits:e.qBits,c=u-1;e.pqState===0?(e.num=new H(u,e.rng),e.num.testBit(c)||e.num.bitwiseTo(H.ONE.shiftLeft(c),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>u?e.pqState=0:e.num.isProbablePrime(yy(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(ay[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(H.ONE).gcd(e.e).compareTo(H.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(H.ONE),e.q1=e.q.subtract(H.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(H.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var f=e.e.modInverse(e.phi);e.keys={privateKey:F.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:F.rsa.setPublicKey(e.n,e.e)}}o=+new Date,a+=o-s,s=o}return e.keys!==null};F.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!N.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(pu("generateKeyPair"))return uo.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,u,c){if(a)return n(a);n(null,{privateKey:F.privateKeyFromPem(c),publicKey:F.publicKeyFromPem(u)})});if(du("generateKey")&&du("exportKey"))return ie.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:gu(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return ie.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var u=F.privateKeyFromAsn1(m.fromDer(N.util.createBuffer(a)));n(null,{privateKey:u,publicKey:F.setRsaPublicKey(u.n,u.e)})}});if(yu("generateKey")&&yu("exportKey")){var i=ie.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:gu(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var u=a.target.result,c=ie.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);c.oncomplete=function(f){var l=f.target.result,h=F.privateKeyFromAsn1(m.fromDer(N.util.createBuffer(l)));n(null,{privateKey:h,publicKey:F.setRsaPublicKey(h.n,h.e)})},c.onerror=function(f){n(f)}},i.onerror=function(a){n(a)};return}}else if(pu("generateKeyPairSync")){var s=uo.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:F.privateKeyFromPem(s.privateKey),publicKey:F.publicKeyFromPem(s.publicKey)}}}var o=F.rsa.createKeyPairGenerationState(e,t,r);if(!n)return F.rsa.stepKeyPairGenerationState(o,0),o.keys;dy(o,r,n)};F.setRsaPublicKey=F.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,s){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,u,c){return xu(a,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,u){return N.pkcs1.encode_rsa_oaep(u,a,s)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var o=i.encode(n,r,!0);return F.rsa.encrypt(o,r,!0)},r.verify=function(n,i,s,o){typeof s=="string"?s=s.toUpperCase():s===void 0&&(s="RSASSA-PKCS1-V1_5"),o===void 0&&(o={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in o||(o._parseAllDigestBytes=!0),s==="RSASSA-PKCS1-V1_5"?s={verify:function(u,c){c=Si(c,r,!0);var f=m.fromDer(c,{parseAllBytes:o._parseAllDigestBytes}),l={},h=[];if(!m.validate(f,hy,l,h)){var d=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw d.errors=h,d}var p=m.derToOid(l.algorithmIdentifier);if(!(p===N.oids.md2||p===N.oids.md5||p===N.oids.sha1||p===N.oids.sha224||p===N.oids.sha256||p===N.oids.sha384||p===N.oids.sha512||p===N.oids["sha512-224"]||p===N.oids["sha512-256"])){var d=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw d.oid=p,d}if((p===N.oids.md2||p===N.oids.md5)&&!("parameters"in l))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===l.digest}}:(s==="NONE"||s==="NULL"||s===null)&&(s={verify:function(u,c){return c=Si(c,r,!0),u===c}});var a=F.rsa.decrypt(i,r,!0,!1);return s.verify(n,a,r.n.bitLength())},r};F.setRsaPrivateKey=F.rsa.setPrivateKey=function(e,t,r,n,i,s,o,a){var u={n:e,e:t,d:r,p:n,q:i,dP:s,dQ:o,qInv:a};return u.decrypt=function(c,f,l){typeof f=="string"?f=f.toUpperCase():f===void 0&&(f="RSAES-PKCS1-V1_5");var h=F.rsa.decrypt(c,u,!1,!1);if(f==="RSAES-PKCS1-V1_5")f={decode:Si};else if(f==="RSA-OAEP"||f==="RSAES-OAEP")f={decode:function(d,p){return N.pkcs1.decode_rsa_oaep(p,d,l)}};else if(["RAW","NONE","NULL",null].indexOf(f)!==-1)f={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+f+'".');return f.decode(h,u,!1)},u.sign=function(c,f){var l=!1;typeof f=="string"&&(f=f.toUpperCase()),f===void 0||f==="RSASSA-PKCS1-V1_5"?(f={encode:py},l=1):(f==="NONE"||f==="NULL"||f===null)&&(f={encode:function(){return c}},l=1);var h=f.encode(c,u.n.bitLength());return F.rsa.encrypt(h,u,l)},u};F.wrapRsaPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(F.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.OCTETSTRING,!1,m.toDer(e).getBytes())])};F.privateKeyFromAsn1=function(e){var t={},r=[];if(m.validate(e,uy,t,r)&&(e=m.fromDer(N.util.createBuffer(t.privateKey))),t={},r=[],!m.validate(e,cy,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,s,o,a,u,c,f,l;return i=N.util.createBuffer(t.privateKeyModulus).toHex(),s=N.util.createBuffer(t.privateKeyPublicExponent).toHex(),o=N.util.createBuffer(t.privateKeyPrivateExponent).toHex(),a=N.util.createBuffer(t.privateKeyPrime1).toHex(),u=N.util.createBuffer(t.privateKeyPrime2).toHex(),c=N.util.createBuffer(t.privateKeyExponent1).toHex(),f=N.util.createBuffer(t.privateKeyExponent2).toHex(),l=N.util.createBuffer(t.privateKeyCoefficient).toHex(),F.setRsaPrivateKey(new H(i,16),new H(s,16),new H(o,16),new H(a,16),new H(u,16),new H(c,16),new H(f,16),new H(l,16))};F.privateKeyToAsn1=F.privateKeyToRSAPrivateKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,m.integerToDer(0).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.e)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.d)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.p)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.q)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.dP)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.dQ)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.qInv))])};F.publicKeyFromAsn1=function(e){var t={},r=[];if(m.validate(e,ly,t,r)){var n=m.derToOid(t.publicKeyOid);if(n!==F.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!m.validate(e,fy,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var s=N.util.createBuffer(t.publicKeyModulus).toHex(),o=N.util.createBuffer(t.publicKeyExponent).toHex();return F.setRsaPublicKey(new H(s,16),new H(o,16))};F.publicKeyToAsn1=F.publicKeyToSubjectPublicKeyInfo=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.OID,!1,m.oidToDer(F.oids.rsaEncryption).getBytes()),m.create(m.Class.UNIVERSAL,m.Type.NULL,!1,"")]),m.create(m.Class.UNIVERSAL,m.Type.BITSTRING,!1,[F.publicKeyToRSAPublicKey(e)])])};F.publicKeyToRSAPublicKey=function(e){return m.create(m.Class.UNIVERSAL,m.Type.SEQUENCE,!0,[m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.n)),m.create(m.Class.UNIVERSAL,m.Type.INTEGER,!1,Ee(e.e))])};function xu(e,t,r){var n=N.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var s=new Error("Message is too long for PKCS#1 v1.5 padding.");throw s.length=e.length,s.max=i-11,s}n.putByte(0),n.putByte(r);var o=i-3-e.length,a;if(r===0||r===1){a=r===0?0:255;for(var u=0;u<o;++u)n.putByte(a)}else for(;o>0;){for(var c=0,f=N.random.getBytes(o),u=0;u<o;++u)a=f.charCodeAt(u),a===0?++c:n.putByte(a);o=c}return n.putByte(0),n.putBytes(e),n}function Si(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),s=N.util.createBuffer(e),o=s.getByte(),a=s.getByte();if(o!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var u=0;if(a===0){u=i-3-n;for(var c=0;c<u;++c)if(s.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(u=0;s.length()>1;){if(s.getByte()!==255){--s.read;break}++u}else if(a===2)for(u=0;s.length()>1;){if(s.getByte()===0){--s.read;break}++u}var f=s.getByte();if(f!==0||u!==i-3-s.length())throw new Error("Encryption block is invalid.");return s.getBytes()}function dy(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){s(e.pBits,function(a,u){if(a)return r(a);if(e.p=u,e.q!==null)return o(a,e.q);s(e.qBits,o)})}function s(a,u){N.prime.generateProbablePrime(a,n,u)}function o(a,u){if(a)return r(a);if(e.q=u,e.p.compareTo(e.q)<0){var c=e.p;e.p=e.q,e.q=c}if(e.p.subtract(H.ONE).gcd(e.e).compareTo(H.ONE)!==0){e.p=null,i();return}if(e.q.subtract(H.ONE).gcd(e.e).compareTo(H.ONE)!==0){e.q=null,s(e.qBits,o);return}if(e.p1=e.p.subtract(H.ONE),e.q1=e.q.subtract(H.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(H.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,s(e.qBits,o);return}var f=e.e.modInverse(e.phi);e.keys={privateKey:F.rsa.setPrivateKey(e.n,e.e,f,e.p,e.q,f.mod(e.p1),f.mod(e.q1),e.q.modInverse(e.p)),publicKey:F.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Ee(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=N.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function yy(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function pu(e){return N.util.isNodejs&&typeof uo[e]=="function"}function du(e){return typeof ie.globalScope<"u"&&typeof ie.globalScope.crypto=="object"&&typeof ie.globalScope.crypto.subtle=="object"&&typeof ie.globalScope.crypto.subtle[e]=="function"}function yu(e){return typeof ie.globalScope<"u"&&typeof ie.globalScope.msCrypto=="object"&&typeof ie.globalScope.msCrypto.subtle=="object"&&typeof ie.globalScope.msCrypto.subtle[e]=="function"}function gu(e){for(var t=N.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var Bu=K((h2,Au)=>{var _=j();js();En();_0();yr();ci();N0();K0();Sn();Y0();Ai();wt();typeof wu>"u"&&(wu=_.jsbn.BigInteger);var wu,w=_.asn1,M=_.pki=_.pki||{};Au.exports=M.pbe=_.pbe=_.pbe||{};var xr=M.oids,gy={name:"EncryptedPrivateKeyInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},my={name:"PBES2Algorithms",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},xy={name:"pkcs-12PbeParams",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"iterations"}]};M.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=_.random.getBytesSync(r.saltSize),i=r.count,s=w.integerToDer(i),o,a,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var c,f,l;switch(r.algorithm){case"aes128":o=16,c=16,f=xr["aes128-CBC"],l=_.aes.createEncryptionCipher;break;case"aes192":o=24,c=16,f=xr["aes192-CBC"],l=_.aes.createEncryptionCipher;break;case"aes256":o=32,c=16,f=xr["aes256-CBC"],l=_.aes.createEncryptionCipher;break;case"des":o=8,c=8,f=xr.desCBC,l=_.des.createEncryptionCipher;break;default:var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=Su(d),g=_.pkcs5.pbkdf2(t,n,i,o,p),x=_.random.getBytesSync(c),v=l(g);v.start(x),v.update(w.toDer(e)),v.finish(),u=v.output.getBytes();var S=vy(n,s,o,d);a=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(xr.pkcs5PBES2).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(xr.pkcs5PBKDF2).getBytes()),S]),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(f).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,x)])])])}else if(r.algorithm==="3des"){o=24;var B=new _.util.ByteBuffer(n),g=M.pbe.generatePkcs12Key(t,B,1,i,o),x=M.pbe.generatePkcs12Key(t,B,2,i,o),v=_.des.createEncryptionCipher(g);v.start(x),v.update(w.toDer(e)),v.finish(),u=v.output.getBytes(),a=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(xr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,n),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,s.getBytes())])])}else{var h=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw h.algorithm=r.algorithm,h}var P=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[a,w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,u)]);return P};M.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!w.validate(e,gy,n,i)){var s=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=w.derToOid(n.encryptionOid),a=M.pbe.getCipher(o,n.encryptionParams,t),u=_.util.createBuffer(n.encryptedData);return a.update(u),a.finish()&&(r=w.fromDer(a.output)),r};M.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:w.toDer(e).getBytes()};return _.pem.encode(r,{maxline:t})};M.encryptedPrivateKeyFromPem=function(e){var t=_.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return w.fromDer(t.body)};M.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=M.wrapRsaPrivateKey(M.privateKeyToAsn1(e));return n=M.encryptPrivateKeyInfo(n,t,r),M.encryptedPrivateKeyToPem(n)}var i,s,o,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",o=16,s=_.random.getBytesSync(16),a=_.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",o=24,s=_.random.getBytesSync(16),a=_.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",o=32,s=_.random.getBytesSync(16),a=_.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",o=24,s=_.random.getBytesSync(8),a=_.des.createEncryptionCipher;break;case"des":i="DES-CBC",o=8,s=_.random.getBytesSync(8),a=_.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var c=_.pbe.opensslDeriveBytes(t,s.substr(0,8),o),f=a(c);f.start(s),f.update(w.toDer(M.privateKeyToAsn1(e))),f.finish();var l={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:_.util.bytesToHex(s).toUpperCase()},body:f.output.getBytes()};return _.pem.encode(l)};M.decryptRsaPrivateKey=function(e,t){var r=null,n=_.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var s,o;switch(n.dekInfo.algorithm){case"DES-CBC":s=8,o=_.des.createDecryptionCipher;break;case"DES-EDE3-CBC":s=24,o=_.des.createDecryptionCipher;break;case"AES-128-CBC":s=16,o=_.aes.createDecryptionCipher;break;case"AES-192-CBC":s=24,o=_.aes.createDecryptionCipher;break;case"AES-256-CBC":s=32,o=_.aes.createDecryptionCipher;break;case"RC2-40-CBC":s=5,o=function(l){return _.rc2.createDecryptionCipher(l,40)};break;case"RC2-64-CBC":s=8,o=function(l){return _.rc2.createDecryptionCipher(l,64)};break;case"RC2-128-CBC":s=16,o=function(l){return _.rc2.createDecryptionCipher(l,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=_.util.hexToBytes(n.dekInfo.parameters),u=_.pbe.opensslDeriveBytes(t,a.substr(0,8),s),c=o(u);if(c.start(a),c.update(_.util.createBuffer(n.body)),c.finish())r=c.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=M.decryptPrivateKeyInfo(w.fromDer(r),t):r=w.fromDer(r),r!==null&&(r=M.privateKeyFromAsn1(r)),r};M.pbe.generatePkcs12Key=function(e,t,r,n,i,s){var o,a;if(typeof s>"u"||s===null){if(!("sha1"in _.md))throw new Error('"sha1" hash algorithm unavailable.');s=_.md.sha1.create()}var u=s.digestLength,c=s.blockLength,f=new _.util.ByteBuffer,l=new _.util.ByteBuffer;if(e!=null){for(a=0;a<e.length;a++)l.putInt16(e.charCodeAt(a));l.putInt16(0)}var h=l.length(),d=t.length(),p=new _.util.ByteBuffer;p.fillWithByte(r,c);var g=c*Math.ceil(d/c),x=new _.util.ByteBuffer;for(a=0;a<g;a++)x.putByte(t.at(a%d));var v=c*Math.ceil(h/c),S=new _.util.ByteBuffer;for(a=0;a<v;a++)S.putByte(l.at(a%h));var B=x;B.putBuffer(S);for(var P=Math.ceil(i/u),C=1;C<=P;C++){var T=new _.util.ByteBuffer;T.putBytes(p.bytes()),T.putBytes(B.bytes());for(var V=0;V<n;V++)s.start(),s.update(T.getBytes()),T=s.digest();var z=new _.util.ByteBuffer;for(a=0;a<c;a++)z.putByte(T.at(a%u));var Et=Math.ceil(d/c)+Math.ceil(h/c),ae=new _.util.ByteBuffer;for(o=0;o<Et;o++){var $t=new _.util.ByteBuffer(B.getBytes(c)),Dt=511;for(a=z.length()-1;a>=0;a--)Dt=Dt>>8,Dt+=z.at(a)+$t.at(a),$t.setAt(a,Dt&255);ae.putBuffer($t)}B=ae,f.putBuffer(T)}return f.truncate(f.length()-i),f};M.pbe.getCipher=function(e,t,r){switch(e){case M.oids.pkcs5PBES2:return M.pbe.getCipherForPBES2(e,t,r);case M.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case M.oids["pbewithSHAAnd40BitRC2-CBC"]:return M.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};M.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!w.validate(t,my,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}if(e=w.derToOid(n.kdfOid),e!==M.oids.pkcs5PBKDF2){var s=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw s.oid=e,s.supportedOids=["pkcs5PBKDF2"],s}if(e=w.derToOid(n.encOid),e!==M.oids["aes128-CBC"]&&e!==M.oids["aes192-CBC"]&&e!==M.oids["aes256-CBC"]&&e!==M.oids["des-EDE3-CBC"]&&e!==M.oids.desCBC){var s=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw s.oid=e,s.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],s}var o=n.kdfSalt,a=_.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var u,c;switch(M.oids[e]){case"aes128-CBC":u=16,c=_.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,c=_.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,c=_.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,c=_.des.createDecryptionCipher;break;case"desCBC":u=8,c=_.des.createDecryptionCipher;break}var f=Eu(n.prfOid),l=_.pkcs5.pbkdf2(r,o,a,u,f),h=n.encIv,d=c(l);return d.start(h),d};M.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!w.validate(t,xy,n,i)){var s=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw s.errors=i,s}var o=_.util.createBuffer(n.salt),a=_.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var u,c,f;switch(e){case M.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,c=8,f=_.des.startDecrypting;break;case M.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,c=8,f=function(g,x){var v=_.rc2.createDecryptionCipher(g,40);return v.start(x,null),v};break;default:var s=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw s.oid=e,s}var l=Eu(n.prfOid),h=M.pbe.generatePkcs12Key(r,o,1,a,u,l);l.start();var d=M.pbe.generatePkcs12Key(r,o,2,a,c,l);return f(h,d)};M.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in _.md))throw new Error('"md5" hash algorithm unavailable.');n=_.md.md5.create()}t===null&&(t="");for(var i=[bu(n,e+t)],s=16,o=1;s<r;++o,s+=16)i.push(bu(n,i[o-1]+e+t));return i.join("").substr(0,r)};function bu(e,t){return e.start().update(t).digest().getBytes()}function Eu(e){var t;if(!e)t="hmacWithSHA1";else if(t=M.oids[w.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Su(t)}function Su(e){var t=_.md;switch(e){case"hmacWithSHA224":t=_.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function vy(e,t,r,n){var i=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,e),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,_.util.hexToBytes(r.toString(16))),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(M.oids[n]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])),i}});var qu=K((S2,Vu)=>{"use strict";Vu.exports=Fy;function Fy(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,s=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,u){r[n]=function(f){if(s)if(s=!1,f)u(f);else{for(var l=new Array(arguments.length-1),h=0;h<l.length;)l[h++]=arguments[h];a.apply(null,l)}};try{e.apply(t||null,r)}catch(c){s&&(s=!1,u(c))}})}});var Wu=K(Gu=>{"use strict";var Ri=Gu;Ri.length=function(t){var r=t.length;if(!r)return 0;for(var n=0;--r%4>1&&t.charAt(r)==="=";)++n;return Math.ceil(t.length*3)/4-n};var Xr=new Array(64),Hu=new Array(123);for(fe=0;fe<64;)Hu[Xr[fe]=fe<26?fe+65:fe<52?fe+71:fe<62?fe-4:fe-59|43]=fe++;var fe;Ri.encode=function(t,r,n){for(var i=null,s=[],o=0,a=0,u;r<n;){var c=t[r++];switch(a){case 0:s[o++]=Xr[c>>2],u=(c&3)<<4,a=1;break;case 1:s[o++]=Xr[u|c>>4],u=(c&15)<<2,a=2;break;case 2:s[o++]=Xr[u|c>>6],s[o++]=Xr[c&63],a=0;break}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Xr[u],s[o++]=61,a===1&&(s[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,s.slice(0,o))),i.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var zu="invalid encoding";Ri.decode=function(t,r,n){for(var i=n,s=0,o,a=0;a<t.length;){var u=t.charCodeAt(a++);if(u===61&&s>1)break;if((u=Hu[u])===void 0)throw Error(zu);switch(s){case 0:o=u,s=1;break;case 1:r[n++]=o<<2|(u&48)>>4,o=u,s=2;break;case 2:r[n++]=(o&15)<<4|(u&60)>>2,o=u,s=3;break;case 3:r[n++]=(o&3)<<6|u,s=0;break}}if(s===1)throw Error(zu);return n-i};Ri.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var Qu=K((B2,$u)=>{"use strict";$u.exports=ki;function ki(){this._listeners={}}ki.prototype.on=function(t,r,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this}),this};ki.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};ki.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var ec=K((C2,tc)=>{"use strict";tc.exports=Yu(Yu);function Yu(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function i(u,c,f){t[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3]}function s(u,c,f){t[0]=u,c[f]=r[3],c[f+1]=r[2],c[f+2]=r[1],c[f+3]=r[0]}e.writeFloatLE=n?i:s,e.writeFloatBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],t[0]}function a(u,c){return r[3]=u[c],r[2]=u[c+1],r[1]=u[c+2],r[0]=u[c+3],t[0]}e.readFloatLE=n?o:a,e.readFloatBE=n?a:o}():function(){function t(n,i,s,o){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,s,o);else if(isNaN(i))n(2143289344,s,o);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,s,o);else{var u=Math.floor(Math.log(i)/Math.LN2),c=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((a<<31|u+127<<23|c)>>>0,s,o)}}e.writeFloatLE=t.bind(null,Zu),e.writeFloatBE=t.bind(null,Xu);function r(n,i,s){var o=n(i,s),a=(o>>31)*2+1,u=o>>>23&255,c=o&8388607;return u===255?c?NaN:a*(1/0):u===0?a*1401298464324817e-60*c:a*Math.pow(2,u-150)*(c+8388608)}e.readFloatLE=r.bind(null,Ju),e.readFloatBE=r.bind(null,ju)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function i(u,c,f){t[0]=u,c[f]=r[0],c[f+1]=r[1],c[f+2]=r[2],c[f+3]=r[3],c[f+4]=r[4],c[f+5]=r[5],c[f+6]=r[6],c[f+7]=r[7]}function s(u,c,f){t[0]=u,c[f]=r[7],c[f+1]=r[6],c[f+2]=r[5],c[f+3]=r[4],c[f+4]=r[3],c[f+5]=r[2],c[f+6]=r[1],c[f+7]=r[0]}e.writeDoubleLE=n?i:s,e.writeDoubleBE=n?s:i;function o(u,c){return r[0]=u[c],r[1]=u[c+1],r[2]=u[c+2],r[3]=u[c+3],r[4]=u[c+4],r[5]=u[c+5],r[6]=u[c+6],r[7]=u[c+7],t[0]}function a(u,c){return r[7]=u[c],r[6]=u[c+1],r[5]=u[c+2],r[4]=u[c+3],r[3]=u[c+4],r[2]=u[c+5],r[1]=u[c+6],r[0]=u[c+7],t[0]}e.readDoubleLE=n?o:a,e.readDoubleBE=n?a:o}():function(){function t(n,i,s,o,a,u){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,a,u+i),n(1/o>0?0:2147483648,a,u+s);else if(isNaN(o))n(0,a,u+i),n(2146959360,a,u+s);else if(o>17976931348623157e292)n(0,a,u+i),n((c<<31|2146435072)>>>0,a,u+s);else{var f;if(o<22250738585072014e-324)f=o/5e-324,n(f>>>0,a,u+i),n((c<<31|f/4294967296)>>>0,a,u+s);else{var l=Math.floor(Math.log(o)/Math.LN2);l===1024&&(l=1023),f=o*Math.pow(2,-l),n(f*4503599627370496>>>0,a,u+i),n((c<<31|l+1023<<20|f*1048576&1048575)>>>0,a,u+s)}}}e.writeDoubleLE=t.bind(null,Zu,0,4),e.writeDoubleBE=t.bind(null,Xu,4,0);function r(n,i,s,o,a){var u=n(o,a+i),c=n(o,a+s),f=(c>>31)*2+1,l=c>>>20&2047,h=4294967296*(c&1048575)+u;return l===2047?h?NaN:f*(1/0):l===0?f*5e-324*h:f*Math.pow(2,l-1075)*(h+4503599627370496)}e.readDoubleLE=r.bind(null,Ju,0,4),e.readDoubleBE=r.bind(null,ju,4,0)}(),e}function Zu(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function Xu(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function Ju(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function ju(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}});var rc=K((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var ic=K(nc=>{"use strict";var wo=nc;wo.length=function(t){for(var r=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};wo.read=function(t,r,n){var i=n-r;if(i<1)return"";for(var s=null,o=[],a=0,u;r<n;)u=t[r++],u<128?o[a++]=u:u>191&&u<224?o[a++]=(u&31)<<6|t[r++]&63:u>239&&u<365?(u=((u&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,o[a++]=55296+(u>>10),o[a++]=56320+(u&1023)):o[a++]=(u&15)<<12|(t[r++]&63)<<6|t[r++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};wo.write=function(t,r,n){for(var i=n,s,o,a=0;a<t.length;++a)s=t.charCodeAt(a),s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):(s&64512)===55296&&((o=t.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128);return n-i}});var oc=K((T2,sc)=>{"use strict";sc.exports=My;function My(e,t,r){var n=r||8192,i=n>>>1,s=null,o=n;return function(u){if(u<1||u>i)return e(u);o+u>n&&(s=e(n),o=0);var c=t.call(s,o,o+=u);return o&7&&(o=(o|7)+1),c}}});var uc=K((_2,ac)=>{"use strict";ac.exports=_t;var _n=br();function _t(e,t){this.lo=e>>>0,this.hi=t>>>0}var wr=_t.zero=new _t(0,0);wr.toNumber=function(){return 0};wr.zzEncode=wr.zzDecode=function(){return this};wr.length=function(){return 1};var Oy=_t.zeroHash="\0\0\0\0\0\0\0\0";_t.fromNumber=function(t){if(t===0)return wr;var r=t<0;r&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new _t(n,i)};_t.from=function(t){if(typeof t=="number")return _t.fromNumber(t);if(_n.isString(t))if(_n.Long)t=_n.Long.fromString(t);else return _t.fromNumber(parseInt(t,10));return t.low||t.high?new _t(t.low>>>0,t.high>>>0):wr};_t.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};_t.prototype.toLong=function(t){return _n.Long?new _n.Long(this.lo|0,this.hi|0,!!t):{low:this.lo|0,high:this.hi|0,unsigned:!!t}};var tr=String.prototype.charCodeAt;_t.fromHash=function(t){return t===Oy?wr:new _t((tr.call(t,0)|tr.call(t,1)<<8|tr.call(t,2)<<16|tr.call(t,3)<<24)>>>0,(tr.call(t,4)|tr.call(t,5)<<8|tr.call(t,6)<<16|tr.call(t,7)<<24)>>>0)};_t.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};_t.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};_t.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};_t.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var br=K(bo=>{"use strict";var L=bo;L.asPromise=qu();L.base64=Wu();L.EventEmitter=Qu();L.float=ec();L.inquire=rc();L.utf8=ic();L.pool=oc();L.LongBits=uc();L.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);L.global=L.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||bo;L.emptyArray=Object.freeze?Object.freeze([]):[];L.emptyObject=Object.freeze?Object.freeze({}):{};L.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};L.isString=function(t){return typeof t=="string"||t instanceof String};L.isObject=function(t){return t&&typeof t=="object"};L.isset=L.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};L.Buffer=function(){try{var e=L.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();L._Buffer_from=null;L._Buffer_allocUnsafe=null;L.newBuffer=function(t){return typeof t=="number"?L.Buffer?L._Buffer_allocUnsafe(t):new L.Array(t):L.Buffer?L._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};L.Array=typeof Uint8Array<"u"?Uint8Array:Array;L.Long=L.global.dcodeIO&&L.global.dcodeIO.Long||L.global.Long||L.inquire("long");L.key2Re=/^true|false|0|1$/;L.key32Re=/^-?(?:0|[1-9][0-9]*)$/;L.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;L.longToHash=function(t){return t?L.LongBits.from(t).toHash():L.LongBits.zeroHash};L.longFromHash=function(t,r){var n=L.LongBits.fromHash(t);return L.Long?L.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function cc(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)(e[n[i]]===void 0||!r)&&(e[n[i]]=t[n[i]]);return e}L.merge=cc;L.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function fc(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&cc(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}L.newError=fc;L.ProtocolError=fc("ProtocolError");L.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var i=Object.keys(this),s=i.length-1;s>-1;--s)if(r[i[s]]===1&&this[i[s]]!==void 0&&this[i[s]]!==null)return i[s]}};L.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};L.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};L._configure=function(){var e=L.Buffer;if(!e){L._Buffer_from=L._Buffer_allocUnsafe=null;return}L._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},L._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var Ao=K((k2,yc)=>{"use strict";yc.exports=mt;var Ae=br(),So,pc=Ae.LongBits,Vy=Ae.utf8;function le(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function mt(e){this.buf=e,this.pos=0,this.len=e.length}var lc=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new mt(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new mt(t);throw Error("illegal buffer")},dc=function(){return Ae.Buffer?function(r){return(mt.create=function(i){return Ae.Buffer.isBuffer(i)?new So(i):lc(i)})(r)}:lc};mt.create=dc();mt.prototype._slice=Ae.Array.prototype.subarray||Ae.Array.prototype.slice;mt.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,le(this,10);return t}}();mt.prototype.int32=function(){return this.uint32()|0};mt.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function Eo(){var e=new pc(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw le(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw le(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}mt.prototype.bool=function(){return this.uint32()!==0};function Pi(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}mt.prototype.fixed32=function(){if(this.pos+4>this.len)throw le(this,4);return Pi(this.buf,this.pos+=4)};mt.prototype.sfixed32=function(){if(this.pos+4>this.len)throw le(this,4);return Pi(this.buf,this.pos+=4)|0};function hc(){if(this.pos+8>this.len)throw le(this,8);return new pc(Pi(this.buf,this.pos+=4),Pi(this.buf,this.pos+=4))}mt.prototype.float=function(){if(this.pos+4>this.len)throw le(this,4);var t=Ae.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};mt.prototype.double=function(){if(this.pos+8>this.len)throw le(this,4);var t=Ae.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};mt.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw le(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};mt.prototype.string=function(){var t=this.bytes();return Vy.read(t,0,t.length)};mt.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw le(this,t);this.pos+=t}else do if(this.pos>=this.len)throw le(this);while(this.buf[this.pos++]&128);return this};mt.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};mt._configure=function(e){So=e,mt.create=dc(),So._configure();var t=Ae.Long?"toLong":"toNumber";Ae.merge(mt.prototype,{int64:function(){return Eo.call(this)[t](!1)},uint64:function(){return Eo.call(this)[t](!0)},sint64:function(){return Eo.call(this).zzDecode()[t](!1)},fixed64:function(){return hc.call(this)[t](!0)},sfixed64:function(){return hc.call(this)[t](!1)}})}});var vc=K((P2,xc)=>{"use strict";xc.exports=Er;var mc=Ao();(Er.prototype=Object.create(mc.prototype)).constructor=Er;var gc=br();function Er(e){mc.call(this,e)}Er._configure=function(){gc.Buffer&&(Er.prototype._slice=gc.Buffer.prototype.slice)};Er.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};Er._configure()});var ko=K((L2,Sc)=>{"use strict";Sc.exports=Q;var se=br(),Bo,Li=se.LongBits,wc=se.base64,bc=se.utf8;function Rn(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function Io(){}function qy(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function Q(){this.len=0,this.head=new Rn(Io,0,0),this.tail=this.head,this.states=null}var Ec=function(){return se.Buffer?function(){return(Q.create=function(){return new Bo})()}:function(){return new Q}};Q.create=Ec();Q.alloc=function(t){return new se.Array(t)};se.Array!==Array&&(Q.alloc=se.pool(Q.alloc,se.Array.prototype.subarray));Q.prototype._push=function(t,r,n){return this.tail=this.tail.next=new Rn(t,r,n),this.len+=r,this};function To(e,t,r){t[r]=e&255}function zy(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function _o(e,t){this.len=e,this.next=void 0,this.val=t}_o.prototype=Object.create(Rn.prototype);_o.prototype.fn=zy;Q.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new _o((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};Q.prototype.int32=function(t){return t<0?this._push(Ro,10,Li.fromNumber(t)):this.uint32(t)};Q.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Ro(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}Q.prototype.uint64=function(t){var r=Li.from(t);return this._push(Ro,r.length(),r)};Q.prototype.int64=Q.prototype.uint64;Q.prototype.sint64=function(t){var r=Li.from(t).zzEncode();return this._push(Ro,r.length(),r)};Q.prototype.bool=function(t){return this._push(To,1,t?1:0)};function Co(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}Q.prototype.fixed32=function(t){return this._push(Co,4,t>>>0)};Q.prototype.sfixed32=Q.prototype.fixed32;Q.prototype.fixed64=function(t){var r=Li.from(t);return this._push(Co,4,r.lo)._push(Co,4,r.hi)};Q.prototype.sfixed64=Q.prototype.fixed64;Q.prototype.float=function(t){return this._push(se.float.writeFloatLE,4,t)};Q.prototype.double=function(t){return this._push(se.float.writeDoubleLE,8,t)};var Hy=se.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var i=0;i<t.length;++i)r[n+i]=t[i]};Q.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(To,1,0);if(se.isString(t)){var n=Q.alloc(r=wc.length(t));wc.decode(t,n,0),t=n}return this.uint32(r)._push(Hy,r,t)};Q.prototype.string=function(t){var r=bc.length(t);return r?this.uint32(r)._push(bc.write,r,t):this._push(To,1,0)};Q.prototype.fork=function(){return this.states=new qy(this),this.head=this.tail=new Rn(Io,0,0),this.len=0,this};Q.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Rn(Io,0,0),this.len=0),this};Q.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};Q.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};Q._configure=function(e){Bo=e,Q.create=Ec(),Bo._configure()}});var Cc=K((N2,Bc)=>{"use strict";Bc.exports=Be;var Ac=ko();(Be.prototype=Object.create(Ac.prototype)).constructor=Be;var er=br();function Be(){Ac.call(this)}Be._configure=function(){Be.alloc=er._Buffer_allocUnsafe,Be.writeBytesBuffer=er.Buffer&&er.Buffer.prototype instanceof Uint8Array&&er.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var i=0;i<t.length;)r[n++]=t[i++]}};Be.prototype.bytes=function(t){er.isString(t)&&(t=er._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(Be.writeBytesBuffer,r,t),this};function Gy(e,t,r){e.length<40?er.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}Be.prototype.string=function(t){var r=er.Buffer.byteLength(t);return this.uint32(r),r&&this._push(Gy,r,t),this};Be._configure()});var Fc=K((Nx,Kc)=>{var at=j();yr();wt();var Pn=Kc.exports=at.sha512=at.sha512||{};at.md.sha512=at.md.algorithms.sha512=Pn;var Dc=at.sha384=at.sha512.sha384=at.sha512.sha384||{};Dc.create=function(){return Pn.create("SHA-384")};at.md.sha384=at.md.algorithms.sha384=Dc;at.sha512.sha256=at.sha512.sha256||{create:function(){return Pn.create("SHA-512/256")}};at.md["sha512/256"]=at.md.algorithms["sha512/256"]=at.sha512.sha256;at.sha512.sha224=at.sha512.sha224||{create:function(){return Pn.create("SHA-512/224")}};at.md["sha512/224"]=at.md.algorithms["sha512/224"]=at.sha512.sha224;Pn.create=function(e){if(Uc||e1(),typeof e>"u"&&(e="SHA-512"),!(e in Ar))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Ar[e],r=null,n=at.util.createBuffer(),i=new Array(80),s=0;s<80;++s)i[s]=new Array(2);var o=64;switch(e){case"SHA-384":o=48;break;case"SHA-512/256":o=32;break;case"SHA-512/224":o=28;break}var a={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:o,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var u=a.messageLengthSize/4,c=0;c<u;++c)a.fullMessageLength.push(0);n=at.util.createBuffer(),r=new Array(t.length);for(var c=0;c<t.length;++c)r[c]=t[c].slice(0);return a},a.start(),a.update=function(u,c){c==="utf8"&&(u=at.util.encodeUtf8(u));var f=u.length;a.messageLength+=f,f=[f/4294967296>>>0,f>>>0];for(var l=a.fullMessageLength.length-1;l>=0;--l)a.fullMessageLength[l]+=f[1],f[1]=f[0]+(a.fullMessageLength[l]/4294967296>>>0),a.fullMessageLength[l]=a.fullMessageLength[l]>>>0,f[0]=f[1]/4294967296>>>0;return n.putBytes(u),Nc(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var u=at.util.createBuffer();u.putBytes(n.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,f=c&a.blockLength-1;u.putBytes(Mo.substr(0,a.blockLength-f));for(var l,h,d=a.fullMessageLength[0]*8,p=0;p<a.fullMessageLength.length-1;++p)l=a.fullMessageLength[p+1]*8,h=l/4294967296>>>0,d+=h,u.putInt32(d>>>0),d=l>>>0;u.putInt32(d);for(var g=new Array(r.length),p=0;p<r.length;++p)g[p]=r[p].slice(0);Nc(g,i,u);var x=at.util.createBuffer(),v;e==="SHA-512"?v=g.length:e==="SHA-384"?v=g.length-2:v=g.length-4;for(var p=0;p<v;++p)x.putInt32(g[p][0]),(p!==v-1||e!=="SHA-512/224")&&x.putInt32(g[p][1]);return x},a};var Mo=null,Uc=!1,Oo=null,Ar=null;function e1(){Mo=String.fromCharCode(128),Mo+=at.util.fillString(String.fromCharCode(0),128),Oo=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Ar={},Ar["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Ar["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Ar["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Ar["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Uc=!0}function Nc(e,t,r){for(var n,i,s,o,a,u,c,f,l,h,d,p,g,x,v,S,B,P,C,T,V,z,Et,ae,$t,Dt,Dr,ri,vt,zt,D,gs,ms,xs,vs,Ua=r.length();Ua>=128;){for(vt=0;vt<16;++vt)t[vt][0]=r.getInt32()>>>0,t[vt][1]=r.getInt32()>>>0;for(;vt<80;++vt)gs=t[vt-2],zt=gs[0],D=gs[1],n=((zt>>>19|D<<13)^(D>>>29|zt<<3)^zt>>>6)>>>0,i=((zt<<13|D>>>19)^(D<<3|zt>>>29)^(zt<<26|D>>>6))>>>0,xs=t[vt-15],zt=xs[0],D=xs[1],s=((zt>>>1|D<<31)^(zt>>>8|D<<24)^zt>>>7)>>>0,o=((zt<<31|D>>>1)^(zt<<24|D>>>8)^(zt<<25|D>>>7))>>>0,ms=t[vt-7],vs=t[vt-16],D=i+ms[1]+o+vs[1],t[vt][0]=n+ms[0]+s+vs[0]+(D/4294967296>>>0)>>>0,t[vt][1]=D>>>0;for(g=e[0][0],x=e[0][1],v=e[1][0],S=e[1][1],B=e[2][0],P=e[2][1],C=e[3][0],T=e[3][1],V=e[4][0],z=e[4][1],Et=e[5][0],ae=e[5][1],$t=e[6][0],Dt=e[6][1],Dr=e[7][0],ri=e[7][1],vt=0;vt<80;++vt)c=((V>>>14|z<<18)^(V>>>18|z<<14)^(z>>>9|V<<23))>>>0,f=((V<<18|z>>>14)^(V<<14|z>>>18)^(z<<23|V>>>9))>>>0,l=($t^V&(Et^$t))>>>0,h=(Dt^z&(ae^Dt))>>>0,a=((g>>>28|x<<4)^(x>>>2|g<<30)^(x>>>7|g<<25))>>>0,u=((g<<4|x>>>28)^(x<<30|g>>>2)^(x<<25|g>>>7))>>>0,d=(g&v|B&(g^v))>>>0,p=(x&S|P&(x^S))>>>0,D=ri+f+h+Oo[vt][1]+t[vt][1],n=Dr+c+l+Oo[vt][0]+t[vt][0]+(D/4294967296>>>0)>>>0,i=D>>>0,D=u+p,s=a+d+(D/4294967296>>>0)>>>0,o=D>>>0,Dr=$t,ri=Dt,$t=Et,Dt=ae,Et=V,ae=z,D=T+i,V=C+n+(D/4294967296>>>0)>>>0,z=D>>>0,C=B,T=P,B=v,P=S,v=g,S=x,D=i+o,g=n+s+(D/4294967296>>>0)>>>0,x=D>>>0;D=e[0][1]+x,e[0][0]=e[0][0]+g+(D/4294967296>>>0)>>>0,e[0][1]=D>>>0,D=e[1][1]+S,e[1][0]=e[1][0]+v+(D/4294967296>>>0)>>>0,e[1][1]=D>>>0,D=e[2][1]+P,e[2][0]=e[2][0]+B+(D/4294967296>>>0)>>>0,e[2][1]=D>>>0,D=e[3][1]+T,e[3][0]=e[3][0]+C+(D/4294967296>>>0)>>>0,e[3][1]=D>>>0,D=e[4][1]+z,e[4][0]=e[4][0]+V+(D/4294967296>>>0)>>>0,e[4][1]=D>>>0,D=e[5][1]+ae,e[5][0]=e[5][0]+Et+(D/4294967296>>>0)>>>0,e[5][1]=D>>>0,D=e[6][1]+Dt,e[6][0]=e[6][0]+$t+(D/4294967296>>>0)>>>0,e[6][1]=D>>>0,D=e[7][1]+ri,e[7][0]=e[7][0]+Dr+(D/4294967296>>>0)>>>0,e[7][1]=D>>>0,Ua-=128}}});var kf=K((rw,Rf)=>{Rf.exports=ea;var _f=128,H1=127,G1=~H1,W1=Math.pow(2,31);function ea(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw ea.bytes=0,new RangeError("Could not encode varint");t=t||[],r=r||0;for(var n=r;e>=W1;)t[r++]=e&255|_f,e/=128;for(;e&G1;)t[r++]=e&255|_f,e>>>=7;return t[r]=e|0,ea.bytes=r-n+1,t}});var Nf=K((nw,Lf)=>{Lf.exports=ra;var $1=128,Pf=127;function ra(e,n){var r=0,n=n||0,i=0,s=n,o,a=e.length;do{if(s>=a||i>49)throw ra.bytes=0,new RangeError("Could not decode varint");o=e[s++],r+=i<28?(o&Pf)<<i:(o&Pf)*Math.pow(2,i),i+=7}while(o>=$1);return ra.bytes=s-n,r}});var Uf=K((iw,Df)=>{var Q1=Math.pow(2,7),Y1=Math.pow(2,14),Z1=Math.pow(2,21),X1=Math.pow(2,28),J1=Math.pow(2,35),j1=Math.pow(2,42),tg=Math.pow(2,49),eg=Math.pow(2,56),rg=Math.pow(2,63);Df.exports=function(e){return e<Q1?1:e<Y1?2:e<Z1?3:e<X1?4:e<J1?5:e<j1?6:e<tg?7:e<eg?8:e<rg?9:10}});var Wi=K((sw,Kf)=>{Kf.exports={encode:kf(),decode:Nf(),encodingLength:Uf()}});var ol=K((Qb,ga)=>{"use strict";var kg=Object.prototype.hasOwnProperty,qt="~";function Qn(){}Object.create&&(Qn.prototype=Object.create(null),new Qn().__proto__||(qt=!1));function Pg(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function sl(e,t,r,n,i){if(typeof r!="function")throw new TypeError("The listener must be a function");var s=new Pg(r,n||e,i),o=qt?qt+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],s]:e._events[o].push(s):(e._events[o]=s,e._eventsCount++),e}function ji(e,t){--e._eventsCount===0?e._events=new Qn:delete e._events[t]}function Lt(){this._events=new Qn,this._eventsCount=0}Lt.prototype.eventNames=function(){var t=[],r,n;if(this._eventsCount===0)return t;for(n in r=this._events)kg.call(r,n)&&t.push(qt?n.slice(1):n);return Object.getOwnPropertySymbols?t.concat(Object.getOwnPropertySymbols(r)):t};Lt.prototype.listeners=function(t){var r=qt?qt+t:t,n=this._events[r];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,s=n.length,o=new Array(s);i<s;i++)o[i]=n[i].fn;return o};Lt.prototype.listenerCount=function(t){var r=qt?qt+t:t,n=this._events[r];return n?n.fn?1:n.length:0};Lt.prototype.emit=function(t,r,n,i,s,o){var a=qt?qt+t:t;if(!this._events[a])return!1;var u=this._events[a],c=arguments.length,f,l;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,r),!0;case 3:return u.fn.call(u.context,r,n),!0;case 4:return u.fn.call(u.context,r,n,i),!0;case 5:return u.fn.call(u.context,r,n,i,s),!0;case 6:return u.fn.call(u.context,r,n,i,s,o),!0}for(l=1,f=new Array(c-1);l<c;l++)f[l-1]=arguments[l];u.fn.apply(u.context,f)}else{var h=u.length,d;for(l=0;l<h;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,r);break;case 3:u[l].fn.call(u[l].context,r,n);break;case 4:u[l].fn.call(u[l].context,r,n,i);break;default:if(!f)for(d=1,f=new Array(c-1);d<c;d++)f[d-1]=arguments[d];u[l].fn.apply(u[l].context,f)}}return!0};Lt.prototype.on=function(t,r,n){return sl(this,t,r,n,!1)};Lt.prototype.once=function(t,r,n){return sl(this,t,r,n,!0)};Lt.prototype.removeListener=function(t,r,n,i){var s=qt?qt+t:t;if(!this._events[s])return this;if(!r)return ji(this,s),this;var o=this._events[s];if(o.fn)o.fn===r&&(!i||o.once)&&(!n||o.context===n)&&ji(this,s);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==r||i&&!o[a].once||n&&o[a].context!==n)&&u.push(o[a]);u.length?this._events[s]=u.length===1?u[0]:u:ji(this,s)}return this};Lt.prototype.removeAllListeners=function(t){var r;return t?(r=qt?qt+t:t,this._events[r]&&ji(this,r)):(this._events=new Qn,this._eventsCount=0),this};Lt.prototype.off=Lt.prototype.removeListener;Lt.prototype.addListener=Lt.prototype.on;Lt.prefixed=qt;Lt.EventEmitter=Lt;typeof ga<"u"&&(ga.exports=Lt)});var Og={};Rt(Og,{PersistentPeerStore:()=>Da});var Zt=it(qa(),1);var As={};Rt(As,{base58btc:()=>gt,base58flickr:()=>Yl});function Hl(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),o=s.charCodeAt(0);if(r[o]!==255)throw new TypeError(s+" is ambiguous");r[o]=i}var a=e.length,u=e.charAt(0),c=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function l(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var g=0,x=0,v=0,S=p.length;v!==S&&p[v]===0;)v++,g++;for(var B=(S-v)*f+1>>>0,P=new Uint8Array(B);v!==S;){for(var C=p[v],T=0,V=B-1;(C!==0||T<x)&&V!==-1;V--,T++)C+=256*P[V]>>>0,P[V]=C%a>>>0,C=C/a>>>0;if(C!==0)throw new Error("Non-zero carry");x=T,v++}for(var z=B-x;z!==B&&P[z]===0;)z++;for(var Et=u.repeat(g);z<B;++z)Et+=e.charAt(P[z]);return Et}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var g=0;if(p[g]!==" "){for(var x=0,v=0;p[g]===u;)x++,g++;for(var S=(p.length-g)*c+1>>>0,B=new Uint8Array(S);p[g];){var P=r[p.charCodeAt(g)];if(P===255)return;for(var C=0,T=S-1;(P!==0||C<v)&&T!==-1;T--,C++)P+=a*B[T]>>>0,B[T]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");v=C,g++}if(p[g]!==" "){for(var V=S-v;V!==S&&B[V]===0;)V++;for(var z=new Uint8Array(x+(S-V)),Et=x;V!==S;)z[Et++]=B[V++];return z}}}function d(p){var g=h(p);if(g)return g;throw new Error(`Non-${t} character`)}return{encode:l,decodeUnsafe:h,decode:d}}var Gl=Hl,Wl=Gl,za=Wl;var Gg=new Uint8Array(0);var Ha=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},Re=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var Ga=e=>new TextEncoder().encode(e),Wa=e=>new TextDecoder().decode(e);var ws=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},bs=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Qa(this,t)}},Es=class{constructor(t){this.decoders=t}or(t){return Qa(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Qa=(e,t)=>new Es({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),Ss=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new ws(t,r,n),this.decoder=new bs(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},Mr=({name:e,prefix:t,encode:r,decode:n})=>new Ss(e,t,r,n),qe=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=za(r,t);return Mr({prefix:e,name:t,encode:n,decode:s=>Re(i(s))})},$l=(e,t,r,n)=>{let i={};for(let f=0;f<t.length;++f)i[t[f]]=f;let s=e.length;for(;e[s-1]==="=";)--s;let o=new Uint8Array(s*r/8|0),a=0,u=0,c=0;for(let f=0;f<s;++f){let l=i[e[f]];if(l===void 0)throw new SyntaxError(`Non-${n} character`);u=u<<r|l,a+=r,a>=8&&(a-=8,o[c++]=255&u>>a)}if(a>=r||255&u<<8-a)throw new SyntaxError("Unexpected end of data");return o},Ql=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,s="",o=0,a=0;for(let u=0;u<e.length;++u)for(a=a<<8|e[u],o+=8;o>r;)o-=r,s+=t[i&a>>o];if(o&&(s+=t[i&a<<r-o]),n)for(;s.length*r&7;)s+="=";return s},dt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>Mr({prefix:t,name:e,encode(i){return Ql(i,n,r)},decode(i){return $l(i,n,r,e)}});var gt=qe({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Yl=qe({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Bs={};Rt(Bs,{base32:()=>Yt,base32hex:()=>jl,base32hexpad:()=>eh,base32hexpadupper:()=>rh,base32hexupper:()=>th,base32pad:()=>Xl,base32padupper:()=>Jl,base32upper:()=>Zl,base32z:()=>nh});var Yt=dt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Zl=dt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Xl=dt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Jl=dt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),jl=dt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),th=dt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),eh=dt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),rh=dt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),nh=dt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Cs={};Rt(Cs,{base64:()=>Or,base64pad:()=>ih,base64url:()=>sh,base64urlpad:()=>oh});var Or=dt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ih=dt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),sh=dt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),oh=dt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});Zt.default.formatters.b=e=>e==null?"undefined":gt.baseEncode(e);Zt.default.formatters.t=e=>e==null?"undefined":Yt.baseEncode(e);Zt.default.formatters.m=e=>e==null?"undefined":Or.baseEncode(e);Zt.default.formatters.p=e=>e==null?"undefined":e.toString();Zt.default.formatters.c=e=>e==null?"undefined":e.toString();Zt.default.formatters.k=e=>e==null?"undefined":e.toString();Zt.default.formatters.a=e=>e==null?"undefined":e.toString();function ah(e){let t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function Ya(e){let t=ah(`${e}:trace`);return Zt.default.enabled(`${e}:trace`)&&Zt.default.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(t=(0,Zt.default)(`${e}:trace`)),Object.assign((0,Zt.default)(e),{error:(0,Zt.default)(`${e}:error`),trace:t})}var U=class extends Error{code;props;constructor(t,r,n){super(t),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};function lr(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}var Is={};Rt(Is,{identity:()=>uh});var uh=Mr({prefix:"\0",name:"identity",encode:e=>Wa(e),decode:e=>Ga(e)});var Ts={};Rt(Ts,{base2:()=>ch});var ch=dt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var _s={};Rt(_s,{base8:()=>fh});var fh=dt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Rs={};Rt(Rs,{base10:()=>lh});var lh=qe({prefix:"9",name:"base10",alphabet:"0123456789"});var ks={};Rt(ks,{base16:()=>hh,base16upper:()=>ph});var hh=dt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ph=dt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ps={};Rt(Ps,{base36:()=>dh,base36upper:()=>yh});var dh=qe({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),yh=qe({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ls={};Rt(Ls,{base256emoji:()=>wh});var Za=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),gh=Za.reduce((e,t,r)=>(e[r]=t,e),[]),mh=Za.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function xh(e){return e.reduce((t,r)=>(t+=gh[r],t),"")}function vh(e){let t=[];for(let r of e){let n=mh[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var wh=Mr({prefix:"\u{1F680}",name:"base256emoji",encode:xh,decode:vh});var Ks={};Rt(Ks,{sha256:()=>kt,sha512:()=>Mh});var bh=ja,Xa=128,Eh=127,Sh=~Eh,Ah=Math.pow(2,31);function ja(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Ah;)t[r++]=e&255|Xa,e/=128;for(;e&Sh;)t[r++]=e&255|Xa,e>>>=7;return t[r]=e|0,ja.bytes=r-n+1,t}var Bh=Ns,Ch=128,Ja=127;function Ns(e,n){var r=0,n=n||0,i=0,s=n,o,a=e.length;do{if(s>=a)throw Ns.bytes=0,new RangeError("Could not decode varint");o=e[s++],r+=i<28?(o&Ja)<<i:(o&Ja)*Math.pow(2,i),i+=7}while(o>=Ch);return Ns.bytes=s-n,r}var Ih=Math.pow(2,7),Th=Math.pow(2,14),_h=Math.pow(2,21),Rh=Math.pow(2,28),kh=Math.pow(2,35),Ph=Math.pow(2,42),Lh=Math.pow(2,49),Nh=Math.pow(2,56),Dh=Math.pow(2,63),Uh=function(e){return e<Ih?1:e<Th?2:e<_h?3:e<Rh?4:e<kh?5:e<Ph?6:e<Lh?7:e<Nh?8:e<Dh?9:10},Kh={encode:bh,decode:Bh,encodingLength:Uh},Fh=Kh,gn=Fh;var mn=(e,t=0)=>[gn.decode(e,t),gn.decode.bytes],Vr=(e,t,r=0)=>(gn.encode(e,t,r),t),qr=e=>gn.encodingLength(e);var ge=(e,t)=>{let r=t.byteLength,n=qr(e),i=n+qr(r),s=new Uint8Array(i+r);return Vr(e,s,0),Vr(r,s,n),s.set(t,i),new zr(e,r,t,s)},hr=e=>{let t=Re(e),[r,n]=mn(t),[i,s]=mn(t.subarray(n)),o=t.subarray(n+s);if(o.byteLength!==i)throw new Error("Incorrect length");return new zr(r,i,o,t)},t0=(e,t)=>{if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Ha(e.bytes,r.bytes)}},zr=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}};var Us=({name:e,code:t,encode:r})=>new Ds(e,t,r),Ds=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?ge(this.code,r):r.then(n=>ge(this.code,n))}else throw Error("Unknown type, must be binary type")}};var r0=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),kt=Us({name:"sha2-256",code:18,encode:r0("SHA-256")}),Mh=Us({name:"sha2-512",code:19,encode:r0("SHA-512")});var Fs={};Rt(Fs,{identity:()=>ze});var n0=0,Oh="identity",i0=Re,Vh=e=>ge(n0,i0(e)),ze={code:n0,name:Oh,encode:i0,digest:Vh};var wm=new TextEncoder,bm=new TextDecoder;var s0=(e,t)=>{let{bytes:r,version:n}=e;switch(n){case 0:return Gh(r,Ms(e),t||gt.encoder);default:return Wh(r,Ms(e),t||Yt.encoder)}};var o0=new WeakMap,Ms=e=>{let t=o0.get(e);if(t==null){let r=new Map;return o0.set(e,r),r}return t},tt=class{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==xn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==$h)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return tt.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=ge(t,r);return tt.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return tt.equals(this,t)}static equals(t,r){let n=r;return n&&t.code===n.code&&t.version===n.version&&t0(t.multihash,n.multihash)}toString(t){return s0(this,t)}toJSON(){return{"/":s0(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof tt)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:s,bytes:o}=r;return new tt(n,i,s,o||a0(n,i,s.bytes))}else if(r[Qh]===!0){let{version:n,multihash:i,code:s}=r,o=hr(i);return tt.create(n,s,o)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==xn)throw new Error(`Version 0 CID must use dag-pb (code: ${xn}) block encoding`);return new tt(t,r,n,n.bytes)}case 1:{let i=a0(t,r,n.bytes);return new tt(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return tt.create(0,xn,t)}static createV1(t,r){return tt.create(1,t,r)}static decode(t){let[r,n]=tt.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=tt.inspectBytes(t),n=r.size-r.multihashSize,i=Re(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let s=i.subarray(r.multihashSize-r.digestSize),o=new zr(r.multihashCode,r.digestSize,s,i);return[r.version===0?tt.createV0(o):tt.createV1(r.codec,o),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[l,h]=mn(t.subarray(r));return r+=h,l},i=n(),s=xn;if(i===18?(i=0,r=0):s=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=r,a=n(),u=n(),c=r+u,f=c-o;return{version:i,codec:s,multihashCode:a,digestSize:u,multihashSize:f,size:c}}static parse(t,r){let[n,i]=Hh(t,r),s=tt.decode(i);if(s.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ms(s).set(n,t),s}},Hh=(e,t)=>{switch(e[0]){case"Q":{let r=t||gt;return[gt.prefix,r.decode(`${gt.prefix}${e}`)]}case gt.prefix:{let r=t||gt;return[gt.prefix,r.decode(e)]}case Yt.prefix:{let r=t||Yt;return[Yt.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},Gh=(e,t,r)=>{let{prefix:n}=r;if(n!==gt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let s=r.encode(e).slice(1);return t.set(n,s),s}else return i},Wh=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let s=r.encode(e);return t.set(n,s),s}else return i},xn=112,$h=18,a0=(e,t,r)=>{let n=qr(e),i=n+qr(t),s=new Uint8Array(i+r.byteLength);return Vr(e,s,0),Vr(t,s,n),s.set(r,i),s},Qh=Symbol.for("@ipld/js-cid/CID");var He={...Is,...Ts,..._s,...Rs,...ks,...Bs,...Ps,...As,...Cs,...Ls},km={...Ks,...Fs};function ke(e=0){return globalThis.Buffer?.alloc!=null?lr(globalThis.Buffer.alloc(e)):new Uint8Array(e)}function Pe(e=0){return globalThis.Buffer?.allocUnsafe!=null?lr(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function c0(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var u0=c0("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Os=c0("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=Pe(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Yh={utf8:u0,"utf-8":u0,hex:He.base16,latin1:Os,ascii:Os,binary:Os,...He},ai=Yh;function St(e,t="utf8"){let r=ai[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?lr(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function ht(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var yv=it(En(),1),gv=it(Bu(),1);var k1=it(j(),1);var Fo={};Rt(Fo,{Ed25519PrivateKey:()=>Sr,Ed25519PublicKey:()=>kn,generateKeyPair:()=>Xy,generateKeyPairFromSeed:()=>kc,unmarshalEd25519PrivateKey:()=>Yy,unmarshalEd25519PublicKey:()=>Zy});var wy=it(Wr(),1);var Tt=BigInt(0),G=BigInt(1),Xe=BigInt(2),by=BigInt(8),Cu=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),ot=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Cu,n:Cu,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var ku=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Bn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),p2=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),Ey=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Sy=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Ay=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),By=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),q=class{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof ft))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(ft.ZERO)?q.ZERO:new q(t.x,t.y,G,E(t.x*t.y))}static toAffineBatch(t){let r=Ty(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){Tu(t);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=t,u=E(r*a),c=E(s*i),f=E(n*a),l=E(o*i);return u===c&&f===l}negate(){return new q(E(-this.x),this.y,this.z,E(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=ot,s=E(t*t),o=E(r*r),a=E(Xe*E(n*n)),u=E(i*s),c=t+r,f=E(E(c*c)-s-o),l=u+o,h=l-a,d=u-o,p=E(f*h),g=E(l*d),x=E(f*d),v=E(h*l);return new q(p,g,v,x)}add(t){Tu(t);let{x:r,y:n,z:i,t:s}=this,{x:o,y:a,z:u,t:c}=t,f=E((n-r)*(a+o)),l=E((n+r)*(a-o)),h=E(l-f);if(h===Tt)return this.double();let d=E(i*Xe*c),p=E(s*Xe*u),g=p+d,x=l+f,v=p-d,S=E(g*h),B=E(x*v),P=E(g*v),C=E(h*x);return new q(S,B,C,P)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(t-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(t,r){!r&&this.equals(q.BASE)&&(r=ft.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&po.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=q.normalizeZ(i),po.set(r,i)));let s=q.ZERO,o=q.BASE,a=1+256/n,u=2**(n-1),c=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<a;h++){let d=h*u,p=Number(t&c);t>>=l,p>u&&(p-=f,t+=G);let g=d,x=d+Math.abs(p)-1,v=h%2!==0,S=p<0;p===0?o=o.add(Iu(v,i[g])):s=s.add(Iu(S,i[x]))}return q.normalizeZ([s,o])[0]}multiply(t,r){return this.wNAF(Ci(t,ot.l),r)}multiplyUnsafe(t){let r=Ci(t,ot.l,!1),n=q.BASE,i=q.ZERO;if(r===Tt)return i;if(this.equals(i)||r===G)return this;if(this.equals(n))return this.wNAF(r);let s=i,o=this;for(;r>Tt;)r&G&&(s=s.add(o)),o=o.double(),r>>=G;return s}isSmallOrder(){return this.multiplyUnsafe(ot.h).equals(q.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(ot.l/Xe).double();return ot.l%Xe&&(t=t.add(this)),t.equals(q.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,s=this.equals(q.ZERO);t==null&&(t=s?by:Ii(i));let o=E(r*t),a=E(n*t),u=E(i*t);if(s)return ft.ZERO;if(u!==G)throw new Error("invZ was invalid");return new ft(o,a)}fromRistrettoBytes(){fo()}toRistrettoBytes(){fo()}fromRistrettoHash(){fo()}};q.BASE=new q(ot.Gx,ot.Gy,G,E(ot.Gx*ot.Gy));q.ZERO=new q(Tt,G,G,Tt);function Iu(e,t){let r=t.negate();return e?r:t}function Tu(e){if(!(e instanceof q))throw new TypeError("ExtendedPoint expected")}function co(e){if(!(e instanceof Gt))throw new TypeError("RistrettoPoint expected")}function fo(){throw new Error("Legacy method: switch to RistrettoPoint")}var Gt=class{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=ot,n=E(Bn*t*t),i=E((n+G)*Ay),s=BigInt(-1),o=E((s-r*n)*E(n+r)),{isValid:a,value:u}=go(i,o),c=E(u*t);Ze(c)||(c=E(-c)),a||(u=c),a||(s=n);let f=E(s*(n-G)*By-o),l=u*u,h=E((u+u)*o),d=E(f*Ey),p=E(G-l),g=E(G+l);return new q(E(h*g),E(p*d),E(d*g),E(h*p))}static hashToCurve(t){t=Je(t,64);let r=lo(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=lo(t.slice(32,64)),s=this.calcElligatorRistrettoMap(i);return new Gt(n.add(s))}static fromHex(t){t=Je(t,32);let{a:r,d:n}=ot,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",s=lo(t);if(!Ry(Cn(s),t)||Ze(s))throw new Error(i);let o=E(s*s),a=E(G+r*o),u=E(G-r*o),c=E(a*a),f=E(u*u),l=E(r*n*c-f),{isValid:h,value:d}=Ru(E(l*f)),p=E(d*u),g=E(d*p*l),x=E((s+s)*p);Ze(x)&&(x=E(-x));let v=E(a*g),S=E(x*v);if(!h||Ze(S)||v===Tt)throw new Error(i);return new Gt(new q(x,v,G,S))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,s=E(E(n+r)*E(n-r)),o=E(t*r),a=E(o*o),{value:u}=Ru(E(s*a)),c=E(u*s),f=E(u*o),l=E(c*f*i),h;if(Ze(i*l)){let p=E(r*Bn),g=E(t*Bn);t=p,r=g,h=E(c*Sy)}else h=f;Ze(t*l)&&(r=E(-r));let d=E((n-r)*h);return Ze(d)&&(d=E(-d)),Cn(d)}toHex(){return In(this.toRawBytes())}toString(){return this.toHex()}equals(t){co(t);let r=this.ep,n=t.ep,i=E(r.x*n.y)===E(r.y*n.x),s=E(r.y*n.y)===E(r.x*n.x);return i||s}add(t){return co(t),new Gt(this.ep.add(t.ep))}subtract(t){return co(t),new Gt(this.ep.subtract(t.ep))}multiply(t){return new Gt(this.ep.multiply(t))}multiplyUnsafe(t){return new Gt(this.ep.multiplyUnsafe(t))}};Gt.BASE=new Gt(q.BASE);Gt.ZERO=new Gt(q.ZERO);var po=new WeakMap,ft=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,po.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=ot;t=Je(t,32);let s=t.slice();s[31]=t[31]&-129;let o=Tn(s);if(r&&o>=i)throw new Error("Expected 0 < hex < P");if(!r&&o>=ku)throw new Error("Expected 0 < hex < 2**256");let a=E(o*o),u=E(a-G),c=E(n*a+G),{isValid:f,value:l}=go(u,c);if(!f)throw new Error("Point.fromHex: invalid y coordinate");let h=(l&G)===G;return(t[31]&128)!==0!==h&&(l=E(-l)),new ft(l,o)}static async fromPrivateKey(t){return(await Ti(t)).point}toRawBytes(){let t=Cn(this.y);return t[31]|=this.x&G?128:0,t}toHex(){return In(this.toRawBytes())}toX25519(){let{y:t}=this,r=E((G+t)*Ii(G-t));return Cn(r)}isTorsionFree(){return q.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new ft(E(-this.x),this.y)}add(t){return q.fromAffine(this).add(q.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return q.fromAffine(this).multiply(t,this).toAffine()}};ft.BASE=new ft(ot.Gx,ot.Gy);ft.ZERO=new ft(Tt,G);var vr=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=Je(t,64),n=ft.fromHex(r.slice(0,32),!1),i=Tn(r.slice(32,64));return new vr(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof ft))throw new Error("Expected Point instance");return Ci(r,ot.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(Cn(this.s),32),t}toHex(){return In(this.toRawBytes())}};function _u(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let s=e[n];r.set(s,i),i+=s.length}return r}var Cy=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function In(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Cy[e[r]];return t}function yo(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function Pu(e){let r=e.toString(16).padStart(64,"0");return yo(r)}function Cn(e){return Pu(e).reverse()}function Ze(e){return(E(e)&G)===G}function Tn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+In(Uint8Array.from(e).reverse()))}var Iy=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function lo(e){return E(Tn(e)&Iy)}function E(e,t=ot.P){let r=e%t;return r>=Tt?r:t+r}function Ii(e,t=ot.P){if(e===Tt||t<=Tt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=E(e,t),n=t,i=Tt,s=G,o=G,a=Tt;for(;r!==Tt;){let c=n/r,f=n%r,l=i-o*c,h=s-a*c;n=r,r=f,i=o,s=a,o=l,a=h}if(n!==G)throw new Error("invert: does not exist");return E(i,t)}function Ty(e,t=ot.P){let r=new Array(e.length),n=e.reduce((s,o,a)=>o===Tt?s:(r[a]=s,E(s*o,t)),G),i=Ii(n,t);return e.reduceRight((s,o,a)=>o===Tt?s:(r[a]=E(s*r[a],t),E(s*o,t)),i),r}function Se(e,t){let{P:r}=ot,n=e;for(;t-- >Tt;)n*=n,n%=r;return n}function _y(e){let{P:t}=ot,r=BigInt(5),n=BigInt(10),i=BigInt(20),s=BigInt(40),o=BigInt(80),u=e*e%t*e%t,c=Se(u,Xe)*u%t,f=Se(c,G)*e%t,l=Se(f,r)*f%t,h=Se(l,n)*l%t,d=Se(h,i)*h%t,p=Se(d,s)*d%t,g=Se(p,o)*p%t,x=Se(g,o)*p%t,v=Se(x,n)*l%t;return{pow_p_5_8:Se(v,Xe)*e%t,b2:u}}function go(e,t){let r=E(t*t*t),n=E(r*r*t),i=_y(e*n).pow_p_5_8,s=E(e*r*i),o=E(t*s*s),a=s,u=E(s*Bn),c=o===e,f=o===E(-e),l=o===E(-e*Bn);return c&&(s=a),(f||l)&&(s=u),Ze(s)&&(s=E(-s)),{isValid:c||f,value:s}}function Ru(e){return go(G,e)}function Bi(e){return E(Tn(e),ot.l)}function Ry(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Je(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):yo(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function Ci(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(Tt<e)return e}else if(Tt<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function ky(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Py(e){if(e=typeof e=="bigint"||typeof e=="number"?Pu(Ci(e,ku)):Je(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function Ly(e){let t=ky(e.slice(0,32)),r=e.slice(32,64),n=Bi(t),i=ft.BASE.multiply(n),s=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:s}}var ho;async function Ti(e){return Ly(await je.sha512(Py(e)))}async function mo(e){return(await Ti(e)).pointBytes}async function Lu(e,t){e=Je(e);let{prefix:r,scalar:n,pointBytes:i}=await Ti(t),s=Bi(await je.sha512(r,e)),o=ft.BASE.multiply(s),a=Bi(await je.sha512(o.toRawBytes(),i,e)),u=E(s+a*n,ot.l);return new vr(o,u).toRawBytes()}function Ny(e,t,r){t=Je(t),r instanceof ft||(r=ft.fromHex(r,!1));let{r:n,s:i}=e instanceof vr?e.assertValidity():vr.fromHex(e),s=q.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:s,pub:r,msg:t}}function Dy(e,t,r,n){let i=Bi(n),s=q.fromAffine(e).multiplyUnsafe(i);return q.fromAffine(t).add(s).subtract(r).multiplyUnsafe(ot.h).equals(q.ZERO)}async function Nu(e,t,r){let{r:n,SB:i,msg:s,pub:o}=Ny(e,t,r),a=await je.sha512(n.toRawBytes(),o.toRawBytes(),s);return Dy(o,n,i,a)}ft.BASE._setWindowSize(8);var Ye={node:wy,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},je={bytesToHex:In,hexToBytes:yo,concatBytes:_u,getExtendedPublicKey:Ti,mod:E,invert:Ii,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=Je(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return E(Tn(e),ot.l-G)+G},randomBytes:(e=32)=>{if(Ye.web)return Ye.web.getRandomValues(new Uint8Array(e));if(Ye.node){let{randomBytes:t}=Ye.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>je.randomBytes(32),sha512:async(...e)=>{let t=_u(...e);if(Ye.web){let r=await Ye.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(Ye.node)return Uint8Array.from(Ye.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=ft.BASE){let r=t.equals(ft.BASE)?t:new ft(t.x,t.y);return r._setWindowSize(e),r.multiply(Xe),r},sha512Sync:void 0};Object.defineProperties(je,{sha512Sync:{configurable:!1,get(){return ho},set(e){ho||(ho=e)}}});var Yr=32,Ue=64,_i=32;async function Du(){let e=je.randomPrivateKey(),t=await mo(e);return{privateKey:Mu(e,t),publicKey:t}}async function Uu(e){if(e.length!==_i)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let t=e,r=await mo(t);return{privateKey:Mu(t,r),publicKey:r}}async function Ku(e,t){let r=e.subarray(0,_i);return Lu(t,r)}async function Fu(e,t,r){return Nu(t,r,e)}function Mu(e,t){let r=new Uint8Array(Ue);for(let n=0;n<_i;n++)r[n]=e[n],r[_i+n]=t[n];return r}function At(e,t){t==null&&(t=e.reduce((i,s)=>i+s.length,0));let r=Pe(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return lr(r)}var Wt={get(e=globalThis){let t=e.crypto;if(t==null||t.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}};var xo={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function vo(e){let t=e?.algorithm??"AES-GCM",r=e?.keyLength??16,n=e?.nonceLength??12,i=e?.digest??"SHA-256",s=e?.saltLength??16,o=e?.iterations??32767,a=Wt.get();r*=8;async function u(l,h){let d=a.getRandomValues(new Uint8Array(s)),p=a.getRandomValues(new Uint8Array(n)),g={name:t,iv:p};typeof h=="string"&&(h=St(h));let x;if(h.length===0){x=await a.subtle.importKey("jwk",xo,{name:"AES-GCM"},!0,["encrypt"]);try{let S={name:"PBKDF2",salt:d,iterations:o,hash:{name:i}},B=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(S,B,{name:t,length:r},!0,["encrypt"])}catch{x=await a.subtle.importKey("jwk",xo,{name:"AES-GCM"},!0,["encrypt"])}}else{let S={name:"PBKDF2",salt:d,iterations:o,hash:{name:i}},B=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(S,B,{name:t,length:r},!0,["encrypt"])}let v=await a.subtle.encrypt(g,x,l);return At([d,g.iv,new Uint8Array(v)])}async function c(l,h){let d=l.subarray(0,s),p=l.subarray(s,s+n),g=l.subarray(s+n),x={name:t,iv:p};typeof h=="string"&&(h=St(h));let v;if(h.length===0)try{let B={name:"PBKDF2",salt:d,iterations:o,hash:{name:i}},P=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);v=await a.subtle.deriveKey(B,P,{name:t,length:r},!0,["decrypt"])}catch{v=await a.subtle.importKey("jwk",xo,{name:"AES-GCM"},!0,["decrypt"])}else{let B={name:"PBKDF2",salt:d,iterations:o,hash:{name:i}},P=await a.subtle.importKey("raw",h,{name:"PBKDF2"},!1,["deriveKey"]);v=await a.subtle.deriveKey(B,P,{name:t,length:r},!0,["decrypt"])}let S=await a.subtle.decrypt(x,v,g);return new Uint8Array(S)}return{encrypt:u,decrypt:c}}async function Zr(e,t){let n=await vo().encrypt(e,t);return Or.encode(n)}var Po=it(Ao(),1),Ic=it(vc(),1),Tc=it(br(),1),Lo=it(ko(),1),_c=it(Cc(),1);function Wy(){Tc.default._configure(),Po.default._configure(Ic.default),Lo.default._configure(_c.default)}Wy();var Rc=["uint64","int64","sint64","fixed64","sfixed64"];function $y(e){for(let t of Rc){if(e[t]==null)continue;let r=e[t];e[t]=function(){return BigInt(r.call(this).toString())}}return e}function No(e){return $y(new Po.default(e))}function Qy(e){for(let t of Rc){if(e[t]==null)continue;let r=e[t];e[t]=function(n){return r.call(this,n.toString())}}return e}function Do(){return Qy(Lo.default.create())}function Ft(e,t){let r=No(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function Mt(e,t){let r=Do();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var Jr;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(Jr||(Jr={}));function Ni(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function Uo(e){function t(i){if(e[i.toString()]==null)throw new Error("Invalid enum value");return e[i]}let r=function(s,o){let a=t(s);o.int32(a)},n=function(s){let o=s.int32();return t(o)};return Ni("enum",Jr.VARINT,r,n)}function Ot(e,t){return Ni("message",Jr.LENGTH_DELIMITED,e,t)}var lt;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"})(lt||(lt={}));var Ko;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"})(Ko||(Ko={}));(function(e){e.codec=()=>Uo(Ko)})(lt||(lt={}));var Ce;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),lt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=lt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Mt(r,e.codec()),e.decode=r=>Ft(r,e.codec())})(Ce||(Ce={}));var Ie;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),lt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.Type=lt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Mt(r,e.codec()),e.decode=r=>Ft(r,e.codec())})(Ie||(Ie={}));var kn=class{_key;constructor(t){this._key=jr(t,Yr)}async verify(t,r){return Fu(this._key,r,t)}marshal(){return this._key}get bytes(){return Ce.encode({Type:lt.Ed25519,Data:this.marshal()}).subarray()}equals(t){return ht(this.bytes,t.bytes)}async hash(){let{bytes:t}=await kt.digest(this.bytes);return t}},Sr=class{_key;_publicKey;constructor(t,r){this._key=jr(t,Ue),this._publicKey=jr(r,Yr)}async sign(t){return Ku(this._key,t)}get public(){return new kn(this._publicKey)}marshal(){return this._key}get bytes(){return Ie.encode({Type:lt.Ed25519,Data:this.marshal()}).subarray()}equals(t){return ht(this.bytes,t.bytes)}async hash(){let{bytes:t}=await kt.digest(this.bytes);return t}async id(){let t=ze.digest(this.public.bytes);return gt.encode(t.bytes).substring(1)}async export(t,r="libp2p-key"){if(r==="libp2p-key")return Zr(this.bytes,t);throw new U(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function Yy(e){if(e.length>Ue){e=jr(e,Ue+Yr);let n=e.subarray(0,Ue),i=e.subarray(Ue,e.length);return new Sr(n,i)}e=jr(e,Ue);let t=e.subarray(0,Ue),r=e.subarray(Yr);return new Sr(t,r)}function Zy(e){return e=jr(e,Yr),new kn(e)}async function Xy(){let{privateKey:e,publicKey:t}=await Du();return new Sr(e,t)}async function kc(e){let{privateKey:t,publicKey:r}=await Uu(e);return new Sr(t,r)}function jr(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new U(`Key must be a Uint8Array of length ${t}, got ${e.length}`,"ERR_INVALID_KEY_TYPE");return e}function J(e,t="utf8"){let r=ai[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var ox=it(wt(),1),ax=it(bi(),1),Pc=it(j(),1);function he(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=At([new Uint8Array(t-r.length),r])}return J(r,"base64url")}function Xt(e){let t=Lc(e);return new Pc.default.jsbn.BigInteger(J(t,"base16"),16)}function Lc(e,t){let r=St(e,"base64urlpad");if(t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=At([new Uint8Array(t-r.length),r])}return r}var Jy={"P-256":256,"P-384":384,"P-521":521},jy=Object.keys(Jy),xx=jy.join(" / ");var Yo={};Rt(Yo,{RsaPrivateKey:()=>an,RsaPublicKey:()=>Fn,fromJwk:()=>B1,generateKeyPair:()=>C1,unmarshalRsaPrivateKey:()=>S1,unmarshalRsaPublicKey:()=>A1});var Kn=it(j(),1);var rv=it(Fc(),1);var r1=it(Wr(),1);var W=BigInt(0),ut=BigInt(1),nr=BigInt(2),Nn=BigInt(3),Mc=BigInt(8),yt=Object.freeze({a:W,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:ut,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Oc=(e,t)=>(e+t/nr)/t,Ui={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=yt,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-ut*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Oc(s*e,t),u=Oc(-n*e,t),c=R(e-a*r-u*i,t),f=R(-a*n-u*s,t),l=c>o,h=f>o;if(l&&(c=t-c),h&&(f=t-f),c>o||f>o)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:l,k1:c,k2neg:h,k2:f}}},pe=32,rn=32,n1=32,Vc=pe+1,qc=2*pe+1;function zc(e){let{a:t,b:r}=yt,n=R(e*e),i=R(n*e);return R(i+t*e+r)}var Ki=yt.a===W,Oi=class extends Error{constructor(t){super(t)}};function Hc(e){if(!(e instanceof Y))throw new TypeError("JacobianPoint expected")}var Y=class{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof Z))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(Z.ZERO)?Y.ZERO:new Y(t.x,t.y,ut)}static toAffineBatch(t){let r=u1(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return Y.toAffineBatch(t).map(Y.fromAffine)}equals(t){Hc(t);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=t,u=R(i*i),c=R(a*a),f=R(r*c),l=R(s*u),h=R(R(n*a)*c),d=R(R(o*i)*u);return f===l&&h===d}negate(){return new Y(this.x,R(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=R(t*t),s=R(r*r),o=R(s*s),a=t+s,u=R(nr*(R(a*a)-i-o)),c=R(Nn*i),f=R(c*c),l=R(f-nr*u),h=R(c*(u-l)-Mc*o),d=R(nr*r*n);return new Y(l,h,d)}add(t){Hc(t);let{x:r,y:n,z:i}=this,{x:s,y:o,z:a}=t;if(s===W||o===W)return this;if(r===W||n===W)return t;let u=R(i*i),c=R(a*a),f=R(r*c),l=R(s*u),h=R(R(n*a)*c),d=R(R(o*i)*u),p=R(l-f),g=R(d-h);if(p===W)return g===W?this.double():Y.ZERO;let x=R(p*p),v=R(p*x),S=R(f*x),B=R(g*g-v-nr*S),P=R(g*(S-B)-h*v),C=R(i*a*p);return new Y(B,P,C)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=Y.ZERO;if(typeof t=="bigint"&&t===W)return r;let n=$c(t);if(n===ut)return this;if(!Ki){let l=r,h=this;for(;n>W;)n&ut&&(l=l.add(h)),h=h.double(),n>>=ut;return l}let{k1neg:i,k1:s,k2neg:o,k2:a}=Ui.splitScalar(n),u=r,c=r,f=this;for(;s>W||a>W;)s&ut&&(u=u.add(f)),a&ut&&(c=c.add(f)),f=f.double(),s>>=ut,a>>=ut;return i&&(u=u.negate()),o&&(c=c.negate()),c=new Y(R(c.x*Ui.beta),c.y,c.z),u.add(c)}precomputeWindow(t){let r=Ki?128/t+1:256/t+1,n=[],i=this,s=i;for(let o=0;o<r;o++){s=i,n.push(s);for(let a=1;a<2**(t-1);a++)s=s.add(i),n.push(s);i=s.double()}return n}wNAF(t,r){!r&&this.equals(Y.BASE)&&(r=Z.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&qo.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=Y.normalizeZ(i),qo.set(r,i)));let s=Y.ZERO,o=Y.BASE,a=1+(Ki?128/n:256/n),u=2**(n-1),c=BigInt(2**n-1),f=2**n,l=BigInt(n);for(let h=0;h<a;h++){let d=h*u,p=Number(t&c);t>>=l,p>u&&(p-=f,t+=ut);let g=d,x=d+Math.abs(p)-1,v=h%2!==0,S=p<0;p===0?o=o.add(Fi(v,i[g])):s=s.add(Fi(S,i[x]))}return{p:s,f:o}}multiply(t,r){let n=$c(t),i,s;if(Ki){let{k1neg:o,k1:a,k2neg:u,k2:c}=Ui.splitScalar(n),{p:f,f:l}=this.wNAF(a,r),{p:h,f:d}=this.wNAF(c,r);f=Fi(o,f),h=Fi(u,h),h=new Y(R(h.x*Ui.beta),h.y,h.z),i=f.add(h),s=l.add(d)}else{let{p:o,f:a}=this.wNAF(n,r);i=o,s=a}return Y.normalizeZ([i,s])[0]}toAffine(t){let{x:r,y:n,z:i}=this,s=this.equals(Y.ZERO);t==null&&(t=s?Mc:on(i));let o=t,a=R(o*o),u=R(a*o),c=R(r*a),f=R(n*u),l=R(i*o);if(s)return Z.ZERO;if(l!==ut)throw new Error("invZ was invalid");return new Z(c,f)}};Y.BASE=new Y(yt.Gx,yt.Gy,ut);Y.ZERO=new Y(W,ut,W);function Fi(e,t){let r=t.negate();return e?r:t}var qo=new WeakMap,Z=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,qo.delete(this)}hasEvenY(){return this.y%nr===W}static fromCompressedHex(t){let r=t.length===32,n=ir(r?t:t.subarray(1));if(!Vo(n))throw new Error("Point is not on curve");let i=zc(n),s=a1(i),o=(s&ut)===ut;r?o&&(s=R(-s)):(t[0]&1)===1!==o&&(s=R(-s));let a=new Z(n,s);return a.assertValidity(),a}static fromUncompressedHex(t){let r=ir(t.subarray(1,pe+1)),n=ir(t.subarray(pe+1,pe*2+1)),i=new Z(r,n);return i.assertValidity(),i}static fromHex(t){let r=sn(t),n=r.length,i=r[0];if(n===pe)return this.fromCompressedHex(r);if(n===Vc&&(i===2||i===3))return this.fromCompressedHex(r);if(n===qc&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${Vc} compressed bytes or ${qc} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return Z.BASE.multiply(qi(t))}static fromSignature(t,r,n){let{r:i,s}=Qc(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let o=Go(sn(t)),{n:a}=yt,u=n===2||n===3?i+a:i,c=on(u,a),f=R(-o*c,a),l=R(s*c,a),h=n&1?"03":"02",d=Z.fromHex(h+tn(u)),p=Z.BASE.multiplyAndAddUnsafe(d,f,l);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(t=!1){return Br(this.toHex(t))}toHex(t=!1){let r=tn(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${tn(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!Vo(r)||!Vo(n))throw new Error(t);let i=R(n*n),s=zc(r);if(R(i-s)!==W)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new Z(this.x,R(-this.y))}double(){return Y.fromAffine(this).double().toAffine()}add(t){return Y.fromAffine(this).add(Y.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return Y.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=Y.fromAffine(this),s=r===W||r===ut||this!==Z.BASE?i.multiplyUnsafe(r):i.multiply(r),o=Y.fromAffine(t).multiplyUnsafe(n),a=s.add(o);return a.equals(Y.ZERO)?void 0:a.toAffine()}};Z.BASE=new Z(yt.Gx,yt.Gy);Z.ZERO=new Z(W,W);function Gc(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function Wc(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${nn(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:ir(r),left:e.subarray(t+2)}}function i1(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${nn(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=Wc(e.subarray(2)),{data:n,left:i}=Wc(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${nn(i)}`);return{r:t,s:n}}var Te=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?nn(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new Te(Vi(i.slice(0,64)),Vi(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=i1(r?t:Br(t));return new Te(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!Un(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!Un(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=yt.n>>ut;return this.s>t}normalizeS(){return this.hasHighS()?new Te(this.r,R(-this.s,yt.n)):this}toDERRawBytes(){return Br(this.toDERHex())}toDERHex(){let t=Gc(Ln(this.s)),r=Gc(Ln(this.r)),n=t.length/2,i=r.length/2,s=Ln(n),o=Ln(i);return`30${Ln(i+n+4)}02${o}${r}02${s}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return Br(this.toCompactHex())}toCompactHex(){return tn(this.r)+tn(this.s)}};function rr(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let s=e[n];r.set(s,i),i+=s.length}return r}var s1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function nn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=s1[e[r]];return t}var o1=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function tn(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(W<=e&&e<o1))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function zo(e){let t=Br(tn(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function Ln(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Vi(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function Br(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),s=Number.parseInt(i,16);if(Number.isNaN(s)||s<0)throw new Error("Invalid byte sequence");t[r]=s}return t}function ir(e){return Vi(nn(e))}function sn(e){return e instanceof Uint8Array?Uint8Array.from(e):Br(e)}function $c(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&Un(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function R(e,t=yt.P){let r=e%t;return r>=W?r:t+r}function oe(e,t){let{P:r}=yt,n=e;for(;t-- >W;)n*=n,n%=r;return n}function a1(e){let{P:t}=yt,r=BigInt(6),n=BigInt(11),i=BigInt(22),s=BigInt(23),o=BigInt(44),a=BigInt(88),u=e*e*e%t,c=u*u*e%t,f=oe(c,Nn)*c%t,l=oe(f,Nn)*c%t,h=oe(l,nr)*u%t,d=oe(h,n)*h%t,p=oe(d,i)*d%t,g=oe(p,o)*p%t,x=oe(g,a)*g%t,v=oe(x,o)*p%t,S=oe(v,Nn)*c%t,B=oe(S,s)*d%t,P=oe(B,r)*u%t,C=oe(P,nr);if(C*C%t!==e)throw new Error("Cannot find square root");return C}function on(e,t=yt.P){if(e===W||t<=W)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=R(e,t),n=t,i=W,s=ut,o=ut,a=W;for(;r!==W;){let c=n/r,f=n%r,l=i-o*c,h=s-a*c;n=r,r=f,i=o,s=a,o=l,a=h}if(n!==ut)throw new Error("invert: does not exist");return R(i,t)}function u1(e,t=yt.P){let r=new Array(e.length),n=e.reduce((s,o,a)=>o===W?s:(r[a]=s,R(s*o,t)),ut),i=on(n,t);return e.reduceRight((s,o,a)=>o===W?s:(r[a]=R(s*r[a],t),R(s*o,t)),i),r}function c1(e){let t=e.length*8-rn*8,r=ir(e);return t>0?r>>BigInt(t):r}function Go(e,t=!1){let r=c1(e);if(t)return r;let{n}=yt;return r>=n?r-n:r}var en,Dn,Ho=class{constructor(t,r){if(this.hashLen=t,this.qByteLen=r,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return de.hmacSha256(this.k,...t)}hmacSync(...t){return Dn(this.k,...t)}checkSync(){if(typeof Dn!="function")throw new Oi("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return rr(...r)}generateSync(){this.checkSync(),this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return rr(...r)}};function Un(e){return W<e&&e<yt.n}function Vo(e){return W<e&&e<yt.P}function f1(e,t,r,n=!0){let{n:i}=yt,s=Go(e,!0);if(!Un(s))return;let o=on(s,i),a=Z.BASE.multiply(s),u=R(a.x,i);if(u===W)return;let c=R(o*R(t+r*u,i),i);if(c===W)return;let f=new Te(u,c),l=(a.x===f.r?0:2)|Number(a.y&ut);return n&&f.hasHighS()&&(f=f.normalizeS(),l^=1),{sig:f,recovery:l}}function qi(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*rn)throw new Error("Expected 32 bytes of private key");t=Vi(e)}else if(e instanceof Uint8Array){if(e.length!==rn)throw new Error("Expected 32 bytes of private key");t=ir(e)}else throw new TypeError("Expected valid private key");if(!Un(t))throw new Error("Expected private key: 0 < key < n");return t}function l1(e){return e instanceof Z?(e.assertValidity(),e):Z.fromHex(e)}function Qc(e){if(e instanceof Te)return e.assertValidity(),e;try{return Te.fromDER(e)}catch{return Te.fromCompact(e)}}function Wo(e,t=!1){return Z.fromPrivateKey(e).toRawBytes(t)}function Yc(e){let t=e.length>pe?e.slice(0,pe):e;return ir(t)}function h1(e){let t=Yc(e),r=R(t,yt.n);return Zc(r<W?t:r)}function Zc(e){return zo(e)}function p1(e,t,r){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);let n=sn(e),i=qi(t),s=[Zc(i),h1(n)];if(r!=null){r===!0&&(r=de.randomBytes(pe));let u=sn(r);if(u.length!==pe)throw new Error(`sign: Expected ${pe} bytes of extra data`);s.push(u)}let o=rr(...s),a=Yc(n);return{seed:o,m:a,d:i}}function d1(e,t){let{sig:r,recovery:n}=e,{der:i,recovered:s}=Object.assign({canonical:!0,der:!0},t),o=i?r.toDERRawBytes():r.toCompactRawBytes();return s?[o,n]:o}async function Xc(e,t,r={}){let{seed:n,m:i,d:s}=p1(e,t,r.extraEntropy),o=new Ho(n1,rn);await o.reseed(n);let a;for(;!(a=f1(await o.generate(),i,s,r.canonical));)await o.reseed();return d1(a,r)}var y1={strict:!0};function Jc(e,t,r,n=y1){let i;try{i=Qc(e),t=sn(t)}catch{return!1}let{r:s,s:o}=i;if(n.strict&&i.hasHighS())return!1;let a=Go(t),u;try{u=l1(r)}catch{return!1}let{n:c}=yt,f=on(o,c),l=R(a*f,c),h=R(s*f,c),d=Z.BASE.multiplyAndAddUnsafe(u,l,h);return d?R(d.x,c)===s:!1}Z.BASE._setWindowSize(8);var Jt={node:r1,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var Mi={},de={bytesToHex:nn,hexToBytes:Br,concatBytes:rr,mod:R,invert:on,isValidPrivateKey(e){try{return qi(e),!0}catch{return!1}},_bigintTo32Bytes:zo,_normalizePrivateKey:qi,hashToPrivateKey:e=>{e=sn(e);let t=rn+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=R(ir(e),yt.n-ut)+ut;return zo(r)},randomBytes:(e=32)=>{if(Jt.web)return Jt.web.getRandomValues(new Uint8Array(e));if(Jt.node){let{randomBytes:t}=Jt.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>de.hashToPrivateKey(de.randomBytes(rn+8)),precompute(e=8,t=Z.BASE){let r=t===Z.BASE?t:new Z(t.x,t.y);return r._setWindowSize(e),r.multiply(Nn),r},sha256:async(...e)=>{if(Jt.web){let t=await Jt.web.subtle.digest("SHA-256",rr(...e));return new Uint8Array(t)}else if(Jt.node){let{createHash:t}=Jt.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(Jt.web){let r=await Jt.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=rr(...t),i=await Jt.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(Jt.node){let{createHmac:r}=Jt.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=Mi[e];if(r===void 0){let n=await de.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=rr(n,n),Mi[e]=r}return de.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof en!="function")throw new Oi("sha256Sync is undefined, you need to set it");let r=Mi[e];if(r===void 0){let n=en(Uint8Array.from(e,i=>i.charCodeAt(0)));r=rr(n,n),Mi[e]=r}return en(r,...t)},_JacobianPoint:Y};Object.defineProperties(de,{sha256Sync:{configurable:!1,get(){return en},set(e){en||(en=e)}},hmacSha256Sync:{configurable:!1,get(){return Dn},set(e){Dn||(Dn=e)}}});function zi(e){if(isNaN(e)||e<=0)throw new U("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return de.randomBytes(e)}var Fx=it(Ai(),1),$o=it(j(),1);function jc(e,t){return t.map(r=>Xt(e[r]))}function tf(e){return $o.default.pki.setRsaPrivateKey(...jc(e,["n","e","d","p","q","dp","dq","qi"]))}function ef(e){return $o.default.pki.setRsaPublicKey(...jc(e,["n","e"]))}var Cr={};Rt(Cr,{jwkToPkcs1:()=>x1,jwkToPkix:()=>w1,pkcs1ToJwk:()=>m1,pkixToJwk:()=>v1});var Vx=it(En(),1),qx=it(Ai(),1);var Ke=it(j(),1);function m1(e){let t=Ke.default.asn1.fromDer(J(e,"ascii")),r=Ke.default.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:he(r.n),e:he(r.e),d:he(r.d),p:he(r.p),q:he(r.q),dp:he(r.dP),dq:he(r.dQ),qi:he(r.qInv),alg:"RS256"}}function x1(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw new U("JWK was missing components","ERR_INVALID_PARAMETERS");let t=Ke.default.pki.privateKeyToAsn1({n:Xt(e.n),e:Xt(e.e),d:Xt(e.d),p:Xt(e.p),q:Xt(e.q),dP:Xt(e.dp),dQ:Xt(e.dq),qInv:Xt(e.qi)});return St(Ke.default.asn1.toDer(t).getBytes(),"ascii")}function v1(e){let t=Ke.default.asn1.fromDer(J(e,"ascii")),r=Ke.default.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:he(r.n),e:he(r.e)}}function w1(e){if(e.n==null||e.e==null)throw new U("JWK was missing components","ERR_INVALID_PARAMETERS");let t=Ke.default.pki.publicKeyToAsn1({n:Xt(e.n),e:Xt(e.e)});return St(Ke.default.asn1.toDer(t).getBytes(),"ascii")}async function rf(e){let t=await Wt.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await of(t);return{privateKey:r[0],publicKey:r[1]}}async function Qo(e){let r=[await Wt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await b1(e)],n=await of({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function nf(e,t){let r=await Wt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await Wt.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}async function sf(e,t,r){let n=await Wt.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return Wt.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}async function of(e){if(e.privateKey==null||e.publicKey==null)throw new U("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([Wt.get().subtle.exportKey("jwk",e.privateKey),Wt.get().subtle.exportKey("jwk",e.publicKey)])}async function b1(e){return Wt.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function af(e,t,r,n){let i=t?ef(e):tf(e),s=J(Uint8Array.from(r),"ascii"),o=n(s,i);return St(o,"ascii")}function uf(e,t){return af(e,!0,t,(r,n)=>n.encrypt(r))}function cf(e,t){return af(e,!1,t,(r,n)=>n.decrypt(r))}var Fn=class{_key;constructor(t){this._key=t}async verify(t,r){return sf(this._key,r,t)}marshal(){return Cr.jwkToPkix(this._key)}get bytes(){return Ce.encode({Type:lt.RSA,Data:this.marshal()}).subarray()}encrypt(t){return uf(this._key,t)}equals(t){return ht(this.bytes,t.bytes)}async hash(){let{bytes:t}=await kt.digest(this.bytes);return t}},an=class{_key;_publicKey;constructor(t,r){this._key=t,this._publicKey=r}genSecret(){return zi(16)}async sign(t){return nf(this._key,t)}get public(){if(this._publicKey==null)throw new U("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new Fn(this._publicKey)}decrypt(t){return cf(this._key,t)}marshal(){return Cr.jwkToPkcs1(this._key)}get bytes(){return Ie.encode({Type:lt.RSA,Data:this.marshal()}).subarray()}equals(t){return ht(this.bytes,t.bytes)}async hash(){let{bytes:t}=await kt.digest(this.bytes);return t}async id(){let t=await this.public.hash();return J(t,"base58btc")}async export(t,r="pkcs-8"){if(r==="pkcs-8"){let n=new Kn.default.util.ByteBuffer(this.marshal()),i=Kn.default.asn1.fromDer(n),s=Kn.default.pki.privateKeyFromAsn1(i),o={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return Kn.default.pki.encryptRsaPrivateKey(s,t,o)}else{if(r==="libp2p-key")return Zr(this.bytes,t);throw new U(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function S1(e){let t=Cr.pkcs1ToJwk(e),r=await Qo(t);return new an(r.privateKey,r.publicKey)}function A1(e){let t=Cr.pkixToJwk(e);return new Fn(t)}async function B1(e){let t=await Qo(e);return new an(t.privateKey,t.publicKey)}async function C1(e){let t=await rf(e);return new an(t.privateKey,t.publicKey)}var Xo={};Rt(Xo,{Secp256k1PrivateKey:()=>On,Secp256k1PublicKey:()=>Mn,generateKeyPair:()=>R1,unmarshalSecp256k1PrivateKey:()=>T1,unmarshalSecp256k1PublicKey:()=>_1});function ff(){return de.randomPrivateKey()}async function lf(e,t){let{digest:r}=await kt.digest(t);try{return await Xc(r,e)}catch(n){throw new U(String(n),"ERR_INVALID_INPUT")}}async function hf(e,t,r){try{let{digest:n}=await kt.digest(r);return Jc(t,n,e)}catch(n){throw new U(String(n),"ERR_INVALID_INPUT")}}function pf(e){return Z.fromHex(e).toRawBytes(!0)}function df(e){try{Wo(e,!0)}catch(t){throw new U(String(t),"ERR_INVALID_PRIVATE_KEY")}}function Zo(e){try{Z.fromHex(e)}catch(t){throw new U(String(t),"ERR_INVALID_PUBLIC_KEY")}}function yf(e){try{return Wo(e,!0)}catch(t){throw new U(String(t),"ERR_INVALID_PRIVATE_KEY")}}var Mn=class{_key;constructor(t){Zo(t),this._key=t}async verify(t,r){return hf(this._key,r,t)}marshal(){return pf(this._key)}get bytes(){return Ce.encode({Type:lt.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return ht(this.bytes,t.bytes)}async hash(){let{bytes:t}=await kt.digest(this.bytes);return t}},On=class{_key;_publicKey;constructor(t,r){this._key=t,this._publicKey=r??yf(t),df(this._key),Zo(this._publicKey)}async sign(t){return lf(this._key,t)}get public(){return new Mn(this._publicKey)}marshal(){return this._key}get bytes(){return Ie.encode({Type:lt.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return ht(this.bytes,t.bytes)}async hash(){let{bytes:t}=await kt.digest(this.bytes);return t}async id(){let t=await this.public.hash();return J(t,"base58btc")}async export(t,r="libp2p-key"){if(r==="libp2p-key")return Zr(this.bytes,t);throw new U(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function T1(e){return new On(e)}function _1(e){return new Mn(e)}async function R1(){let e=ff();return new On(e)}var Ir={rsa:Yo,ed25519:Fo,secp256k1:Xo};function gf(e){let t=Object.keys(Ir).join(" / ");return new U(`invalid or unsupported key type ${e}. Must be ${t}`,"ERR_UNSUPPORTED_KEY_TYPE")}function mf(e){let t=Ce.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case lt.RSA:return Ir.rsa.unmarshalRsaPublicKey(r);case lt.Ed25519:return Ir.ed25519.unmarshalEd25519PublicKey(r);case lt.Secp256k1:return Ir.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw gf(t.Type??"RSA")}}async function xf(e){let t=Ie.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case lt.RSA:return Ir.rsa.unmarshalRsaPrivateKey(r);case lt.Ed25519:return Ir.ed25519.unmarshalEd25519PrivateKey(r);case lt.Secp256k1:return Ir.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw gf(t.Type??"RSA")}}var vf={ERR_SIGNATURE_NOT_VALID:"ERR_SIGNATURE_NOT_VALID"};var Vn;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.publicKey!=null&&r.publicKey.byteLength>0&&(n.uint32(10),n.bytes(r.publicKey)),r.payloadType!=null&&r.payloadType.byteLength>0&&(n.uint32(18),n.bytes(r.payloadType)),r.payload!=null&&r.payload.byteLength>0&&(n.uint32(26),n.bytes(r.payload)),r.signature!=null&&r.signature.byteLength>0&&(n.uint32(42),n.bytes(r.signature)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={publicKey:new Uint8Array(0),payloadType:new Uint8Array(0),payload:new Uint8Array(0),signature:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.publicKey=r.bytes();break;case 2:i.payloadType=r.bytes();break;case 3:i.payload=r.bytes();break;case 5:i.signature=r.bytes();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Mt(r,e.codec()),e.decode=r=>Ft(r,e.codec())})(Vn||(Vn={}));var Jo=Symbol.for("@libp2p/peer-id");function wf(e){return e!=null&&!!e[Jo]}var P1=Symbol.for("nodejs.util.inspect.custom"),bf=Object.values(He).map(e=>e.decoder).reduce((e,t)=>e.or(t),He.identity.decoder),Ef=114,jo=36,ta=37,qn=class{constructor(t){this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[Jo](){return!0}toString(){return this.string==null&&(this.string=gt.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return tt.createV1(Ef,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){if(t instanceof Uint8Array)return ht(this.multihash.bytes,t);if(typeof t=="string")return bt(t).equals(this);if(t?.multihash?.bytes!=null)return ht(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}[P1](){return`PeerId(${this.toString()})`}},Tr=class extends qn{constructor(t){super({...t,type:"RSA"}),this.type="RSA",this.publicKey=t.publicKey}},_r=class extends qn{constructor(t){super({...t,type:"Ed25519"}),this.type="Ed25519",this.publicKey=t.multihash.digest}},Rr=class extends qn{constructor(t){super({...t,type:"secp256k1"}),this.type="secp256k1",this.publicKey=t.multihash.digest}};function Sf(e){if(e.type==="RSA")return new Tr(e);if(e.type==="Ed25519")return new _r(e);if(e.type==="secp256k1")return new Rr(e);throw new U("Not a PeerId","ERR_INVALID_PARAMETERS")}function bt(e,t){if(t=t??bf,e.charAt(0)==="1"||e.charAt(0)==="Q"){let r=hr(gt.decode(`z${e}`));return e.startsWith("12D")?new _r({multihash:r}):e.startsWith("16U")?new Rr({multihash:r}):new Tr({multihash:r})}return zn(bf.decode(e))}function zn(e){try{let t=hr(e);if(t.code===ze.code){if(t.digest.length===jo)return new _r({multihash:t});if(t.digest.length===ta)return new Rr({multihash:t})}if(t.code===kt.code)return new Tr({multihash:t})}catch{return L1(tt.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function L1(e){if(e==null||e.multihash==null||e.version==null||e.version===1&&e.code!==Ef)throw new Error("Supplied PeerID CID is invalid");let t=e.multihash;if(t.code===kt.code)return new Tr({multihash:e.multihash});if(t.code===ze.code){if(t.digest.length===jo)return new _r({multihash:e.multihash});if(t.digest.length===ta)return new Rr({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Af(e,t){return e.length===jo?new _r({multihash:ge(ze.code,e),privateKey:t}):e.length===ta?new Rr({multihash:ge(ze.code,e),privateKey:t}):new Tr({multihash:await kt.digest(e),publicKey:e,privateKey:t})}var Cf=Symbol.for("@achingbrain/uint8arraylist");function Bf(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let i=r+n.byteLength;if(t<i)return{buf:n,index:t-r};r=i}throw new RangeError("index is out of bounds")}function Hi(e){return!!e?.[Cf]}var sr=class{constructor(...t){Object.defineProperty(this,Cf,{value:!0}),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(Hi(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(Hi(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=Bf(this.bufs,t);return r.buf[r.index]}set(t,r){let n=Bf(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(Hi(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:i}=this._subList(t,r);return At(n,i)}subarray(t,r){let{bufs:n,length:i}=this._subList(t,r);return n.length===1?n[0]:At(n,i)}sublist(t,r){let{bufs:n,length:i}=this._subList(t,r),s=new sr;return s.length=i,s.bufs=n,s}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let s=0;s<this.bufs.length;s++){let o=this.bufs[s],a=i,u=a+o.byteLength;if(i=u,t>=u)continue;let c=t>=a&&t<u,f=r>a&&r<=u;if(c&&f){if(t===a&&r===u){n.push(o);break}let l=t-a;n.push(o.subarray(l,l+(r-t)));break}if(c){if(t===0){n.push(o);continue}n.push(o.subarray(t-a));continue}if(f){if(r===u){n.push(o);break}n.push(o.subarray(0,r-a));break}n.push(o)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!Hi(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let s=256,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=-1;for(let l=0;l<i;l++)o[n[l]]=l;let a=o,u=this.byteLength-n.byteLength,c=n.byteLength-1,f;for(let l=r;l<=u;l+=f){f=0;for(let h=c;h>=0;h--){let d=this.get(l+h);if(n[h]!==d){f=Math.max(1,h-a[d]);break}}if(f===0)return l}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=Pe(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let i=ke(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let i=ke(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let i=ke(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=Pe(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let i=ke(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let i=ke(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let i=ke(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let i=ke(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let i=ke(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,t)}equals(t){if(t==null||!(t instanceof sr)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!ht(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new sr;return n.bufs=t,r==null&&(r=t.reduce((i,s)=>i+s.byteLength,0)),n.length=r,n}};function Gi(e){return e instanceof Uint8Array?{get(t){return e[t]},set(t,r){e[t]=r}}:{get(t){return e.get(t)},set(t,r){e.set(t,r)}}}var If=4294967296,jt=class{constructor(t=0,r=0){this.hi=t,this.lo=r}toBigInt(t){if(t===!0)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(t){return Number(this.toBigInt(t))}zzDecode(){let t=-(this.lo&1),r=((this.lo>>>1|this.hi<<31)^t)>>>0,n=(this.hi>>>1^t)>>>0;return new jt(n,r)}zzEncode(){let t=this.hi>>31,r=((this.hi<<1|this.lo>>>31)^t)>>>0,n=(this.lo<<1^t)>>>0;return new jt(r,n)}toBytes(t,r=0){let n=Gi(t);for(;this.hi>0;)n.set(r++,this.lo&127|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)n.set(r++,this.lo&127|128),this.lo=this.lo>>>7;n.set(r++,this.lo)}static fromBigInt(t){if(t===0n)return new jt;let r=t<0;r&&(t=-t);let n=Number(t>>32n)|0,i=Number(t-(BigInt(n)<<32n))|0;return r&&(n=~n>>>0,i=~i>>>0,++i>If&&(i=0,++n>If&&(n=0))),new jt(n,i)}static fromNumber(t){if(t===0)return new jt;let r=t<0;r&&(t=-t);let n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new jt(i,n)}static fromBytes(t,r=0){let n=Gi(t),i=new jt,s=0;if(t.length-r>4){for(;s<4;++s)if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i;if(i.lo=(i.lo|(n.get(r)&127)<<28)>>>0,i.hi=(i.hi|(n.get(r)&127)>>4)>>>0,n.get(r++)<128)return i;s=0}else for(;s<4;++s){if(r>=t.length)throw RangeError(`index out of range: ${r} > ${t.length}`);if(i.lo=(i.lo|(n.get(r)&127)<<s*7)>>>0,n.get(r++)<128)return i}if(t.length-r>4){for(;s<5;++s)if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}else if(r<t.byteLength)for(;s<5;++s){if(r>=t.length)throw RangeError(`index out of range: ${r} > ${t.length}`);if(i.hi=(i.hi|(n.get(r)&127)<<s*7+3)>>>0,n.get(r++)<128)return i}throw RangeError("invalid varint encoding")}};var N1=Math.pow(2,7),D1=Math.pow(2,14),U1=Math.pow(2,21),K1=Math.pow(2,28),F1=Math.pow(2,35),M1=Math.pow(2,42),O1=Math.pow(2,49),V1=Math.pow(2,56),q1=Math.pow(2,63),Hn={encodingLength(e){return e<N1?1:e<D1?2:e<U1?3:e<K1?4:e<F1?5:e<M1?6:e<O1?7:e<V1?8:e<q1?9:10},encode(e,t,r=0){if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return t==null&&(t=Pe(Hn.encodingLength(e))),jt.fromNumber(e).toBytes(t,r),t},decode(e,t=0){return jt.fromBytes(e,t).toNumber(!0)}};var z1,te=class{constructor(t){let{peerId:r,payloadType:n,payload:i,signature:s}=t;this.peerId=r,this.payloadType=n,this.payload=i,this.signature=s}marshal(){if(this.peerId.publicKey==null)throw new Error("Missing public key");return this.marshaled==null&&(this.marshaled=Vn.encode({publicKey:this.peerId.publicKey,payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(t){return ht(this.marshal(),t.marshal())}async validate(t){let r=Tf(t,this.payloadType,this.payload);if(this.peerId.publicKey==null)throw new Error("Missing public key");return await mf(this.peerId.publicKey).verify(r.subarray(),this.signature)}};z1=te;te.createFromProtobuf=async e=>{let t=Vn.decode(e),r=await Af(t.publicKey);return new te({peerId:r,payloadType:t.payloadType,payload:t.payload,signature:t.signature})};te.seal=async(e,t)=>{if(t.privateKey==null)throw new Error("Missing private key");let r=e.domain,n=e.codec,i=e.marshal(),s=Tf(r,n,i),a=await(await xf(t.privateKey)).sign(s.subarray());return new te({peerId:t,payloadType:n,payload:i,signature:a})};te.openAndCertify=async(e,t)=>{let r=await te.createFromProtobuf(e);if(!await r.validate(t))throw new U("envelope signature is not valid for the given domain",vf.ERR_SIGNATURE_NOT_VALID);return r};var Tf=(e,t,r)=>{let n=St(e),i=Hn.encode(n.byteLength),s=Hn.encode(t.length),o=Hn.encode(r.length);return new sr(i,n,s,t,o,r)};var da=it(Wi(),1);var cn=it(Wi(),1);var $i=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,i){return this.readAtomically(()=>{let s=0,o=0,a=this.peekChar();if(a===void 0)return;let u=a==="0",c=2**(8*i)-1;for(;;){let f=this.readAtomically(()=>{let l=this.readChar();if(l===void 0)return;let h=Number.parseInt(l,t);if(!Number.isNaN(h))return h});if(f===void 0)break;if(s*=t,s+=f,s>c||(o+=1,r!==void 0&&o>r))return}if(o!==0)return!n&&u&&o>1?void 0:s})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let i=n*2;if(n<r.length-3){let o=this.readSeparator(":",n,()=>this.readIPv4Addr());if(o!==void 0)return r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3],[i+4,!0]}let s=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(s===void 0)return[i,!1];r[i]=s>>8,r[i+1]=s&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,i]=t(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let s=new Uint8Array(14),o=16-(n+2),[a]=t(s.subarray(0,o));return r.set(s.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var Ff=45,ng=15,un=new $i;function na(e){if(!(e.length>ng))return un.new(e).parseWith(()=>un.readIPv4Addr())}function ia(e){if(!(e.length>Ff))return un.new(e).parseWith(()=>un.readIPv6Addr())}function Qi(e){if(!(e.length>Ff))return un.new(e).parseWith(()=>un.readIPAddr())}var yw=parseInt("0xFFFF",16),gw=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);var _e=it(Wi(),1);function Vf(e){return!!na(e)}function qf(e){return!!ia(e)}function Yi(e){return!!Qi(e)}var zf=Vf,ug=qf,sa=function(e){let t=0;if(e=e.toString().trim(),zf(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(ug(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let s=zf(r[n]),o;s&&(o=sa(r[n]),r[n]=J(o.slice(0,2),"base16")),o!=null&&++n<8&&r.splice(n,0,J(o.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let s=[n,1];for(n=9-r.length;n>0;n--)s.push("0");r.splice.apply(r,s)}let i=new Uint8Array(t+16);for(n=0;n<r.length;n++){let s=parseInt(r[n],16);i[t++]=s>>8&255,i[t++]=s&255}return i}throw new Error("invalid ip address")},Hf=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let i=[];for(let s=0;s<r;s++)i.push(e[t+s]);return i.join(".")}if(r===16){let i=[];for(let s=0;s<r;s+=2)i.push(n.getUint16(t+s).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var Gn={},oa={},fg=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];fg.forEach(e=>{let t=lg(...e);oa[t.code]=t,Gn[t.name]=t});function lg(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:!!n,path:!!i}}function rt(e){if(typeof e=="number"){if(oa[e]!=null)return oa[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(Gn[e]!=null)return Gn[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var jw=rt("ip4"),tb=rt("ip6"),eb=rt("ipcidr");function Yf(e,t){switch(rt(e).code){case 4:case 41:return pg(t);case 42:return $f(t);case 6:case 273:case 33:case 132:return Xf(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return $f(t);case 421:return mg(t);case 444:return Qf(t);case 445:return Qf(t);case 466:return gg(t);default:return J(t,"base16")}}function Zf(e,t){switch(rt(e).code){case 4:return Gf(t);case 41:return Gf(t);case 42:return Wf(t);case 6:case 273:case 33:case 132:return ua(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Wf(t);case 421:return dg(t);case 444:return xg(t);case 445:return vg(t);case 466:return yg(t);default:return St(t,"base16")}}var aa=Object.values(He).map(e=>e.decoder),hg=function(){let e=aa[0].or(aa[1]);return aa.slice(2).forEach(t=>e=e.or(t)),e}();function Gf(e){if(!Yi(e))throw new Error("invalid ip address");return sa(e)}function pg(e){let t=Hf(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!Yi(t))throw new Error("invalid ip address");return t}function ua(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Xf(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Wf(e){let t=St(e),r=Uint8Array.from(_e.default.encode(t.length));return At([r,t],r.length+t.length)}function $f(e){let t=_e.default.decode(e);if(e=e.slice(_e.default.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return J(e)}function dg(e){let t;e[0]==="Q"||e[0]==="1"?t=hr(gt.decode(`z${e}`)).bytes:t=tt.parse(e).multihash.bytes;let r=Uint8Array.from(_e.default.encode(t.length));return At([r,t],r.length+t.length)}function yg(e){let t=hg.decode(e),r=Uint8Array.from(_e.default.encode(t.length));return At([r,t],r.length+t.length)}function gg(e){let t=_e.default.decode(e),r=e.slice(_e.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+J(r,"base64url")}function mg(e){let t=_e.default.decode(e),r=e.slice(_e.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return J(r,"base58btc")}function xg(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=Yt.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ua(n);return At([r,i],r.length+i.length)}function vg(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=Yt.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=ua(n);return At([r,i],r.length+i.length)}function Qf(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=J(t,"base32"),i=Xf(r);return`${n}:${i}`}function wg(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],s=rt(i);if(s.size===0){t.push([i]);continue}if(n++,n>=r.length)throw jf("invalid address: "+e);if(s.path===!0){t.push([i,pa(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}function bg(e){let t=[];return e.map(r=>{let n=Ji(r);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),pa(t.join("/"))}function Eg(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=Ji(t);return t.length>1?[r.code,Zf(r.code,t[1])]:[r.code]})}function ca(e){return e.map(t=>{let r=Ji(t);return t[1]!=null?[r.code,Yf(r.code,t[1])]:[r.code]})}function fa(e){return Xi(At(e.map(t=>{let r=Ji(t),n=Uint8Array.from(cn.default.encode(r.code));return t.length>1&&t[1]!=null&&(n=At([n,t[1]])),n})))}function la(e,t){return e.size>0?e.size/8:e.size===0?0:cn.default.decode(t)+(cn.default.decode.bytes??0)}function Zi(e){let t=[],r=0;for(;r<e.length;){let n=cn.default.decode(e,r),i=cn.default.decode.bytes??0,s=rt(n),o=la(s,e.slice(r+i));if(o===0){t.push([n]),r+=i;continue}let a=e.slice(r+i,r+i+o);if(r+=o+i,r>e.length)throw jf("Invalid address Uint8Array: "+J(e,"base16"));t.push([n,a])}return t}function ha(e){let t=Zi(e),r=ca(t);return bg(r)}function Sg(e){e=pa(e);let t=wg(e),r=Eg(t);return fa(r)}function Jf(e){return Sg(e)}function Xi(e){let t=Ag(e);if(t!=null)throw t;return Uint8Array.from(e)}function Ag(e){try{Zi(e)}catch(t){return t}}function pa(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function jf(e){return new Error("Error parsing address: "+e)}function Ji(e){return rt(e[0])}var Cg=Symbol.for("nodejs.util.inspect.custom"),Ig=[rt("dns").code,rt("dns4").code,rt("dns6").code,rt("dnsaddr").code],Tg=new Map,tl=Symbol.for("@multiformats/js-multiaddr/multiaddr");function ya(e){return!!e?.[tl]}var Fe=class{bytes;#t;#e;#n;#r;[tl]=!0;constructor(t){if(t==null&&(t=""),t instanceof Uint8Array)this.bytes=Xi(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=Jf(t)}else if(ya(t))this.bytes=Xi(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return this.#t==null&&(this.#t=ha(this.bytes)),this.#t}toJSON(){return this.toString()}toOptions(){let t,r,n,i,s="",o=rt("tcp"),a=rt("udp"),u=rt("ip4"),c=rt("ip6"),f=rt("dns6"),l=rt("ip6zone");for(let[d,p]of this.stringTuples())d===l.code&&(s=`%${p??""}`),Ig.includes(d)&&(r=o.name,i=443,n=`${p??""}${s}`,t=d===f.code?6:4),(d===o.code||d===a.code)&&(r=rt(d).name,i=parseInt(p??"")),(d===u.code||d===c.code)&&(r=rt(d).name,n=`${p??""}${s}`,t=d===c.code?6:4);if(t==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:i}}protos(){return this.protoCodes().map(t=>Object.assign({},rt(t)))}protoCodes(){let t=[],r=this.bytes,n=0;for(;n<r.length;){let i=da.default.decode(r,n),s=da.default.decode.bytes??0,o=rt(i),a=la(o,r.slice(n+s));n+=a+s,t.push(i)}return t}protoNames(){return this.protos().map(t=>t.name)}tuples(){return this.#e==null&&(this.#e=Zi(this.bytes)),this.#e}stringTuples(){return this.#n==null&&(this.#n=ca(this.tuples())),this.#n}encapsulate(t){return t=new Fe(t),new Fe(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new Fe(n.slice(0,i))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new Fe(fa(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===Gn.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?J(gt.decode(`z${n}`),"base58btc"):J(tt.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){if(this.#r===void 0)try{this.#r=this.stringTuples().filter(t=>rt(t[0]).path===!0)[0][1],this.#r==null&&(this.#r=null)}catch{this.#r=null}return this.#r}equals(t){return ht(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(s=>s.resolvable);if(r==null)return[this];let n=Tg.get(r.name);if(n==null)throw new U(`no available resolver for ${r.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(s=>new Fe(s))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[Cg](){return`Multiaddr(${ha(this.bytes)})`}};function kr(e){return new Fe(e)}function el(e,t){let r=(n,i)=>n.toString().localeCompare(i.toString());return e.length!==t.length?!1:(t.sort(r),e.sort(r).every((n,i)=>t[i].equals(n)))}var Wn;(function(e){let t;(function(n){let i;n.codec=()=>(i==null&&(i=Ot((s,o,a={})=>{a.lengthDelimited!==!1&&o.fork(),s.multiaddr!=null&&s.multiaddr.byteLength>0&&(o.uint32(10),o.bytes(s.multiaddr)),a.lengthDelimited!==!1&&o.ldelim()},(s,o)=>{let a={multiaddr:new Uint8Array(0)},u=o==null?s.len:s.pos+o;for(;s.pos<u;){let c=s.uint32();switch(c>>>3){case 1:a.multiaddr=s.bytes();break;default:s.skipType(c&7);break}}return a})),i),n.encode=s=>Mt(s,n.codec()),n.decode=s=>Ft(s,n.codec())})(t=e.AddressInfo||(e.AddressInfo={}));let r;e.codec=()=>(r==null&&(r=Ot((n,i,s={})=>{if(s.lengthDelimited!==!1&&i.fork(),n.peerId!=null&&n.peerId.byteLength>0&&(i.uint32(10),i.bytes(n.peerId)),n.seq!=null&&n.seq!==0n&&(i.uint32(16),i.uint64(n.seq)),n.addresses!=null)for(let o of n.addresses)i.uint32(26),e.AddressInfo.codec().encode(o,i);s.lengthDelimited!==!1&&i.ldelim()},(n,i)=>{let s={peerId:new Uint8Array(0),seq:0n,addresses:[]},o=i==null?n.len:n.pos+i;for(;n.pos<o;){let a=n.uint32();switch(a>>>3){case 1:s.peerId=n.bytes();break;case 2:s.seq=n.uint64();break;case 3:s.addresses.push(e.AddressInfo.codec().decode(n,n.uint32()));break;default:n.skipType(a&7);break}}return s})),r),e.encode=n=>Mt(n,e.codec()),e.decode=n=>Ft(n,e.codec())})(Wn||(Wn={}));var rl="libp2p-peer-record",nl=Uint8Array.from([3,1]);var Vt=class{constructor(t){this.domain=Vt.DOMAIN,this.codec=Vt.CODEC;let{peerId:r,multiaddrs:n,seqNumber:i}=t;this.peerId=r,this.multiaddrs=n??[],this.seqNumber=i??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=Wn.encode({peerId:this.peerId.toBytes(),seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(t=>({multiaddr:t.bytes}))})),this.marshaled}equals(t){return!(!(t instanceof Vt)||!this.peerId.equals(t.peerId)||this.seqNumber!==t.seqNumber||!el(this.multiaddrs,t.multiaddrs))}};Vt.createFromProtobuf=e=>{let t=Wn.decode(e),r=zn(t.peerId),n=(t.addresses??[]).map(s=>kr(s.multiaddr)),i=t.seq;return new Vt({peerId:r,multiaddrs:n,seqNumber:i})};Vt.DOMAIN=rl;Vt.CODEC=nl;function _g(e){return e[Symbol.asyncIterator]!=null}function Rg(e){if(_g(e))return(async()=>{let r=[];for await(let n of e)r.push(n);return r})();let t=[];for(let r of e)t.push(r);return t}var il=Rg;function Me(e,t){let r={[Symbol.iterator]:()=>r,next:()=>{let n=e.next(),i=n.value;return n.done===!0||i==null?{done:!0,value:void 0}:{done:!1,value:t(i)}}};return r}var $n=class{map;constructor(t){if(this.map=new Map,t!=null)for(let[r,n]of t.entries())this.map.set(r.toString(),n)}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(t){this.map.delete(t.toString())}entries(){return Me(this.map.entries(),t=>[bt(t[0]),t[1]])}forEach(t){this.map.forEach((r,n)=>{t(r,bt(n),this)})}get(t){return this.map.get(t.toString())}has(t){return this.map.has(t.toString())}set(t,r){this.map.set(t.toString(),r)}keys(){return Me(this.map.keys(),t=>bt(t))}values(){return this.map.values()}get size(){return this.map.size}};var Pr=class{set;constructor(t){if(this.set=new Set,t!=null)for(let r of t)this.set.add(r.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(t){this.set.add(t.toString())}clear(){this.set.clear()}delete(t){this.set.delete(t.toString())}entries(){return Me(this.set.entries(),t=>{let r=bt(t[0]);return[r,r]})}forEach(t){this.set.forEach(r=>{let n=bt(r);t(n,n,this)})}has(t){return this.set.has(t.toString())}values(){return Me(this.set.values(),t=>bt(t))}intersection(t){let r=new Pr;for(let n of t)this.has(n)&&r.add(n);return r}difference(t){let r=new Pr;for(let n of this)t.has(n)||r.add(n);return r}union(t){let r=new Pr;for(let n of t)r.add(n);for(let n of this)r.add(n);return r}};var fn=class{list;constructor(t){if(this.list=[],t!=null)for(let r of t)this.list.push(r.toString())}[Symbol.iterator](){return Me(this.list.entries(),t=>bt(t[1]))}concat(t){let r=new fn(this);for(let n of t)r.push(n);return r}entries(){return Me(this.list.entries(),t=>[t[0],bt(t[1])])}every(t){return this.list.every((r,n)=>t(bt(r),n,this))}filter(t){let r=new fn;return this.list.forEach((n,i)=>{let s=bt(n);t(s,i,this)&&r.push(s)}),r}find(t){let r=this.list.find((n,i)=>t(bt(n),i,this));if(r!=null)return bt(r)}findIndex(t){return this.list.findIndex((r,n)=>t(bt(r),n,this))}forEach(t){this.list.forEach((r,n)=>{t(bt(r),n,this)})}includes(t){return this.list.includes(t.toString())}indexOf(t){return this.list.indexOf(t.toString())}pop(){let t=this.list.pop();if(t!=null)return bt(t)}push(...t){for(let r of t)this.list.push(r.toString())}shift(){let t=this.list.shift();if(t!=null)return bt(t)}unshift(...t){let r=this.list.length;for(let n=t.length-1;n>-1;n--)r=this.list.unshift(t[n].toString());return r}get length(){return this.list.length}};var yl=it(ol(),1);var Yn=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},ma=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},al=e=>globalThis.DOMException===void 0?new ma(e):new DOMException(e),ul=e=>{let t=e.reason===void 0?al("This operation was aborted."):e.reason;return t instanceof Error?t:al(t)};function xa(e,t,r,n){let i,s=new Promise((o,a)=>{if(typeof t!="number"||Math.sign(t)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${t}\``);if(t===Number.POSITIVE_INFINITY){o(e);return}if(n={customTimers:{setTimeout,clearTimeout},...n},n.signal){let{signal:u}=n;u.aborted&&a(ul(u)),u.addEventListener("abort",()=>{a(ul(u))})}i=n.customTimers.setTimeout.call(void 0,()=>{if(typeof r=="function"){try{o(r())}catch(f){a(f)}return}let u=typeof r=="string"?r:`Promise timed out after ${t} milliseconds`,c=r instanceof Error?r:new Yn(u);typeof e.cancel=="function"&&e.cancel(),a(c)},t),(async()=>{try{o(await e)}catch(u){a(u)}finally{n.customTimers.clearTimeout.call(void 0,i)}})()});return s.clear=()=>{clearTimeout(i),i=void 0},s}function va(e,t,r){let n=0,i=e.length;for(;i>0;){let s=Math.trunc(i/2),o=n+s;r(e[o],t)<=0?(n=++o,i-=s+1):i=s}return n}var Lr=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Oe,Zn=class{constructor(){Oe.set(this,[])}enqueue(t,r){r={priority:0,...r};let n={priority:r.priority,run:t};if(this.size&&Lr(this,Oe,"f")[this.size-1].priority>=r.priority){Lr(this,Oe,"f").push(n);return}let i=va(Lr(this,Oe,"f"),n,(s,o)=>o.priority-s.priority);Lr(this,Oe,"f").splice(i,0,n)}dequeue(){let t=Lr(this,Oe,"f").shift();return t?.run}filter(t){return Lr(this,Oe,"f").filter(r=>r.priority===t.priority).map(r=>r.run)}get size(){return Lr(this,Oe,"f").length}};Oe=new WeakMap;var pt=function(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r},k=function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},xt,Jn,jn,ar,ss,ti,ts,ye,Xn,ee,es,re,ei,or,rs,cl,fl,pl,ll,hl,ns,wa,ba,os,dl,is,as=class extends Error{},ln=class extends yl.default{constructor(t){var r,n,i,s;if(super(),xt.add(this),Jn.set(this,void 0),jn.set(this,void 0),ar.set(this,0),ss.set(this,void 0),ti.set(this,void 0),ts.set(this,0),ye.set(this,void 0),Xn.set(this,void 0),ee.set(this,void 0),es.set(this,void 0),re.set(this,0),ei.set(this,void 0),or.set(this,void 0),rs.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),t={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:Zn,...t},!(typeof t.intervalCap=="number"&&t.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(n=(r=t.intervalCap)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:""}\` (${typeof t.intervalCap})`);if(t.interval===void 0||!(Number.isFinite(t.interval)&&t.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(s=(i=t.interval)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""}\` (${typeof t.interval})`);pt(this,Jn,t.carryoverConcurrencyCount,"f"),pt(this,jn,t.intervalCap===Number.POSITIVE_INFINITY||t.interval===0,"f"),pt(this,ss,t.intervalCap,"f"),pt(this,ti,t.interval,"f"),pt(this,ee,new t.queueClass,"f"),pt(this,es,t.queueClass,"f"),this.concurrency=t.concurrency,this.timeout=t.timeout,pt(this,rs,t.throwOnTimeout===!0,"f"),pt(this,or,t.autoStart===!1,"f")}get concurrency(){return k(this,ei,"f")}set concurrency(t){if(!(typeof t=="number"&&t>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${t}\` (${typeof t})`);pt(this,ei,t,"f"),k(this,xt,"m",os).call(this)}async add(t,r={}){return r={timeout:this.timeout,throwOnTimeout:k(this,rs,"f"),...r},new Promise((n,i)=>{k(this,ee,"f").enqueue(async()=>{var s,o,a;pt(this,re,(o=k(this,re,"f"),o++,o),"f"),pt(this,ar,(a=k(this,ar,"f"),a++,a),"f");try{if(!((s=r.signal)===null||s===void 0)&&s.aborted)throw new as("The task was aborted.");let u=t({signal:r.signal});r.timeout&&(u=xa(Promise.resolve(u),r.timeout)),r.signal&&(u=Promise.race([u,k(this,xt,"m",dl).call(this,r.signal)]));let c=await u;n(c),this.emit("completed",c)}catch(u){if(u instanceof Yn&&!r.throwOnTimeout){n();return}i(u),this.emit("error",u)}finally{k(this,xt,"m",pl).call(this)}},r),this.emit("add"),k(this,xt,"m",ns).call(this)})}async addAll(t,r){return Promise.all(t.map(async n=>this.add(n,r)))}start(){return k(this,or,"f")?(pt(this,or,!1,"f"),k(this,xt,"m",os).call(this),this):this}pause(){pt(this,or,!0,"f")}clear(){pt(this,ee,new(k(this,es,"f")),"f")}async onEmpty(){k(this,ee,"f").size!==0&&await k(this,xt,"m",is).call(this,"empty")}async onSizeLessThan(t){k(this,ee,"f").size<t||await k(this,xt,"m",is).call(this,"next",()=>k(this,ee,"f").size<t)}async onIdle(){k(this,re,"f")===0&&k(this,ee,"f").size===0||await k(this,xt,"m",is).call(this,"idle")}get size(){return k(this,ee,"f").size}sizeBy(t){return k(this,ee,"f").filter(t).length}get pending(){return k(this,re,"f")}get isPaused(){return k(this,or,"f")}};Jn=new WeakMap,jn=new WeakMap,ar=new WeakMap,ss=new WeakMap,ti=new WeakMap,ts=new WeakMap,ye=new WeakMap,Xn=new WeakMap,ee=new WeakMap,es=new WeakMap,re=new WeakMap,ei=new WeakMap,or=new WeakMap,rs=new WeakMap,xt=new WeakSet,cl=function(){return k(this,jn,"f")||k(this,ar,"f")<k(this,ss,"f")},fl=function(){return k(this,re,"f")<k(this,ei,"f")},pl=function(){var t;pt(this,re,(t=k(this,re,"f"),t--,t),"f"),k(this,xt,"m",ns).call(this),this.emit("next")},ll=function(){k(this,xt,"m",ba).call(this),k(this,xt,"m",wa).call(this),pt(this,Xn,void 0,"f")},hl=function(){let t=Date.now();if(k(this,ye,"f")===void 0){let r=k(this,ts,"f")-t;if(r<0)pt(this,ar,k(this,Jn,"f")?k(this,re,"f"):0,"f");else return k(this,Xn,"f")===void 0&&pt(this,Xn,setTimeout(()=>{k(this,xt,"m",ll).call(this)},r),"f"),!0}return!1},ns=function(){if(k(this,ee,"f").size===0)return k(this,ye,"f")&&clearInterval(k(this,ye,"f")),pt(this,ye,void 0,"f"),this.emit("empty"),k(this,re,"f")===0&&this.emit("idle"),!1;if(!k(this,or,"f")){let t=!k(this,xt,"a",hl);if(k(this,xt,"a",cl)&&k(this,xt,"a",fl)){let r=k(this,ee,"f").dequeue();return r?(this.emit("active"),r(),t&&k(this,xt,"m",wa).call(this),!0):!1}}return!1},wa=function(){k(this,jn,"f")||k(this,ye,"f")!==void 0||(pt(this,ye,setInterval(()=>{k(this,xt,"m",ba).call(this)},k(this,ti,"f")),"f"),pt(this,ts,Date.now()+k(this,ti,"f"),"f"))},ba=function(){k(this,ar,"f")===0&&k(this,re,"f")===0&&k(this,ye,"f")&&(clearInterval(k(this,ye,"f")),pt(this,ye,void 0,"f")),pt(this,ar,k(this,Jn,"f")?k(this,re,"f"):0,"f"),k(this,xt,"m",os).call(this)},os=function(){for(;k(this,xt,"m",ns).call(this););},dl=async function(t){return new Promise((r,n)=>{t.addEventListener("abort",()=>{n(new as("The task was aborted."))},{once:!0})})},is=async function(t,r){return new Promise(n=>{let i=()=>{r&&!r()||(this.off(t,i),n())};this.on(t,i)})};var Ea=class extends Error{constructor(t){super(t),this.name="TimeoutError"}},Sa=class extends Error{constructor(t){super(),this.name="AbortError",this.message=t}},gl=e=>globalThis.DOMException===void 0?new Sa(e):new DOMException(e),ml=e=>{let t=e.reason===void 0?gl("This operation was aborted."):e.reason;return t instanceof Error?t:gl(t)};function Aa(e,t){let{milliseconds:r,fallback:n,message:i,customTimers:s={setTimeout,clearTimeout}}=t,o,u=new Promise((c,f)=>{if(typeof r!="number"||Math.sign(r)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${r}\``);if(t.signal){let{signal:h}=t;h.aborted&&f(ml(h)),h.addEventListener("abort",()=>{f(ml(h))})}if(r===Number.POSITIVE_INFINITY){e.then(c,f);return}let l=new Ea;o=s.setTimeout.call(void 0,()=>{if(n){try{c(n())}catch(h){f(h)}return}typeof e.cancel=="function"&&e.cancel(),i===!1?c():i instanceof Error?f(i):(l.message=i??`Promise timed out after ${r} milliseconds`,f(l))},r),(async()=>{try{c(await e)}catch(h){f(h)}})()}).finally(()=>{u.clear()});return u.clear=()=>{s.clearTimeout.call(void 0,o),o=void 0},u}var us=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,r)=>(r&=63,r<36?t+=r.toString(36):r<62?t+=(r-26).toString(36).toUpperCase():r>62?t+="-":t+="_",t),"");var Ba="lock:worker:request-read",Ca="lock:worker:release-read",Ia="lock:master:grant-read",Ta="lock:worker:request-write",_a="lock:worker:release-write",Ra="lock:master:grant-write";var ur={},hn=e=>{e.addEventListener("message",t=>{hn.dispatchEvent("message",e,t)}),e.port!=null&&e.port.addEventListener("message",t=>{hn.dispatchEvent("message",e,t)})};hn.addEventListener=(e,t)=>{ur[e]==null&&(ur[e]=[]),ur[e].push(t)};hn.removeEventListener=(e,t)=>{ur[e]!=null&&(ur[e]=ur[e].filter(r=>r===t))};hn.dispatchEvent=function(e,t,r){ur[e]!=null&&ur[e].forEach(n=>n(t,r))};var ka=hn;var xl=(e,t,r,n,i)=>(s,o)=>{if(o.data.type!==r)return;let a={type:o.data.type,name:o.data.name,identifier:o.data.identifier};e.dispatchEvent(new MessageEvent(t,{data:{name:a.name,handler:async()=>(s.postMessage({type:i,name:a.name,identifier:a.identifier}),await new Promise(u=>{let c=f=>{if(f==null||f.data==null)return;let l={type:f.data.type,name:f.data.name,identifier:f.data.identifier};l.type===n&&l.identifier===a.identifier&&(s.removeEventListener("message",c),u())};s.addEventListener("message",c)}))}}))},vl=(e,t,r,n)=>async()=>{let i=us();return globalThis.postMessage({type:t,identifier:i,name:e}),await new Promise(s=>{let o=a=>{if(a==null||a.data==null)return;let u={type:a.data.type,identifier:a.data.identifier};u.type===r&&u.identifier===i&&(globalThis.removeEventListener("message",o),s(()=>{globalThis.postMessage({type:n,identifier:i,name:e})}))};globalThis.addEventListener("message",o)})},Lg={singleProcess:!1},wl=e=>{if(e=Object.assign({},Lg,e),!!globalThis.document||e.singleProcess){let r=new EventTarget;return ka.addEventListener("message",xl(r,"requestReadLock",Ba,Ca,Ia)),ka.addEventListener("message",xl(r,"requestWriteLock",Ta,_a,Ra)),r}return{isWorker:!0,readLock:r=>vl(r,Ba,Ia,Ca),writeLock:r=>vl(r,Ta,Ra,_a)}};var Nr={},cr;async function Pa(e,t){let r,n=new Promise(i=>{r=i});return e.add(async()=>await Aa((async()=>await new Promise(i=>{r(()=>{i()})}))(),{milliseconds:t.timeout})),await n}var Ng=(e,t)=>{if(cr.isWorker===!0)return{readLock:cr.readLock(e,t),writeLock:cr.writeLock(e,t)};let r=new ln({concurrency:1}),n;return{async readLock(){if(n!=null)return await Pa(n,t);n=new ln({concurrency:t.concurrency,autoStart:!1});let i=n,s=Pa(n,t);return r.add(async()=>(i.start(),await i.onIdle().then(()=>{n===i&&(n=null)}))),await s},async writeLock(){return n=null,await Pa(r,t)}}},Dg={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function La(e){let t=Object.assign({},Dg,e);return cr==null&&(cr=wl(t),cr.isWorker!==!0&&(cr.addEventListener("requestReadLock",r=>{Nr[r.data.name]!=null&&Nr[r.data.name].readLock().then(async n=>await r.data.handler().finally(()=>n()))}),cr.addEventListener("requestWriteLock",async r=>{Nr[r.data.name]!=null&&Nr[r.data.name].writeLock().then(async n=>await r.data.handler().finally(()=>n()))}))),Nr[t.name]==null&&(Nr[t.name]=Ng(t.name,t)),Nr[t.name]}var Pt={ERR_INVALID_PARAMETERS:"ERR_INVALID_PARAMETERS"};var pn;(function(e){let t;(function(i){let s;i.codec=()=>(s==null&&(s=Ot((o,a,u={})=>{u.lengthDelimited!==!1&&a.fork(),o.key!=null&&o.key!==""&&(a.uint32(10),a.string(o.key)),o.value!=null&&o.value.byteLength>0&&(a.uint32(18),a.bytes(o.value)),u.lengthDelimited!==!1&&a.ldelim()},(o,a)=>{let u={key:"",value:new Uint8Array(0)},c=a==null?o.len:o.pos+a;for(;o.pos<c;){let f=o.uint32();switch(f>>>3){case 1:u.key=o.string();break;case 2:u.value=o.bytes();break;default:o.skipType(f&7);break}}return u})),s),i.encode=o=>Mt(o,i.codec()),i.decode=o=>Ft(o,i.codec())})(t=e.Peer$metadataEntry||(e.Peer$metadataEntry={}));let r;(function(i){let s;i.codec=()=>(s==null&&(s=Ot((o,a,u={})=>{u.lengthDelimited!==!1&&a.fork(),o.key!=null&&o.key!==""&&(a.uint32(10),a.string(o.key)),o.value!=null&&(a.uint32(18),fs.codec().encode(o.value,a)),u.lengthDelimited!==!1&&a.ldelim()},(o,a)=>{let u={key:""},c=a==null?o.len:o.pos+a;for(;o.pos<c;){let f=o.uint32();switch(f>>>3){case 1:u.key=o.string();break;case 2:u.value=fs.codec().decode(o,o.uint32());break;default:o.skipType(f&7);break}}return u})),s),i.encode=o=>Mt(o,i.codec()),i.decode=o=>Ft(o,i.codec())})(r=e.Peer$tagsEntry||(e.Peer$tagsEntry={}));let n;e.codec=()=>(n==null&&(n=Ot((i,s,o={})=>{if(o.lengthDelimited!==!1&&s.fork(),i.addresses!=null)for(let a of i.addresses)s.uint32(10),cs.codec().encode(a,s);if(i.protocols!=null)for(let a of i.protocols)s.uint32(18),s.string(a);if(i.publicKey!=null&&(s.uint32(34),s.bytes(i.publicKey)),i.peerRecordEnvelope!=null&&(s.uint32(42),s.bytes(i.peerRecordEnvelope)),i.metadata!=null&&i.metadata.size!==0)for(let[a,u]of i.metadata.entries())s.uint32(50),e.Peer$metadataEntry.codec().encode({key:a,value:u},s);if(i.tags!=null&&i.tags.size!==0)for(let[a,u]of i.tags.entries())s.uint32(58),e.Peer$tagsEntry.codec().encode({key:a,value:u},s);o.lengthDelimited!==!1&&s.ldelim()},(i,s)=>{let o={addresses:[],protocols:[],metadata:new Map,tags:new Map},a=s==null?i.len:i.pos+s;for(;i.pos<a;){let u=i.uint32();switch(u>>>3){case 1:o.addresses.push(cs.codec().decode(i,i.uint32()));break;case 2:o.protocols.push(i.string());break;case 4:o.publicKey=i.bytes();break;case 5:o.peerRecordEnvelope=i.bytes();break;case 6:{let c=e.Peer$metadataEntry.codec().decode(i,i.uint32());o.metadata.set(c.key,c.value);break}case 7:{let c=e.Peer$tagsEntry.codec().decode(i,i.uint32());o.tags.set(c.key,c.value);break}default:i.skipType(u&7);break}}return o})),n),e.encode=i=>Mt(i,e.codec()),e.decode=i=>Ft(i,e.codec())})(pn||(pn={}));var cs;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.multiaddr!=null&&r.multiaddr.byteLength>0&&(n.uint32(10),n.bytes(r.multiaddr)),r.isCertified!=null&&(n.uint32(16),n.bool(r.isCertified)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={multiaddr:new Uint8Array(0)},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.multiaddr=r.bytes();break;case 2:i.isCertified=r.bool();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Mt(r,e.codec()),e.decode=r=>Ft(r,e.codec())})(cs||(cs={}));var fs;(function(e){let t;e.codec=()=>(t==null&&(t=Ot((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.value!=null&&r.value!==0&&(n.uint32(8),n.uint32(r.value)),r.expiry!=null&&(n.uint32(16),n.uint64(r.expiry)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={value:0},s=n==null?r.len:r.pos+n;for(;r.pos<s;){let o=r.uint32();switch(o>>>3){case 1:i.value=r.uint32();break;case 2:i.expiry=r.uint64();break;default:r.skipType(o&7);break}}return i})),t),e.encode=r=>Mt(r,e.codec()),e.decode=r=>Ft(r,e.codec())})(fs||(fs={}));function dn(e,t){let r=pn.decode(t);r.publicKey!=null&&e.publicKey==null&&(e=Sf({...e,publicKey:e.publicKey}));let n=new Map,i=BigInt(Date.now());for(let[s,o]of r.tags.entries())o.expiry!=null&&o.expiry<i||n.set(s,o);return{...r,id:e,addresses:r.addresses.map(({multiaddr:s,isCertified:o})=>({multiaddr:kr(s),isCertified:o??!1})),metadata:r.metadata,peerRecordEnvelope:r.peerRecordEnvelope??void 0,tags:n}}var Ve="/",bl=new TextEncoder().encode(Ve),ls=bl[0],Nt=class{_buf;constructor(t,r){if(typeof t=="string")this._buf=St(t);else if(t instanceof Uint8Array)this._buf=t;else throw new Error("Invalid key, should be String of Uint8Array");if(r==null&&(r=!0),r&&this.clean(),this._buf.byteLength===0||this._buf[0]!==ls)throw new Error("Invalid key")}toString(t="utf8"){return J(this._buf,t)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(t){return new Nt(t.join(Ve))}static random(){return new Nt(us().replace(/-/g,""))}static asKey(t){return t instanceof Uint8Array||typeof t=="string"?new Nt(t):typeof t.uint8Array=="function"?new Nt(t.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=bl),this._buf[0]!==ls){let t=new Uint8Array(this._buf.byteLength+1);t.fill(ls,0,1),t.set(this._buf,1),this._buf=t}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===ls;)this._buf=this._buf.subarray(0,-1)}less(t){let r=this.list(),n=t.list();for(let i=0;i<r.length;i++){if(n.length<i+1)return!1;let s=r[i],o=n[i];if(s<o)return!0;if(s>o)return!1}return r.length<n.length}reverse(){return Nt.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){let t=this.namespaces();return t[t.length-1]}list(){return this.toString().split(Ve).slice(1)}type(){return Ug(this.baseNamespace())}name(){return Kg(this.baseNamespace())}instance(t){return new Nt(this.toString()+":"+t)}path(){let t=this.parent().toString();return t.endsWith(Ve)||(t+=Ve),t+=this.type(),new Nt(t)}parent(){let t=this.list();return t.length===1?new Nt(Ve):new Nt(t.slice(0,-1).join(Ve))}child(t){return this.toString()===Ve?t:t.toString()===Ve?this:new Nt(this.toString()+t.toString(),!1)}isAncestorOf(t){return t.toString()===this.toString()?!1:t.toString().startsWith(this.toString())}isDecendantOf(t){return t.toString()===this.toString()?!1:this.toString().startsWith(t.toString())}isTopLevel(){return this.list().length===1}concat(...t){return Nt.withNamespaces([...this.namespaces(),...Fg(t.map(r=>r.namespaces()))])}};function Ug(e){let t=e.split(":");return t.length<2?"":t.slice(0,-1).join(":")}function Kg(e){let t=e.split(":");return t[t.length-1]}function Fg(e){return[].concat(...e)}var Na="/peers/";function yn(e){if(!wf(e)||e.type==null)throw new U("Invalid PeerId",Pt.ERR_INVALID_PARAMETERS);let t=e.toCID().toString();return new Nt(`${Na}${t}`)}async function El(e,t,r){let n=new Map;for(let i of r){if(i==null)continue;if(i.multiaddr instanceof Uint8Array&&(i.multiaddr=kr(i.multiaddr)),!ya(i.multiaddr))throw new U("Multiaddr was invalid",Pt.ERR_INVALID_PARAMETERS);if(!await t(e,i.multiaddr))continue;let s=i.isCertified??!1,o=i.multiaddr.toString(),a=n.get(o);a!=null?i.isCertified=a.isCertified||s:n.set(o,{multiaddr:i.multiaddr,isCertified:s})}return[...n.values()].sort((i,s)=>i.multiaddr.toString().localeCompare(s.multiaddr.toString())).map(({isCertified:i,multiaddr:s})=>({isCertified:i,multiaddr:s.bytes}))}async function ps(e,t,r,n){if(t==null)throw new U("Invalid PeerData",Pt.ERR_INVALID_PARAMETERS);if(t.publicKey!=null&&e.publicKey!=null&&!ht(t.publicKey,e.publicKey))throw new U("publicKey bytes do not match peer id publicKey bytes",Pt.ERR_INVALID_PARAMETERS);let i=n.existingPeer;if(i!=null&&!e.equals(i.id))throw new U("peer id did not match existing peer id",Pt.ERR_INVALID_PARAMETERS);let s=i?.addresses??[],o=new Set(i?.protocols??[]),a=i?.metadata??new Map,u=i?.tags??new Map,c=i?.peerRecordEnvelope;if(r==="patch"){if((t.multiaddrs!=null||t.addresses!=null)&&(s=[],t.multiaddrs!=null&&s.push(...t.multiaddrs.map(l=>({isCertified:!1,multiaddr:l}))),t.addresses!=null&&s.push(...t.addresses)),t.protocols!=null&&(o=new Set(t.protocols)),t.metadata!=null){let l=t.metadata instanceof Map?[...t.metadata.entries()]:Object.entries(t.metadata);a=hs(l,{validate:Sl})}if(t.tags!=null){let l=t.tags instanceof Map?[...t.tags.entries()]:Object.entries(t.tags);u=hs(l,{validate:Al,map:Bl})}t.peerRecordEnvelope!=null&&(c=t.peerRecordEnvelope)}if(r==="merge"){if(t.multiaddrs!=null&&s.push(...t.multiaddrs.map(l=>({isCertified:!1,multiaddr:l}))),t.addresses!=null&&s.push(...t.addresses),t.protocols!=null&&(o=new Set([...o,...t.protocols])),t.metadata!=null){let l=t.metadata instanceof Map?[...t.metadata.entries()]:Object.entries(t.metadata);for(let[h,d]of l)d==null?a.delete(h):a.set(h,d);a=hs([...a.entries()],{validate:Sl})}if(t.tags!=null){let l=t.tags instanceof Map?[...t.tags.entries()]:Object.entries(t.tags),h=new Map(u);for(let[d,p]of l)p==null?h.delete(d):h.set(d,p);u=hs([...h.entries()],{validate:Al,map:Bl})}t.peerRecordEnvelope!=null&&(c=t.peerRecordEnvelope)}let f={addresses:await El(e,n.addressFilter??(async()=>!0),s),protocols:[...o.values()].sort((l,h)=>l.localeCompare(h)),metadata:a,tags:u,publicKey:i?.id.publicKey??t.publicKey??e.publicKey,peerRecordEnvelope:c};return e.type!=="RSA"&&delete f.publicKey,f}function hs(e,t){let r=new Map;for(let[n,i]of e)i!=null&&t.validate(n,i);for(let[n,i]of e.sort(([s],[o])=>s.localeCompare(o)))i!=null&&r.set(n,t.map?.(n,i)??i);return r}function Sl(e,t){if(typeof e!="string")throw new U("Metadata key must be a string",Pt.ERR_INVALID_PARAMETERS);if(!(t instanceof Uint8Array))throw new U("Metadata value must be a Uint8Array",Pt.ERR_INVALID_PARAMETERS)}function Al(e,t){if(typeof e!="string")throw new U("Tag name must be a string",Pt.ERR_INVALID_PARAMETERS);if(t.value!=null){if(parseInt(`${t.value}`,10)!==t.value)throw new U("Tag value must be an integer",Pt.ERR_INVALID_PARAMETERS);if(t.value<0||t.value>100)throw new U("Tag value must be between 0-100",Pt.ERR_INVALID_PARAMETERS)}if(t.ttl!=null){if(parseInt(`${t.ttl}`,10)!==t.ttl)throw new U("Tag ttl must be an integer",Pt.ERR_INVALID_PARAMETERS);if(t.ttl<0)throw new U("Tag ttl must be between greater than 0",Pt.ERR_INVALID_PARAMETERS)}}function Bl(e,t){let r;return t.expiry!=null&&(r=t.expiry),t.ttl!=null&&(r=BigInt(Date.now()+Number(t.ttl))),{value:t.value??0,expiry:r}}function ds(e,t,r){let n=e.toString().split("/")[2],i=Yt.decode(n),s=zn(i),o=r.get(s);if(o!=null)return o;let a=dn(s,t);return r.set(s,a),a}function Mg(e,t){return e==null?{}:{prefix:Na,filters:(e.filters??[]).map(r=>({key:n,value:i})=>r(ds(n,i,t))),orders:(e.orders??[]).map(r=>(n,i)=>r(ds(n.key,n.value,t),ds(i.key,i.value,t)))}}var ys=class{peerId;datastore;lock;addressFilter;constructor(t,r={}){this.peerId=t.peerId,this.datastore=t.datastore,this.addressFilter=r.addressFilter,this.lock=La({name:"peer-store",singleProcess:!0})}async has(t){return this.datastore.has(yn(t))}async delete(t){if(this.peerId.equals(t))throw new U("Cannot delete self peer",Pt.ERR_INVALID_PARAMETERS);await this.datastore.delete(yn(t))}async load(t){let r=await this.datastore.get(yn(t));return dn(t,r)}async save(t,r){let{existingBuf:n,existingPeer:i}=await this.#t(t),s=await ps(t,r,"patch",{addressFilter:this.addressFilter});return this.#e(t,s,n,i)}async patch(t,r){let{existingBuf:n,existingPeer:i}=await this.#t(t),s=await ps(t,r,"patch",{addressFilter:this.addressFilter,existingPeer:i});return this.#e(t,s,n,i)}async merge(t,r){let{existingBuf:n,existingPeer:i}=await this.#t(t),s=await ps(t,r,"merge",{addressFilter:this.addressFilter,existingPeer:i});return this.#e(t,s,n,i)}async*all(t){let r=new $n;for await(let{key:n,value:i}of this.datastore.query(Mg(t??{},r))){let s=ds(n,i,r);s.id.equals(this.peerId)||(yield s)}}async#t(t){try{let r=await this.datastore.get(yn(t)),n=dn(t,r);return{existingBuf:r,existingPeer:n}}catch(r){if(r.code!=="ERR_NOT_FOUND")throw r}return{}}async#e(t,r,n,i){let s=pn.encode(r);return n!=null&&ht(s,n)?{peer:dn(t,s),previous:i,updated:!1}:(await this.datastore.put(yn(t),s),{peer:dn(t,s),previous:i,updated:!0})}};var nt=Ya("libp2p:peer-store"),Da=class{store;events;peerId;constructor(t,r={}){this.events=t.events,this.peerId=t.peerId,this.store=new ys(t,r)}async forEach(t,r){nt.trace("forEach await read lock");let n=await this.store.lock.readLock();nt.trace("forEach got read lock");try{for await(let i of this.store.all(r))t(i)}finally{nt.trace("forEach release read lock"),n()}}async all(t){nt.trace("all await read lock");let r=await this.store.lock.readLock();nt.trace("all got read lock");try{return await il(this.store.all(t))}finally{nt.trace("all release read lock"),r()}}async delete(t){nt.trace("delete await write lock");let r=await this.store.lock.writeLock();nt.trace("delete got write lock");try{await this.store.delete(t)}finally{nt.trace("delete release write lock"),r()}}async has(t){nt.trace("has await read lock");let r=await this.store.lock.readLock();nt.trace("has got read lock");try{return await this.store.has(t)}finally{nt.trace("has release read lock"),r()}}async get(t){nt.trace("get await read lock");let r=await this.store.lock.readLock();nt.trace("get got read lock");try{return await this.store.load(t)}finally{nt.trace("get release read lock"),r()}}async save(t,r){nt.trace("save await write lock");let n=await this.store.lock.writeLock();nt.trace("save got write lock");try{let i=await this.store.save(t,r);return this.#t(t,i),i.peer}finally{nt.trace("save release write lock"),n()}}async patch(t,r){nt.trace("patch await write lock");let n=await this.store.lock.writeLock();nt.trace("patch got write lock");try{let i=await this.store.patch(t,r);return this.#t(t,i),i.peer}finally{nt.trace("patch release write lock"),n()}}async merge(t,r){nt.trace("merge await write lock");let n=await this.store.lock.writeLock();nt.trace("merge got write lock");try{let i=await this.store.merge(t,r);return this.#t(t,i),i.peer}finally{nt.trace("merge release write lock"),n()}}async consumePeerRecord(t,r){let n=await te.openAndCertify(t,Vt.DOMAIN);if(r?.equals(n.peerId)===!1)return nt("envelope peer id was not the expected peer id - expected: %p received: %p",r,n.peerId),!1;let i=Vt.createFromProtobuf(n.payload),s;try{s=await this.get(n.peerId)}catch(o){if(o.code!=="ERR_NOT_FOUND")throw o}if(s?.peerRecordEnvelope!=null){let o=await te.createFromProtobuf(s.peerRecordEnvelope),a=Vt.createFromProtobuf(o.payload);if(a.seqNumber>=i.seqNumber)return nt("sequence number was lower or equal to existing sequence number - stored: %d received: %d",a.seqNumber,i.seqNumber),!1}return await this.patch(i.peerId,{peerRecordEnvelope:t,addresses:i.multiaddrs.map(o=>({isCertified:!0,multiaddr:o}))}),!0}#t(t,r){r.updated&&(this.peerId.equals(t)?this.events.safeDispatchEvent("self:peer:update",{detail:r}):this.events.safeDispatchEvent("peer:update",{detail:r}))}};return kl(Og);})();
/*! Bundled license information:

@noble/ed25519/lib/esm/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
return Libp2PPeerStore}));
