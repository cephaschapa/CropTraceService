(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.Libp2PWebtransport = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var Libp2PWebtransport=(()=>{var kl=Object.create;var Nn=Object.defineProperty;var Dl=Object.getOwnPropertyDescriptor;var Kl=Object.getOwnPropertyNames;var Fl=Object.getPrototypeOf,Ml=Object.prototype.hasOwnProperty;var Ol=(e,t,r)=>t in e?Nn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var x0=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var k=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ft=(e,t)=>{for(var r in t)Nn(e,r,{get:t[r],enumerable:!0})},v0=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Kl(t))!Ml.call(e,i)&&i!==r&&Nn(e,i,{get:()=>t[i],enumerable:!(n=Dl(t,i))||n.enumerable});return e};var mt=(e,t,r)=>(r=e!=null?kl(Fl(e)):{},v0(t||!e||!e.__esModule?Nn(r,"default",{value:e,enumerable:!0}):r,e)),Vl=e=>v0(Nn({},"__esModule",{value:!0}),e);var yi=(e,t,r)=>(Ol(e,typeof t!="symbol"?t+"":t,r),r);var Oo=k((zx,A0)=>{"use strict";function S0(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}function Ql(e,t,r){if(!e||typeof e=="string")throw new TypeError("Please pass an Error to err-code");r||(r={}),typeof t=="object"&&(r=t,t=""),t&&(r.code=t);try{return S0(e,r)}catch{r.message=e.message,r.stack=e.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(e)),S0(new i,r)}}A0.exports=Ql});var k0=k(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});function bp(e,t){var r=e>>>16&65535,n=e&65535,i=t>>>16&65535,o=t&65535;return n*o+(r*o+n*i<<16>>>0)|0}he.mul=Math.imul||bp;function Ep(e,t){return e+t|0}he.add=Ep;function Sp(e,t){return e-t|0}he.sub=Sp;function Ap(e,t){return e<<t|e>>>32-t}he.rotl=Ap;function Bp(e,t){return e<<32-t|e>>>t}he.rotr=Bp;function Cp(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}he.isInteger=Number.isInteger||Cp;he.MAX_SAFE_INTEGER=9007199254740991;he.isSafeInteger=function(e){return he.isInteger(e)&&e>=-he.MAX_SAFE_INTEGER&&e<=he.MAX_SAFE_INTEGER}});var Li=k(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});var D0=k0();function _p(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}W.readInt16BE=_p;function Ip(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}W.readUint16BE=Ip;function Tp(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}W.readInt16LE=Tp;function Lp(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}W.readUint16LE=Lp;function K0(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}W.writeUint16BE=K0;W.writeInt16BE=K0;function F0(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}W.writeUint16LE=F0;W.writeInt16LE=F0;function Qo(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}W.readInt32BE=Qo;function jo(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}W.readUint32BE=jo;function Jo(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}W.readInt32LE=Jo;function ts(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}W.readUint32LE=ts;function Ii(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}W.writeUint32BE=Ii;W.writeInt32BE=Ii;function Ti(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}W.writeUint32LE=Ti;W.writeInt32LE=Ti;function Rp(e,t){t===void 0&&(t=0);var r=Qo(e,t),n=Qo(e,t+4);return r*4294967296+n-(n>>31)*4294967296}W.readInt64BE=Rp;function Pp(e,t){t===void 0&&(t=0);var r=jo(e,t),n=jo(e,t+4);return r*4294967296+n}W.readUint64BE=Pp;function Np(e,t){t===void 0&&(t=0);var r=Jo(e,t),n=Jo(e,t+4);return n*4294967296+r-(r>>31)*4294967296}W.readInt64LE=Np;function Up(e,t){t===void 0&&(t=0);var r=ts(e,t),n=ts(e,t+4);return n*4294967296+r}W.readUint64LE=Up;function M0(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ii(e/4294967296>>>0,t,r),Ii(e>>>0,t,r+4),t}W.writeUint64BE=M0;W.writeInt64BE=M0;function O0(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ti(e>>>0,t,r),Ti(e/4294967296>>>0,t,r+4),t}W.writeUint64LE=O0;W.writeInt64LE=O0;function kp(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,i=1,o=e/8+r-1;o>=r;o--)n+=t[o]*i,i*=256;return n}W.readUintBE=kp;function Dp(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,i=1,o=r;o<r+e/8;o++)n+=t[o]*i,i*=256;return n}W.readUintLE=Dp;function Kp(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!D0.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var i=1,o=e/8+n-1;o>=n;o--)r[o]=t/i&255,i*=256;return r}W.writeUintBE=Kp;function Fp(e,t,r,n){if(r===void 0&&(r=new Uint8Array(e/8)),n===void 0&&(n=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!D0.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var i=1,o=n;o<n+e/8;o++)r[o]=t/i&255,i*=256;return r}W.writeUintLE=Fp;function Mp(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}W.readFloat32BE=Mp;function Op(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}W.readFloat32LE=Op;function Vp(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}W.readFloat64BE=Vp;function Hp(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}W.readFloat64LE=Hp;function qp(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e),t}W.writeFloat32BE=qp;function zp(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat32(r,e,!0),t}W.writeFloat32LE=zp;function Gp(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e),t}W.writeFloat64BE=Gp;function $p(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.setFloat64(r,e,!0),t}W.writeFloat64LE=$p});var Tr=k(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});function Wp(e){for(var t=0;t<e.length;t++)e[t]=0;return e}es.wipe=Wp});var H0=k(Ri=>{"use strict";Object.defineProperty(Ri,"__esModule",{value:!0});var ee=Li(),rs=Tr(),Yp=20;function Xp(e,t,r){for(var n=1634760805,i=857760878,o=2036477234,s=1797285236,a=r[3]<<24|r[2]<<16|r[1]<<8|r[0],c=r[7]<<24|r[6]<<16|r[5]<<8|r[4],f=r[11]<<24|r[10]<<16|r[9]<<8|r[8],u=r[15]<<24|r[14]<<16|r[13]<<8|r[12],h=r[19]<<24|r[18]<<16|r[17]<<8|r[16],l=r[23]<<24|r[22]<<16|r[21]<<8|r[20],d=r[27]<<24|r[26]<<16|r[25]<<8|r[24],p=r[31]<<24|r[30]<<16|r[29]<<8|r[28],y=t[3]<<24|t[2]<<16|t[1]<<8|t[0],m=t[7]<<24|t[6]<<16|t[5]<<8|t[4],x=t[11]<<24|t[10]<<16|t[9]<<8|t[8],b=t[15]<<24|t[14]<<16|t[13]<<8|t[12],w=n,C=i,A=o,B=s,L=a,R=c,D=f,O=u,G=h,z=l,it=d,gt=p,M=y,H=m,S=x,V=b,bt=0;bt<Yp;bt+=2)w=w+L|0,M^=w,M=M>>>32-16|M<<16,G=G+M|0,L^=G,L=L>>>32-12|L<<12,C=C+R|0,H^=C,H=H>>>32-16|H<<16,z=z+H|0,R^=z,R=R>>>32-12|R<<12,A=A+D|0,S^=A,S=S>>>32-16|S<<16,it=it+S|0,D^=it,D=D>>>32-12|D<<12,B=B+O|0,V^=B,V=V>>>32-16|V<<16,gt=gt+V|0,O^=gt,O=O>>>32-12|O<<12,A=A+D|0,S^=A,S=S>>>32-8|S<<8,it=it+S|0,D^=it,D=D>>>32-7|D<<7,B=B+O|0,V^=B,V=V>>>32-8|V<<8,gt=gt+V|0,O^=gt,O=O>>>32-7|O<<7,C=C+R|0,H^=C,H=H>>>32-8|H<<8,z=z+H|0,R^=z,R=R>>>32-7|R<<7,w=w+L|0,M^=w,M=M>>>32-8|M<<8,G=G+M|0,L^=G,L=L>>>32-7|L<<7,w=w+R|0,V^=w,V=V>>>32-16|V<<16,it=it+V|0,R^=it,R=R>>>32-12|R<<12,C=C+D|0,M^=C,M=M>>>32-16|M<<16,gt=gt+M|0,D^=gt,D=D>>>32-12|D<<12,A=A+O|0,H^=A,H=H>>>32-16|H<<16,G=G+H|0,O^=G,O=O>>>32-12|O<<12,B=B+L|0,S^=B,S=S>>>32-16|S<<16,z=z+S|0,L^=z,L=L>>>32-12|L<<12,A=A+O|0,H^=A,H=H>>>32-8|H<<8,G=G+H|0,O^=G,O=O>>>32-7|O<<7,B=B+L|0,S^=B,S=S>>>32-8|S<<8,z=z+S|0,L^=z,L=L>>>32-7|L<<7,C=C+D|0,M^=C,M=M>>>32-8|M<<8,gt=gt+M|0,D^=gt,D=D>>>32-7|D<<7,w=w+R|0,V^=w,V=V>>>32-8|V<<8,it=it+V|0,R^=it,R=R>>>32-7|R<<7;ee.writeUint32LE(w+n|0,e,0),ee.writeUint32LE(C+i|0,e,4),ee.writeUint32LE(A+o|0,e,8),ee.writeUint32LE(B+s|0,e,12),ee.writeUint32LE(L+a|0,e,16),ee.writeUint32LE(R+c|0,e,20),ee.writeUint32LE(D+f|0,e,24),ee.writeUint32LE(O+u|0,e,28),ee.writeUint32LE(G+h|0,e,32),ee.writeUint32LE(z+l|0,e,36),ee.writeUint32LE(it+d|0,e,40),ee.writeUint32LE(gt+p|0,e,44),ee.writeUint32LE(M+y|0,e,48),ee.writeUint32LE(H+m|0,e,52),ee.writeUint32LE(S+x|0,e,56),ee.writeUint32LE(V+b|0,e,60)}function V0(e,t,r,n,i){if(i===void 0&&(i=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var o,s;if(i===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");o=new Uint8Array(16),s=o.length-t.length,o.set(t,s)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");o=t,s=i}for(var a=new Uint8Array(64),c=0;c<r.length;c+=64){Xp(a,o,e);for(var f=c;f<c+64&&f<r.length;f++)n[f]=r[f]^a[f-c];Qp(o,0,s)}return rs.wipe(a),i===0&&rs.wipe(o),n}Ri.streamXOR=V0;function Zp(e,t,r,n){return n===void 0&&(n=0),rs.wipe(r),V0(e,t,r,r,n)}Ri.stream=Zp;function Qp(e,t,r){for(var n=1;r--;)n=n+(e[t]&255)|0,e[t]=n&255,n>>>=8,t++;if(n>0)throw new Error("ChaCha: counter overflow")}});var ns=k(tn=>{"use strict";Object.defineProperty(tn,"__esModule",{value:!0});function jp(e,t,r){return~(e-1)&t|e-1&r}tn.select=jp;function Jp(e,t){return(e|0)-(t|0)-1>>>31&1}tn.lessOrEqual=Jp;function q0(e,t){if(e.length!==t.length)return 0;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 1&r-1>>>8}tn.compare=q0;function td(e,t){return e.length===0||t.length===0?!1:q0(e,t)!==0}tn.equal=td});var G0=k(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});var ed=ns(),Pi=Tr();Ze.DIGEST_LENGTH=16;var z0=function(){function e(t){this.digestLength=Ze.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=r&8191;var n=t[2]|t[3]<<8;this._r[1]=(r>>>13|n<<3)&8191;var i=t[4]|t[5]<<8;this._r[2]=(n>>>10|i<<6)&7939;var o=t[6]|t[7]<<8;this._r[3]=(i>>>7|o<<9)&8191;var s=t[8]|t[9]<<8;this._r[4]=(o>>>4|s<<12)&255,this._r[5]=s>>>1&8190;var a=t[10]|t[11]<<8;this._r[6]=(s>>>14|a<<2)&8191;var c=t[12]|t[13]<<8;this._r[7]=(a>>>11|c<<5)&8065;var f=t[14]|t[15]<<8;this._r[8]=(c>>>8|f<<8)&8191,this._r[9]=f>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return e.prototype._blocks=function(t,r,n){for(var i=this._fin?0:2048,o=this._h[0],s=this._h[1],a=this._h[2],c=this._h[3],f=this._h[4],u=this._h[5],h=this._h[6],l=this._h[7],d=this._h[8],p=this._h[9],y=this._r[0],m=this._r[1],x=this._r[2],b=this._r[3],w=this._r[4],C=this._r[5],A=this._r[6],B=this._r[7],L=this._r[8],R=this._r[9];n>=16;){var D=t[r+0]|t[r+1]<<8;o+=D&8191;var O=t[r+2]|t[r+3]<<8;s+=(D>>>13|O<<3)&8191;var G=t[r+4]|t[r+5]<<8;a+=(O>>>10|G<<6)&8191;var z=t[r+6]|t[r+7]<<8;c+=(G>>>7|z<<9)&8191;var it=t[r+8]|t[r+9]<<8;f+=(z>>>4|it<<12)&8191,u+=it>>>1&8191;var gt=t[r+10]|t[r+11]<<8;h+=(it>>>14|gt<<2)&8191;var M=t[r+12]|t[r+13]<<8;l+=(gt>>>11|M<<5)&8191;var H=t[r+14]|t[r+15]<<8;d+=(M>>>8|H<<8)&8191,p+=H>>>5|i;var S=0,V=S;V+=o*y,V+=s*(5*R),V+=a*(5*L),V+=c*(5*B),V+=f*(5*A),S=V>>>13,V&=8191,V+=u*(5*C),V+=h*(5*w),V+=l*(5*b),V+=d*(5*x),V+=p*(5*m),S+=V>>>13,V&=8191;var bt=S;bt+=o*m,bt+=s*y,bt+=a*(5*R),bt+=c*(5*L),bt+=f*(5*B),S=bt>>>13,bt&=8191,bt+=u*(5*A),bt+=h*(5*C),bt+=l*(5*w),bt+=d*(5*b),bt+=p*(5*x),S+=bt>>>13,bt&=8191;var Q=S;Q+=o*x,Q+=s*m,Q+=a*y,Q+=c*(5*R),Q+=f*(5*L),S=Q>>>13,Q&=8191,Q+=u*(5*B),Q+=h*(5*A),Q+=l*(5*C),Q+=d*(5*w),Q+=p*(5*b),S+=Q>>>13,Q&=8191;var j=S;j+=o*b,j+=s*x,j+=a*m,j+=c*y,j+=f*(5*R),S=j>>>13,j&=8191,j+=u*(5*L),j+=h*(5*B),j+=l*(5*A),j+=d*(5*C),j+=p*(5*w),S+=j>>>13,j&=8191;var J=S;J+=o*w,J+=s*b,J+=a*x,J+=c*m,J+=f*y,S=J>>>13,J&=8191,J+=u*(5*R),J+=h*(5*L),J+=l*(5*B),J+=d*(5*A),J+=p*(5*C),S+=J>>>13,J&=8191;var ct=S;ct+=o*C,ct+=s*w,ct+=a*b,ct+=c*x,ct+=f*m,S=ct>>>13,ct&=8191,ct+=u*y,ct+=h*(5*R),ct+=l*(5*L),ct+=d*(5*B),ct+=p*(5*A),S+=ct>>>13,ct&=8191;var ft=S;ft+=o*A,ft+=s*C,ft+=a*w,ft+=c*b,ft+=f*x,S=ft>>>13,ft&=8191,ft+=u*m,ft+=h*y,ft+=l*(5*R),ft+=d*(5*L),ft+=p*(5*B),S+=ft>>>13,ft&=8191;var ut=S;ut+=o*B,ut+=s*A,ut+=a*C,ut+=c*w,ut+=f*b,S=ut>>>13,ut&=8191,ut+=u*x,ut+=h*m,ut+=l*y,ut+=d*(5*R),ut+=p*(5*L),S+=ut>>>13,ut&=8191;var ht=S;ht+=o*L,ht+=s*B,ht+=a*A,ht+=c*C,ht+=f*w,S=ht>>>13,ht&=8191,ht+=u*b,ht+=h*x,ht+=l*m,ht+=d*y,ht+=p*(5*R),S+=ht>>>13,ht&=8191;var lt=S;lt+=o*R,lt+=s*L,lt+=a*B,lt+=c*A,lt+=f*C,S=lt>>>13,lt&=8191,lt+=u*w,lt+=h*b,lt+=l*x,lt+=d*m,lt+=p*y,S+=lt>>>13,lt&=8191,S=(S<<2)+S|0,S=S+V|0,V=S&8191,S=S>>>13,bt+=S,o=V,s=bt,a=Q,c=j,f=J,u=ct,h=ft,l=ut,d=ht,p=lt,r+=16,n-=16}this._h[0]=o,this._h[1]=s,this._h[2]=a,this._h[3]=c,this._h[4]=f,this._h[5]=u,this._h[6]=h,this._h[7]=l,this._h[8]=d,this._h[9]=p},e.prototype.finish=function(t,r){r===void 0&&(r=0);var n=new Uint16Array(10),i,o,s,a;if(this._leftover){for(a=this._leftover,this._buffer[a++]=1;a<16;a++)this._buffer[a]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(i=this._h[1]>>>13,this._h[1]&=8191,a=2;a<10;a++)this._h[a]+=i,i=this._h[a]>>>13,this._h[a]&=8191;for(this._h[0]+=i*5,i=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=i,i=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=i,n[0]=this._h[0]+5,i=n[0]>>>13,n[0]&=8191,a=1;a<10;a++)n[a]=this._h[a]+i,i=n[a]>>>13,n[a]&=8191;for(n[9]-=8192,o=(i^1)-1,a=0;a<10;a++)n[a]&=o;for(o=~o,a=0;a<10;a++)this._h[a]=this._h[a]&o|n[a];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,s=this._h[0]+this._pad[0],this._h[0]=s&65535,a=1;a<8;a++)s=(this._h[a]+this._pad[a]|0)+(s>>>16)|0,this._h[a]=s&65535;return t[r+0]=this._h[0]>>>0,t[r+1]=this._h[0]>>>8,t[r+2]=this._h[1]>>>0,t[r+3]=this._h[1]>>>8,t[r+4]=this._h[2]>>>0,t[r+5]=this._h[2]>>>8,t[r+6]=this._h[3]>>>0,t[r+7]=this._h[3]>>>8,t[r+8]=this._h[4]>>>0,t[r+9]=this._h[4]>>>8,t[r+10]=this._h[5]>>>0,t[r+11]=this._h[5]>>>8,t[r+12]=this._h[6]>>>0,t[r+13]=this._h[6]>>>8,t[r+14]=this._h[7]>>>0,t[r+15]=this._h[7]>>>8,this._finished=!0,this},e.prototype.update=function(t){var r=0,n=t.length,i;if(this._leftover){i=16-this._leftover,i>n&&(i=n);for(var o=0;o<i;o++)this._buffer[this._leftover+o]=t[r+o];if(n-=i,r+=i,this._leftover+=i,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(i=n-n%16,this._blocks(t,r,i),r+=i,n-=i),n){for(var o=0;o<n;o++)this._buffer[this._leftover+o]=t[r+o];this._leftover+=n}return this},e.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},e.prototype.clean=function(){return Pi.wipe(this._buffer),Pi.wipe(this._r),Pi.wipe(this._h),Pi.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},e}();Ze.Poly1305=z0;function rd(e,t){var r=new z0(e);r.update(t);var n=r.digest();return r.clean(),n}Ze.oneTimeAuth=rd;function nd(e,t){return e.length!==Ze.DIGEST_LENGTH||t.length!==Ze.DIGEST_LENGTH?!1:ed.equal(e,t)}Ze.equal=nd});var is=k(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});var Ni=H0(),id=G0(),kn=Tr(),$0=Li(),od=ns();Qe.KEY_LENGTH=32;Qe.NONCE_LENGTH=12;Qe.TAG_LENGTH=16;var W0=new Uint8Array(16),sd=function(){function e(t){if(this.nonceLength=Qe.NONCE_LENGTH,this.tagLength=Qe.TAG_LENGTH,t.length!==Qe.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return e.prototype.seal=function(t,r,n,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var o=new Uint8Array(16);o.set(t,o.length-t.length);var s=new Uint8Array(32);Ni.stream(this._key,o,s,4);var a=r.length+this.tagLength,c;if(i){if(i.length!==a)throw new Error("ChaCha20Poly1305: incorrect destination length");c=i}else c=new Uint8Array(a);return Ni.streamXOR(this._key,o,r,c,4),this._authenticate(c.subarray(c.length-this.tagLength,c.length),s,c.subarray(0,c.length-this.tagLength),n),kn.wipe(o),c},e.prototype.open=function(t,r,n,i){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(r.length<this.tagLength)return null;var o=new Uint8Array(16);o.set(t,o.length-t.length);var s=new Uint8Array(32);Ni.stream(this._key,o,s,4);var a=new Uint8Array(this.tagLength);if(this._authenticate(a,s,r.subarray(0,r.length-this.tagLength),n),!od.equal(a,r.subarray(r.length-this.tagLength,r.length)))return null;var c=r.length-this.tagLength,f;if(i){if(i.length!==c)throw new Error("ChaCha20Poly1305: incorrect destination length");f=i}else f=new Uint8Array(c);return Ni.streamXOR(this._key,o,r.subarray(0,r.length-this.tagLength),f,4),kn.wipe(o),f},e.prototype.clean=function(){return kn.wipe(this._key),this},e.prototype._authenticate=function(t,r,n,i){var o=new id.Poly1305(r);i&&(o.update(i),i.length%16>0&&o.update(W0.subarray(i.length%16))),o.update(n),n.length%16>0&&o.update(W0.subarray(n.length%16));var s=new Uint8Array(8);i&&$0.writeUint64LE(i.length,s),o.update(s),$0.writeUint64LE(n.length,s),o.update(s);for(var a=o.digest(),c=0;c<a.length;c++)t[c]=a[c];o.clean(),kn.wipe(a),kn.wipe(s)},e}();Qe.ChaCha20Poly1305=sd});var X0=k(Ui=>{"use strict";Object.defineProperty(Ui,"__esModule",{value:!0});Ui.BrowserRandomSource=void 0;var Y0=65536,os=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;let t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");let r=new Uint8Array(t);for(let n=0;n<r.length;n+=Y0)this._crypto.getRandomValues(r.subarray(n,n+Math.min(r.length-n,Y0)));return r}};Ui.BrowserRandomSource=os});var Lr=k(()=>{});var Z0=k(ki=>{"use strict";Object.defineProperty(ki,"__esModule",{value:!0});ki.NodeRandomSource=void 0;var ad=Tr(),ss=class{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof x0<"u"){let t=Lr();t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");let n=new Uint8Array(t);for(let i=0;i<n.length;i++)n[i]=r[i];return(0,ad.wipe)(r),n}};ki.NodeRandomSource=ss});var Q0=k(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.SystemRandomSource=void 0;var cd=X0(),fd=Z0(),as=class{constructor(){if(this.isAvailable=!1,this.name="",this._source=new cd.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new fd.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}};Di.SystemRandomSource=as});var ec=k(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.randomStringForEntropy=re.randomString=re.randomUint32=re.randomBytes=re.defaultRandomSource=void 0;var ud=Q0(),hd=Li(),j0=Tr();re.defaultRandomSource=new ud.SystemRandomSource;function cs(e,t=re.defaultRandomSource){return t.randomBytes(e)}re.randomBytes=cs;function ld(e=re.defaultRandomSource){let t=cs(4,e),r=(0,hd.readUint32LE)(t);return(0,j0.wipe)(t),r}re.randomUint32=ld;var J0="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function tc(e,t=J0,r=re.defaultRandomSource){if(t.length<2)throw new Error("randomString charset is too short");if(t.length>256)throw new Error("randomString charset is too long");let n="",i=t.length,o=256-256%i;for(;e>0;){let s=cs(Math.ceil(e*256/o),r);for(let a=0;a<s.length&&e>0;a++){let c=s[a];c<o&&(n+=t.charAt(c%i),e--)}(0,j0.wipe)(s)}return n}re.randomString=tc;function pd(e,t=J0,r=re.defaultRandomSource){let n=Math.ceil(e/(Math.log(t.length)/Math.LN2));return tc(n,t,r)}re.randomStringForEntropy=pd});var oc=k(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.sharedKey=Lt.generateKeyPair=Lt.generateKeyPairFromSeed=Lt.scalarMultBase=Lt.scalarMult=Lt.SHARED_KEY_LENGTH=Lt.SECRET_KEY_LENGTH=Lt.PUBLIC_KEY_LENGTH=void 0;var dd=ec(),yd=Tr();Lt.PUBLIC_KEY_LENGTH=32;Lt.SECRET_KEY_LENGTH=32;Lt.SHARED_KEY_LENGTH=32;function Pe(e){let t=new Float64Array(16);if(e)for(let r=0;r<e.length;r++)t[r]=e[r];return t}var rc=new Uint8Array(32);rc[0]=9;var gd=Pe([56129,1]);function fs(e){let t=1;for(let r=0;r<16;r++){let n=e[r]+t+65535;t=Math.floor(n/65536),e[r]=n-t*65536}e[0]+=t-1+37*(t-1)}function Dn(e,t,r){let n=~(r-1);for(let i=0;i<16;i++){let o=n&(e[i]^t[i]);e[i]^=o,t[i]^=o}}function md(e,t){let r=Pe(),n=Pe();for(let i=0;i<16;i++)n[i]=t[i];fs(n),fs(n),fs(n);for(let i=0;i<2;i++){r[0]=n[0]-65517;for(let s=1;s<15;s++)r[s]=n[s]-65535-(r[s-1]>>16&1),r[s-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);let o=r[15]>>16&1;r[14]&=65535,Dn(n,r,1-o)}for(let i=0;i<16;i++)e[2*i]=n[i]&255,e[2*i+1]=n[i]>>8}function xd(e,t){for(let r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function Ki(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]+r[n]}function Fi(e,t,r){for(let n=0;n<16;n++)e[n]=t[n]-r[n]}function je(e,t,r){let n,i,o=0,s=0,a=0,c=0,f=0,u=0,h=0,l=0,d=0,p=0,y=0,m=0,x=0,b=0,w=0,C=0,A=0,B=0,L=0,R=0,D=0,O=0,G=0,z=0,it=0,gt=0,M=0,H=0,S=0,V=0,bt=0,Q=r[0],j=r[1],J=r[2],ct=r[3],ft=r[4],ut=r[5],ht=r[6],lt=r[7],$t=r[8],Wt=r[9],Yt=r[10],Xt=r[11],Zt=r[12],Qt=r[13],jt=r[14],Jt=r[15];n=t[0],o+=n*Q,s+=n*j,a+=n*J,c+=n*ct,f+=n*ft,u+=n*ut,h+=n*ht,l+=n*lt,d+=n*$t,p+=n*Wt,y+=n*Yt,m+=n*Xt,x+=n*Zt,b+=n*Qt,w+=n*jt,C+=n*Jt,n=t[1],s+=n*Q,a+=n*j,c+=n*J,f+=n*ct,u+=n*ft,h+=n*ut,l+=n*ht,d+=n*lt,p+=n*$t,y+=n*Wt,m+=n*Yt,x+=n*Xt,b+=n*Zt,w+=n*Qt,C+=n*jt,A+=n*Jt,n=t[2],a+=n*Q,c+=n*j,f+=n*J,u+=n*ct,h+=n*ft,l+=n*ut,d+=n*ht,p+=n*lt,y+=n*$t,m+=n*Wt,x+=n*Yt,b+=n*Xt,w+=n*Zt,C+=n*Qt,A+=n*jt,B+=n*Jt,n=t[3],c+=n*Q,f+=n*j,u+=n*J,h+=n*ct,l+=n*ft,d+=n*ut,p+=n*ht,y+=n*lt,m+=n*$t,x+=n*Wt,b+=n*Yt,w+=n*Xt,C+=n*Zt,A+=n*Qt,B+=n*jt,L+=n*Jt,n=t[4],f+=n*Q,u+=n*j,h+=n*J,l+=n*ct,d+=n*ft,p+=n*ut,y+=n*ht,m+=n*lt,x+=n*$t,b+=n*Wt,w+=n*Yt,C+=n*Xt,A+=n*Zt,B+=n*Qt,L+=n*jt,R+=n*Jt,n=t[5],u+=n*Q,h+=n*j,l+=n*J,d+=n*ct,p+=n*ft,y+=n*ut,m+=n*ht,x+=n*lt,b+=n*$t,w+=n*Wt,C+=n*Yt,A+=n*Xt,B+=n*Zt,L+=n*Qt,R+=n*jt,D+=n*Jt,n=t[6],h+=n*Q,l+=n*j,d+=n*J,p+=n*ct,y+=n*ft,m+=n*ut,x+=n*ht,b+=n*lt,w+=n*$t,C+=n*Wt,A+=n*Yt,B+=n*Xt,L+=n*Zt,R+=n*Qt,D+=n*jt,O+=n*Jt,n=t[7],l+=n*Q,d+=n*j,p+=n*J,y+=n*ct,m+=n*ft,x+=n*ut,b+=n*ht,w+=n*lt,C+=n*$t,A+=n*Wt,B+=n*Yt,L+=n*Xt,R+=n*Zt,D+=n*Qt,O+=n*jt,G+=n*Jt,n=t[8],d+=n*Q,p+=n*j,y+=n*J,m+=n*ct,x+=n*ft,b+=n*ut,w+=n*ht,C+=n*lt,A+=n*$t,B+=n*Wt,L+=n*Yt,R+=n*Xt,D+=n*Zt,O+=n*Qt,G+=n*jt,z+=n*Jt,n=t[9],p+=n*Q,y+=n*j,m+=n*J,x+=n*ct,b+=n*ft,w+=n*ut,C+=n*ht,A+=n*lt,B+=n*$t,L+=n*Wt,R+=n*Yt,D+=n*Xt,O+=n*Zt,G+=n*Qt,z+=n*jt,it+=n*Jt,n=t[10],y+=n*Q,m+=n*j,x+=n*J,b+=n*ct,w+=n*ft,C+=n*ut,A+=n*ht,B+=n*lt,L+=n*$t,R+=n*Wt,D+=n*Yt,O+=n*Xt,G+=n*Zt,z+=n*Qt,it+=n*jt,gt+=n*Jt,n=t[11],m+=n*Q,x+=n*j,b+=n*J,w+=n*ct,C+=n*ft,A+=n*ut,B+=n*ht,L+=n*lt,R+=n*$t,D+=n*Wt,O+=n*Yt,G+=n*Xt,z+=n*Zt,it+=n*Qt,gt+=n*jt,M+=n*Jt,n=t[12],x+=n*Q,b+=n*j,w+=n*J,C+=n*ct,A+=n*ft,B+=n*ut,L+=n*ht,R+=n*lt,D+=n*$t,O+=n*Wt,G+=n*Yt,z+=n*Xt,it+=n*Zt,gt+=n*Qt,M+=n*jt,H+=n*Jt,n=t[13],b+=n*Q,w+=n*j,C+=n*J,A+=n*ct,B+=n*ft,L+=n*ut,R+=n*ht,D+=n*lt,O+=n*$t,G+=n*Wt,z+=n*Yt,it+=n*Xt,gt+=n*Zt,M+=n*Qt,H+=n*jt,S+=n*Jt,n=t[14],w+=n*Q,C+=n*j,A+=n*J,B+=n*ct,L+=n*ft,R+=n*ut,D+=n*ht,O+=n*lt,G+=n*$t,z+=n*Wt,it+=n*Yt,gt+=n*Xt,M+=n*Zt,H+=n*Qt,S+=n*jt,V+=n*Jt,n=t[15],C+=n*Q,A+=n*j,B+=n*J,L+=n*ct,R+=n*ft,D+=n*ut,O+=n*ht,G+=n*lt,z+=n*$t,it+=n*Wt,gt+=n*Yt,M+=n*Xt,H+=n*Zt,S+=n*Qt,V+=n*jt,bt+=n*Jt,o+=38*A,s+=38*B,a+=38*L,c+=38*R,f+=38*D,u+=38*O,h+=38*G,l+=38*z,d+=38*it,p+=38*gt,y+=38*M,m+=38*H,x+=38*S,b+=38*V,w+=38*bt,i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,o+=i-1+37*(i-1),i=1,n=o+i+65535,i=Math.floor(n/65536),o=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=c+i+65535,i=Math.floor(n/65536),c=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=p+i+65535,i=Math.floor(n/65536),p=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=x+i+65535,i=Math.floor(n/65536),x=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=C+i+65535,i=Math.floor(n/65536),C=n-i*65536,o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=a,e[3]=c,e[4]=f,e[5]=u,e[6]=h,e[7]=l,e[8]=d,e[9]=p,e[10]=y,e[11]=m,e[12]=x,e[13]=b,e[14]=w,e[15]=C}function Kn(e,t){je(e,t,t)}function vd(e,t){let r=Pe();for(let n=0;n<16;n++)r[n]=t[n];for(let n=253;n>=0;n--)Kn(r,r),n!==2&&n!==4&&je(r,r,t);for(let n=0;n<16;n++)e[n]=r[n]}function us(e,t){let r=new Uint8Array(32),n=new Float64Array(80),i=Pe(),o=Pe(),s=Pe(),a=Pe(),c=Pe(),f=Pe();for(let d=0;d<31;d++)r[d]=e[d];r[31]=e[31]&127|64,r[0]&=248,xd(n,t);for(let d=0;d<16;d++)o[d]=n[d];i[0]=a[0]=1;for(let d=254;d>=0;--d){let p=r[d>>>3]>>>(d&7)&1;Dn(i,o,p),Dn(s,a,p),Ki(c,i,s),Fi(i,i,s),Ki(s,o,a),Fi(o,o,a),Kn(a,c),Kn(f,i),je(i,s,i),je(s,o,c),Ki(c,i,s),Fi(i,i,s),Kn(o,i),Fi(s,a,f),je(i,s,gd),Ki(i,i,a),je(s,s,i),je(i,a,f),je(a,o,n),Kn(o,c),Dn(i,o,p),Dn(s,a,p)}for(let d=0;d<16;d++)n[d+16]=i[d],n[d+32]=s[d],n[d+48]=o[d],n[d+64]=a[d];let u=n.subarray(32),h=n.subarray(16);vd(u,u),je(h,h,u);let l=new Uint8Array(32);return md(l,h),l}Lt.scalarMult=us;function nc(e){return us(e,rc)}Lt.scalarMultBase=nc;function ic(e){if(e.length!==Lt.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${Lt.SECRET_KEY_LENGTH} bytes`);let t=new Uint8Array(e);return{publicKey:nc(t),secretKey:t}}Lt.generateKeyPairFromSeed=ic;function wd(e){let t=(0,dd.randomBytes)(32,e),r=ic(t);return(0,yd.wipe)(t),r}Lt.generateKeyPair=wd;function bd(e,t,r=!1){if(e.length!==Lt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(t.length!==Lt.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");let n=us(e,t);if(r){let i=0;for(let o=0;o<n.length;o++)i|=n[o];if(i===0)throw new Error("X25519: invalid shared key")}return n}Lt.sharedKey=bd});var vt=k((ow,yc)=>{yc.exports={options:{usePureJavaScript:!1}}});var xc=k((sw,mc)=>{var gs={};mc.exports=gs;var gc={};gs.encode=function(e,t,r){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(e instanceof Uint8Array))n=Sd(e,t);else{var i=0,o=t.length,s=t.charAt(0),a=[0];for(i=0;i<e.length;++i){for(var c=0,f=e[i];c<a.length;++c)f+=a[c]<<8,a[c]=f%o,f=f/o|0;for(;f>0;)a.push(f%o),f=f/o|0}for(i=0;e[i]===0&&i<e.length-1;++i)n+=s;for(i=a.length-1;i>=0;--i)n+=t[a[i]]}if(r){var u=new RegExp(".{1,"+r+"}","g");n=n.match(u).join(`\r
`)}return n};gs.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var r=gc[t];if(!r){r=gc[t]=[];for(var n=0;n<t.length;++n)r[t.charCodeAt(n)]=n}e=e.replace(/\s/g,"");for(var i=t.length,o=t.charAt(0),s=[0],n=0;n<e.length;n++){var a=r[e.charCodeAt(n)];if(a===void 0)return;for(var c=0,f=a;c<s.length;++c)f+=s[c]*i,s[c]=f&255,f>>=8;for(;f>0;)s.push(f&255),f>>=8}for(var u=0;e[u]===o&&u<e.length-1;++u)s.push(0);return typeof Buffer<"u"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Sd(e,t){var r=0,n=t.length,i=t.charAt(0),o=[0];for(r=0;r<e.length();++r){for(var s=0,a=e.at(r);s<o.length;++s)a+=o[s]<<8,o[s]=a%n,a=a/n|0;for(;a>0;)o.push(a%n),a=a/n|0}var c="";for(r=0;e.at(r)===0&&r<e.length()-1;++r)c+=i;for(r=o.length-1;r>=0;--r)c+=t[o[r]];return c}});var Dt=k((aw,Ec)=>{var vc=vt(),wc=xc(),g=Ec.exports=vc.util=vc.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){g.nextTick=process.nextTick,typeof setImmediate=="function"?g.setImmediate=setImmediate:g.setImmediate=g.nextTick;return}if(typeof setImmediate=="function"){g.setImmediate=function(){return setImmediate.apply(void 0,arguments)},g.nextTick=function(a){return setImmediate(a)};return}if(g.setImmediate=function(a){setTimeout(a,0)},typeof window<"u"&&typeof window.postMessage=="function"){let a=function(c){if(c.source===window&&c.data===e){c.stopPropagation();var f=t.slice();t.length=0,f.forEach(function(u){u()})}};var s=a,e="forge.setImmediate",t=[];g.setImmediate=function(c){t.push(c),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",a,!0)}if(typeof MutationObserver<"u"){var r=Date.now(),n=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var c=t.slice();t.length=0,c.forEach(function(f){f()})}).observe(i,{attributes:!0});var o=g.setImmediate;g.setImmediate=function(c){Date.now()-r>15?(r=Date.now(),o(c)):(t.push(c),t.length===1&&i.setAttribute("a",n=!n))}}g.nextTick=g.setImmediate})();g.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;g.globalScope=function(){return g.isNodejs?globalThis:typeof self>"u"?window:self}();g.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};g.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};g.isArrayBufferView=function(e){return e&&g.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function On(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}g.ByteBuffer=ms;function ms(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if(g.isArrayBuffer(e)||g.isArrayBufferView(e))if(typeof Buffer<"u"&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var r=0;r<t.length;++r)this.putByte(t[r])}}else(e instanceof ms||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}g.ByteStringBuffer=ms;var Ad=4096;g.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>Ad&&(this.data.substr(0,1),this._constructedStringLength=0)};g.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};g.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};g.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};g.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this};g.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};g.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(g.encodeUtf8(e))};g.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};g.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};g.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};g.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};g.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};g.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};g.ByteStringBuffer.prototype.putInt=function(e,t){On(t);var r="";do t-=8,r+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(r)};g.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};g.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};g.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};g.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};g.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};g.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};g.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};g.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};g.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};g.ByteStringBuffer.prototype.getInt=function(e){On(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};g.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};g.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};g.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};g.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};g.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};g.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};g.ByteStringBuffer.prototype.copy=function(){var e=g.createBuffer(this.data);return e.read=this.read,e};g.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};g.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};g.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};g.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};g.ByteStringBuffer.prototype.toString=function(){return g.decodeUtf8(this.bytes())};function Bd(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var r=g.isArrayBuffer(e),n=g.isArrayBufferView(e);if(r||n){r?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}g.DataBuffer=Bd;g.DataBuffer.prototype.length=function(){return this.write-this.read};g.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};g.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this};g.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};g.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this};g.DataBuffer.prototype.putBytes=function(e,t){if(g.isArrayBufferView(e)){var r=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(g.isArrayBuffer(e)){var r=new Uint8Array(e);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(e instanceof g.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&g.isArrayBufferView(e.data)){var r=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(r.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(e instanceof g.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var o;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.hex.decode(e,o,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.base64.decode(e,o,this.write),this;if(t==="utf8"&&(e=g.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=g.binary.raw.decode(o),this;if(t==="utf16")return this.accommodate(e.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=g.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};g.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};g.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};g.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};g.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};g.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};g.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};g.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};g.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};g.DataBuffer.prototype.putInt=function(e,t){On(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};g.DataBuffer.prototype.putSignedInt=function(e,t){return On(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};g.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};g.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};g.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};g.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};g.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};g.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};g.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};g.DataBuffer.prototype.getInt=function(e){On(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};g.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t};g.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};g.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};g.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};g.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};g.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};g.DataBuffer.prototype.copy=function(){return new g.DataBuffer(this)};g.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};g.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};g.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};g.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e};g.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return g.binary.raw.encode(t);if(e==="hex")return g.binary.hex.encode(t);if(e==="base64")return g.binary.base64.encode(t);if(e==="utf8")return g.text.utf8.decode(t);if(e==="utf16")return g.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};g.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=g.encodeUtf8(e)),new g.ByteBuffer(e)};g.fillString=function(e,t){for(var r="";t>0;)t&1&&(r+=e),t>>>=1,t>0&&(e+=e);return r};g.xorBytes=function(e,t,r){for(var n="",i="",o="",s=0,a=0;r>0;--r,++s)i=e.charCodeAt(s)^t.charCodeAt(s),a>=10&&(n+=o,o="",a=0),o+=String.fromCharCode(i),++a;return n+=o,n};g.hexToBytes=function(e){var t="",r=0;for(e.length&!0&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t};g.bytesToHex=function(e){return g.createBuffer(e).toHex()};g.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var ur="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",hr=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],bc="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";g.encode64=function(e,t){for(var r="",n="",i,o,s,a=0;a<e.length;)i=e.charCodeAt(a++),o=e.charCodeAt(a++),s=e.charCodeAt(a++),r+=ur.charAt(i>>2),r+=ur.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=ur.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":ur.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};g.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",r,n,i,o,s=0;s<e.length;)r=hr[e.charCodeAt(s++)-43],n=hr[e.charCodeAt(s++)-43],i=hr[e.charCodeAt(s++)-43],o=hr[e.charCodeAt(s++)-43],t+=String.fromCharCode(r<<2|n>>4),i!==64&&(t+=String.fromCharCode((n&15)<<4|i>>2),o!==64&&(t+=String.fromCharCode((i&3)<<6|o)));return t};g.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};g.decodeUtf8=function(e){return decodeURIComponent(escape(e))};g.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:wc.encode,decode:wc.decode}};g.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};g.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,o=0;o<e.length;++o)n[i++]=e.charCodeAt(o);return t?i-r:n};g.binary.hex.encode=g.bytesToHex;g.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2))),r=r||0;var i=0,o=r;for(e.length&1&&(i=1,n[o++]=parseInt(e[0],16));i<e.length;i+=2)n[o++]=parseInt(e.substr(i,2),16);return t?o-r:n};g.binary.base64.encode=function(e,t){for(var r="",n="",i,o,s,a=0;a<e.byteLength;)i=e[a++],o=e[a++],s=e[a++],r+=ur.charAt(i>>2),r+=ur.charAt((i&3)<<4|o>>4),isNaN(o)?r+="==":(r+=ur.charAt((o&15)<<2|s>>6),r+=isNaN(s)?"=":ur.charAt(s&63)),t&&r.length>t&&(n+=r.substr(0,t)+`\r
`,r=r.substr(t));return n+=r,n};g.binary.base64.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,o,s,a,c=0,f=r;c<e.length;)i=hr[e.charCodeAt(c++)-43],o=hr[e.charCodeAt(c++)-43],s=hr[e.charCodeAt(c++)-43],a=hr[e.charCodeAt(c++)-43],n[f++]=i<<2|o>>4,s!==64&&(n[f++]=(o&15)<<4|s>>2,a!==64&&(n[f++]=(s&3)<<6|a));return t?f-r:n.subarray(0,f)};g.binary.base58.encode=function(e,t){return g.binary.baseN.encode(e,bc,t)};g.binary.base58.decode=function(e,t){return g.binary.baseN.decode(e,bc,t)};g.text={utf8:{},utf16:{}};g.text.utf8.encode=function(e,t,r){e=g.encodeUtf8(e);var n=t;n||(n=new Uint8Array(e.length)),r=r||0;for(var i=r,o=0;o<e.length;++o)n[i++]=e.charCodeAt(o);return t?i-r:n};g.text.utf8.decode=function(e){return g.decodeUtf8(String.fromCharCode.apply(null,e))};g.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var o=r,s=r,a=0;a<e.length;++a)i[s++]=e.charCodeAt(a),o+=2;return t?o-r:n};g.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};g.deflate=function(e,t,r){if(t=g.decode64(e.deflate(g.encode64(t)).rval),r){var n=2,i=t.charCodeAt(1);i&32&&(n=6),t=t.substring(n,t.length-4)}return t};g.inflate=function(e,t,r){var n=e.inflate(g.encode64(t)).rval;return n===null?null:g.decode64(n)};var xs=function(e,t,r){if(!e)throw new Error("WebStorage not available.");var n;if(r===null?n=e.removeItem(t):(r=g.encode64(JSON.stringify(r)),n=e.setItem(t,r)),typeof n<"u"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},vs=function(e,t){if(!e)throw new Error("WebStorage not available.");var r=e.getItem(t);if(e.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(g.decode64(r))),r},Cd=function(e,t,r,n){var i=vs(e,t);i===null&&(i={}),i[r]=n,xs(e,t,i)},_d=function(e,t,r){var n=vs(e,t);return n!==null&&(n=r in n?n[r]:null),n},Id=function(e,t,r){var n=vs(e,t);if(n!==null&&r in n){delete n[r];var i=!0;for(var o in n){i=!1;break}i&&(n=null),xs(e,t,n)}},Td=function(e,t){xs(e,t,null)},Mi=function(e,t,r){var n=null;typeof r>"u"&&(r=["web","flash"]);var i,o=!1,s=null;for(var a in r){i=r[a];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");n=e.apply(this,t),o=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,n=e.apply(this,t),o=!0)}catch(c){s=c}if(o)break}if(!o)throw s;return n};g.setItem=function(e,t,r,n,i){Mi(Cd,arguments,i)};g.getItem=function(e,t,r,n){return Mi(_d,arguments,n)};g.removeItem=function(e,t,r,n){Mi(Id,arguments,n)};g.clearItems=function(e,t,r){Mi(Td,arguments,r)};g.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};g.format=function(e){for(var t=/%./g,r,n,i=0,o=[],s=0;r=t.exec(e);){n=e.substring(s,t.lastIndex-2),n.length>0&&o.push(n),s=t.lastIndex;var a=r[0][1];switch(a){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+a+"?>")}}return o.push(e.substring(s)),o.join("")};g.formatNumber=function(e,t,r,n){var i=e,o=isNaN(t=Math.abs(t))?2:t,s=r===void 0?",":r,a=n===void 0?".":n,c=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",u=f.length>3?f.length%3:0;return c+(u?f.substr(0,u)+a:"")+f.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+a)+(o?s+Math.abs(i-f).toFixed(o).slice(2):"")};g.formatSize=function(e){return e>=1073741824?e=g.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=g.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=g.formatNumber(e/1024,0)+" KiB":e=g.formatNumber(e,0)+" bytes",e};g.bytesFromIP=function(e){return e.indexOf(".")!==-1?g.bytesFromIPv4(e):e.indexOf(":")!==-1?g.bytesFromIPv6(e):null};g.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=g.createBuffer(),r=0;r<e.length;++r){var n=parseInt(e[r],10);if(isNaN(n))return null;t.putByte(n)}return t.getBytes()};g.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var r=(8-e.length+t)*2,n=g.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){n.fillWithByte(0,r),r=0;continue}var o=g.hexToBytes(e[i]);o.length<2&&n.putByte(0),n.putBytes(o)}return n.getBytes()};g.bytesToIP=function(e){return e.length===4?g.bytesToIPv4(e):e.length===16?g.bytesToIPv6(e):null};g.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")};g.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],r=[],n=0,i=0;i<e.length;i+=2){for(var o=g.bytesToHex(e[i]+e[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var s=r[r.length-1],a=t.length;!s||a!==s.end+1?r.push({start:a,end:a}):(s.end=a,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}t.push(o)}if(r.length>0){var c=r[n];c.end-c.start>0&&(t.splice(c.start,c.end-c.start+1,""),c.start===0&&t.unshift(""),c.end===7&&t.push(""))}return t.join(":")};g.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in g&&!e.update)return t(null,g.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return g.cores=navigator.hardwareConcurrency,t(null,g.cores);if(typeof Worker>"u")return g.cores=1,t(null,g.cores);if(typeof Blob>"u")return g.cores=2,t(null,g.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var a=Date.now(),c=a+4;Date.now()<c;);self.postMessage({st:a,et:c})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,a,c){if(a===0){var f=Math.floor(s.reduce(function(u,h){return u+h},0)/s.length);return g.cores=Math.max(1,f),URL.revokeObjectURL(r),t(null,g.cores)}i(c,function(u,h){s.push(o(c,h)),n(s,a-1,c)})}function i(s,a){for(var c=[],f=[],u=0;u<s;++u){var h=new Worker(r);h.addEventListener("message",function(l){if(f.push(l.data),f.length===s){for(var d=0;d<s;++d)c[d].terminate();a(null,f)}}),c.push(h)}for(var u=0;u<s;++u)c[u].postMessage(u)}function o(s,a){for(var c=[],f=0;f<s;++f)for(var u=a[f],h=c[f]=[],l=0;l<s;++l)if(f!==l){var d=a[l];(u.st>d.st&&u.st<d.et||d.st>u.st&&d.st<u.et)&&h.push(l)}return c.reduce(function(p,y){return Math.max(p,y.length)},0)}}});var Oi=k((cw,Sc)=>{var Vn=vt();Vn.pki=Vn.pki||{};var ws=Sc.exports=Vn.pki.oids=Vn.oids=Vn.oids||{};function T(e,t){ws[e]=t,ws[t]=e}function dt(e,t){ws[e]=t}T("1.2.840.113549.1.1.1","rsaEncryption");T("1.2.840.113549.1.1.4","md5WithRSAEncryption");T("1.2.840.113549.1.1.5","sha1WithRSAEncryption");T("1.2.840.113549.1.1.7","RSAES-OAEP");T("1.2.840.113549.1.1.8","mgf1");T("1.2.840.113549.1.1.9","pSpecified");T("1.2.840.113549.1.1.10","RSASSA-PSS");T("1.2.840.113549.1.1.11","sha256WithRSAEncryption");T("1.2.840.113549.1.1.12","sha384WithRSAEncryption");T("1.2.840.113549.1.1.13","sha512WithRSAEncryption");T("1.3.101.112","EdDSA25519");T("1.2.840.10040.4.3","dsa-with-sha1");T("1.3.14.3.2.7","desCBC");T("1.3.14.3.2.26","sha1");T("1.3.14.3.2.29","sha1WithRSASignature");T("2.16.840.1.101.3.4.2.1","sha256");T("2.16.840.1.101.3.4.2.2","sha384");T("2.16.840.1.101.3.4.2.3","sha512");T("2.16.840.1.101.3.4.2.4","sha224");T("2.16.840.1.101.3.4.2.5","sha512-224");T("2.16.840.1.101.3.4.2.6","sha512-256");T("1.2.840.113549.2.2","md2");T("1.2.840.113549.2.5","md5");T("1.2.840.113549.1.7.1","data");T("1.2.840.113549.1.7.2","signedData");T("1.2.840.113549.1.7.3","envelopedData");T("1.2.840.113549.1.7.4","signedAndEnvelopedData");T("1.2.840.113549.1.7.5","digestedData");T("1.2.840.113549.1.7.6","encryptedData");T("1.2.840.113549.1.9.1","emailAddress");T("1.2.840.113549.1.9.2","unstructuredName");T("1.2.840.113549.1.9.3","contentType");T("1.2.840.113549.1.9.4","messageDigest");T("1.2.840.113549.1.9.5","signingTime");T("1.2.840.113549.1.9.6","counterSignature");T("1.2.840.113549.1.9.7","challengePassword");T("1.2.840.113549.1.9.8","unstructuredAddress");T("1.2.840.113549.1.9.14","extensionRequest");T("1.2.840.113549.1.9.20","friendlyName");T("1.2.840.113549.1.9.21","localKeyId");T("1.2.840.113549.1.9.22.1","x509Certificate");T("1.2.840.113549.1.12.10.1.1","keyBag");T("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");T("1.2.840.113549.1.12.10.1.3","certBag");T("1.2.840.113549.1.12.10.1.4","crlBag");T("1.2.840.113549.1.12.10.1.5","secretBag");T("1.2.840.113549.1.12.10.1.6","safeContentsBag");T("1.2.840.113549.1.5.13","pkcs5PBES2");T("1.2.840.113549.1.5.12","pkcs5PBKDF2");T("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");T("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");T("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");T("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");T("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");T("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");T("1.2.840.113549.2.7","hmacWithSHA1");T("1.2.840.113549.2.8","hmacWithSHA224");T("1.2.840.113549.2.9","hmacWithSHA256");T("1.2.840.113549.2.10","hmacWithSHA384");T("1.2.840.113549.2.11","hmacWithSHA512");T("1.2.840.113549.3.7","des-EDE3-CBC");T("2.16.840.1.101.3.4.1.2","aes128-CBC");T("2.16.840.1.101.3.4.1.22","aes192-CBC");T("2.16.840.1.101.3.4.1.42","aes256-CBC");T("2.5.4.3","commonName");T("2.5.4.4","surname");T("2.5.4.5","serialNumber");T("2.5.4.6","countryName");T("2.5.4.7","localityName");T("2.5.4.8","stateOrProvinceName");T("2.5.4.9","streetAddress");T("2.5.4.10","organizationName");T("2.5.4.11","organizationalUnitName");T("2.5.4.12","title");T("2.5.4.13","description");T("2.5.4.15","businessCategory");T("2.5.4.17","postalCode");T("2.5.4.42","givenName");T("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");T("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");T("2.16.840.1.113730.1.1","nsCertType");T("2.16.840.1.113730.1.13","nsComment");dt("2.5.29.1","authorityKeyIdentifier");dt("2.5.29.2","keyAttributes");dt("2.5.29.3","certificatePolicies");dt("2.5.29.4","keyUsageRestriction");dt("2.5.29.5","policyMapping");dt("2.5.29.6","subtreesConstraint");dt("2.5.29.7","subjectAltName");dt("2.5.29.8","issuerAltName");dt("2.5.29.9","subjectDirectoryAttributes");dt("2.5.29.10","basicConstraints");dt("2.5.29.11","nameConstraints");dt("2.5.29.12","policyConstraints");dt("2.5.29.13","basicConstraints");T("2.5.29.14","subjectKeyIdentifier");T("2.5.29.15","keyUsage");dt("2.5.29.16","privateKeyUsagePeriod");T("2.5.29.17","subjectAltName");T("2.5.29.18","issuerAltName");T("2.5.29.19","basicConstraints");dt("2.5.29.20","cRLNumber");dt("2.5.29.21","cRLReason");dt("2.5.29.22","expirationDate");dt("2.5.29.23","instructionCode");dt("2.5.29.24","invalidityDate");dt("2.5.29.25","cRLDistributionPoints");dt("2.5.29.26","issuingDistributionPoint");dt("2.5.29.27","deltaCRLIndicator");dt("2.5.29.28","issuingDistributionPoint");dt("2.5.29.29","certificateIssuer");dt("2.5.29.30","nameConstraints");T("2.5.29.31","cRLDistributionPoints");T("2.5.29.32","certificatePolicies");dt("2.5.29.33","policyMappings");dt("2.5.29.34","policyConstraints");T("2.5.29.35","authorityKeyIdentifier");dt("2.5.29.36","policyConstraints");T("2.5.29.37","extKeyUsage");dt("2.5.29.46","freshestCRL");dt("2.5.29.54","inhibitAnyPolicy");T("1.3.6.1.4.1.11129.2.4.2","timestampList");T("1.3.6.1.5.5.7.1.1","authorityInfoAccess");T("1.3.6.1.5.5.7.3.1","serverAuth");T("1.3.6.1.5.5.7.3.2","clientAuth");T("1.3.6.1.5.5.7.3.3","codeSigning");T("1.3.6.1.5.5.7.3.4","emailProtection");T("1.3.6.1.5.5.7.3.8","timeStamping")});var qn=k((fw,Bc)=>{var St=vt();Dt();Oi();var P=Bc.exports=St.asn1=St.asn1||{};P.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};P.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};P.create=function(e,t,r,n,i){if(St.util.isArray(n)){for(var o=[],s=0;s<n.length;++s)n[s]!==void 0&&o.push(n[s]);n=o}var a={tagClass:e,type:t,constructed:r,composed:r||St.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(a.bitStringContents=i.bitStringContents,a.original=P.copy(a)),a};P.copy=function(e,t){var r;if(St.util.isArray(e)){r=[];for(var n=0;n<e.length;++n)r.push(P.copy(e[n],t));return r}return typeof e=="string"?e:(r={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:P.copy(e.value,t)},t&&!t.excludeBitStringContents&&(r.bitStringContents=e.bitStringContents),r)};P.equals=function(e,t,r){if(St.util.isArray(e)){if(!St.util.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!P.equals(e[n],t[n]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&P.equals(e.value,t.value);return r&&r.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};P.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var r,n=t&128;return n?r=e.getInt((t&127)<<3):r=t,r}};function Hn(e,t,r){if(r>t){var n=new Error("Too few bytes to parse DER.");throw n.available=e.length(),n.remaining=t,n.requested=r,n}}var Ld=function(e,t){var r=e.getByte();if(t--,r!==128){var n,i=r&128;if(!i)n=r;else{var o=r&127;Hn(e,t,o),n=e.getInt(o<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};P.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=St.util.createBuffer(e));var r=e.length(),n=Vi(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=e.length(),i}return n};function Vi(e,t,r,n){var i;Hn(e,t,2);var o=e.getByte();t--;var s=o&192,a=o&31;i=e.length();var c=Ld(e,t);if(t-=i-e.length(),c!==void 0&&c>t){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=e.length(),f.remaining=t,f.requested=c,f}c=t}var u,h,l=(o&32)===32;if(l)if(u=[],c===void 0)for(;;){if(Hn(e,t,2),e.bytes(2)===String.fromCharCode(0,0)){e.getBytes(2),t-=2;break}i=e.length(),u.push(Vi(e,t,r+1,n)),t-=i-e.length()}else for(;c>0;)i=e.length(),u.push(Vi(e,c,r+1,n)),t-=i-e.length(),c-=i-e.length();if(u===void 0&&s===P.Class.UNIVERSAL&&a===P.Type.BITSTRING&&(h=e.bytes(c)),u===void 0&&n.decodeBitStrings&&s===P.Class.UNIVERSAL&&a===P.Type.BITSTRING&&c>1){var d=e.read,p=t,y=0;if(a===P.Type.BITSTRING&&(Hn(e,t,1),y=e.getByte(),t--),y===0)try{i=e.length();var m={strict:!0,decodeBitStrings:!0},x=Vi(e,t,r+1,m),b=i-e.length();t-=b,a==P.Type.BITSTRING&&b++;var w=x.tagClass;b===c&&(w===P.Class.UNIVERSAL||w===P.Class.CONTEXT_SPECIFIC)&&(u=[x])}catch{}u===void 0&&(e.read=d,t=p)}if(u===void 0){if(c===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=t}if(a===P.Type.BMPSTRING)for(u="";c>0;c-=2)Hn(e,t,2),u+=String.fromCharCode(e.getInt16()),t-=2;else u=e.getBytes(c),t-=c}var C=h===void 0?null:{bitStringContents:h};return P.create(s,a,l,u,C)}P.toDer=function(e){var t=St.util.createBuffer(),r=e.tagClass|e.type,n=St.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=P.equals(e,e.original))),i)n.putBytes(e.bitStringContents);else if(e.composed){e.constructed?r|=32:n.putByte(0);for(var o=0;o<e.value.length;++o)e.value[o]!==void 0&&n.putBuffer(P.toDer(e.value[o]))}else if(e.type===P.Type.BMPSTRING)for(var o=0;o<e.value.length;++o)n.putInt16(e.value.charCodeAt(o));else e.type===P.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?n.putBytes(e.value.substr(1)):n.putBytes(e.value);if(t.putByte(r),n.length()<=127)t.putByte(n.length()&127);else{var s=n.length(),a="";do a+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(a.length|128);for(var o=a.length-1;o>=0;--o)t.putByte(a.charCodeAt(o))}return t.putBuffer(n),t};P.oidToDer=function(e){var t=e.split("."),r=St.util.createBuffer();r.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var n,i,o,s,a=2;a<t.length;++a){n=!0,i=[],o=parseInt(t[a],10);do s=o&127,o=o>>>7,n||(s|=128),i.push(s),n=!1;while(o>0);for(var c=i.length-1;c>=0;--c)r.putByte(i[c])}return r};P.derToOid=function(e){var t;typeof e=="string"&&(e=St.util.createBuffer(e));var r=e.getByte();t=Math.floor(r/40)+"."+r%40;for(var n=0;e.length()>0;)r=e.getByte(),n=n<<7,r&128?n+=r&127:(t+="."+(n+r),n=0);return t};P.utcTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),o=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),a=0;if(e.length>11){var c=e.charAt(10),f=10;c!=="+"&&c!=="-"&&(a=parseInt(e.substr(10,2),10),f+=2)}if(t.setUTCFullYear(r,n,i),t.setUTCHours(o,s,a,0),f&&(c=e.charAt(f),c==="+"||c==="-")){var u=parseInt(e.substr(f+1,2),10),h=parseInt(e.substr(f+4,2),10),l=u*60+h;l*=6e4,c==="+"?t.setTime(+t-l):t.setTime(+t+l)}return t};P.generalizedTimeToDate=function(e){var t=new Date,r=parseInt(e.substr(0,4),10),n=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),o=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),a=parseInt(e.substr(12,2),10),c=0,f=0,u=!1;e.charAt(e.length-1)==="Z"&&(u=!0);var h=e.length-5,l=e.charAt(h);if(l==="+"||l==="-"){var d=parseInt(e.substr(h+1,2),10),p=parseInt(e.substr(h+4,2),10);f=d*60+p,f*=6e4,l==="+"&&(f*=-1),u=!0}return e.charAt(14)==="."&&(c=parseFloat(e.substr(14),10)*1e3),u?(t.setUTCFullYear(r,n,i),t.setUTCHours(o,s,a,c),t.setTime(+t+f)):(t.setFullYear(r,n,i),t.setHours(o,s,a,c)),t};P.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push((""+e.getUTCFullYear()).substr(2)),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};P.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",r=[];r.push(""+e.getUTCFullYear()),r.push(""+(e.getUTCMonth()+1)),r.push(""+e.getUTCDate()),r.push(""+e.getUTCHours()),r.push(""+e.getUTCMinutes()),r.push(""+e.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(t+="0"),t+=r[n];return t+="Z",t};P.integerToDer=function(e){var t=St.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=e,r};P.derToInteger=function(e){typeof e=="string"&&(e=St.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};P.validate=function(e,t,r,n){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&St.util.isArray(t.value))for(var o=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[o]&&(i=P.validate(e.value[o],t.value[s],r,n),i?++o:t.value[s].optional&&(i=!0)),!i&&n&&n.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&r&&(t.capture&&(r[t.capture]=e.value),t.captureAsn1&&(r[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(r[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e)){var a;if(e.bitStringContents.length<2)r[t.captureBitStringValue]="";else{var c=e.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[t.captureBitStringValue]=e.bitStringContents.slice(1)}}}else n&&n.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else n&&(e.tagClass!==t.tagClass&&n.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&n.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var Ac=/[^\\u0000-\\u00ff]/;P.prettyPrint=function(e,t,r){var n="";t=t||0,r=r||2,t>0&&(n+=`
`);for(var i="",o=0;o<t*r;++o)i+=" ";switch(n+=i+"Tag: ",e.tagClass){case P.Class.UNIVERSAL:n+="Universal:";break;case P.Class.APPLICATION:n+="Application:";break;case P.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case P.Class.PRIVATE:n+="Private:";break}if(e.tagClass===P.Class.UNIVERSAL)switch(n+=e.type,e.type){case P.Type.NONE:n+=" (None)";break;case P.Type.BOOLEAN:n+=" (Boolean)";break;case P.Type.INTEGER:n+=" (Integer)";break;case P.Type.BITSTRING:n+=" (Bit string)";break;case P.Type.OCTETSTRING:n+=" (Octet string)";break;case P.Type.NULL:n+=" (Null)";break;case P.Type.OID:n+=" (Object Identifier)";break;case P.Type.ODESC:n+=" (Object Descriptor)";break;case P.Type.EXTERNAL:n+=" (External or Instance of)";break;case P.Type.REAL:n+=" (Real)";break;case P.Type.ENUMERATED:n+=" (Enumerated)";break;case P.Type.EMBEDDED:n+=" (Embedded PDV)";break;case P.Type.UTF8:n+=" (UTF8)";break;case P.Type.ROID:n+=" (Relative Object Identifier)";break;case P.Type.SEQUENCE:n+=" (Sequence)";break;case P.Type.SET:n+=" (Set)";break;case P.Type.PRINTABLESTRING:n+=" (Printable String)";break;case P.Type.IA5String:n+=" (IA5String (ASCII))";break;case P.Type.UTCTIME:n+=" (UTC time)";break;case P.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case P.Type.BMPSTRING:n+=" (BMP String)";break}else n+=e.type;if(n+=`
`,n+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,a="",o=0;o<e.value.length;++o)e.value[o]!==void 0&&(s+=1,a+=P.prettyPrint(e.value[o],t+1,r),o+1<e.value.length&&(a+=","));n+=i+"Sub values: "+s+a}else{if(n+=i+"Value: ",e.type===P.Type.OID){var c=P.derToOid(e.value);n+=c,St.pki&&St.pki.oids&&c in St.pki.oids&&(n+=" ("+St.pki.oids[c]+") ")}if(e.type===P.Type.INTEGER)try{n+=P.derToInteger(e.value)}catch{n+="0x"+St.util.bytesToHex(e.value)}else if(e.type===P.Type.BITSTRING){if(e.value.length>1?n+="0x"+St.util.bytesToHex(e.value.slice(1)):n+="(none)",e.value.length>0){var f=e.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else if(e.type===P.Type.OCTETSTRING)Ac.test(e.value)||(n+="("+e.value+") "),n+="0x"+St.util.bytesToHex(e.value);else if(e.type===P.Type.UTF8)try{n+=St.util.decodeUtf8(e.value)}catch(u){if(u.message==="URI malformed")n+="0x"+St.util.bytesToHex(e.value)+" (malformed UTF8)";else throw u}else e.type===P.Type.PRINTABLESTRING||e.type===P.Type.IA5String?n+=e.value:Ac.test(e.value)?n+="0x"+St.util.bytesToHex(e.value):e.value.length===0?n+="[null]":n+=e.value}return n}});var Es=k((uw,Cc)=>{var Mt=vt();Dt();Cc.exports=Mt.cipher=Mt.cipher||{};Mt.cipher.algorithms=Mt.cipher.algorithms||{};Mt.cipher.createCipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Mt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Mt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!1})};Mt.cipher.createDecipher=function(e,t){var r=e;if(typeof r=="string"&&(r=Mt.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+e);return new Mt.cipher.BlockCipher({algorithm:r,key:t,decrypt:!0})};Mt.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),Mt.cipher.algorithms[e]=t};Mt.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in Mt.cipher.algorithms?Mt.cipher.algorithms[e]:null};var bs=Mt.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};bs.prototype.start=function(e){e=e||{};var t={};for(var r in e)t[r]=e[r];t.decrypt=this._decrypt,this._finish=!1,this._input=Mt.util.createBuffer(),this.output=e.output||Mt.util.createBuffer(),this.mode.start(t)};bs.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};bs.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return e(this.blockSize,r,!1)},this.mode.unpad=function(r){return e(this.blockSize,r,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))}});var As=k((hw,_c)=>{var Ot=vt();Dt();Ot.cipher=Ot.cipher||{};var X=_c.exports=Ot.cipher.modes=Ot.cipher.modes||{};X.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};X.ecb.prototype.start=function(e){};X.ecb.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};X.ecb.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n])};X.ecb.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};X.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};X.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};X.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=Hi(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};X.cbc.prototype.encrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._outBlock[n]);this._prev=this._outBlock};X.cbc.prototype.decrypt=function(e,t,r){if(e.length()<this.blockSize&&!(r&&e.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)t.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};X.cbc.prototype.pad=function(e,t){var r=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(r,r),!0};X.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var r=e.length(),n=e.at(r-1);return n>this.blockSize<<2?!1:(e.truncate(n),!0)};X.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Ot.util.createBuffer(),this._partialBytes=0};X.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Hi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};X.cfb.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};X.cfb.prototype.decrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};X.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ot.util.createBuffer(),this._partialBytes=0};X.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Hi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};X.ofb.prototype.encrypt=function(e,t,r){var n=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(o>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};X.ofb.prototype.decrypt=X.ofb.prototype.encrypt;X.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Ot.util.createBuffer(),this._partialBytes=0};X.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=Hi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};X.ctr.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(o>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}qi(this._inBlock)};X.ctr.prototype.decrypt=X.ctr.prototype.encrypt;X.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Ot.util.createBuffer(),this._partialBytes=0,this._R=3774873600};X.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=Ot.util.createBuffer(e.iv);this._cipherLength=0;var r;if("additionalData"in e?r=Ot.util.createBuffer(e.additionalData):r=Ot.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=Ot.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=t.length();if(n===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Ss(n*8)))}this._inBlock=this._j0.slice(0),qi(this._inBlock),this._partialBytes=0,r=Ot.util.createBuffer(r),this._aDataLength=Ss(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};X.gcm.prototype.encrypt=function(e,t,r){var n=e.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-n)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(o<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!r)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;t.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),qi(this._inBlock)};X.gcm.prototype.decrypt=function(e,t,r){var n=e.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),qi(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};X.gcm.prototype.afterFinish=function(e,t){var r=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=Ot.util.createBuffer();var n=this._aDataLength.concat(Ss(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};X.gcm.prototype.multiply=function(e,t){for(var r=[0,0,0,0],n=t.slice(0),i=0;i<128;++i){var o=e[i/32|0]&1<<31-i%32;o&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};X.gcm.prototype.pow=function(e,t){for(var r=e[3]&1,n=3;n>0;--n)t[n]=e[n]>>>1|(e[n-1]&1)<<31;t[0]=e[0]>>>1,r&&(t[0]^=this._R)};X.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=e[n]>>>(7-r%8)*4&15,o=this._m[r][i];t[0]^=o[0],t[1]^=o[1],t[2]^=o[2],t[3]^=o[3]}return t};X.gcm.prototype.ghash=function(e,t,r){return t[0]^=r[0],t[1]^=r[1],t[2]^=r[2],t[3]^=r[3],this.tableMultiply(t)};X.gcm.prototype.generateHashTable=function(e,t){for(var r=8/t,n=4*r,i=16*r,o=new Array(i),s=0;s<i;++s){var a=[0,0,0,0],c=s/n|0,f=(n-1-s%n)*t;a[c]=1<<t-1<<f,o[s]=this.generateSubHashTable(this.multiply(a,e),t)}return o};X.gcm.prototype.generateSubHashTable=function(e,t){var r=1<<t,n=r>>>1,i=new Array(r);i[n]=e.slice(0);for(var o=n>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<n;){for(var s=1;s<o;++s){var a=i[o],c=i[s];i[o+s]=[a[0]^c[0],a[1]^c[1],a[2]^c[2],a[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=n+1;o<r;++o){var f=i[o^n];i[o]=[e[0]^f[0],e[1]^f[1],e[2]^f[2],e[3]^f[3]]}return i};function Hi(e,t){if(typeof e=="string"&&(e=Ot.util.createBuffer(e)),Ot.util.isArray(e)&&e.length>4){var r=e;e=Ot.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!Ot.util.isArray(e)){for(var i=[],o=t/4,n=0;n<o;++n)i.push(e.getInt32());e=i}return e}function qi(e){e[e.length-1]=e[e.length-1]+1&4294967295}function Ss(e){return[e/4294967296|0,e&4294967295]}});var Is=k((lw,Rc)=>{var Et=vt();Es();As();Dt();Rc.exports=Et.aes=Et.aes||{};Et.aes.startEncrypting=function(e,t,r,n){var i=zi({key:e,output:r,decrypt:!1,mode:n});return i.start(t),i};Et.aes.createEncryptionCipher=function(e,t){return zi({key:e,output:null,decrypt:!1,mode:t})};Et.aes.startDecrypting=function(e,t,r,n){var i=zi({key:e,output:r,decrypt:!0,mode:n});return i.start(t),i};Et.aes.createDecryptionCipher=function(e,t){return zi({key:e,output:null,decrypt:!0,mode:t})};Et.aes.Algorithm=function(e,t){_s||Tc();var r=this;r.name=e,r.mode=new t({blockSize:16,cipher:{encrypt:function(n,i){return Cs(r._w,n,i,!1)},decrypt:function(n,i){return Cs(r._w,n,i,!0)}}}),r._init=!1};Et.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,r;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=Et.util.createBuffer(t);else if(Et.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){r=t,t=Et.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(!Et.util.isArray(t)){r=t,t=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)t.push(r.getInt32())}}if(!Et.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=Lc(t,e.decrypt&&!s),this._init=!0}};Et.aes._expandKey=function(e,t){return _s||Tc(),Lc(e,t)};Et.aes._updateBlock=Cs;sn("AES-ECB",Et.cipher.modes.ecb);sn("AES-CBC",Et.cipher.modes.cbc);sn("AES-CFB",Et.cipher.modes.cfb);sn("AES-OFB",Et.cipher.modes.ofb);sn("AES-CTR",Et.cipher.modes.ctr);sn("AES-GCM",Et.cipher.modes.gcm);function sn(e,t){var r=function(){return new Et.aes.Algorithm(e,t)};Et.cipher.registerAlgorithm(e,r)}var _s=!1,on=4,ne,Bs,Ic,Rr,Se;function Tc(){_s=!0,Ic=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;ne=new Array(256),Bs=new Array(256),Rr=new Array(4),Se=new Array(4);for(var t=0;t<4;++t)Rr[t]=new Array(256),Se[t]=new Array(256);for(var r=0,n=0,i,o,s,a,c,f,u,t=0;t<256;++t){a=n^n<<1^n<<2^n<<3^n<<4,a=a>>8^a&255^99,ne[r]=a,Bs[a]=r,c=e[a],i=e[r],o=e[i],s=e[o],f=c<<24^a<<16^a<<8^(a^c),u=(i^o^s)<<24^(r^s)<<16^(r^o^s)<<8^(r^i^s);for(var h=0;h<4;++h)Rr[h][r]=f,Se[h][a]=u,f=f<<24|f>>>8,u=u<<24|u>>>8;r===0?r=n=1:(r=i^e[e[e[i^s]]],n^=e[e[n]])}}function Lc(e,t){for(var r=e.slice(0),n,i=1,o=r.length,s=o+6+1,a=on*s,c=o;c<a;++c)n=r[c-1],c%o===0?(n=ne[n>>>16&255]<<24^ne[n>>>8&255]<<16^ne[n&255]<<8^ne[n>>>24]^Ic[i]<<24,i++):o>6&&c%o===4&&(n=ne[n>>>24]<<24^ne[n>>>16&255]<<16^ne[n>>>8&255]<<8^ne[n&255]),r[c]=r[c-o]^n;if(t){var f,u=Se[0],h=Se[1],l=Se[2],d=Se[3],p=r.slice(0);a=r.length;for(var c=0,y=a-on;c<a;c+=on,y-=on)if(c===0||c===a-on)p[c]=r[y],p[c+1]=r[y+3],p[c+2]=r[y+2],p[c+3]=r[y+1];else for(var m=0;m<on;++m)f=r[y+m],p[c+(3&-m)]=u[ne[f>>>24]]^h[ne[f>>>16&255]]^l[ne[f>>>8&255]]^d[ne[f&255]];r=p}return r}function Cs(e,t,r,n){var i=e.length/4-1,o,s,a,c,f;n?(o=Se[0],s=Se[1],a=Se[2],c=Se[3],f=Bs):(o=Rr[0],s=Rr[1],a=Rr[2],c=Rr[3],f=ne);var u,h,l,d,p,y,m;u=t[0]^e[0],h=t[n?3:1]^e[1],l=t[2]^e[2],d=t[n?1:3]^e[3];for(var x=3,b=1;b<i;++b)p=o[u>>>24]^s[h>>>16&255]^a[l>>>8&255]^c[d&255]^e[++x],y=o[h>>>24]^s[l>>>16&255]^a[d>>>8&255]^c[u&255]^e[++x],m=o[l>>>24]^s[d>>>16&255]^a[u>>>8&255]^c[h&255]^e[++x],d=o[d>>>24]^s[u>>>16&255]^a[h>>>8&255]^c[l&255]^e[++x],u=p,h=y,l=m;r[0]=f[u>>>24]<<24^f[h>>>16&255]<<16^f[l>>>8&255]<<8^f[d&255]^e[++x],r[n?3:1]=f[h>>>24]<<24^f[l>>>16&255]<<16^f[d>>>8&255]<<8^f[u&255]^e[++x],r[2]=f[l>>>24]<<24^f[d>>>16&255]<<16^f[u>>>8&255]<<8^f[h&255]^e[++x],r[n?1:3]=f[d>>>24]<<24^f[u>>>16&255]<<16^f[h>>>8&255]<<8^f[l&255]^e[++x]}function zi(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="AES-"+t,n;e.decrypt?n=Et.cipher.createDecipher(r,e.key):n=Et.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof Et.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var Uc=k((pw,Nc)=>{var _t=vt();Es();As();Dt();Nc.exports=_t.des=_t.des||{};_t.des.startEncrypting=function(e,t,r,n){var i=Gi({key:e,output:r,decrypt:!1,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};_t.des.createEncryptionCipher=function(e,t){return Gi({key:e,output:null,decrypt:!1,mode:t})};_t.des.startDecrypting=function(e,t,r,n){var i=Gi({key:e,output:r,decrypt:!0,mode:n||(t===null?"ECB":"CBC")});return i.start(t),i};_t.des.createDecryptionCipher=function(e,t){return Gi({key:e,output:null,decrypt:!0,mode:t})};_t.des.Algorithm=function(e,t){var r=this;r.name=e,r.mode=new t({blockSize:8,cipher:{encrypt:function(n,i){return Pc(r._keys,n,i,!1)},decrypt:function(n,i){return Pc(r._keys,n,i,!0)}}}),r._init=!1};_t.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=_t.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=Md(t),this._init=!0}};Ne("DES-ECB",_t.cipher.modes.ecb);Ne("DES-CBC",_t.cipher.modes.cbc);Ne("DES-CFB",_t.cipher.modes.cfb);Ne("DES-OFB",_t.cipher.modes.ofb);Ne("DES-CTR",_t.cipher.modes.ctr);Ne("3DES-ECB",_t.cipher.modes.ecb);Ne("3DES-CBC",_t.cipher.modes.cbc);Ne("3DES-CFB",_t.cipher.modes.cfb);Ne("3DES-OFB",_t.cipher.modes.ofb);Ne("3DES-CTR",_t.cipher.modes.ctr);function Ne(e,t){var r=function(){return new _t.des.Algorithm(e,t)};_t.cipher.registerAlgorithm(e,r)}var Rd=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Pd=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Nd=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Ud=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],kd=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Dd=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],Kd=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Fd=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Md(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],a=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],l=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],d=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=e.length()>8?3:1,m=[],x=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,w,C=0;C<y;C++){var A=e.getInt32(),B=e.getInt32();w=(A>>>4^B)&252645135,B^=w,A^=w<<4,w=(B>>>-16^A)&65535,A^=w,B^=w<<-16,w=(A>>>2^B)&858993459,B^=w,A^=w<<2,w=(B>>>-16^A)&65535,A^=w,B^=w<<-16,w=(A>>>1^B)&1431655765,B^=w,A^=w<<1,w=(B>>>8^A)&16711935,A^=w,B^=w<<8,w=(A>>>1^B)&1431655765,B^=w,A^=w<<1,w=A<<8|B>>>20&240,A=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=w;for(var L=0;L<x.length;++L){x[L]?(A=A<<2|A>>>26,B=B<<2|B>>>26):(A=A<<1|A>>>27,B=B<<1|B>>>27),A&=-15,B&=-15;var R=t[A>>>28]|r[A>>>24&15]|n[A>>>20&15]|i[A>>>16&15]|o[A>>>12&15]|s[A>>>8&15]|a[A>>>4&15],D=c[B>>>28]|f[B>>>24&15]|u[B>>>20&15]|h[B>>>16&15]|l[B>>>12&15]|d[B>>>8&15]|p[B>>>4&15];w=(D>>>16^R)&65535,m[b++]=R^w,m[b++]=D^w<<16}}return m}function Pc(e,t,r,n){var i=e.length===32?3:9,o;i===3?o=n?[30,-2,-2]:[0,32,2]:o=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,a=t[0],c=t[1];s=(a>>>4^c)&252645135,c^=s,a^=s<<4,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,a=a<<1|a>>>31,c=c<<1|c>>>31;for(var f=0;f<i;f+=3){for(var u=o[f+1],h=o[f+2],l=o[f];l!=u;l+=h){var d=c^e[l],p=(c>>>4|c<<28)^e[l+1];s=a,a=c,c=s^(Pd[d>>>24&63]|Ud[d>>>16&63]|Dd[d>>>8&63]|Fd[d&63]|Rd[p>>>24&63]|Nd[p>>>16&63]|kd[p>>>8&63]|Kd[p&63])}s=a,a=c,c=s}a=a>>>1|a<<31,c=c>>>1|c<<31,s=(a>>>1^c)&1431655765,c^=s,a^=s<<1,s=(c>>>8^a)&16711935,a^=s,c^=s<<8,s=(c>>>2^a)&858993459,a^=s,c^=s<<2,s=(a>>>16^c)&65535,c^=s,a^=s<<16,s=(a>>>4^c)&252645135,c^=s,a^=s<<4,r[0]=a,r[1]=c}function Gi(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),r="DES-"+t,n;e.decrypt?n=_t.cipher.createDecipher(r,e.key):n=_t.cipher.createCipher(r,e.key);var i=n.start;return n.start=function(o,s){var a=null;s instanceof _t.util.ByteBuffer&&(a=s,s={}),s=s||{},s.output=a,s.iv=o,i.call(n,s)},n}});var Pr=k((dw,kc)=>{var $i=vt();kc.exports=$i.md=$i.md||{};$i.md.algorithms=$i.md.algorithms||{}});var Kc=k((yw,Dc)=>{var Je=vt();Pr();Dt();var Od=Dc.exports=Je.hmac=Je.hmac||{};Od.create=function(){var e=null,t=null,r=null,n=null,i={};return i.start=function(o,s){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in Je.md.algorithms)t=Je.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else t=o;if(s===null)s=e;else{if(typeof s=="string")s=Je.util.createBuffer(s);else if(Je.util.isArray(s)){var a=s;s=Je.util.createBuffer();for(var c=0;c<a.length;++c)s.putByte(a[c])}var f=s.length();f>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),r=Je.util.createBuffer(),n=Je.util.createBuffer(),f=s.length();for(var c=0;c<f;++c){var a=s.at(c);r.putByte(54^a),n.putByte(92^a)}if(f<t.blockLength)for(var a=t.blockLength-f,c=0;c<a;++c)r.putByte(54),n.putByte(92);e=s,r=r.bytes(),n=n.bytes()}t.start(),t.update(r)},i.update=function(o){t.update(o)},i.getMac=function(){var o=t.digest().bytes();return t.start(),t.update(n),t.update(o),t.digest()},i.digest=i.getMac,i}});var Mc=k((gw,Fc)=>{var ie=vt();Kc();Pr();Dt();var Vd=ie.pkcs5=ie.pkcs5||{},tr;ie.util.isNodejs&&!ie.options.usePureJavaScript&&(tr=Lr());Fc.exports=ie.pbkdf2=Vd.pbkdf2=function(e,t,r,n,i,o){if(typeof i=="function"&&(o=i,i=null),ie.util.isNodejs&&!ie.options.usePureJavaScript&&tr.pbkdf2&&(i===null||typeof i!="object")&&(tr.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=Buffer.from(e,"binary"),t=Buffer.from(t,"binary"),o?tr.pbkdf2Sync.length===4?tr.pbkdf2(e,t,r,n,function(w,C){if(w)return o(w);o(null,C.toString("binary"))}):tr.pbkdf2(e,t,r,n,i,function(w,C){if(w)return o(w);o(null,C.toString("binary"))}):tr.pbkdf2Sync.length===4?tr.pbkdf2Sync(e,t,r,n).toString("binary"):tr.pbkdf2Sync(e,t,r,n,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in ie.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=ie.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var a=new Error("Derived key is too long.");if(o)return o(a);throw a}var c=Math.ceil(n/s),f=n-(c-1)*s,u=ie.hmac.create();u.start(i,e);var h="",l,d,p;if(!o){for(var y=1;y<=c;++y){u.start(null,null),u.update(t),u.update(ie.util.int32ToBytes(y)),l=p=u.digest().getBytes();for(var m=2;m<=r;++m)u.start(null,null),u.update(p),d=u.digest().getBytes(),l=ie.util.xorBytes(l,d,s),p=d;h+=y<c?l:l.substr(0,f)}return h}var y=1,m;function x(){if(y>c)return o(null,h);u.start(null,null),u.update(t),u.update(ie.util.int32ToBytes(y)),l=p=u.digest().getBytes(),m=2,b()}function b(){if(m<=r)return u.start(null,null),u.update(p),d=u.digest().getBytes(),l=ie.util.xorBytes(l,d,s),p=d,++m,ie.util.setImmediate(b);h+=y<c?l:l.substr(0,f),++y,x()}x()}});var Hc=k((mw,Vc)=>{var Yi=vt();Dt();var Oc=Vc.exports=Yi.pem=Yi.pem||{};Oc.encode=function(e,t){t=t||{};var r="-----BEGIN "+e.type+`-----\r
`,n;if(e.procType&&(n={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},r+=Wi(n)),e.contentDomain&&(n={name:"Content-Domain",values:[e.contentDomain]},r+=Wi(n)),e.dekInfo&&(n={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&n.values.push(e.dekInfo.parameters),r+=Wi(n)),e.headers)for(var i=0;i<e.headers.length;++i)r+=Wi(e.headers[i]);return e.procType&&(r+=`\r
`),r+=Yi.util.encode64(e.body,t.maxline||64)+`\r
`,r+="-----END "+e.type+`-----\r
`,r};Oc.decode=function(e){for(var t=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=r.exec(e),!!o;){var s=o[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var a={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Yi.util.decode64(o[3])};if(t.push(a),!!o[2]){for(var c=o[2].split(i),f=0;o&&f<c.length;){for(var u=c[f].replace(/\s+$/,""),h=f+1;h<c.length;++h){var l=c[h];if(!/\s/.test(l[0]))break;u+=l,f=h}if(o=u.match(n),o){for(var d={name:o[1],values:[]},p=o[2].split(","),y=0;y<p.length;++y)d.values.push(Hd(p[y]));if(a.procType)if(!a.contentDomain&&d.name==="Content-Domain")a.contentDomain=p[0]||"";else if(!a.dekInfo&&d.name==="DEK-Info"){if(d.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');a.dekInfo={algorithm:p[0],parameters:p[1]||null}}else a.headers.push(d);else{if(d.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(d.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');a.procType={version:p[0],type:p[1]}}}++f}if(a.procType==="ENCRYPTED"&&!a.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function Wi(e){for(var t=e.name+": ",r=[],n=function(c,f){return" "+f},i=0;i<e.values.length;++i)r.push(e.values[i].replace(/^(\S+\r\n)/,n));t+=r.join(",")+`\r
`;for(var o=0,s=-1,i=0;i<t.length;++i,++o)if(o>65&&s!==-1){var a=t[s];a===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+a+t.substr(s+1),o=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function Hd(e){return e.replace(/^\s+/,"")}});var Yc=k((xw,Wc)=>{var Ue=vt();Pr();Dt();var zc=Wc.exports=Ue.sha256=Ue.sha256||{};Ue.md.sha256=Ue.md.algorithms.sha256=zc;zc.create=function(){Gc||qd();var e=null,t=Ue.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return t=Ue.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=Ue.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),qc(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=Ue.util.createBuffer();i.putBytes(t.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(Ts.substr(0,n.blockLength-s));for(var a,c,f=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,c=a/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=a>>>0;i.putInt32(f);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};qc(h,r,i);var l=Ue.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l.putInt32(h.h5),l.putInt32(h.h6),l.putInt32(h.h7),l},n};var Ts=null,Gc=!1,$c=null;function qd(){Ts=String.fromCharCode(128),Ts+=Ue.util.fillString(String.fromCharCode(0),64),$c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],Gc=!0}function qc(e,t,r){for(var n,i,o,s,a,c,f,u,h,l,d,p,y,m,x,b=r.length();b>=64;){for(f=0;f<16;++f)t[f]=r.getInt32();for(;f<64;++f)n=t[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=t[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[f]=n+t[f-7]+i+t[f-16]|0;for(u=e.h0,h=e.h1,l=e.h2,d=e.h3,p=e.h4,y=e.h5,m=e.h6,x=e.h7,f=0;f<64;++f)s=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),a=m^p&(y^m),o=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),c=u&h|l&(u^h),n=x+s+a+$c[f]+t[f],i=o+c,x=m,m=y,y=p,p=d+n>>>0,d=l,l=h,h=u,u=n+i>>>0;e.h0=e.h0+u|0,e.h1=e.h1+h|0,e.h2=e.h2+l|0,e.h3=e.h3+d|0,e.h4=e.h4+p|0,e.h5=e.h5+y|0,e.h6=e.h6+m|0,e.h7=e.h7+x|0,b-=64}}});var Zc=k((vw,Xc)=>{var ke=vt();Dt();var Xi=null;ke.util.isNodejs&&!ke.options.usePureJavaScript&&!process.versions["node-webkit"]&&(Xi=Lr());var zd=Xc.exports=ke.prng=ke.prng||{};zd.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=e.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();t.pools=n,t.pool=0,t.generate=function(f,u){if(!u)return t.generateSync(f);var h=t.plugin.cipher,l=t.plugin.increment,d=t.plugin.formatKey,p=t.plugin.formatSeed,y=ke.util.createBuffer();t.key=null,m();function m(x){if(x)return u(x);if(y.length()>=f)return u(null,y.getBytes(f));if(t.generated>1048575&&(t.key=null),t.key===null)return ke.util.nextTick(function(){o(m)});var b=h(t.key,t.seed);t.generated+=b.length,y.putBytes(b),t.key=d(h(t.key,l(t.seed))),t.seed=p(h(t.key,t.seed)),ke.util.setImmediate(m)}},t.generateSync=function(f){var u=t.plugin.cipher,h=t.plugin.increment,l=t.plugin.formatKey,d=t.plugin.formatSeed;t.key=null;for(var p=ke.util.createBuffer();p.length()<f;){t.generated>1048575&&(t.key=null),t.key===null&&s();var y=u(t.key,t.seed);t.generated+=y.length,p.putBytes(y),t.key=l(u(t.key,h(t.seed))),t.seed=d(u(t.key,t.seed))}return p.getBytes(f)};function o(f){if(t.pools[0].messageLength>=32)return a(),f();var u=32-t.pools[0].messageLength<<5;t.seedFile(u,function(h,l){if(h)return f(h);t.collect(l),a(),f()})}function s(){if(t.pools[0].messageLength>=32)return a();var f=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(f)),a()}function a(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var f=t.plugin.md.create();f.update(t.keyBytes);for(var u=1,h=0;h<32;++h)t.reseeds%u===0&&(f.update(t.pools[h].digest().getBytes()),t.pools[h].start()),u=u<<1;t.keyBytes=f.digest().getBytes(),f.start(),f.update(t.keyBytes);var l=f.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(l),t.generated=0}function c(f){var u=null,h=ke.util.globalScope,l=h.crypto||h.msCrypto;l&&l.getRandomValues&&(u=function(A){return l.getRandomValues(A)});var d=ke.util.createBuffer();if(u)for(;d.length()<f;){var p=Math.max(1,Math.min(f-d.length(),65536)/4),y=new Uint32Array(Math.floor(p));try{u(y);for(var m=0;m<y.length;++m)d.putInt32(y[m])}catch(A){if(!(typeof QuotaExceededError<"u"&&A instanceof QuotaExceededError))throw A}}if(d.length()<f)for(var x,b,w,C=Math.floor(Math.random()*65536);d.length()<f;){b=16807*(C&65535),x=16807*(C>>16),b+=(x&32767)<<16,b+=x>>15,b=(b&2147483647)+(b>>31),C=b&4294967295;for(var m=0;m<3;++m)w=C>>>(m<<3),w^=Math.floor(Math.random()*256),d.putByte(w&255)}return d.getBytes(f)}return Xi?(t.seedFile=function(f,u){Xi.randomBytes(f,function(h,l){if(h)return u(h);u(null,l.toString())})},t.seedFileSync=function(f){return Xi.randomBytes(f).toString()}):(t.seedFile=function(f,u){try{u(null,c(f))}catch(h){u(h)}},t.seedFileSync=c),t.collect=function(f){for(var u=f.length,h=0;h<u;++h)t.pools[t.pool].update(f.substr(h,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(f,u){for(var h="",l=0;l<u;l+=8)h+=String.fromCharCode(f>>l&255);t.collect(h)},t.registerWorker=function(f){if(f===self)t.seedFile=function(h,l){function d(p){var y=p.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",d),l(y.forge.prng.err,y.forge.prng.bytes))}self.addEventListener("message",d),self.postMessage({forge:{prng:{needed:h}}})};else{var u=function(h){var l=h.data;l.forge&&l.forge.prng&&t.seedFile(l.forge.prng.needed,function(d,p){f.postMessage({forge:{prng:{err:d,bytes:p}}})})};f.addEventListener("message",u)}},t}});var zn=k((ww,Ls)=>{var Vt=vt();Is();Yc();Zc();Dt();(function(){if(Vt.random&&Vt.random.getBytes){Ls.exports=Vt.random;return}(function(e){var t={},r=new Array(4),n=Vt.util.createBuffer();t.formatKey=function(h){var l=Vt.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),Vt.aes._expandKey(h,!1)},t.formatSeed=function(h){var l=Vt.util.createBuffer(h);return h=new Array(4),h[0]=l.getInt32(),h[1]=l.getInt32(),h[2]=l.getInt32(),h[3]=l.getInt32(),h},t.cipher=function(h,l){return Vt.aes._updateBlock(h,l,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},t.increment=function(h){return++h[3],h},t.md=Vt.md.sha256;function i(){var h=Vt.prng.create(t);return h.getBytes=function(l,d){return h.generate(l,d)},h.getBytesSync=function(l){return h.generate(l)},h}var o=i(),s=null,a=Vt.util.globalScope,c=a.crypto||a.msCrypto;if(c&&c.getRandomValues&&(s=function(h){return c.getRandomValues(h)}),Vt.options.usePureJavaScript||!Vt.util.isNodejs&&!s){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var f="";for(var u in navigator)try{typeof navigator[u]=="string"&&(f+=navigator[u])}catch{}o.collect(f),f=null}e&&(e().mousemove(function(h){o.collectInt(h.clientX,16),o.collectInt(h.clientY,16)}),e().keypress(function(h){o.collectInt(h.charCode,8)}))}if(!Vt.random)Vt.random=o;else for(var u in o)Vt.random[u]=o[u];Vt.random.createInstance=i,Ls.exports=Vt.random})(typeof jQuery<"u"?jQuery:null)})()});var tf=k((bw,Jc)=>{var oe=vt();Dt();var Rs=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],Qc=[1,2,3,5],Gd=function(e,t){return e<<t&65535|(e&65535)>>16-t},$d=function(e,t){return(e&65535)>>t|e<<16-t&65535};Jc.exports=oe.rc2=oe.rc2||{};oe.rc2.expandKey=function(e,t){typeof e=="string"&&(e=oe.util.createBuffer(e)),t=t||128;var r=e,n=e.length(),i=t,o=Math.ceil(i/8),s=255>>(i&7),a;for(a=n;a<128;a++)r.putByte(Rs[r.at(a-1)+r.at(a-n)&255]);for(r.setAt(128-o,Rs[r.at(128-o)&s]),a=127-o;a>=0;a--)r.setAt(a,Rs[r.at(a+1)^r.at(a+o)]);return r};var jc=function(e,t,r){var n=!1,i=null,o=null,s=null,a,c,f,u,h=[];for(e=oe.rc2.expandKey(e,t),f=0;f<64;f++)h.push(e.getInt16Le());r?(a=function(p){for(f=0;f<4;f++)p[f]+=h[u]+(p[(f+3)%4]&p[(f+2)%4])+(~p[(f+3)%4]&p[(f+1)%4]),p[f]=Gd(p[f],Qc[f]),u++},c=function(p){for(f=0;f<4;f++)p[f]+=h[p[(f+3)%4]&63]}):(a=function(p){for(f=3;f>=0;f--)p[f]=$d(p[f],Qc[f]),p[f]-=h[u]+(p[(f+3)%4]&p[(f+2)%4])+(~p[(f+3)%4]&p[(f+1)%4]),u--},c=function(p){for(f=3;f>=0;f--)p[f]-=h[p[(f+3)%4]&63]});var l=function(p){var y=[];for(f=0;f<4;f++){var m=i.getInt16Le();s!==null&&(r?m^=s.getInt16Le():s.putInt16Le(m)),y.push(m&65535)}u=r?0:63;for(var x=0;x<p.length;x++)for(var b=0;b<p[x][0];b++)p[x][1](y);for(f=0;f<4;f++)s!==null&&(r?s.putInt16Le(y[f]):y[f]^=s.getInt16Le()),o.putInt16Le(y[f])},d=null;return d={start:function(p,y){p&&typeof p=="string"&&(p=oe.util.createBuffer(p)),n=!1,i=oe.util.createBuffer(),o=y||new oe.util.createBuffer,s=p,d.output=o},update:function(p){for(n||i.putBuffer(p);i.length()>=8;)l([[5,a],[1,c],[6,a],[1,c],[5,a]])},finish:function(p){var y=!0;if(r)if(p)y=p(8,i,!r);else{var m=i.length()===8?8:8-i.length();i.fillWithByte(m,m)}if(y&&(n=!0,d.update()),!r&&(y=i.length()===0,y))if(p)y=p(8,o,!r);else{var x=o.length(),b=o.at(x-1);b>x?y=!1:o.truncate(b)}return y}},d};oe.rc2.startEncrypting=function(e,t,r){var n=oe.rc2.createEncryptionCipher(e,128);return n.start(t,r),n};oe.rc2.createEncryptionCipher=function(e,t){return jc(e,t,!0)};oe.rc2.startDecrypting=function(e,t,r){var n=oe.rc2.createDecryptionCipher(e,128);return n.start(t,r),n};oe.rc2.createDecryptionCipher=function(e,t){return jc(e,t,!1)}});var ji=k((Ew,ff)=>{var Ps=vt();ff.exports=Ps.jsbn=Ps.jsbn||{};var er,Wd=0xdeadbeefcafe,ef=(Wd&16777215)==15715070;function _(e,t,r){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,r):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}Ps.jsbn.BigInteger=_;function ot(){return new _(null)}function Yd(e,t,r,n,i,o){for(;--o>=0;){var s=t*this.data[e++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function Xd(e,t,r,n,i,o){for(var s=t&32767,a=t>>15;--o>=0;){var c=this.data[e]&32767,f=this.data[e++]>>15,u=a*c+f*s;c=s*c+((u&32767)<<15)+r.data[n]+(i&1073741823),i=(c>>>30)+(u>>>15)+a*f+(i>>>30),r.data[n++]=c&1073741823}return i}function rf(e,t,r,n,i,o){for(var s=t&16383,a=t>>14;--o>=0;){var c=this.data[e]&16383,f=this.data[e++]>>14,u=a*c+f*s;c=s*c+((u&16383)<<14)+r.data[n]+i,i=(c>>28)+(u>>14)+a*f,r.data[n++]=c&268435455}return i}typeof navigator>"u"?(_.prototype.am=rf,er=28):ef&&navigator.appName=="Microsoft Internet Explorer"?(_.prototype.am=Xd,er=30):ef&&navigator.appName!="Netscape"?(_.prototype.am=Yd,er=26):(_.prototype.am=rf,er=28);_.prototype.DB=er;_.prototype.DM=(1<<er)-1;_.prototype.DV=1<<er;var Ns=52;_.prototype.FV=Math.pow(2,Ns);_.prototype.F1=Ns-er;_.prototype.F2=2*er-Ns;var Zd="0123456789abcdefghijklmnopqrstuvwxyz",Zi=new Array,an,me;an="0".charCodeAt(0);for(me=0;me<=9;++me)Zi[an++]=me;an="a".charCodeAt(0);for(me=10;me<36;++me)Zi[an++]=me;an="A".charCodeAt(0);for(me=10;me<36;++me)Zi[an++]=me;function nf(e){return Zd.charAt(e)}function of(e,t){var r=Zi[e.charCodeAt(t)];return r??-1}function Qd(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function jd(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function lr(e){var t=ot();return t.fromInt(e),t}function Jd(e,t){var r;if(t==16)r=4;else if(t==8)r=3;else if(t==256)r=8;else if(t==2)r=1;else if(t==32)r=5;else if(t==4)r=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var n=e.length,i=!1,o=0;--n>=0;){var s=r==8?e[n]&255:of(e,n);if(s<0){e.charAt(n)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=s:o+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-o)-1)<<o,this.data[this.t++]=s>>this.DB-o):this.data[this.t-1]|=s<<o,o+=r,o>=this.DB&&(o-=this.DB)}r==8&&e[0]&128&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&_.ZERO.subTo(this,this)}function ty(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function ey(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var r=(1<<t)-1,n,i=!1,o="",s=this.t,a=this.DB-s*this.DB%t;if(s-- >0)for(a<this.DB&&(n=this.data[s]>>a)>0&&(i=!0,o=nf(n));s>=0;)a<t?(n=(this.data[s]&(1<<a)-1)<<t-a,n|=this.data[--s]>>(a+=this.DB-t)):(n=this.data[s]>>(a-=t)&r,a<=0&&(a+=this.DB,--s)),n>0&&(i=!0),i&&(o+=nf(n));return i?o:"0"}function ry(){var e=ot();return _.ZERO.subTo(this,e),e}function ny(){return this.s<0?this.negate():this}function iy(e){var t=this.s-e.s;if(t!=0)return t;var r=this.t;if(t=r-e.t,t!=0)return this.s<0?-t:t;for(;--r>=0;)if((t=this.data[r]-e.data[r])!=0)return t;return 0}function Qi(e){var t=1,r;return(r=e>>>16)!=0&&(e=r,t+=16),(r=e>>8)!=0&&(e=r,t+=8),(r=e>>4)!=0&&(e=r,t+=4),(r=e>>2)!=0&&(e=r,t+=2),(r=e>>1)!=0&&(e=r,t+=1),t}function oy(){return this.t<=0?0:this.DB*(this.t-1)+Qi(this.data[this.t-1]^this.s&this.DM)}function sy(e,t){var r;for(r=this.t-1;r>=0;--r)t.data[r+e]=this.data[r];for(r=e-1;r>=0;--r)t.data[r]=0;t.t=this.t+e,t.s=this.s}function ay(e,t){for(var r=e;r<this.t;++r)t.data[r-e]=this.data[r];t.t=Math.max(this.t-e,0),t.s=this.s}function cy(e,t){var r=e%this.DB,n=this.DB-r,i=(1<<n)-1,o=Math.floor(e/this.DB),s=this.s<<r&this.DM,a;for(a=this.t-1;a>=0;--a)t.data[a+o+1]=this.data[a]>>n|s,s=(this.data[a]&i)<<r;for(a=o-1;a>=0;--a)t.data[a]=0;t.data[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()}function fy(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t){t.t=0;return}var n=e%this.DB,i=this.DB-n,o=(1<<n)-1;t.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)t.data[s-r-1]|=(this.data[s]&o)<<i,t.data[s-r]=this.data[s]>>n;n>0&&(t.data[this.t-r-1]|=(this.s&o)<<i),t.t=this.t-r,t.clamp()}function uy(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]-e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n-=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n-=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n-=e.s}t.s=n<0?-1:0,n<-1?t.data[r++]=this.DV+n:n>0&&(t.data[r++]=n),t.t=r,t.clamp()}function hy(e,t){var r=this.abs(),n=e.abs(),i=r.t;for(t.t=i+n.t;--i>=0;)t.data[i]=0;for(i=0;i<n.t;++i)t.data[i+r.t]=r.am(0,n.data[i],t,i,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&_.ZERO.subTo(t,t)}function ly(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e.data[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t.data[r],e,2*r,0,1);(e.data[r+t.t]+=t.am(r+1,2*t.data[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e.data[r+t.t]-=t.DV,e.data[r+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(r,t.data[r],e,2*r,0,1)),e.s=0,e.clamp()}function py(e,t,r){var n=e.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){t?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=ot());var o=ot(),s=this.s,a=e.s,c=this.DB-Qi(n.data[n.t-1]);c>0?(n.lShiftTo(c,o),i.lShiftTo(c,r)):(n.copyTo(o),i.copyTo(r));var f=o.t,u=o.data[f-1];if(u!=0){var h=u*(1<<this.F1)+(f>1?o.data[f-2]>>this.F2:0),l=this.FV/h,d=(1<<this.F1)/h,p=1<<this.F2,y=r.t,m=y-f,x=t??ot();for(o.dlShiftTo(m,x),r.compareTo(x)>=0&&(r.data[r.t++]=1,r.subTo(x,r)),_.ONE.dlShiftTo(f,x),x.subTo(o,o);o.t<f;)o.data[o.t++]=0;for(;--m>=0;){var b=r.data[--y]==u?this.DM:Math.floor(r.data[y]*l+(r.data[y-1]+p)*d);if((r.data[y]+=o.am(0,b,r,m,0,f))<b)for(o.dlShiftTo(m,x),r.subTo(x,r);r.data[y]<--b;)r.subTo(x,r)}t!=null&&(r.drShiftTo(f,t),s!=a&&_.ZERO.subTo(t,t)),r.t=f,r.clamp(),c>0&&r.rShiftTo(c,r),s<0&&_.ZERO.subTo(r,r)}}}function dy(e){var t=ot();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(_.ZERO)>0&&e.subTo(t,t),t}function Nr(e){this.m=e}function yy(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function gy(e){return e}function my(e){e.divRemTo(this.m,null,e)}function xy(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function vy(e,t){e.squareTo(t),this.reduce(t)}Nr.prototype.convert=yy;Nr.prototype.revert=gy;Nr.prototype.reduce=my;Nr.prototype.mulTo=xy;Nr.prototype.sqrTo=vy;function wy(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Ur(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function by(e){var t=ot();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(_.ZERO)>0&&this.m.subTo(t,t),t}function Ey(e){var t=ot();return e.copyTo(t),this.reduce(t),t}function Sy(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=e.data[t]&32767,n=r*this.mpl+((r*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e.data[r]+=this.m.am(0,n,e,t,0,this.m.t);e.data[r]>=e.DV;)e.data[r]-=e.DV,e.data[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Ay(e,t){e.squareTo(t),this.reduce(t)}function By(e,t,r){e.multiplyTo(t,r),this.reduce(r)}Ur.prototype.convert=by;Ur.prototype.revert=Ey;Ur.prototype.reduce=Sy;Ur.prototype.mulTo=By;Ur.prototype.sqrTo=Ay;function Cy(){return(this.t>0?this.data[0]&1:this.s)==0}function _y(e,t){if(e>4294967295||e<1)return _.ONE;var r=ot(),n=ot(),i=t.convert(this),o=Qi(e)-1;for(i.copyTo(r);--o>=0;)if(t.sqrTo(r,n),(e&1<<o)>0)t.mulTo(n,i,r);else{var s=r;r=n,n=s}return t.revert(r)}function Iy(e,t){var r;return e<256||t.isEven()?r=new Nr(t):r=new Ur(t),this.exp(e,r)}_.prototype.copyTo=Qd;_.prototype.fromInt=jd;_.prototype.fromString=Jd;_.prototype.clamp=ty;_.prototype.dlShiftTo=sy;_.prototype.drShiftTo=ay;_.prototype.lShiftTo=cy;_.prototype.rShiftTo=fy;_.prototype.subTo=uy;_.prototype.multiplyTo=hy;_.prototype.squareTo=ly;_.prototype.divRemTo=py;_.prototype.invDigit=wy;_.prototype.isEven=Cy;_.prototype.exp=_y;_.prototype.toString=ey;_.prototype.negate=ry;_.prototype.abs=ny;_.prototype.compareTo=iy;_.prototype.bitLength=oy;_.prototype.mod=dy;_.prototype.modPowInt=Iy;_.ZERO=lr(0);_.ONE=lr(1);function Ty(){var e=ot();return this.copyTo(e),e}function Ly(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function Ry(){return this.t==0?this.s:this.data[0]<<24>>24}function Py(){return this.t==0?this.s:this.data[0]<<16>>16}function Ny(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function Uy(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function ky(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),n=lr(r),i=ot(),o=ot(),s="";for(this.divRemTo(n,i,o);i.signum()>0;)s=(r+o.intValue()).toString(e).substr(1)+s,i.divRemTo(n,i,o);return o.intValue().toString(e)+s}function Dy(e,t){this.fromInt(0),t==null&&(t=10);for(var r=this.chunkSize(t),n=Math.pow(t,r),i=!1,o=0,s=0,a=0;a<e.length;++a){var c=of(e,a);if(c<0){e.charAt(a)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+c,++o>=r&&(this.dMultiply(n),this.dAddOffset(s,0),o=0,s=0)}o>0&&(this.dMultiply(Math.pow(t,o)),this.dAddOffset(s,0)),i&&_.ZERO.subTo(this,this)}function Ky(e,t,r){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(_.ONE.shiftLeft(e-1),Us,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(_.ONE.shiftLeft(e-1),this);else{var n=new Array,i=e&7;n.length=(e>>3)+1,t.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function Fy(){var e=this.t,t=new Array;t[0]=this.s;var r=this.DB-e*this.DB%8,n,i=0;if(e-- >0)for(r<this.DB&&(n=this.data[e]>>r)!=(this.s&this.DM)>>r&&(t[i++]=n|this.s<<this.DB-r);e>=0;)r<8?(n=(this.data[e]&(1<<r)-1)<<8-r,n|=this.data[--e]>>(r+=this.DB-8)):(n=this.data[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),n&128&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(t[i++]=n);return t}function My(e){return this.compareTo(e)==0}function Oy(e){return this.compareTo(e)<0?this:e}function Vy(e){return this.compareTo(e)>0?this:e}function Hy(e,t,r){var n,i,o=Math.min(e.t,this.t);for(n=0;n<o;++n)r.data[n]=t(this.data[n],e.data[n]);if(e.t<this.t){for(i=e.s&this.DM,n=o;n<this.t;++n)r.data[n]=t(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=o;n<e.t;++n)r.data[n]=t(i,e.data[n]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()}function qy(e,t){return e&t}function zy(e){var t=ot();return this.bitwiseTo(e,qy,t),t}function Us(e,t){return e|t}function Gy(e){var t=ot();return this.bitwiseTo(e,Us,t),t}function sf(e,t){return e^t}function $y(e){var t=ot();return this.bitwiseTo(e,sf,t),t}function af(e,t){return e&~t}function Wy(e){var t=ot();return this.bitwiseTo(e,af,t),t}function Yy(){for(var e=ot(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function Xy(e){var t=ot();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function Zy(e){var t=ot();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function Qy(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function jy(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+Qy(this.data[e]);return this.s<0?this.t*this.DB:-1}function Jy(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function t1(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Jy(this.data[r]^t);return e}function e1(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function r1(e,t){var r=_.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r}function n1(e){return this.changeBit(e,Us)}function i1(e){return this.changeBit(e,af)}function o1(e){return this.changeBit(e,sf)}function s1(e,t){for(var r=0,n=0,i=Math.min(e.t,this.t);r<i;)n+=this.data[r]+e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;if(e.t<this.t){for(n+=e.s;r<this.t;)n+=this.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<e.t;)n+=e.data[r],t.data[r++]=n&this.DM,n>>=this.DB;n+=e.s}t.s=n<0?-1:0,n>0?t.data[r++]=n:n<-1&&(t.data[r++]=this.DV+n),t.t=r,t.clamp()}function a1(e){var t=ot();return this.addTo(e,t),t}function c1(e){var t=ot();return this.subTo(e,t),t}function f1(e){var t=ot();return this.multiplyTo(e,t),t}function u1(e){var t=ot();return this.divRemTo(e,t,null),t}function h1(e){var t=ot();return this.divRemTo(e,null,t),t}function l1(e){var t=ot(),r=ot();return this.divRemTo(e,t,r),new Array(t,r)}function p1(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function d1(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function Gn(){}function cf(e){return e}function y1(e,t,r){e.multiplyTo(t,r)}function g1(e,t){e.squareTo(t)}Gn.prototype.convert=cf;Gn.prototype.revert=cf;Gn.prototype.mulTo=y1;Gn.prototype.sqrTo=g1;function m1(e){return this.exp(e,new Gn)}function x1(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,e.data[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e.data[n],r,n,0,t-n);r.clamp()}function v1(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r.data[this.t+n-t]=this.am(t-n,e.data[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function cn(e){this.r2=ot(),this.q3=ot(),_.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function w1(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=ot();return e.copyTo(t),this.reduce(t),t}function b1(e){return e}function E1(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function S1(e,t){e.squareTo(t),this.reduce(t)}function A1(e,t,r){e.multiplyTo(t,r),this.reduce(r)}cn.prototype.convert=w1;cn.prototype.revert=b1;cn.prototype.reduce=E1;cn.prototype.mulTo=A1;cn.prototype.sqrTo=S1;function B1(e,t){var r=e.bitLength(),n,i=lr(1),o;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?o=new Nr(t):t.isEven()?o=new cn(t):o=new Ur(t);var s=new Array,a=3,c=n-1,f=(1<<n)-1;if(s[1]=o.convert(this),n>1){var u=ot();for(o.sqrTo(s[1],u);a<=f;)s[a]=ot(),o.mulTo(u,s[a-2],s[a]),a+=2}var h=e.t-1,l,d=!0,p=ot(),y;for(r=Qi(e.data[h])-1;h>=0;){for(r>=c?l=e.data[h]>>r-c&f:(l=(e.data[h]&(1<<r+1)-1)<<c-r,h>0&&(l|=e.data[h-1]>>this.DB+r-c)),a=n;!(l&1);)l>>=1,--a;if((r-=a)<0&&(r+=this.DB,--h),d)s[l].copyTo(i),d=!1;else{for(;a>1;)o.sqrTo(i,p),o.sqrTo(p,i),a-=2;a>0?o.sqrTo(i,p):(y=i,i=p,p=y),o.mulTo(p,s[l],i)}for(;h>=0&&!(e.data[h]&1<<r);)o.sqrTo(i,p),y=i,i=p,p=y,--r<0&&(r=this.DB-1,--h)}return o.revert(i)}function C1(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(o<0)return t;for(i<o&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function _1(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(t==0)r=this.data[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this.data[n])%e;return r}function I1(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return _.ZERO;for(var r=e.clone(),n=this.clone(),i=lr(1),o=lr(0),s=lr(0),a=lr(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),t?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(e,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);for(;n.isEven();)n.rShiftTo(1,n),t?((!s.isEven()||!a.isEven())&&(s.addTo(this,s),a.subTo(e,a)),s.rShiftTo(1,s)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);r.compareTo(n)>=0?(r.subTo(n,r),t&&i.subTo(s,i),o.subTo(a,o)):(n.subTo(r,n),t&&s.subTo(i,s),a.subTo(o,a))}if(n.compareTo(_.ONE)!=0)return _.ZERO;if(a.compareTo(e)>=0)return a.subtract(e);if(a.signum()<0)a.addTo(e,a);else return a;return a.signum()<0?a.add(e):a}var Ae=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],T1=(1<<26)/Ae[Ae.length-1];function L1(e){var t,r=this.abs();if(r.t==1&&r.data[0]<=Ae[Ae.length-1]){for(t=0;t<Ae.length;++t)if(r.data[0]==Ae[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Ae.length;){for(var n=Ae[t],i=t+1;i<Ae.length&&n<T1;)n*=Ae[i++];for(n=r.modInt(n);t<i;)if(n%Ae[t++]==0)return!1}return r.millerRabin(e)}function R1(e){var t=this.subtract(_.ONE),r=t.getLowestSetBit();if(r<=0)return!1;for(var n=t.shiftRight(r),i=P1(),o,s=0;s<e;++s){do o=new _(this.bitLength(),i);while(o.compareTo(_.ONE)<=0||o.compareTo(t)>=0);var a=o.modPow(n,this);if(a.compareTo(_.ONE)!=0&&a.compareTo(t)!=0){for(var c=1;c++<r&&a.compareTo(t)!=0;)if(a=a.modPowInt(2,this),a.compareTo(_.ONE)==0)return!1;if(a.compareTo(t)!=0)return!1}}return!0}function P1(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}_.prototype.chunkSize=Ny;_.prototype.toRadix=ky;_.prototype.fromRadix=Dy;_.prototype.fromNumber=Ky;_.prototype.bitwiseTo=Hy;_.prototype.changeBit=r1;_.prototype.addTo=s1;_.prototype.dMultiply=p1;_.prototype.dAddOffset=d1;_.prototype.multiplyLowerTo=x1;_.prototype.multiplyUpperTo=v1;_.prototype.modInt=_1;_.prototype.millerRabin=R1;_.prototype.clone=Ty;_.prototype.intValue=Ly;_.prototype.byteValue=Ry;_.prototype.shortValue=Py;_.prototype.signum=Uy;_.prototype.toByteArray=Fy;_.prototype.equals=My;_.prototype.min=Oy;_.prototype.max=Vy;_.prototype.and=zy;_.prototype.or=Gy;_.prototype.xor=$y;_.prototype.andNot=Wy;_.prototype.not=Yy;_.prototype.shiftLeft=Xy;_.prototype.shiftRight=Zy;_.prototype.getLowestSetBit=jy;_.prototype.bitCount=t1;_.prototype.testBit=e1;_.prototype.setBit=n1;_.prototype.clearBit=i1;_.prototype.flipBit=o1;_.prototype.add=a1;_.prototype.subtract=c1;_.prototype.multiply=f1;_.prototype.divide=u1;_.prototype.remainder=h1;_.prototype.divideAndRemainder=l1;_.prototype.modPow=B1;_.prototype.modInverse=I1;_.prototype.pow=m1;_.prototype.gcd=C1;_.prototype.isProbablePrime=L1});var df=k((Sw,pf)=>{var De=vt();Pr();Dt();var hf=pf.exports=De.sha1=De.sha1||{};De.md.sha1=De.md.algorithms.sha1=hf;hf.create=function(){lf||N1();var e=null,t=De.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,o=0;o<i;++o)n.fullMessageLength.push(0);return t=De.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,o){o==="utf8"&&(i=De.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var a=n.fullMessageLength.length-1;a>=0;--a)n.fullMessageLength[a]+=s[1],s[1]=s[0]+(n.fullMessageLength[a]/4294967296>>>0),n.fullMessageLength[a]=n.fullMessageLength[a]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),uf(e,r,t),(t.read>2048||t.length()===0)&&t.compact(),n},n.digest=function(){var i=De.util.createBuffer();i.putBytes(t.bytes());var o=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=o&n.blockLength-1;i.putBytes(ks.substr(0,n.blockLength-s));for(var a,c,f=n.fullMessageLength[0]*8,u=0;u<n.fullMessageLength.length-1;++u)a=n.fullMessageLength[u+1]*8,c=a/4294967296>>>0,f+=c,i.putInt32(f>>>0),f=a>>>0;i.putInt32(f);var h={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};uf(h,r,i);var l=De.util.createBuffer();return l.putInt32(h.h0),l.putInt32(h.h1),l.putInt32(h.h2),l.putInt32(h.h3),l.putInt32(h.h4),l},n};var ks=null,lf=!1;function N1(){ks=String.fromCharCode(128),ks+=De.util.fillString(String.fromCharCode(0),64),lf=!0}function uf(e,t,r){for(var n,i,o,s,a,c,f,u,h=r.length();h>=64;){for(i=e.h0,o=e.h1,s=e.h2,a=e.h3,c=e.h4,u=0;u<16;++u)n=r.getInt32(),t[u]=n,f=a^o&(s^a),n=(i<<5|i>>>27)+f+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<20;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,f=a^o&(s^a),n=(i<<5|i>>>27)+f+c+1518500249+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<32;++u)n=t[u-3]^t[u-8]^t[u-14]^t[u-16],n=n<<1|n>>>31,t[u]=n,f=o^s^a,n=(i<<5|i>>>27)+f+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<40;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,f=o^s^a,n=(i<<5|i>>>27)+f+c+1859775393+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<60;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,f=o&s|a&(o^s),n=(i<<5|i>>>27)+f+c+2400959708+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;for(;u<80;++u)n=t[u-6]^t[u-16]^t[u-28]^t[u-32],n=n<<2|n>>>30,t[u]=n,f=o^s^a,n=(i<<5|i>>>27)+f+c+3395469782+n,c=a,a=s,s=(o<<30|o>>>2)>>>0,o=i,i=n;e.h0=e.h0+i|0,e.h1=e.h1+o|0,e.h2=e.h2+s|0,e.h3=e.h3+a|0,e.h4=e.h4+c|0,h-=64}}});var mf=k((Aw,gf)=>{var Ke=vt();Dt();zn();df();var yf=gf.exports=Ke.pkcs1=Ke.pkcs1||{};yf.encode_rsa_oaep=function(e,t,r){var n,i,o,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,o=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,o=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),o?o.start():o=Ke.md.sha1.create(),s||(s=o);var a=Math.ceil(e.n.bitLength()/8),c=a-2*o.digestLength-2;if(t.length>c){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=t.length,f.maxLength=c,f}n||(n=""),o.update(n,"raw");for(var u=o.digest(),h="",l=c-t.length,d=0;d<l;d++)h+="\0";var p=u.getBytes()+h+""+t;if(!i)i=Ke.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=o.digestLength,f}var y=Ji(i,a-o.digestLength-1,s),m=Ke.util.xorBytes(p,y,p.length),x=Ji(m,o.digestLength,s),b=Ke.util.xorBytes(i,x,i.length);return"\0"+b+m};yf.decode_rsa_oaep=function(e,t,r){var n,i,o;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(o=r.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var m=new Error("RSAES-OAEP encoded message length is invalid.");throw m.length=t.length,m.expectedLength=s,m}if(i===void 0?i=Ke.md.sha1.create():i.start(),o||(o=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var a=i.digest().getBytes(),c=t.charAt(0),f=t.substring(1,i.digestLength+1),u=t.substring(1+i.digestLength),h=Ji(u,i.digestLength,o),l=Ke.util.xorBytes(f,h,f.length),d=Ji(l,s-i.digestLength-1,o),p=Ke.util.xorBytes(u,d,u.length),y=p.substring(0,i.digestLength),m=c!=="\0",x=0;x<i.digestLength;++x)m|=a.charAt(x)!==y.charAt(x);for(var b=1,w=i.digestLength,C=i.digestLength;C<p.length;C++){var A=p.charCodeAt(C),B=A&1^1,L=b?65534:0;m|=A&L,b=b&B,w+=b}if(m||p.charCodeAt(w)!==1)throw new Error("Invalid RSAES-OAEP padding.");return p.substring(w+1)};function Ji(e,t,r){r||(r=Ke.md.sha1.create());for(var n="",i=Math.ceil(t/r.digestLength),o=0;o<i;++o){var s=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);r.start(),r.update(e+s),n+=r.digest().getBytes()}return n.substring(0,t)}});var xf=k((Bw,Ds)=>{var pr=vt();Dt();ji();zn();(function(){if(pr.prime){Ds.exports=pr.prime;return}var e=Ds.exports=pr.prime=pr.prime||{},t=pr.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new t(null);n.fromInt(30);var i=function(h,l){return h|l};e.generateProbablePrime=function(h,l,d){typeof l=="function"&&(d=l,l={}),l=l||{};var p=l.algorithm||"PRIMEINC";typeof p=="string"&&(p={name:p}),p.options=p.options||{};var y=l.prng||pr.random,m={nextBytes:function(x){for(var b=y.getBytesSync(x.length),w=0;w<x.length;++w)x[w]=b.charCodeAt(w)}};if(p.name==="PRIMEINC")return o(h,m,p.options,d);throw new Error("Invalid prime generation algorithm: "+p.name)};function o(h,l,d,p){return"workers"in d?c(h,l,d,p):s(h,l,d,p)}function s(h,l,d,p){var y=f(h,l),m=0,x=u(y.bitLength());"millerRabinTests"in d&&(x=d.millerRabinTests);var b=10;"maxBlockTime"in d&&(b=d.maxBlockTime),a(y,h,l,m,x,b,p)}function a(h,l,d,p,y,m,x){var b=+new Date;do{if(h.bitLength()>l&&(h=f(l,d)),h.isProbablePrime(y))return x(null,h);h.dAddOffset(r[p++%8],0)}while(m<0||+new Date-b<m);pr.util.setImmediate(function(){a(h,l,d,p,y,m,x)})}function c(h,l,d,p){if(typeof Worker>"u")return s(h,l,d,p);var y=f(h,l),m=d.workers,x=d.workLoad||100,b=x*30/8,w=d.workerScript||"forge/prime.worker.js";if(m===-1)return pr.util.estimateCores(function(A,B){A&&(B=2),m=B-1,C()});C();function C(){m=Math.max(1,m);for(var A=[],B=0;B<m;++B)A[B]=new Worker(w);for(var L=m,B=0;B<m;++B)A[B].addEventListener("message",D);var R=!1;function D(O){if(!R){--L;var G=O.data;if(G.found){for(var z=0;z<A.length;++z)A[z].terminate();return R=!0,p(null,new t(G.prime,16))}y.bitLength()>h&&(y=f(h,l));var it=y.toString(16);O.target.postMessage({hex:it,workLoad:x}),y.dAddOffset(b,0)}}}}function f(h,l){var d=new t(h,l),p=h-1;return d.testBit(p)||d.bitwiseTo(t.ONE.shiftLeft(p),i,d),d.dAddOffset(31-d.mod(n).byteValue(),0),d}function u(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var eo=k((Cw,Bf)=>{var F=vt();qn();ji();Oi();mf();xf();zn();Dt();typeof et>"u"&&(et=F.jsbn.BigInteger);var et,Ks=F.util.isNodejs?Lr():null,v=F.asn1,xe=F.util;F.pki=F.pki||{};Bf.exports=F.pki.rsa=F.rsa=F.rsa||{};var q=F.pki,U1=[6,4,2,4,2,4,6,2],k1={name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},D1={name:"RSAPrivateKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},K1={name:"RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:v.Class.UNIVERSAL,type:v.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},F1=F.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},M1={name:"DigestInfo",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:v.Class.UNIVERSAL,type:v.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:v.Class.UNIVERSAL,type:v.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:v.Class.UNIVERSAL,type:v.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:v.Class.UNIVERSAL,type:v.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},O1=function(e){var t;if(e.algorithm in q.oids)t=q.oids[e.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=e.algorithm,r}var n=v.oidToDer(t).getBytes(),i=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]),o=v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[]);o.value.push(v.create(v.Class.UNIVERSAL,v.Type.OID,!1,n)),o.value.push(v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,""));var s=v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(o),i.value.push(s),v.toDer(i).getBytes()},Sf=function(e,t,r){if(r)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(et.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(et.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var n;do n=new et(F.util.bytesToHex(F.random.getBytes(t.n.bitLength()/8)),16);while(n.compareTo(t.n)>=0||!n.gcd(t.n).equals(et.ONE));e=e.multiply(n.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),o=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(o)<0;)i=i.add(t.p);var s=i.subtract(o).multiply(t.qInv).mod(t.p).multiply(t.q).add(o);return s=s.multiply(n.modInverse(t.n)).mod(t.n),s};q.rsa.encrypt=function(e,t,r){var n=r,i,o=Math.ceil(t.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=Af(e,t,r)):(i=F.util.createBuffer(),i.putBytes(e));for(var s=new et(i.toHex(),16),a=Sf(s,t,n),c=a.toString(16),f=F.util.createBuffer(),u=o-Math.ceil(c.length/2);u>0;)f.putByte(0),--u;return f.putBytes(F.util.hexToBytes(c)),f.getBytes()};q.rsa.decrypt=function(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=e.length,o.expected=i,o}var s=new et(F.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var a=Sf(s,t,r),c=a.toString(16),f=F.util.createBuffer(),u=i-Math.ceil(c.length/2);u>0;)f.putByte(0),--u;return f.putBytes(F.util.hexToBytes(c)),n!==!1?to(f.getBytes(),t,r):f.getBytes()};q.rsa.createKeyPairGenerationState=function(e,t,r){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,r=r||{};var n=r.prng||F.random,i={nextBytes:function(a){for(var c=n.getBytesSync(a.length),f=0;f<a.length;++f)a[f]=c.charCodeAt(f)}},o=r.algorithm||"PRIMEINC",s;if(o==="PRIMEINC")s={algorithm:o,state:0,bits:e,rng:i,eInt:t||65537,e:new et(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+o);return s};q.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var r=new et(null);r.fromInt(30);for(var n=0,i=function(h,l){return h|l},o=+new Date,s,a=0;e.keys===null&&(t<=0||a<t);){if(e.state===0){var c=e.p===null?e.pBits:e.qBits,f=c-1;e.pqState===0?(e.num=new et(c,e.rng),e.num.testBit(f)||e.num.bitwiseTo(et.ONE.shiftLeft(f),i,e.num),e.num.dAddOffset(31-e.num.mod(r).byteValue(),0),n=0,++e.pqState):e.pqState===1?e.num.bitLength()>c?e.pqState=0:e.num.isProbablePrime(H1(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(U1[n++%8],0):e.pqState===2?e.pqState=e.num.subtract(et.ONE).gcd(e.e).compareTo(et.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(et.ONE),e.q1=e.q.subtract(et.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(et.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var u=e.e.modInverse(e.phi);e.keys={privateKey:q.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:q.rsa.setPublicKey(e.n,e.e)}}s=+new Date,a+=s-o,o=s}return e.keys!==null};q.rsa.generateKeyPair=function(e,t,r,n){if(arguments.length===1?typeof e=="object"?(r=e,e=void 0):typeof e=="function"&&(n=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(n=t,t=void 0):typeof t!="number"&&(r=t,t=void 0):(r=e,n=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=t,t=void 0)),r=r||{},e===void 0&&(e=r.bits||2048),t===void 0&&(t=r.e||65537),!F.options.usePureJavaScript&&!r.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(n){if(vf("generateKeyPair"))return Ks.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(a,c,f){if(a)return n(a);n(null,{privateKey:q.privateKeyFromPem(f),publicKey:q.publicKeyFromPem(c)})});if(wf("generateKey")&&wf("exportKey"))return xe.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Ef(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return xe.globalScope.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){n(a)}).then(function(a){if(a){var c=q.privateKeyFromAsn1(v.fromDer(F.util.createBuffer(a)));n(null,{privateKey:c,publicKey:q.setRsaPublicKey(c.n,c.e)})}});if(bf("generateKey")&&bf("exportKey")){var i=xe.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Ef(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(a){var c=a.target.result,f=xe.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);f.oncomplete=function(u){var h=u.target.result,l=q.privateKeyFromAsn1(v.fromDer(F.util.createBuffer(h)));n(null,{privateKey:l,publicKey:q.setRsaPublicKey(l.n,l.e)})},f.onerror=function(u){n(u)}},i.onerror=function(a){n(a)};return}}else if(vf("generateKeyPairSync")){var o=Ks.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:q.privateKeyFromPem(o.privateKey),publicKey:q.publicKeyFromPem(o.publicKey)}}}var s=q.rsa.createKeyPairGenerationState(e,t,r);if(!n)return q.rsa.stepKeyPairGenerationState(s,0),s.keys;V1(s,r,n)};q.setRsaPublicKey=q.rsa.setPublicKey=function(e,t){var r={n:e,e:t};return r.encrypt=function(n,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(a,c,f){return Af(a,c,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(a,c){return F.pkcs1.encode_rsa_oaep(c,a,o)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(a){return a}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return q.rsa.encrypt(s,r,!0)},r.verify=function(n,i,o,s){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:function(c,f){f=to(f,r,!0);var u=v.fromDer(f,{parseAllBytes:s._parseAllDigestBytes}),h={},l=[];if(!v.validate(u,M1,h,l)){var d=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw d.errors=l,d}var p=v.derToOid(h.algorithmIdentifier);if(!(p===F.oids.md2||p===F.oids.md5||p===F.oids.sha1||p===F.oids.sha224||p===F.oids.sha256||p===F.oids.sha384||p===F.oids.sha512||p===F.oids["sha512-224"]||p===F.oids["sha512-256"])){var d=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw d.oid=p,d}if((p===F.oids.md2||p===F.oids.md5)&&!("parameters"in h))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===h.digest}}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:function(c,f){return f=to(f,r,!0),c===f}});var a=q.rsa.decrypt(i,r,!0,!1);return o.verify(n,a,r.n.bitLength())},r};q.setRsaPrivateKey=q.rsa.setPrivateKey=function(e,t,r,n,i,o,s,a){var c={n:e,e:t,d:r,p:n,q:i,dP:o,dQ:s,qInv:a};return c.decrypt=function(f,u,h){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var l=q.rsa.decrypt(f,c,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:to};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(d,p){return F.pkcs1.decode_rsa_oaep(p,d,h)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(d){return d}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(l,c,!1)},c.sign=function(f,u){var h=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:O1},h=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return f}},h=1);var l=u.encode(f,c.n.bitLength());return q.rsa.encrypt(l,c,h)},c};q.wrapRsaPrivateKey=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(q.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.OCTETSTRING,!1,v.toDer(e).getBytes())])};q.privateKeyFromAsn1=function(e){var t={},r=[];if(v.validate(e,k1,t,r)&&(e=v.fromDer(F.util.createBuffer(t.privateKey))),t={},r=[],!v.validate(e,D1,t,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,o,s,a,c,f,u,h;return i=F.util.createBuffer(t.privateKeyModulus).toHex(),o=F.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=F.util.createBuffer(t.privateKeyPrivateExponent).toHex(),a=F.util.createBuffer(t.privateKeyPrime1).toHex(),c=F.util.createBuffer(t.privateKeyPrime2).toHex(),f=F.util.createBuffer(t.privateKeyExponent1).toHex(),u=F.util.createBuffer(t.privateKeyExponent2).toHex(),h=F.util.createBuffer(t.privateKeyCoefficient).toHex(),q.setRsaPrivateKey(new et(i,16),new et(o,16),new et(s,16),new et(a,16),new et(c,16),new et(f,16),new et(u,16),new et(h,16))};q.privateKeyToAsn1=q.privateKeyToRSAPrivateKey=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,v.integerToDer(0).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.e)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.d)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.p)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.q)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.dP)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.dQ)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.qInv))])};q.publicKeyFromAsn1=function(e){var t={},r=[];if(v.validate(e,F1,t,r)){var n=v.derToOid(t.publicKeyOid);if(n!==q.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}e=t.rsaPublicKey}if(r=[],!v.validate(e,K1,t,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var o=F.util.createBuffer(t.publicKeyModulus).toHex(),s=F.util.createBuffer(t.publicKeyExponent).toHex();return q.setRsaPublicKey(new et(o,16),new et(s,16))};q.publicKeyToAsn1=q.publicKeyToSubjectPublicKeyInfo=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.OID,!1,v.oidToDer(q.oids.rsaEncryption).getBytes()),v.create(v.Class.UNIVERSAL,v.Type.NULL,!1,"")]),v.create(v.Class.UNIVERSAL,v.Type.BITSTRING,!1,[q.publicKeyToRSAPublicKey(e)])])};q.publicKeyToRSAPublicKey=function(e){return v.create(v.Class.UNIVERSAL,v.Type.SEQUENCE,!0,[v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.n)),v.create(v.Class.UNIVERSAL,v.Type.INTEGER,!1,Fe(e.e))])};function Af(e,t,r){var n=F.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=e.length,o.max=i-11,o}n.putByte(0),n.putByte(r);var s=i-3-e.length,a;if(r===0||r===1){a=r===0?0:255;for(var c=0;c<s;++c)n.putByte(a)}else for(;s>0;){for(var f=0,u=F.random.getBytes(s),c=0;c<s;++c)a=u.charCodeAt(c),a===0?++f:n.putByte(a);s=f}return n.putByte(0),n.putBytes(e),n}function to(e,t,r,n){var i=Math.ceil(t.n.bitLength()/8),o=F.util.createBuffer(e),s=o.getByte(),a=o.getByte();if(s!==0||r&&a!==0&&a!==1||!r&&a!=2||r&&a===0&&typeof n>"u")throw new Error("Encryption block is invalid.");var c=0;if(a===0){c=i-3-n;for(var f=0;f<c;++f)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(a===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(a===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var u=o.getByte();if(u!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}function V1(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var n={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(n.prng=t.prng),i();function i(){o(e.pBits,function(a,c){if(a)return r(a);if(e.p=c,e.q!==null)return s(a,e.q);o(e.qBits,s)})}function o(a,c){F.prime.generateProbablePrime(a,n,c)}function s(a,c){if(a)return r(a);if(e.q=c,e.p.compareTo(e.q)<0){var f=e.p;e.p=e.q,e.q=f}if(e.p.subtract(et.ONE).gcd(e.e).compareTo(et.ONE)!==0){e.p=null,i();return}if(e.q.subtract(et.ONE).gcd(e.e).compareTo(et.ONE)!==0){e.q=null,o(e.qBits,s);return}if(e.p1=e.p.subtract(et.ONE),e.q1=e.q.subtract(et.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(et.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,o(e.qBits,s);return}var u=e.e.modInverse(e.phi);e.keys={privateKey:q.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:q.rsa.setPublicKey(e.n,e.e)},r(null,e.keys)}}function Fe(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var r=F.util.hexToBytes(t);return r.length>1&&(r.charCodeAt(0)===0&&!(r.charCodeAt(1)&128)||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)===128)?r.substr(1):r}function H1(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function vf(e){return F.util.isNodejs&&typeof Ks[e]=="function"}function wf(e){return typeof xe.globalScope<"u"&&typeof xe.globalScope.crypto=="object"&&typeof xe.globalScope.crypto.subtle=="object"&&typeof xe.globalScope.crypto.subtle[e]=="function"}function bf(e){return typeof xe.globalScope<"u"&&typeof xe.globalScope.msCrypto=="object"&&typeof xe.globalScope.msCrypto.subtle=="object"&&typeof xe.globalScope.msCrypto.subtle[e]=="function"}function Ef(e){for(var t=F.util.hexToBytes(e.toString(16)),r=new Uint8Array(t.length),n=0;n<t.length;++n)r[n]=t.charCodeAt(n);return r}});var Rf=k((_w,Lf)=>{var N=vt();Is();qn();Uc();Pr();Oi();Mc();Hc();zn();tf();eo();Dt();typeof Cf>"u"&&(Cf=N.jsbn.BigInteger);var Cf,E=N.asn1,$=N.pki=N.pki||{};Lf.exports=$.pbe=N.pbe=N.pbe||{};var kr=$.oids,q1={name:"EncryptedPrivateKeyInfo",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:E.Class.UNIVERSAL,type:E.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},z1={name:"PBES2Algorithms",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:E.Class.UNIVERSAL,type:E.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:E.Class.UNIVERSAL,type:E.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:E.Class.UNIVERSAL,type:E.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:E.Class.UNIVERSAL,type:E.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:E.Class.UNIVERSAL,type:E.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},G1={name:"pkcs-12PbeParams",tagClass:E.Class.UNIVERSAL,type:E.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:E.Class.UNIVERSAL,type:E.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:E.Class.UNIVERSAL,type:E.Type.INTEGER,constructed:!1,capture:"iterations"}]};$.encryptPrivateKeyInfo=function(e,t,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=N.random.getBytesSync(r.saltSize),i=r.count,o=E.integerToDer(i),s,a,c;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,u,h;switch(r.algorithm){case"aes128":s=16,f=16,u=kr["aes128-CBC"],h=N.aes.createEncryptionCipher;break;case"aes192":s=24,f=16,u=kr["aes192-CBC"],h=N.aes.createEncryptionCipher;break;case"aes256":s=32,f=16,u=kr["aes256-CBC"],h=N.aes.createEncryptionCipher;break;case"des":s=8,f=8,u=kr.desCBC,h=N.des.createEncryptionCipher;break;default:var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var d="hmacWith"+r.prfAlgorithm.toUpperCase(),p=Tf(d),y=N.pkcs5.pbkdf2(t,n,i,s,p),m=N.random.getBytesSync(f),x=h(y);x.start(m),x.update(E.toDer(e)),x.finish(),c=x.output.getBytes();var b=$1(n,o,s,d);a=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(kr.pkcs5PBES2).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(kr.pkcs5PBKDF2).getBytes()),b]),E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(u).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,m)])])])}else if(r.algorithm==="3des"){s=24;var w=new N.util.ByteBuffer(n),y=$.pbe.generatePkcs12Key(t,w,1,i,s),m=$.pbe.generatePkcs12Key(t,w,2,i,s),x=N.des.createEncryptionCipher(y);x.start(m),x.update(E.toDer(e)),x.finish(),c=x.output.getBytes(),a=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer(kr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,n),E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,o.getBytes())])])}else{var l=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw l.algorithm=r.algorithm,l}var C=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[a,E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,c)]);return C};$.decryptPrivateKeyInfo=function(e,t){var r=null,n={},i=[];if(!E.validate(e,q1,n,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=E.derToOid(n.encryptionOid),a=$.pbe.getCipher(s,n.encryptionParams,t),c=N.util.createBuffer(n.encryptedData);return a.update(c),a.finish()&&(r=E.fromDer(a.output)),r};$.encryptedPrivateKeyToPem=function(e,t){var r={type:"ENCRYPTED PRIVATE KEY",body:E.toDer(e).getBytes()};return N.pem.encode(r,{maxline:t})};$.encryptedPrivateKeyFromPem=function(e){var t=N.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=t.type,r}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return E.fromDer(t.body)};$.encryptRsaPrivateKey=function(e,t,r){if(r=r||{},!r.legacy){var n=$.wrapRsaPrivateKey($.privateKeyToAsn1(e));return n=$.encryptPrivateKeyInfo(n,t,r),$.encryptedPrivateKeyToPem(n)}var i,o,s,a;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,o=N.random.getBytesSync(16),a=N.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,o=N.random.getBytesSync(16),a=N.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,o=N.random.getBytesSync(16),a=N.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,o=N.random.getBytesSync(8),a=N.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,o=N.random.getBytesSync(8),a=N.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw c.algorithm=r.algorithm,c}var f=N.pbe.opensslDeriveBytes(t,o.substr(0,8),s),u=a(f);u.start(o),u.update(E.toDer($.privateKeyToAsn1(e))),u.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:N.util.bytesToHex(o).toUpperCase()},body:u.output.getBytes()};return N.pem.encode(h)};$.decryptRsaPrivateKey=function(e,t){var r=null,n=N.pem.decode(e)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var o,s;switch(n.dekInfo.algorithm){case"DES-CBC":o=8,s=N.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,s=N.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,s=N.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,s=N.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,s=N.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,s=function(h){return N.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":o=8,s=function(h){return N.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":o=16,s=function(h){return N.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var a=N.util.hexToBytes(n.dekInfo.parameters),c=N.pbe.opensslDeriveBytes(t,a.substr(0,8),o),f=s(c);if(f.start(a),f.update(N.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=$.decryptPrivateKeyInfo(E.fromDer(r),t):r=E.fromDer(r),r!==null&&(r=$.privateKeyFromAsn1(r)),r};$.pbe.generatePkcs12Key=function(e,t,r,n,i,o){var s,a;if(typeof o>"u"||o===null){if(!("sha1"in N.md))throw new Error('"sha1" hash algorithm unavailable.');o=N.md.sha1.create()}var c=o.digestLength,f=o.blockLength,u=new N.util.ByteBuffer,h=new N.util.ByteBuffer;if(e!=null){for(a=0;a<e.length;a++)h.putInt16(e.charCodeAt(a));h.putInt16(0)}var l=h.length(),d=t.length(),p=new N.util.ByteBuffer;p.fillWithByte(r,f);var y=f*Math.ceil(d/f),m=new N.util.ByteBuffer;for(a=0;a<y;a++)m.putByte(t.at(a%d));var x=f*Math.ceil(l/f),b=new N.util.ByteBuffer;for(a=0;a<x;a++)b.putByte(h.at(a%l));var w=m;w.putBuffer(b);for(var C=Math.ceil(i/c),A=1;A<=C;A++){var B=new N.util.ByteBuffer;B.putBytes(p.bytes()),B.putBytes(w.bytes());for(var L=0;L<n;L++)o.start(),o.update(B.getBytes()),B=o.digest();var R=new N.util.ByteBuffer;for(a=0;a<f;a++)R.putByte(B.at(a%c));var D=Math.ceil(d/f)+Math.ceil(l/f),O=new N.util.ByteBuffer;for(s=0;s<D;s++){var G=new N.util.ByteBuffer(w.getBytes(f)),z=511;for(a=R.length()-1;a>=0;a--)z=z>>8,z+=R.at(a)+G.at(a),G.setAt(a,z&255);O.putBuffer(G)}w=O,u.putBuffer(B)}return u.truncate(u.length()-i),u};$.pbe.getCipher=function(e,t,r){switch(e){case $.oids.pkcs5PBES2:return $.pbe.getCipherForPBES2(e,t,r);case $.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case $.oids["pbewithSHAAnd40BitRC2-CBC"]:return $.pbe.getCipherForPKCS12PBE(e,t,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=e,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};$.pbe.getCipherForPBES2=function(e,t,r){var n={},i=[];if(!E.validate(t,z1,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(e=E.derToOid(n.kdfOid),e!==$.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=e,o.supportedOids=["pkcs5PBKDF2"],o}if(e=E.derToOid(n.encOid),e!==$.oids["aes128-CBC"]&&e!==$.oids["aes192-CBC"]&&e!==$.oids["aes256-CBC"]&&e!==$.oids["des-EDE3-CBC"]&&e!==$.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=e,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var s=n.kdfSalt,a=N.util.createBuffer(n.kdfIterationCount);a=a.getInt(a.length()<<3);var c,f;switch($.oids[e]){case"aes128-CBC":c=16,f=N.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,f=N.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,f=N.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,f=N.des.createDecryptionCipher;break;case"desCBC":c=8,f=N.des.createDecryptionCipher;break}var u=If(n.prfOid),h=N.pkcs5.pbkdf2(r,s,a,c,u),l=n.encIv,d=f(h);return d.start(l),d};$.pbe.getCipherForPKCS12PBE=function(e,t,r){var n={},i=[];if(!E.validate(t,G1,n,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var s=N.util.createBuffer(n.salt),a=N.util.createBuffer(n.iterations);a=a.getInt(a.length()<<3);var c,f,u;switch(e){case $.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,f=8,u=N.des.startDecrypting;break;case $.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,f=8,u=function(y,m){var x=N.rc2.createDecryptionCipher(y,40);return x.start(m,null),x};break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=e,o}var h=If(n.prfOid),l=$.pbe.generatePkcs12Key(r,s,1,a,c,h);h.start();var d=$.pbe.generatePkcs12Key(r,s,2,a,f,h);return u(l,d)};$.pbe.opensslDeriveBytes=function(e,t,r,n){if(typeof n>"u"||n===null){if(!("md5"in N.md))throw new Error('"md5" hash algorithm unavailable.');n=N.md.md5.create()}t===null&&(t="");for(var i=[_f(n,e+t)],o=16,s=1;o<r;++s,o+=16)i.push(_f(n,i[s-1]+e+t));return i.join("").substr(0,r)};function _f(e,t){return e.start().update(t).digest().getBytes()}function If(e){var t;if(!e)t="hmacWithSHA1";else if(t=$.oids[E.derToOid(e)],!t){var r=new Error("Unsupported PRF OID.");throw r.oid=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return Tf(t)}function Tf(e){var t=N.md;switch(e){case"hmacWithSHA224":t=N.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=e,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function $1(e,t,r,n){var i=E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OCTETSTRING,!1,e),E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,t.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(E.create(E.Class.UNIVERSAL,E.Type.INTEGER,!1,N.util.hexToBytes(r.toString(16))),E.create(E.Class.UNIVERSAL,E.Type.SEQUENCE,!0,[E.create(E.Class.UNIVERSAL,E.Type.OID,!1,E.oidToDer($.oids[n]).getBytes()),E.create(E.Class.UNIVERSAL,E.Type.NULL,!1,"")])),i}});var pu=k((Ab,lu)=>{"use strict";lu.exports=g2;function g2(e,t){for(var r=new Array(arguments.length-1),n=0,i=2,o=!0;i<arguments.length;)r[n++]=arguments[i++];return new Promise(function(a,c){r[n]=function(u){if(o)if(o=!1,u)c(u);else{for(var h=new Array(arguments.length-1),l=0;l<h.length;)h[l++]=arguments[l];a.apply(null,h)}};try{e.apply(t||null,r)}catch(f){o&&(o=!1,c(f))}})}});var mu=k(gu=>{"use strict";var fo=gu;fo.length=function(t){var r=t.length;if(!r)return 0;for(var n=0;--r%4>1&&t.charAt(r)==="=";)++n;return Math.ceil(t.length*3)/4-n};var yn=new Array(64),yu=new Array(123);for(_e=0;_e<64;)yu[yn[_e]=_e<26?_e+65:_e<52?_e+71:_e<62?_e-4:_e-59|43]=_e++;var _e;fo.encode=function(t,r,n){for(var i=null,o=[],s=0,a=0,c;r<n;){var f=t[r++];switch(a){case 0:o[s++]=yn[f>>2],c=(f&3)<<4,a=1;break;case 1:o[s++]=yn[c|f>>4],c=(f&15)<<2,a=2;break;case 2:o[s++]=yn[c|f>>6],o[s++]=yn[f&63],a=0;break}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0)}return a&&(o[s++]=yn[c],o[s++]=61,a===1&&(o[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))};var du="invalid encoding";fo.decode=function(t,r,n){for(var i=n,o=0,s,a=0;a<t.length;){var c=t.charCodeAt(a++);if(c===61&&o>1)break;if((c=yu[c])===void 0)throw Error(du);switch(o){case 0:s=c,o=1;break;case 1:r[n++]=s<<2|(c&48)>>4,s=c,o=2;break;case 2:r[n++]=(s&15)<<4|(c&60)>>2,s=c,o=3;break;case 3:r[n++]=(s&3)<<6|c,o=0;break}}if(o===1)throw Error(du);return n-i};fo.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var vu=k((Cb,xu)=>{"use strict";xu.exports=uo;function uo(){this._listeners={}}uo.prototype.on=function(t,r,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:r,ctx:n||this}),this};uo.prototype.off=function(t,r){if(t===void 0)this._listeners={};else if(r===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],i=0;i<n.length;)n[i].fn===r?n.splice(i,1):++i;return this};uo.prototype.emit=function(t){var r=this._listeners[t];if(r){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<r.length;)r[i].fn.apply(r[i++].ctx,n)}return this}});var Cu=k((_b,Bu)=>{"use strict";Bu.exports=wu(wu);function wu(e){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=r[3]===128;function i(c,f,u){t[0]=c,f[u]=r[0],f[u+1]=r[1],f[u+2]=r[2],f[u+3]=r[3]}function o(c,f,u){t[0]=c,f[u]=r[3],f[u+1]=r[2],f[u+2]=r[1],f[u+3]=r[0]}e.writeFloatLE=n?i:o,e.writeFloatBE=n?o:i;function s(c,f){return r[0]=c[f],r[1]=c[f+1],r[2]=c[f+2],r[3]=c[f+3],t[0]}function a(c,f){return r[3]=c[f],r[2]=c[f+1],r[1]=c[f+2],r[0]=c[f+3],t[0]}e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function t(n,i,o,s){var a=i<0?1:0;if(a&&(i=-i),i===0)n(1/i>0?0:2147483648,o,s);else if(isNaN(i))n(2143289344,o,s);else if(i>34028234663852886e22)n((a<<31|2139095040)>>>0,o,s);else if(i<11754943508222875e-54)n((a<<31|Math.round(i/1401298464324817e-60))>>>0,o,s);else{var c=Math.floor(Math.log(i)/Math.LN2),f=Math.round(i*Math.pow(2,-c)*8388608)&8388607;n((a<<31|c+127<<23|f)>>>0,o,s)}}e.writeFloatLE=t.bind(null,bu),e.writeFloatBE=t.bind(null,Eu);function r(n,i,o){var s=n(i,o),a=(s>>31)*2+1,c=s>>>23&255,f=s&8388607;return c===255?f?NaN:a*(1/0):c===0?a*1401298464324817e-60*f:a*Math.pow(2,c-150)*(f+8388608)}e.readFloatLE=r.bind(null,Su),e.readFloatBE=r.bind(null,Au)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=r[7]===128;function i(c,f,u){t[0]=c,f[u]=r[0],f[u+1]=r[1],f[u+2]=r[2],f[u+3]=r[3],f[u+4]=r[4],f[u+5]=r[5],f[u+6]=r[6],f[u+7]=r[7]}function o(c,f,u){t[0]=c,f[u]=r[7],f[u+1]=r[6],f[u+2]=r[5],f[u+3]=r[4],f[u+4]=r[3],f[u+5]=r[2],f[u+6]=r[1],f[u+7]=r[0]}e.writeDoubleLE=n?i:o,e.writeDoubleBE=n?o:i;function s(c,f){return r[0]=c[f],r[1]=c[f+1],r[2]=c[f+2],r[3]=c[f+3],r[4]=c[f+4],r[5]=c[f+5],r[6]=c[f+6],r[7]=c[f+7],t[0]}function a(c,f){return r[7]=c[f],r[6]=c[f+1],r[5]=c[f+2],r[4]=c[f+3],r[3]=c[f+4],r[2]=c[f+5],r[1]=c[f+6],r[0]=c[f+7],t[0]}e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function t(n,i,o,s,a,c){var f=s<0?1:0;if(f&&(s=-s),s===0)n(0,a,c+i),n(1/s>0?0:2147483648,a,c+o);else if(isNaN(s))n(0,a,c+i),n(2146959360,a,c+o);else if(s>17976931348623157e292)n(0,a,c+i),n((f<<31|2146435072)>>>0,a,c+o);else{var u;if(s<22250738585072014e-324)u=s/5e-324,n(u>>>0,a,c+i),n((f<<31|u/4294967296)>>>0,a,c+o);else{var h=Math.floor(Math.log(s)/Math.LN2);h===1024&&(h=1023),u=s*Math.pow(2,-h),n(u*4503599627370496>>>0,a,c+i),n((f<<31|h+1023<<20|u*1048576&1048575)>>>0,a,c+o)}}}e.writeDoubleLE=t.bind(null,bu,0,4),e.writeDoubleBE=t.bind(null,Eu,4,0);function r(n,i,o,s,a){var c=n(s,a+i),f=n(s,a+o),u=(f>>31)*2+1,h=f>>>20&2047,l=4294967296*(f&1048575)+c;return h===2047?l?NaN:u*(1/0):h===0?u*5e-324*l:u*Math.pow(2,h-1075)*(l+4503599627370496)}e.readDoubleLE=r.bind(null,Su,0,4),e.readDoubleBE=r.bind(null,Au,4,0)}(),e}function bu(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function Eu(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=e&255}function Su(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function Au(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}});var _u=k((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}});var Tu=k(Iu=>{"use strict";var ga=Iu;ga.length=function(t){for(var r=0,n=0,i=0;i<t.length;++i)n=t.charCodeAt(i),n<128?r+=1:n<2048?r+=2:(n&64512)===55296&&(t.charCodeAt(i+1)&64512)===56320?(++i,r+=4):r+=3;return r};ga.read=function(t,r,n){var i=n-r;if(i<1)return"";for(var o=null,s=[],a=0,c;r<n;)c=t[r++],c<128?s[a++]=c:c>191&&c<224?s[a++]=(c&31)<<6|t[r++]&63:c>239&&c<365?(c=((c&7)<<18|(t[r++]&63)<<12|(t[r++]&63)<<6|t[r++]&63)-65536,s[a++]=55296+(c>>10),s[a++]=56320+(c&1023)):s[a++]=(c&15)<<12|(t[r++]&63)<<6|t[r++]&63,a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0);return o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};ga.write=function(t,r,n){for(var i=n,o,s,a=0;a<t.length;++a)o=t.charCodeAt(a),o<128?r[n++]=o:o<2048?(r[n++]=o>>6|192,r[n++]=o&63|128):(o&64512)===55296&&((s=t.charCodeAt(a+1))&64512)===56320?(o=65536+((o&1023)<<10)+(s&1023),++a,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=o&63|128):(r[n++]=o>>12|224,r[n++]=o>>6&63|128,r[n++]=o&63|128);return n-i}});var Ru=k((Tb,Lu)=>{"use strict";Lu.exports=m2;function m2(e,t,r){var n=r||8192,i=n>>>1,o=null,s=n;return function(c){if(c<1||c>i)return e(c);s+c>n&&(o=e(n),s=0);var f=t.call(o,s,s+=c);return s&7&&(s=(s|7)+1),f}}});var Nu=k((Lb,Pu)=>{"use strict";Pu.exports=qt;var Jn=Mr();function qt(e,t){this.lo=e>>>0,this.hi=t>>>0}var Fr=qt.zero=new qt(0,0);Fr.toNumber=function(){return 0};Fr.zzEncode=Fr.zzDecode=function(){return this};Fr.length=function(){return 1};var x2=qt.zeroHash="\0\0\0\0\0\0\0\0";qt.fromNumber=function(t){if(t===0)return Fr;var r=t<0;r&&(t=-t);var n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new qt(n,i)};qt.from=function(t){if(typeof t=="number")return qt.fromNumber(t);if(Jn.isString(t))if(Jn.Long)t=Jn.Long.fromString(t);else return qt.fromNumber(parseInt(t,10));return t.low||t.high?new qt(t.low>>>0,t.high>>>0):Fr};qt.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var r=~this.lo+1>>>0,n=~this.hi>>>0;return r||(n=n+1>>>0),-(r+n*4294967296)}return this.lo+this.hi*4294967296};qt.prototype.toLong=function(t){return Jn.Long?new Jn.Long(this.lo|0,this.hi|0,!!t):{low:this.lo|0,high:this.hi|0,unsigned:!!t}};var Er=String.prototype.charCodeAt;qt.fromHash=function(t){return t===x2?Fr:new qt((Er.call(t,0)|Er.call(t,1)<<8|Er.call(t,2)<<16|Er.call(t,3)<<24)>>>0,(Er.call(t,4)|Er.call(t,5)<<8|Er.call(t,6)<<16|Er.call(t,7)<<24)>>>0)};qt.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};qt.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};qt.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};qt.prototype.length=function(){var t=this.lo,r=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?r===0?t<16384?t<128?1:2:t<2097152?3:4:r<16384?r<128?5:6:r<2097152?7:8:n<128?9:10}});var Mr=k(ma=>{"use strict";var K=ma;K.asPromise=pu();K.base64=mu();K.EventEmitter=vu();K.float=Cu();K.inquire=_u();K.utf8=Tu();K.pool=Ru();K.LongBits=Nu();K.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node);K.global=K.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||ma;K.emptyArray=Object.freeze?Object.freeze([]):[];K.emptyObject=Object.freeze?Object.freeze({}):{};K.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};K.isString=function(t){return typeof t=="string"||t instanceof String};K.isObject=function(t){return t&&typeof t=="object"};K.isset=K.isSet=function(t,r){var n=t[r];return n!=null&&t.hasOwnProperty(r)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};K.Buffer=function(){try{var e=K.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch{return null}}();K._Buffer_from=null;K._Buffer_allocUnsafe=null;K.newBuffer=function(t){return typeof t=="number"?K.Buffer?K._Buffer_allocUnsafe(t):new K.Array(t):K.Buffer?K._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};K.Array=typeof Uint8Array<"u"?Uint8Array:Array;K.Long=K.global.dcodeIO&&K.global.dcodeIO.Long||K.global.Long||K.inquire("long");K.key2Re=/^true|false|0|1$/;K.key32Re=/^-?(?:0|[1-9][0-9]*)$/;K.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;K.longToHash=function(t){return t?K.LongBits.from(t).toHash():K.LongBits.zeroHash};K.longFromHash=function(t,r){var n=K.LongBits.fromHash(t);return K.Long?K.Long.fromBits(n.lo,n.hi,r):n.toNumber(!!r)};function Uu(e,t,r){for(var n=Object.keys(t),i=0;i<n.length;++i)(e[n[i]]===void 0||!r)&&(e[n[i]]=t[n[i]]);return e}K.merge=Uu;K.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function ku(e){function t(r,n){if(!(this instanceof t))return new t(r,n);Object.defineProperty(this,"message",{get:function(){return r}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&Uu(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}K.newError=ku;K.ProtocolError=ku("ProtocolError");K.oneOfGetter=function(t){for(var r={},n=0;n<t.length;++n)r[t[n]]=1;return function(){for(var i=Object.keys(this),o=i.length-1;o>-1;--o)if(r[i[o]]===1&&this[i[o]]!==void 0&&this[i[o]]!==null)return i[o]}};K.oneOfSetter=function(t){return function(r){for(var n=0;n<t.length;++n)t[n]!==r&&delete this[t[n]]}};K.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};K._configure=function(){var e=K.Buffer;if(!e){K._Buffer_from=K._Buffer_allocUnsafe=null;return}K._Buffer_from=e.from!==Uint8Array.from&&e.from||function(r,n){return new e(r,n)},K._Buffer_allocUnsafe=e.allocUnsafe||function(r){return new e(r)}}});var wa=k((Pb,Ou)=>{"use strict";Ou.exports=Ut;var He=Mr(),va,Fu=He.LongBits,v2=He.utf8;function Ie(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Ut(e){this.buf=e,this.pos=0,this.len=e.length}var Du=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Ut(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Ut(t);throw Error("illegal buffer")},Mu=function(){return He.Buffer?function(r){return(Ut.create=function(i){return He.Buffer.isBuffer(i)?new va(i):Du(i)})(r)}:Du};Ut.create=Mu();Ut.prototype._slice=He.Array.prototype.subarray||He.Array.prototype.slice;Ut.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Ie(this,10);return t}}();Ut.prototype.int32=function(){return this.uint32()|0};Ut.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function xa(){var e=new Fu(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(this.buf[this.pos]&127)<<28)>>>0,e.hi=(e.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Ie(this);if(e.lo=(e.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw Ie(this);if(e.hi=(e.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}Ut.prototype.bool=function(){return this.uint32()!==0};function ho(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}Ut.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ie(this,4);return ho(this.buf,this.pos+=4)};Ut.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ie(this,4);return ho(this.buf,this.pos+=4)|0};function Ku(){if(this.pos+8>this.len)throw Ie(this,8);return new Fu(ho(this.buf,this.pos+=4),ho(this.buf,this.pos+=4))}Ut.prototype.float=function(){if(this.pos+4>this.len)throw Ie(this,4);var t=He.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Ut.prototype.double=function(){if(this.pos+8>this.len)throw Ie(this,4);var t=He.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Ut.prototype.bytes=function(){var t=this.uint32(),r=this.pos,n=this.pos+t;if(n>this.len)throw Ie(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(r,n):r===n?new this.buf.constructor(0):this._slice.call(this.buf,r,n)};Ut.prototype.string=function(){var t=this.bytes();return v2.read(t,0,t.length)};Ut.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Ie(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Ie(this);while(this.buf[this.pos++]&128);return this};Ut.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(e=this.uint32()&7)!==4;)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this};Ut._configure=function(e){va=e,Ut.create=Mu(),va._configure();var t=He.Long?"toLong":"toNumber";He.merge(Ut.prototype,{int64:function(){return xa.call(this)[t](!1)},uint64:function(){return xa.call(this)[t](!0)},sint64:function(){return xa.call(this).zzDecode()[t](!1)},fixed64:function(){return Ku.call(this)[t](!0)},sfixed64:function(){return Ku.call(this)[t](!1)}})}});var zu=k((Nb,qu)=>{"use strict";qu.exports=Or;var Hu=wa();(Or.prototype=Object.create(Hu.prototype)).constructor=Or;var Vu=Mr();function Or(e){Hu.call(this,e)}Or._configure=function(){Vu.Buffer&&(Or.prototype._slice=Vu.Buffer.prototype.slice)};Or.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};Or._configure()});var _a=k((Ub,Yu)=>{"use strict";Yu.exports=st;var ve=Mr(),ba,lo=ve.LongBits,Gu=ve.base64,$u=ve.utf8;function ti(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function Sa(){}function w2(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function st(){this.len=0,this.head=new ti(Sa,0,0),this.tail=this.head,this.states=null}var Wu=function(){return ve.Buffer?function(){return(st.create=function(){return new ba})()}:function(){return new st}};st.create=Wu();st.alloc=function(t){return new ve.Array(t)};ve.Array!==Array&&(st.alloc=ve.pool(st.alloc,ve.Array.prototype.subarray));st.prototype._push=function(t,r,n){return this.tail=this.tail.next=new ti(t,r,n),this.len+=r,this};function Aa(e,t,r){t[r]=e&255}function b2(e,t,r){for(;e>127;)t[r++]=e&127|128,e>>>=7;t[r]=e}function Ba(e,t){this.len=e,this.next=void 0,this.val=t}Ba.prototype=Object.create(ti.prototype);Ba.prototype.fn=b2;st.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new Ba((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};st.prototype.int32=function(t){return t<0?this._push(Ca,10,lo.fromNumber(t)):this.uint32(t)};st.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Ca(e,t,r){for(;e.hi;)t[r++]=e.lo&127|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=e.lo&127|128,e.lo=e.lo>>>7;t[r++]=e.lo}st.prototype.uint64=function(t){var r=lo.from(t);return this._push(Ca,r.length(),r)};st.prototype.int64=st.prototype.uint64;st.prototype.sint64=function(t){var r=lo.from(t).zzEncode();return this._push(Ca,r.length(),r)};st.prototype.bool=function(t){return this._push(Aa,1,t?1:0)};function Ea(e,t,r){t[r]=e&255,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}st.prototype.fixed32=function(t){return this._push(Ea,4,t>>>0)};st.prototype.sfixed32=st.prototype.fixed32;st.prototype.fixed64=function(t){var r=lo.from(t);return this._push(Ea,4,r.lo)._push(Ea,4,r.hi)};st.prototype.sfixed64=st.prototype.fixed64;st.prototype.float=function(t){return this._push(ve.float.writeFloatLE,4,t)};st.prototype.double=function(t){return this._push(ve.float.writeDoubleLE,8,t)};var E2=ve.Array.prototype.set?function(t,r,n){r.set(t,n)}:function(t,r,n){for(var i=0;i<t.length;++i)r[n+i]=t[i]};st.prototype.bytes=function(t){var r=t.length>>>0;if(!r)return this._push(Aa,1,0);if(ve.isString(t)){var n=st.alloc(r=Gu.length(t));Gu.decode(t,n,0),t=n}return this.uint32(r)._push(E2,r,t)};st.prototype.string=function(t){var r=$u.length(t);return r?this.uint32(r)._push($u.write,r,t):this._push(Aa,1,0)};st.prototype.fork=function(){return this.states=new w2(this),this.head=this.tail=new ti(Sa,0,0),this.len=0,this};st.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new ti(Sa,0,0),this.len=0),this};st.prototype.ldelim=function(){var t=this.head,r=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=r,this.len+=n),this};st.prototype.finish=function(){for(var t=this.head.next,r=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,r,n),n+=t.len,t=t.next;return r};st._configure=function(e){ba=e,st.create=Wu(),ba._configure()}});var Qu=k((kb,Zu)=>{"use strict";Zu.exports=qe;var Xu=_a();(qe.prototype=Object.create(Xu.prototype)).constructor=qe;var Sr=Mr();function qe(){Xu.call(this)}qe._configure=function(){qe.alloc=Sr._Buffer_allocUnsafe,qe.writeBytesBuffer=Sr.Buffer&&Sr.Buffer.prototype instanceof Uint8Array&&Sr.Buffer.prototype.set.name==="set"?function(t,r,n){r.set(t,n)}:function(t,r,n){if(t.copy)t.copy(r,n,0,t.length);else for(var i=0;i<t.length;)r[n++]=t[i++]}};qe.prototype.bytes=function(t){Sr.isString(t)&&(t=Sr._Buffer_from(t,"base64"));var r=t.length>>>0;return this.uint32(r),r&&this._push(qe.writeBytesBuffer,r,t),this};function S2(e,t,r){e.length<40?Sr.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}qe.prototype.string=function(t){var r=Sr.Buffer.byteLength(t);return this.uint32(r),r&&this._push(S2,r,t),this};qe._configure()});var fh=k((k8,ch)=>{var Bt=vt();Pr();Dt();var ri=ch.exports=Bt.sha512=Bt.sha512||{};Bt.md.sha512=Bt.md.algorithms.sha512=ri;var sh=Bt.sha384=Bt.sha512.sha384=Bt.sha512.sha384||{};sh.create=function(){return ri.create("SHA-384")};Bt.md.sha384=Bt.md.algorithms.sha384=sh;Bt.sha512.sha256=Bt.sha512.sha256||{create:function(){return ri.create("SHA-512/256")}};Bt.md["sha512/256"]=Bt.md.algorithms["sha512/256"]=Bt.sha512.sha256;Bt.sha512.sha224=Bt.sha512.sha224||{create:function(){return ri.create("SHA-512/224")}};Bt.md["sha512/224"]=Bt.md.algorithms["sha512/224"]=Bt.sha512.sha224;ri.create=function(e){if(ah||N2(),typeof e>"u"&&(e="SHA-512"),!(e in Gr))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=Gr[e],r=null,n=Bt.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var a={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength128=[];for(var c=a.messageLengthSize/4,f=0;f<c;++f)a.fullMessageLength.push(0);n=Bt.util.createBuffer(),r=new Array(t.length);for(var f=0;f<t.length;++f)r[f]=t[f].slice(0);return a},a.start(),a.update=function(c,f){f==="utf8"&&(c=Bt.util.encodeUtf8(c));var u=c.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var h=a.fullMessageLength.length-1;h>=0;--h)a.fullMessageLength[h]+=u[1],u[1]=u[0]+(a.fullMessageLength[h]/4294967296>>>0),a.fullMessageLength[h]=a.fullMessageLength[h]>>>0,u[0]=u[1]/4294967296>>>0;return n.putBytes(c),oh(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),a},a.digest=function(){var c=Bt.util.createBuffer();c.putBytes(n.bytes());var f=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=f&a.blockLength-1;c.putBytes(ka.substr(0,a.blockLength-u));for(var h,l,d=a.fullMessageLength[0]*8,p=0;p<a.fullMessageLength.length-1;++p)h=a.fullMessageLength[p+1]*8,l=h/4294967296>>>0,d+=l,c.putInt32(d>>>0),d=h>>>0;c.putInt32(d);for(var y=new Array(r.length),p=0;p<r.length;++p)y[p]=r[p].slice(0);oh(y,i,c);var m=Bt.util.createBuffer(),x;e==="SHA-512"?x=y.length:e==="SHA-384"?x=y.length-2:x=y.length-4;for(var p=0;p<x;++p)m.putInt32(y[p][0]),(p!==x-1||e!=="SHA-512/224")&&m.putInt32(y[p][1]);return m},a};var ka=null,ah=!1,Da=null,Gr=null;function N2(){ka=String.fromCharCode(128),ka+=Bt.util.fillString(String.fromCharCode(0),128),Da=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],Gr={},Gr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],Gr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],Gr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],Gr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],ah=!0}function oh(e,t,r){for(var n,i,o,s,a,c,f,u,h,l,d,p,y,m,x,b,w,C,A,B,L,R,D,O,G,z,it,gt,M,H,S,V,bt,Q,j,J=r.length();J>=128;){for(M=0;M<16;++M)t[M][0]=r.getInt32()>>>0,t[M][1]=r.getInt32()>>>0;for(;M<80;++M)V=t[M-2],H=V[0],S=V[1],n=((H>>>19|S<<13)^(S>>>29|H<<3)^H>>>6)>>>0,i=((H<<13|S>>>19)^(S<<3|H>>>29)^(H<<26|S>>>6))>>>0,Q=t[M-15],H=Q[0],S=Q[1],o=((H>>>1|S<<31)^(H>>>8|S<<24)^H>>>7)>>>0,s=((H<<31|S>>>1)^(H<<24|S>>>8)^(H<<25|S>>>7))>>>0,bt=t[M-7],j=t[M-16],S=i+bt[1]+s+j[1],t[M][0]=n+bt[0]+o+j[0]+(S/4294967296>>>0)>>>0,t[M][1]=S>>>0;for(y=e[0][0],m=e[0][1],x=e[1][0],b=e[1][1],w=e[2][0],C=e[2][1],A=e[3][0],B=e[3][1],L=e[4][0],R=e[4][1],D=e[5][0],O=e[5][1],G=e[6][0],z=e[6][1],it=e[7][0],gt=e[7][1],M=0;M<80;++M)f=((L>>>14|R<<18)^(L>>>18|R<<14)^(R>>>9|L<<23))>>>0,u=((L<<18|R>>>14)^(L<<14|R>>>18)^(R<<23|L>>>9))>>>0,h=(G^L&(D^G))>>>0,l=(z^R&(O^z))>>>0,a=((y>>>28|m<<4)^(m>>>2|y<<30)^(m>>>7|y<<25))>>>0,c=((y<<4|m>>>28)^(m<<30|y>>>2)^(m<<25|y>>>7))>>>0,d=(y&x|w&(y^x))>>>0,p=(m&b|C&(m^b))>>>0,S=gt+u+l+Da[M][1]+t[M][1],n=it+f+h+Da[M][0]+t[M][0]+(S/4294967296>>>0)>>>0,i=S>>>0,S=c+p,o=a+d+(S/4294967296>>>0)>>>0,s=S>>>0,it=G,gt=z,G=D,z=O,D=L,O=R,S=B+i,L=A+n+(S/4294967296>>>0)>>>0,R=S>>>0,A=w,B=C,w=x,C=b,x=y,b=m,S=i+s,y=n+o+(S/4294967296>>>0)>>>0,m=S>>>0;S=e[0][1]+m,e[0][0]=e[0][0]+y+(S/4294967296>>>0)>>>0,e[0][1]=S>>>0,S=e[1][1]+b,e[1][0]=e[1][0]+x+(S/4294967296>>>0)>>>0,e[1][1]=S>>>0,S=e[2][1]+C,e[2][0]=e[2][0]+w+(S/4294967296>>>0)>>>0,e[2][1]=S>>>0,S=e[3][1]+B,e[3][0]=e[3][0]+A+(S/4294967296>>>0)>>>0,e[3][1]=S>>>0,S=e[4][1]+R,e[4][0]=e[4][0]+L+(S/4294967296>>>0)>>>0,e[4][1]=S>>>0,S=e[5][1]+O,e[5][0]=e[5][0]+D+(S/4294967296>>>0)>>>0,e[5][1]=S>>>0,S=e[6][1]+z,e[6][0]=e[6][0]+G+(S/4294967296>>>0)>>>0,e[6][1]=S>>>0,S=e[7][1]+gt,e[7][0]=e[7][0]+it+(S/4294967296>>>0)>>>0,e[7][1]=S>>>0,J-=128}}});var Xh=k((e4,Yh)=>{var In=1e3,Tn=In*60,Ln=Tn*60,Xr=Ln*24,ym=Xr*7,gm=Xr*365.25;Yh.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return mm(e);if(r==="number"&&isFinite(e))return t.long?vm(e):xm(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function mm(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*gm;case"weeks":case"week":case"w":return r*ym;case"days":case"day":case"d":return r*Xr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Ln;case"minutes":case"minute":case"mins":case"min":case"m":return r*Tn;case"seconds":case"second":case"secs":case"sec":case"s":return r*In;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function xm(e){var t=Math.abs(e);return t>=Xr?Math.round(e/Xr)+"d":t>=Ln?Math.round(e/Ln)+"h":t>=Tn?Math.round(e/Tn)+"m":t>=In?Math.round(e/In)+"s":e+"ms"}function vm(e){var t=Math.abs(e);return t>=Xr?Bo(e,t,Xr,"day"):t>=Ln?Bo(e,t,Ln,"hour"):t>=Tn?Bo(e,t,Tn,"minute"):t>=In?Bo(e,t,In,"second"):e+" ms"}function Bo(e,t,r,n){var i=t>=r*1.5;return Math.round(e/r)+" "+n+(i?"s":"")}});var Qh=k((r4,Zh)=>{function wm(e){r.debug=r,r.default=r,r.coerce=c,r.disable=o,r.enable=i,r.enabled=s,r.humanize=Xh(),r.destroy=f,Object.keys(e).forEach(u=>{r[u]=e[u]}),r.names=[],r.skips=[],r.formatters={};function t(u){let h=0;for(let l=0;l<u.length;l++)h=(h<<5)-h+u.charCodeAt(l),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=t;function r(u){let h,l=null,d,p;function y(...m){if(!y.enabled)return;let x=y,b=Number(new Date),w=b-(h||b);x.diff=w,x.prev=h,x.curr=b,h=b,m[0]=r.coerce(m[0]),typeof m[0]!="string"&&m.unshift("%O");let C=0;m[0]=m[0].replace(/%([a-zA-Z%])/g,(B,L)=>{if(B==="%%")return"%";C++;let R=r.formatters[L];if(typeof R=="function"){let D=m[C];B=R.call(x,D),m.splice(C,1),C--}return B}),r.formatArgs.call(x,m),(x.log||r.log).apply(x,m)}return y.namespace=u,y.useColors=r.useColors(),y.color=r.selectColor(u),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>l!==null?l:(d!==r.namespaces&&(d=r.namespaces,p=r.enabled(u)),p),set:m=>{l=m}}),typeof r.init=="function"&&r.init(y),y}function n(u,h){let l=r(this.namespace+(typeof h>"u"?":":h)+u);return l.log=this.log,l}function i(u){r.save(u),r.namespaces=u,r.names=[],r.skips=[];let h,l=(typeof u=="string"?u:"").split(/[\s,]+/),d=l.length;for(h=0;h<d;h++)l[h]&&(u=l[h].replace(/\*/g,".*?"),u[0]==="-"?r.skips.push(new RegExp("^"+u.slice(1)+"$")):r.names.push(new RegExp("^"+u+"$")))}function o(){let u=[...r.names.map(a),...r.skips.map(a).map(h=>"-"+h)].join(",");return r.enable(""),u}function s(u){if(u[u.length-1]==="*")return!0;let h,l;for(h=0,l=r.skips.length;h<l;h++)if(r.skips[h].test(u))return!1;for(h=0,l=r.names.length;h<l;h++)if(r.names[h].test(u))return!0;return!1}function a(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}Zh.exports=wm});var jh=k((de,Co)=>{de.formatArgs=Em;de.save=Sm;de.load=Am;de.useColors=bm;de.storage=Bm();de.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();de.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function bm(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Em(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+Co.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),e.splice(n,0,t)}de.log=console.debug||console.log||(()=>{});function Sm(e){try{e?de.storage.setItem("debug",e):de.storage.removeItem("debug")}catch{}}function Am(){let e;try{e=de.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}function Bm(){try{return localStorage}catch{}}Co.exports=Qh()(de);var{formatters:Cm}=Co.exports;Cm.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var cl=k((z4,al)=>{al.exports=n0;var sl=128,Tm=127,Lm=~Tm,Rm=Math.pow(2,31);function n0(e,t,r){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw n0.bytes=0,new RangeError("Could not encode varint");t=t||[],r=r||0;for(var n=r;e>=Rm;)t[r++]=e&255|sl,e/=128;for(;e&Lm;)t[r++]=e&255|sl,e>>>=7;return t[r]=e|0,n0.bytes=r-n+1,t}});var hl=k((G4,ul)=>{ul.exports=i0;var Pm=128,fl=127;function i0(e,n){var r=0,n=n||0,i=0,o=n,s,a=e.length;do{if(o>=a||i>49)throw i0.bytes=0,new RangeError("Could not decode varint");s=e[o++],r+=i<28?(s&fl)<<i:(s&fl)*Math.pow(2,i),i+=7}while(s>=Pm);return i0.bytes=o-n,r}});var pl=k(($4,ll)=>{var Nm=Math.pow(2,7),Um=Math.pow(2,14),km=Math.pow(2,21),Dm=Math.pow(2,28),Km=Math.pow(2,35),Fm=Math.pow(2,42),Mm=Math.pow(2,49),Om=Math.pow(2,56),Vm=Math.pow(2,63);ll.exports=function(e){return e<Nm?1:e<Um?2:e<km?3:e<Dm?4:e<Km?5:e<Fm?6:e<Mm?7:e<Om?8:e<Vm?9:10}});var No=k((W4,dl)=>{dl.exports={encode:cl(),decode:hl(),encodingLength:pl()}});var vx={};Ft(vx,{isSubset:()=>Ul,webTransport:()=>xx});function or(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function Ye(e=0){return globalThis.Buffer?.alloc!=null?or(globalThis.Buffer.alloc(e)):new Uint8Array(e)}function ge(e=0){return globalThis.Buffer?.allocUnsafe!=null?or(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function xt(e,t){t==null&&(t=e.reduce((i,o)=>i+o.length,0));let r=ge(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return or(r)}function kt(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var b0=Symbol.for("@achingbrain/uint8arraylist");function w0(e,t){if(t==null||t<0)throw new RangeError("index is out of bounds");let r=0;for(let n of e){let i=r+n.byteLength;if(t<i)return{buf:n,index:t-r};r=i}throw new RangeError("index is out of bounds")}function gi(e){return!!e?.[b0]}var te=class{constructor(...t){Object.defineProperty(this,b0,{value:!0}),this.bufs=[],this.length=0,t.length>0&&this.appendAll(t)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...t){this.appendAll(t)}appendAll(t){let r=0;for(let n of t)if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.push(n);else if(gi(n))r+=n.byteLength,this.bufs.push(...n.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}prepend(...t){this.prependAll(t)}prependAll(t){let r=0;for(let n of t.reverse())if(n instanceof Uint8Array)r+=n.byteLength,this.bufs.unshift(n);else if(gi(n))r+=n.byteLength,this.bufs.unshift(...n.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=r}get(t){let r=w0(this.bufs,t);return r.buf[r.index]}set(t,r){let n=w0(this.bufs,t);n.buf[n.index]=r}write(t,r=0){if(t instanceof Uint8Array)for(let n=0;n<t.length;n++)this.set(r+n,t[n]);else if(gi(t))for(let n=0;n<t.length;n++)this.set(r+n,t.get(n));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(t){if(t=Math.trunc(t),!(Number.isNaN(t)||t<=0)){if(t===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(t>=this.bufs[0].byteLength)t-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(t),this.length-=t;break}}}slice(t,r){let{bufs:n,length:i}=this._subList(t,r);return xt(n,i)}subarray(t,r){let{bufs:n,length:i}=this._subList(t,r);return n.length===1?n[0]:xt(n,i)}sublist(t,r){let{bufs:n,length:i}=this._subList(t,r),o=new te;return o.length=i,o.bufs=n,o}_subList(t,r){if(t=t??0,r=r??this.length,t<0&&(t=this.length+t),r<0&&(r=this.length+r),t<0||r>this.length)throw new RangeError("index is out of bounds");if(t===r)return{bufs:[],length:0};if(t===0&&r===this.length)return{bufs:[...this.bufs],length:this.length};let n=[],i=0;for(let o=0;o<this.bufs.length;o++){let s=this.bufs[o],a=i,c=a+s.byteLength;if(i=c,t>=c)continue;let f=t>=a&&t<c,u=r>a&&r<=c;if(f&&u){if(t===a&&r===c){n.push(s);break}let h=t-a;n.push(s.subarray(h,h+(r-t)));break}if(f){if(t===0){n.push(s);continue}n.push(s.subarray(t-a));continue}if(u){if(r===c){n.push(s);break}n.push(s.subarray(0,r-a));break}n.push(s)}return{bufs:n,length:r-t}}indexOf(t,r=0){if(!gi(t)&&!(t instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');let n=t instanceof Uint8Array?t:t.subarray();if(r=Number(r??0),isNaN(r)&&(r=0),r<0&&(r=this.length+r),r<0&&(r=0),t.length===0)return r>this.length?this.length:r;let i=n.byteLength;if(i===0)throw new TypeError("search must be at least 1 byte long");let o=256,s=new Int32Array(o);for(let h=0;h<o;h++)s[h]=-1;for(let h=0;h<i;h++)s[n[h]]=h;let a=s,c=this.byteLength-n.byteLength,f=n.byteLength-1,u;for(let h=r;h<=c;h+=u){u=0;for(let l=f;l>=0;l--){let d=this.get(h+l);if(n[l]!==d){u=Math.max(1,l-a[d]);break}}if(u===0)return h}return-1}getInt8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getInt8(0)}setInt8(t,r){let n=ge(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setInt8(0,r),this.write(n,t)}getInt16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt16(0,r)}setInt16(t,r,n){let i=Ye(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt16(0,r,n),this.write(i,t)}getInt32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getInt32(0,r)}setInt32(t,r,n){let i=Ye(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setInt32(0,r,n),this.write(i,t)}getBigInt64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigInt64(0,r)}setBigInt64(t,r,n){let i=Ye(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigInt64(0,r,n),this.write(i,t)}getUint8(t){let r=this.subarray(t,t+1);return new DataView(r.buffer,r.byteOffset,r.byteLength).getUint8(0)}setUint8(t,r){let n=ge(1);new DataView(n.buffer,n.byteOffset,n.byteLength).setUint8(0,r),this.write(n,t)}getUint16(t,r){let n=this.subarray(t,t+2);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint16(0,r)}setUint16(t,r,n){let i=Ye(2);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint16(0,r,n),this.write(i,t)}getUint32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getUint32(0,r)}setUint32(t,r,n){let i=Ye(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,r,n),this.write(i,t)}getBigUint64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getBigUint64(0,r)}setBigUint64(t,r,n){let i=Ye(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setBigUint64(0,r,n),this.write(i,t)}getFloat32(t,r){let n=this.subarray(t,t+4);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat32(0,r)}setFloat32(t,r,n){let i=Ye(4);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat32(0,r,n),this.write(i,t)}getFloat64(t,r){let n=this.subarray(t,t+8);return new DataView(n.buffer,n.byteOffset,n.byteLength).getFloat64(0,r)}setFloat64(t,r,n){let i=Ye(8);new DataView(i.buffer,i.byteOffset,i.byteLength).setFloat64(0,r,n),this.write(i,t)}equals(t){if(t==null||!(t instanceof te)||t.bufs.length!==this.bufs.length)return!1;for(let r=0;r<this.bufs.length;r++)if(!kt(this.bufs[r],t.bufs[r]))return!1;return!0}static fromUint8Arrays(t,r){let n=new te;return n.bufs=t,r==null&&(r=t.reduce((i,o)=>i+o.byteLength,0)),n.length=r,n}};function mi(e){return e instanceof Uint8Array?{get(t){return e[t]},set(t,r){e[t]=r}}:{get(t){return e.get(t)},set(t,r){e.set(t,r)}}}var E0=4294967296,fe=class{constructor(t=0,r=0){this.hi=t,this.lo=r}toBigInt(t){if(t===!0)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){let r=~this.lo+1>>>0,n=~this.hi>>>0;return r===0&&(n=n+1>>>0),-(BigInt(r)+(BigInt(n)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toNumber(t){return Number(this.toBigInt(t))}zzDecode(){let t=-(this.lo&1),r=((this.lo>>>1|this.hi<<31)^t)>>>0,n=(this.hi>>>1^t)>>>0;return new fe(n,r)}zzEncode(){let t=this.hi>>31,r=((this.hi<<1|this.lo>>>31)^t)>>>0,n=(this.lo<<1^t)>>>0;return new fe(r,n)}toBytes(t,r=0){let n=mi(t);for(;this.hi>0;)n.set(r++,this.lo&127|128),this.lo=(this.lo>>>7|this.hi<<25)>>>0,this.hi>>>=7;for(;this.lo>127;)n.set(r++,this.lo&127|128),this.lo=this.lo>>>7;n.set(r++,this.lo)}static fromBigInt(t){if(t===0n)return new fe;let r=t<0;r&&(t=-t);let n=Number(t>>32n)|0,i=Number(t-(BigInt(n)<<32n))|0;return r&&(n=~n>>>0,i=~i>>>0,++i>E0&&(i=0,++n>E0&&(n=0))),new fe(n,i)}static fromNumber(t){if(t===0)return new fe;let r=t<0;r&&(t=-t);let n=t>>>0,i=(t-n)/4294967296>>>0;return r&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new fe(i,n)}static fromBytes(t,r=0){let n=mi(t),i=new fe,o=0;if(t.length-r>4){for(;o<4;++o)if(i.lo=(i.lo|(n.get(r)&127)<<o*7)>>>0,n.get(r++)<128)return i;if(i.lo=(i.lo|(n.get(r)&127)<<28)>>>0,i.hi=(i.hi|(n.get(r)&127)>>4)>>>0,n.get(r++)<128)return i;o=0}else for(;o<4;++o){if(r>=t.length)throw RangeError(`index out of range: ${r} > ${t.length}`);if(i.lo=(i.lo|(n.get(r)&127)<<o*7)>>>0,n.get(r++)<128)return i}if(t.length-r>4){for(;o<5;++o)if(i.hi=(i.hi|(n.get(r)&127)<<o*7+3)>>>0,n.get(r++)<128)return i}else if(r<t.byteLength)for(;o<5;++o){if(r>=t.length)throw RangeError(`index out of range: ${r} > ${t.length}`);if(i.hi=(i.hi|(n.get(r)&127)<<o*7+3)>>>0,n.get(r++)<128)return i}throw RangeError("invalid varint encoding")}};var Hl=Math.pow(2,7),ql=Math.pow(2,14),zl=Math.pow(2,21),Gl=Math.pow(2,28),$l=Math.pow(2,35),Wl=Math.pow(2,42),Yl=Math.pow(2,49),Xl=Math.pow(2,56),Zl=Math.pow(2,63),Xe={encodingLength(e){return e<Hl?1:e<ql?2:e<zl?3:e<Gl?4:e<$l?5:e<Wl?6:e<Yl?7:e<Xl?8:e<Zl?9:10},encode(e,t,r=0){if(Number.MAX_SAFE_INTEGER!=null&&e>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return t==null&&(t=ge(Xe.encodingLength(e))),fe.fromNumber(e).toBytes(t,r),t},decode(e,t=0){return fe.fromBytes(e,t).toNumber(!0)}};function xi(e){return e[Symbol.asyncIterator]!=null}var vi=e=>{let t=Xe.encodingLength(e),r=ge(t);return Xe.encode(e,r),vi.bytes=t,r};vi.bytes=0;function wi(e,t){t=t??{};let r=t.lengthEncoder??vi;function*n(i){let o=r(i.byteLength);o instanceof Uint8Array?yield o:yield*o,i instanceof Uint8Array?yield i:yield*i}return xi(e)?async function*(){for await(let i of e)yield*n(i)}():function*(){for(let i of e)yield*n(i)}()}wi.single=(e,t)=>{t=t??{};let r=t.lengthEncoder??vi;return new te(r(e.byteLength),e)};var Zr=mt(Oo(),1);var jl=8,Jl=1024*1024*4,Ir;(function(e){e[e.LENGTH=0]="LENGTH",e[e.DATA=1]="DATA"})(Ir||(Ir={}));var Vo=e=>{let t=Xe.decode(e);return Vo.bytes=Xe.encodingLength(t),t};Vo.bytes=0;function Un(e,t){let r=new te,n=Ir.LENGTH,i=-1,o=t?.lengthDecoder??Vo,s=t?.maxLengthLength??jl,a=t?.maxDataLength??Jl;function*c(){for(;r.byteLength>0;){if(n===Ir.LENGTH)try{if(i=o(r),i<0)throw(0,Zr.default)(new Error("invalid message length"),"ERR_INVALID_MSG_LENGTH");if(i>a)throw(0,Zr.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");let f=o.bytes;r.consume(f),t?.onLength!=null&&t.onLength(i),n=Ir.DATA}catch(f){if(f instanceof RangeError){if(r.byteLength>s)throw(0,Zr.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG");break}throw f}if(n===Ir.DATA){if(r.byteLength<i)break;let f=r.sublist(0,i);r.consume(i),t?.onData!=null&&t.onData(f),yield f,n=Ir.LENGTH}}}return xi(e)?async function*(){for await(let f of e)r.append(f),yield*c();if(r.byteLength>0)throw(0,Zr.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}():function*(){for(let f of e)r.append(f),yield*c();if(r.byteLength>0)throw(0,Zr.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF")}()}Un.fromReader=(e,t)=>{let r=1,n=async function*(){for(;;)try{let{done:o,value:s}=await e.next(r);if(o===!0)return;s!=null&&(yield s)}catch(o){if(o.code==="ERR_UNDER_READ")return{done:!0,value:null};throw o}finally{r=1}}();return Un(n,{...t??{},onLength:o=>{r=o}})};function Ho(){let e={};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}function qo(){let e=Ho(),t=!1;return{sink:async r=>{if(t)throw new Error("already piped");t=!0,e.resolve(r)},source:async function*(){yield*await e.promise}()}}function B0(){let e=qo(),t=qo();return[{source:e.source,sink:t.sink},{source:t.source,sink:e.sink}]}var bi=class{constructor(t){if(!(t>0)||t-1&t)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(t),this.mask=t-1,this.top=0,this.btm=0,this.next=null}push(t){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=t,this.top=this.top+1&this.mask,!0)}shift(){let t=this.buffer[this.btm];if(t!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,t}isEmpty(){return this.buffer[this.btm]===void 0}},Qr=class{constructor(t={}){this.hwm=t.splitLimit??16,this.head=new bi(this.hwm),this.tail=this.head,this.size=0}calculateSize(t){return t?.byteLength!=null?t.byteLength:1}push(t){if(t?.value!=null&&(this.size+=this.calculateSize(t.value)),!this.head.push(t)){let r=this.head;this.head=r.next=new bi(2*this.head.buffer.length),this.head.push(t)}}shift(){let t=this.tail.shift();if(t===void 0&&this.tail.next!=null){let r=this.tail.next;this.tail.next=null,this.tail=r,t=this.tail.shift()}return t?.value!=null&&(this.size-=this.calculateSize(t.value)),t}isEmpty(){return this.head.isEmpty()}};function jr(e={}){return ep(r=>{let n=r.shift();if(n==null)return{done:!0};if(n.error!=null)throw n.error;return{done:n.done===!0,value:n.value}},e)}function ep(e,t){t=t??{};let r=t.onEnd,n=new Qr,i,o,s,a=async()=>n.isEmpty()?s?{done:!0}:await new Promise((y,m)=>{o=x=>{o=null,n.push(x);try{y(e(n))}catch(b){m(b)}return i}}):e(n),c=y=>o!=null?o(y):(n.push(y),i),f=y=>(n=new Qr,o!=null?o({error:y}):(n.push({error:y}),i)),u=y=>{if(s)return i;if(t?.objectMode!==!0&&y?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return c({done:!1,value:y})},h=y=>s?i:(s=!0,y!=null?f(y):c({done:!0})),l=()=>(n=new Qr,h(),{done:!0}),d=y=>(h(y),{done:!0});if(i={[Symbol.asyncIterator](){return this},next:a,return:l,throw:d,push:u,end:h,get readableLength(){return n.size}},r==null)return i;let p=i;return i={[Symbol.asyncIterator](){return this},next(){return p.next()},throw(y){return p.throw(y),r!=null&&(r(y),r=void 0),{done:!0}},return(){return p.return(),r!=null&&(r(),r=void 0),{done:!0}},push:u,end(y){return p.end(y),r!=null&&(r(y),r=void 0),i},get readableLength(){return p.readableLength}},i}var Ei=mt(Oo(),1),C0=e=>Xe.decode(e);C0.bytes=0;function zo(e,t){let r=jr();e.sink(r).catch(s=>{r.end(s)}),e.sink=async s=>{for await(let a of s)r.push(a);r.end()};let n=e.source;e.source[Symbol.iterator]!=null?n=e.source[Symbol.iterator]():e.source[Symbol.asyncIterator]!=null&&(n=e.source[Symbol.asyncIterator]());let i=new te,o={read:async s=>{if(s==null){let{done:c,value:f}=await n.next();return c===!0?new te:f}for(;i.byteLength<s;){let{value:c,done:f}=await n.next();if(f===!0)throw(0,Ei.default)(new Error("unexpected end of input"),"ERR_UNEXPECTED_EOF");i.append(c)}let a=i.sublist(0,s);return i.consume(s),a},readLP:async()=>{let s=-1,a=new te,c=t?.lengthDecoder??C0;for(;;){a.append(await o.read(1));try{s=c(a)}catch(f){if(f instanceof RangeError)continue;throw f}if(s>-1)break;if(t?.maxLengthLength!=null&&a.byteLength>t.maxLengthLength)throw(0,Ei.default)(new Error("message length length too long"),"ERR_MSG_LENGTH_TOO_LONG")}if(t?.maxDataLength!=null&&s>t.maxDataLength)throw(0,Ei.default)(new Error("message length too long"),"ERR_MSG_DATA_TOO_LONG");return await o.read(s)},readPB:async s=>{let a=await o.readLP();if(a==null)throw new Error("Value is null");let c=a instanceof Uint8Array?a:a.subarray();return s.decode(c)},write:s=>{s instanceof Uint8Array?r.push(s):r.push(s.subarray())},writeLP:s=>{o.write(wi.single(s,t))},writePB:(s,a)=>{o.writeLP(a.encode(s))},pb:s=>({read:async()=>await o.readPB(s),write:a=>{o.writePB(a,s)},unwrap:()=>o}),unwrap:()=>{let s=e.source;return e.source=async function*(){yield*i,yield*s}(),e}};return o}function rp(e){return e[Symbol.asyncIterator]!=null}function np(...e){let t=[];for(let r of e)rp(r)||t.push(r);return t.length===e.length?function*(){for(let r of t)yield*r}():async function*(){let r=jr({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(e.map(async n=>{for await(let i of n)r.push(i)})),r.end()}catch(n){r.end(n)}}),yield*r}()}var _0=np;function I0(e,...t){if(e==null)throw new Error("Empty pipeline");if(Go(e)){let n=e;e=()=>n.source}else if(L0(e)||T0(e)){let n=e;e=()=>n}let r=[e,...t];if(r.length>1&&Go(r[r.length-1])&&(r[r.length-1]=r[r.length-1].sink),r.length>2)for(let n=1;n<r.length-1;n++)Go(r[n])&&(r[n]=op(r[n]));return ip(...r)}var ip=(...e)=>{let t;for(;e.length>0;)t=e.shift()(t);return t},T0=e=>e?.[Symbol.asyncIterator]!=null,L0=e=>e?.[Symbol.iterator]!=null,Go=e=>e==null?!1:e.sink!=null&&e.source!=null,op=e=>t=>{let r=e.sink(t);if(r?.then!=null){let n=jr({objectMode:!0});r.then(()=>{n.end()},s=>{n.end(s)});let i,o=e.source;if(T0(o))i=async function*(){yield*o,n.end()};else if(L0(o))i=function*(){yield*o,n.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return _0(n,i())}return e.source};var R0=!!globalThis.process?.env?.DUMP_SESSION_KEYS;function $o(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function sp(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function P0(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ap(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");$o(e.outputLen),$o(e.blockLen)}function cp(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function fp(e,t){P0(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var up={number:$o,bool:sp,bytes:P0,hash:ap,exists:cp,output:fp},ue=up;var hp=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var lp=e=>e instanceof Uint8Array;var Si=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Ee=(e,t)=>e<<32-t|e>>>t,pp=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!pp)throw new Error("Non little-endian hardware is not supported");var xv=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function dp(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function sr(e){if(typeof e=="string"&&(e=dp(e)),!lp(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}var Jr=class{clone(){return this._cloneInto()}};function Wo(e){let t=n=>e().update(sr(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}var Ai=class extends Jr{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,ue.hash(t);let n=sr(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(n.length>i?t.create().update(n).digest():n);for(let s=0;s<o.length;s++)o[s]^=54;this.iHash.update(o),this.oHash=t.create();for(let s=0;s<o.length;s++)o[s]^=106;this.oHash.update(o),o.fill(0)}update(t){return ue.exists(this),this.iHash.update(t),this}digestInto(t){ue.exists(this),ue.bytes(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:o,blockLen:s,outputLen:a}=this;return t=t,t.finished=i,t.destroyed=o,t.blockLen=s,t.outputLen=a,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Bi=(e,t,r)=>new Ai(e,t).update(r).digest();Bi.create=(e,t)=>new Ai(e,t);function yp(e,t,r){return ue.hash(e),r===void 0&&(r=new Uint8Array(e.outputLen)),Bi(e,sr(r),sr(t))}var Yo=new Uint8Array([0]),N0=new Uint8Array;function gp(e,t,r,n=32){if(ue.hash(e),ue.number(n),n>255*e.outputLen)throw new Error("Length should be <= 255*HashLen");let i=Math.ceil(n/e.outputLen);r===void 0&&(r=N0);let o=new Uint8Array(i*e.outputLen),s=Bi.create(e,t),a=s._cloneInto(),c=new Uint8Array(s.outputLen);for(let f=0;f<i;f++)Yo[0]=f+1,a.update(f===0?N0:c).update(r).update(Yo).digestInto(c),o.set(c,e.outputLen*f),s._cloneInto(a);return s.destroy(),a.destroy(),c.fill(0),Yo.fill(0),o.slice(0,n)}var U0=(e,t,r,n,i)=>gp(e,yp(e,t,r),n,i);function mp(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),c=n?4:0,f=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+f,a,n)}var Ci=class extends Jr{constructor(t,r,n,i){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Si(this.buffer)}update(t){ue.exists(this);let{view:r,buffer:n,blockLen:i}=this;t=sr(t);let o=t.length;for(let s=0;s<o;){let a=Math.min(i-this.pos,o-s);if(a===i){let c=Si(t);for(;i<=o-s;s+=i)this.process(c,s);continue}n.set(t.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ue.exists(this),ue.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:o}=this,{pos:s}=this;r[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(n,0),s=0);for(let h=s;h<i;h++)r[h]=0;mp(n,i-8,BigInt(this.length*8),o),this.process(n,0);let a=Si(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let f=c/4,u=this.get();if(f>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<f;h++)a.setUint32(4*h,u[h],o)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:o,destroyed:s,pos:a}=this;return t.length=i,t.pos=a,t.finished=o,t.destroyed=s,i%r&&t.buffer.set(n),t}};var xp=(e,t,r)=>e&t^~e&r,vp=(e,t,r)=>e&t^e&r^t&r,wp=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ar=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cr=new Uint32Array(64),_i=class extends Ci{constructor(){super(64,32,8,!1),this.A=ar[0]|0,this.B=ar[1]|0,this.C=ar[2]|0,this.D=ar[3]|0,this.E=ar[4]|0,this.F=ar[5]|0,this.G=ar[6]|0,this.H=ar[7]|0}get(){let{A:t,B:r,C:n,D:i,E:o,F:s,G:a,H:c}=this;return[t,r,n,i,o,s,a,c]}set(t,r,n,i,o,s,a,c){this.A=t|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=o|0,this.F=s|0,this.G=a|0,this.H=c|0}process(t,r){for(let h=0;h<16;h++,r+=4)cr[h]=t.getUint32(r,!1);for(let h=16;h<64;h++){let l=cr[h-15],d=cr[h-2],p=Ee(l,7)^Ee(l,18)^l>>>3,y=Ee(d,17)^Ee(d,19)^d>>>10;cr[h]=y+cr[h-7]+p+cr[h-16]|0}let{A:n,B:i,C:o,D:s,E:a,F:c,G:f,H:u}=this;for(let h=0;h<64;h++){let l=Ee(a,6)^Ee(a,11)^Ee(a,25),d=u+l+xp(a,c,f)+wp[h]+cr[h]|0,y=(Ee(n,2)^Ee(n,13)^Ee(n,22))+vp(n,i,o)|0;u=f,f=c,c=a,a=s+d|0,s=o,o=i,i=n,n=d+y|0}n=n+this.A|0,i=i+this.B|0,o=o+this.C|0,s=s+this.D|0,a=a+this.E|0,c=c+this.F|0,f=f+this.G|0,u=u+this.H|0,this.set(n,i,o,s,a,c,f,u)}roundClean(){cr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Xo=class extends _i{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Zo=Wo(()=>new _i),Pv=Wo(()=>new Xo);var hs=mt(is(),1),en=mt(oc(),1),ls={hashSHA256(e){return Zo(e)},getHKDF(e,t){let r=U0(Zo,t,e,void 0,96),n=r.subarray(0,32),i=r.subarray(32,64),o=r.subarray(64,96);return[n,i,o]},generateX25519KeyPair(){let e=en.generateKeyPair();return{publicKey:e.publicKey,privateKey:e.secretKey}},generateX25519KeyPairFromSeed(e){let t=en.generateKeyPairFromSeed(e);return{publicKey:t.publicKey,privateKey:t.secretKey}},generateX25519SharedKey(e,t){return en.sharedKey(e,t)},chaCha20Poly1305Encrypt(e,t,r,n){return new hs.ChaCha20Poly1305(n).seal(t,e,r)},chaCha20Poly1305Decrypt(e,t,r,n,i){return new hs.ChaCha20Poly1305(n).open(t,e,r,i)}};var ps=mt(is(),1);var Ed=e=>globalThis.Buffer?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e),rn=e=>{let t=Ed(2);return new DataView(t.buffer,t.byteOffset,t.byteLength).setUint16(0,e,!1),t};rn.bytes=2;var Fn=e=>{if(e.length<2)throw RangeError("Could not decode int16BE");return e instanceof Uint8Array?new DataView(e.buffer,e.byteOffset,e.byteLength).getUint16(0,!1):e.getUint16(0)};Fn.bytes=2;function sc(e){return xt([e.ne,e.ciphertext],e.ne.length+e.ciphertext.length)}function ac(e){return xt([e.ne,e.ns,e.ciphertext],e.ne.length+e.ns.length+e.ciphertext.length)}function cc(e){return xt([e.ns,e.ciphertext],e.ns.length+e.ciphertext.length)}function fc(e){if(e.length<32)throw new Error("Cannot decode stage 0 MessageBuffer: length less than 32 bytes.");return{ne:e.subarray(0,32),ciphertext:e.subarray(32,e.length),ns:new Uint8Array(0)}}function uc(e){if(e.length<80)throw new Error("Cannot decode stage 1 MessageBuffer: length less than 80 bytes.");return{ne:e.subarray(0,32),ns:e.subarray(32,80),ciphertext:e.subarray(80,e.length)}}function hc(e){if(e.length<48)throw new Error("Cannot decode stage 2 MessageBuffer: length less than 48 bytes.");return{ne:new Uint8Array(0),ns:e.subarray(0,48),ciphertext:e.subarray(48,e.length)}}function pc(e,t){return async function*(r){for await(let n of r)for(let i=0;i<n.length;i+=65519){let o=i+65519;o>n.length&&(o=n.length);let s=e.encrypt(n.subarray(i,o),e.session);t?.encryptedPackets.increment(),yield rn(s.byteLength),yield s}}}function dc(e,t){return async function*(r){for await(let n of r)for(let i=0;i<n.length;i+=65535){let o=i+65535;if(o>n.length&&(o=n.length),o-ps.TAG_LENGTH<i)throw new Error("Invalid chunk");let s=n.subarray(i,o),a=n.subarray(i,o-ps.TAG_LENGTH),{plaintext:c,valid:f}=e.decrypt(s,e.session,a);if(!f)throw t?.decryptErrors.increment(),new Error("Failed to validate decrypted chunk");t?.decryptedPackets.increment(),yield c}}}var ds=class extends Error{code;constructor(t="Unexpected Peer"){super(t),this.code=ds.code}},nn=ds;yi(nn,"code","ERR_UNEXPECTED_PEER");var ys=class extends Error{code;constructor(t="Invalid crypto exchange"){super(t),this.code=ys.code}},fr=ys;yi(fr,"code","ERR_INVALID_CRYPTO_EXCHANGE");var g3=mt(qn(),1),m3=mt(Rf(),1);var yt=class extends Error{code;props;constructor(t,r,n){super(t),this.code=r,this.name=n?.name??"CodeError",this.props=n??{}}};var fm=mt(vt(),1);var Hs={};Ft(Hs,{identity:()=>j1});function W1(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),s=o.charCodeAt(0);if(r[s]!==255)throw new TypeError(o+" is ambiguous");r[s]=i}var a=e.length,c=e.charAt(0),f=Math.log(a)/Math.log(256),u=Math.log(256)/Math.log(a);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,m=0,x=0,b=p.length;x!==b&&p[x]===0;)x++,y++;for(var w=(b-x)*u+1>>>0,C=new Uint8Array(w);x!==b;){for(var A=p[x],B=0,L=w-1;(A!==0||B<m)&&L!==-1;L--,B++)A+=256*C[L]>>>0,C[L]=A%a>>>0,A=A/a>>>0;if(A!==0)throw new Error("Non-zero carry");m=B,x++}for(var R=w-m;R!==w&&C[R]===0;)R++;for(var D=c.repeat(y);R<w;++R)D+=e.charAt(C[R]);return D}function l(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var m=0,x=0;p[y]===c;)m++,y++;for(var b=(p.length-y)*f+1>>>0,w=new Uint8Array(b);p[y];){var C=r[p.charCodeAt(y)];if(C===255)return;for(var A=0,B=b-1;(C!==0||A<x)&&B!==-1;B--,A++)C+=a*w[B]>>>0,w[B]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");x=A,y++}if(p[y]!==" "){for(var L=b-x;L!==b&&w[L]===0;)L++;for(var R=new Uint8Array(m+(b-L)),D=m;L!==b;)R[D++]=w[L++];return R}}}function d(p){var y=l(p);if(y)return y;throw new Error(`Non-${t} character`)}return{encode:h,decodeUnsafe:l,decode:d}}var Y1=W1,X1=Y1,Pf=X1;var Rw=new Uint8Array(0);var Nf=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},rr=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")};var Uf=e=>new TextEncoder().encode(e),kf=e=>new TextDecoder().decode(e);var Fs=class{constructor(t,r,n){this.name=t,this.prefix=r,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}},Ms=class{constructor(t,r,n){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Kf(this,t)}},Os=class{constructor(t){this.decoders=t}or(t){return Kf(this,t)}decode(t){let r=t[0],n=this.decoders[r];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Kf=(e,t)=>new Os({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}}),Vs=class{constructor(t,r,n,i){this.name=t,this.prefix=r,this.baseEncode=n,this.baseDecode=i,this.encoder=new Fs(t,r,n),this.decoder=new Ms(t,r,i)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}},fn=({name:e,prefix:t,encode:r,decode:n})=>new Vs(e,t,r,n),dr=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=Pf(r,t);return fn({prefix:e,name:t,encode:n,decode:o=>rr(i(o))})},Z1=(e,t,r,n)=>{let i={};for(let u=0;u<t.length;++u)i[t[u]]=u;let o=e.length;for(;e[o-1]==="=";)--o;let s=new Uint8Array(o*r/8|0),a=0,c=0,f=0;for(let u=0;u<o;++u){let h=i[e[u]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);c=c<<r|h,a+=r,a>=8&&(a-=8,s[f++]=255&c>>a)}if(a>=r||255&c<<8-a)throw new SyntaxError("Unexpected end of data");return s},Q1=(e,t,r)=>{let n=t[t.length-1]==="=",i=(1<<r)-1,o="",s=0,a=0;for(let c=0;c<e.length;++c)for(a=a<<8|e[c],s+=8;s>r;)s-=r,o+=t[i&a>>s];if(s&&(o+=t[i&a<<r-s]),n)for(;o.length*r&7;)o+="=";return o},Rt=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>fn({prefix:t,name:e,encode(i){return Q1(i,n,r)},decode(i){return Z1(i,n,r,e)}});var j1=fn({prefix:"\0",name:"identity",encode:e=>kf(e),decode:e=>Uf(e)});var qs={};Ft(qs,{base2:()=>J1});var J1=Rt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var zs={};Ft(zs,{base8:()=>tg});var tg=Rt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Gs={};Ft(Gs,{base10:()=>eg});var eg=dr({prefix:"9",name:"base10",alphabet:"0123456789"});var $s={};Ft($s,{base16:()=>rg,base16upper:()=>ng});var rg=Rt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),ng=Rt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ws={};Ft(Ws,{base32:()=>Be,base32hex:()=>ag,base32hexpad:()=>fg,base32hexpadupper:()=>ug,base32hexupper:()=>cg,base32pad:()=>og,base32padupper:()=>sg,base32upper:()=>ig,base32z:()=>hg});var Be=Rt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ig=Rt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),og=Rt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),sg=Rt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ag=Rt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),cg=Rt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fg=Rt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),ug=Rt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hg=Rt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ys={};Ft(Ys,{base36:()=>lg,base36upper:()=>pg});var lg=dr({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),pg=dr({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Xs={};Ft(Xs,{base58btc:()=>Nt,base58flickr:()=>dg});var Nt=dr({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),dg=dr({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Zs={};Ft(Zs,{base64:()=>un,base64pad:()=>yg,base64url:()=>gg,base64urlpad:()=>mg});var un=Rt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),yg=Rt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gg=Rt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),mg=Rt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Qs={};Ft(Qs,{base256emoji:()=>Eg});var Ff=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),xg=Ff.reduce((e,t,r)=>(e[r]=t,e),[]),vg=Ff.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function wg(e){return e.reduce((t,r)=>(t+=xg[r],t),"")}function bg(e){let t=[];for(let r of e){let n=vg[r.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}var Eg=fn({prefix:"\u{1F680}",name:"base256emoji",encode:wg,decode:bg});var ra={};Ft(ra,{sha256:()=>Gt,sha512:()=>Vg});var Me={};Ft(Me,{Digest:()=>Dr,create:()=>Ce,decode:()=>yr,equals:()=>Js});var Sg=Vf,Mf=128,Ag=127,Bg=~Ag,Cg=Math.pow(2,31);function Vf(e,t,r){t=t||[],r=r||0;for(var n=r;e>=Cg;)t[r++]=e&255|Mf,e/=128;for(;e&Bg;)t[r++]=e&255|Mf,e>>>=7;return t[r]=e|0,Vf.bytes=r-n+1,t}var _g=js,Ig=128,Of=127;function js(e,n){var r=0,n=n||0,i=0,o=n,s,a=e.length;do{if(o>=a)throw js.bytes=0,new RangeError("Could not decode varint");s=e[o++],r+=i<28?(s&Of)<<i:(s&Of)*Math.pow(2,i),i+=7}while(s>=Ig);return js.bytes=o-n,r}var Tg=Math.pow(2,7),Lg=Math.pow(2,14),Rg=Math.pow(2,21),Pg=Math.pow(2,28),Ng=Math.pow(2,35),Ug=Math.pow(2,42),kg=Math.pow(2,49),Dg=Math.pow(2,56),Kg=Math.pow(2,63),Fg=function(e){return e<Tg?1:e<Lg?2:e<Rg?3:e<Pg?4:e<Ng?5:e<Ug?6:e<kg?7:e<Dg?8:e<Kg?9:10},Mg={encode:Sg,decode:_g,encodingLength:Fg},Og=Mg,$n=Og;var Wn=(e,t=0)=>[$n.decode(e,t),$n.decode.bytes],hn=(e,t,r=0)=>($n.encode(e,t,r),t),ln=e=>$n.encodingLength(e);var Ce=(e,t)=>{let r=t.byteLength,n=ln(e),i=n+ln(r),o=new Uint8Array(i+r);return hn(e,o,0),hn(r,o,n),o.set(t,i),new Dr(e,r,t,o)},yr=e=>{let t=rr(e),[r,n]=Wn(t),[i,o]=Wn(t.subarray(n)),s=t.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new Dr(r,i,s,t)},Js=(e,t)=>{if(e===t)return!0;{let r=t;return e.code===r.code&&e.size===r.size&&r.bytes instanceof Uint8Array&&Nf(e.bytes,r.bytes)}},Dr=class{constructor(t,r,n,i){this.code=t,this.size=r,this.digest=n,this.bytes=i}};var ea=({name:e,code:t,encode:r})=>new ta(e,t,r),ta=class{constructor(t,r,n){this.name=t,this.code=r,this.encode=n}digest(t){if(t instanceof Uint8Array){let r=this.encode(t);return r instanceof Uint8Array?Ce(this.code,r):r.then(n=>Ce(this.code,n))}else throw Error("Unknown type, must be binary type")}};var qf=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),Gt=ea({name:"sha2-256",code:18,encode:qf("SHA-256")}),Vg=ea({name:"sha2-512",code:19,encode:qf("SHA-512")});var na={};Ft(na,{identity:()=>gr});var zf=0,Hg="identity",Gf=rr,qg=e=>Ce(zf,Gf(e)),gr={code:zf,name:Hg,encode:Gf,digest:qg};var jw=new TextEncoder,Jw=new TextDecoder;var $f=(e,t)=>{let{bytes:r,version:n}=e;switch(n){case 0:return Wg(r,ia(e),t||Nt.encoder);default:return Yg(r,ia(e),t||Be.encoder)}};var Wf=new WeakMap,ia=e=>{let t=Wf.get(e);if(t==null){let r=new Map;return Wf.set(e,r),r}return t},wt=class{constructor(t,r,n,i){this.code=r,this.version=t,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:t,multihash:r}=this;if(t!==Yn)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Xg)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return wt.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:t,digest:r}=this.multihash,n=Ce(t,r);return wt.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(t){return wt.equals(this,t)}static equals(t,r){let n=r;return n&&t.code===n.code&&t.version===n.version&&Js(t.multihash,n.multihash)}toString(t){return $f(this,t)}toJSON(){return{"/":$f(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(t){if(t==null)return null;let r=t;if(r instanceof wt)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){let{version:n,code:i,multihash:o,bytes:s}=r;return new wt(n,i,o,s||Yf(n,i,o.bytes))}else if(r[Zg]===!0){let{version:n,multihash:i,code:o}=r,s=yr(i);return wt.create(n,o,s)}else return null}static create(t,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(t){case 0:{if(r!==Yn)throw new Error(`Version 0 CID must use dag-pb (code: ${Yn}) block encoding`);return new wt(t,r,n,n.bytes)}case 1:{let i=Yf(t,r,n.bytes);return new wt(t,r,n,i)}default:throw new Error("Invalid version")}}static createV0(t){return wt.create(0,Yn,t)}static createV1(t,r){return wt.create(1,t,r)}static decode(t){let[r,n]=wt.decodeFirst(t);if(n.length)throw new Error("Incorrect length");return r}static decodeFirst(t){let r=wt.inspectBytes(t),n=r.size-r.multihashSize,i=rr(t.subarray(n,n+r.multihashSize));if(i.byteLength!==r.multihashSize)throw new Error("Incorrect length");let o=i.subarray(r.multihashSize-r.digestSize),s=new Dr(r.multihashCode,r.digestSize,o,i);return[r.version===0?wt.createV0(s):wt.createV1(r.codec,s),t.subarray(r.size)]}static inspectBytes(t){let r=0,n=()=>{let[h,l]=Wn(t.subarray(r));return r+=l,h},i=n(),o=Yn;if(i===18?(i=0,r=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=r,a=n(),c=n(),f=r+c,u=f-s;return{version:i,codec:o,multihashCode:a,digestSize:c,multihashSize:u,size:f}}static parse(t,r){let[n,i]=$g(t,r),o=wt.decode(i);if(o.version===0&&t[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return ia(o).set(n,t),o}},$g=(e,t)=>{switch(e[0]){case"Q":{let r=t||Nt;return[Nt.prefix,r.decode(`${Nt.prefix}${e}`)]}case Nt.prefix:{let r=t||Nt;return[Nt.prefix,r.decode(e)]}case Be.prefix:{let r=t||Be;return[Be.prefix,r.decode(e)]}default:{if(t==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}}},Wg=(e,t,r)=>{let{prefix:n}=r;if(n!==Nt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(i==null){let o=r.encode(e).slice(1);return t.set(n,o),o}else return i},Yg=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(i==null){let o=r.encode(e);return t.set(n,o),o}else return i},Yn=112,Xg=18,Yf=(e,t,r)=>{let n=ln(e),i=n+ln(t),o=new Uint8Array(i+r.byteLength);return hn(e,o,0),hn(t,o,n),o.set(r,i),o},Zg=Symbol.for("@ipld/js-cid/CID");var Oe={...Hs,...qs,...zs,...Gs,...$s,...Ws,...Ys,...Xs,...Zs,...Qs},fb={...ra,...na};function Zf(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}var Xf=Zf("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),oa=Zf("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=ge(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Qg={utf8:Xf,"utf-8":Xf,hex:Oe.base16,latin1:oa,ascii:oa,binary:oa,...Oe},no=Qg;function Kt(e,t="utf8"){let r=no[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?or(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}var Ua={};Ft(Ua,{Ed25519PrivateKey:()=>zr,Ed25519PublicKey:()=>ei,generateKeyPair:()=>T2,generateKeyPairFromSeed:()=>rh,unmarshalEd25519PrivateKey:()=>_2,unmarshalEd25519PublicKey:()=>I2});var jg=mt(Lr(),1);var Ht=BigInt(0),rt=BigInt(1),vr=BigInt(2),Jg=BigInt(8),Qf=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),At=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Qf,n:Qf,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")});var ru=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),Xn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),mb=BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),t2=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),e2=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),r2=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),n2=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),tt=class{constructor(t,r,n,i){this.x=t,this.y=r,this.z=n,this.t=i}static fromAffine(t){if(!(t instanceof It))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(It.ZERO)?tt.ZERO:new tt(t.x,t.y,rt,I(t.x*t.y))}static toAffineBatch(t){let r=s2(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}equals(t){Jf(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=I(r*a),f=I(o*i),u=I(n*a),h=I(s*i);return c===f&&u===h}negate(){return new tt(I(-this.x),this.y,this.z,I(-this.t))}double(){let{x:t,y:r,z:n}=this,{a:i}=At,o=I(t*t),s=I(r*r),a=I(vr*I(n*n)),c=I(i*o),f=t+r,u=I(I(f*f)-o-s),h=c+s,l=h-a,d=c-s,p=I(u*l),y=I(h*d),m=I(u*d),x=I(l*h);return new tt(p,y,x,m)}add(t){Jf(t);let{x:r,y:n,z:i,t:o}=this,{x:s,y:a,z:c,t:f}=t,u=I((n-r)*(a+s)),h=I((n+r)*(a-s)),l=I(h-u);if(l===Ht)return this.double();let d=I(i*vr*f),p=I(o*vr*c),y=p+d,m=h+u,x=p-d,b=I(y*l),w=I(m*x),C=I(y*x),A=I(l*m);return new tt(b,w,A,C)}subtract(t){return this.add(t.negate())}precomputeWindow(t){let r=1+256/t,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(tt.BASE)&&(r=It.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&ua.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=tt.normalizeZ(i),ua.set(r,i)));let o=tt.ZERO,s=tt.BASE,a=1+256/n,c=2**(n-1),f=BigInt(2**n-1),u=2**n,h=BigInt(n);for(let l=0;l<a;l++){let d=l*c,p=Number(t&f);t>>=h,p>c&&(p-=u,t+=rt);let y=d,m=d+Math.abs(p)-1,x=l%2!==0,b=p<0;p===0?s=s.add(jf(x,i[y])):o=o.add(jf(b,i[m]))}return tt.normalizeZ([o,s])[0]}multiply(t,r){return this.wNAF(oo(t,At.l),r)}multiplyUnsafe(t){let r=oo(t,At.l,!1),n=tt.BASE,i=tt.ZERO;if(r===Ht)return i;if(this.equals(i)||r===rt)return this;if(this.equals(n))return this.wNAF(r);let o=i,s=this;for(;r>Ht;)r&rt&&(o=o.add(s)),s=s.double(),r>>=rt;return o}isSmallOrder(){return this.multiplyUnsafe(At.h).equals(tt.ZERO)}isTorsionFree(){let t=this.multiplyUnsafe(At.l/vr).double();return At.l%vr&&(t=t.add(this)),t.equals(tt.ZERO)}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(tt.ZERO);t==null&&(t=o?Jg:so(i));let s=I(r*t),a=I(n*t),c=I(i*t);if(o)return It.ZERO;if(c!==rt)throw new Error("invZ was invalid");return new It(s,a)}fromRistrettoBytes(){aa()}toRistrettoBytes(){aa()}fromRistrettoHash(){aa()}};tt.BASE=new tt(At.Gx,At.Gy,rt,I(At.Gx*At.Gy));tt.ZERO=new tt(Ht,rt,rt,Ht);function jf(e,t){let r=t.negate();return e?r:t}function Jf(e){if(!(e instanceof tt))throw new TypeError("ExtendedPoint expected")}function sa(e){if(!(e instanceof se))throw new TypeError("RistrettoPoint expected")}function aa(){throw new Error("Legacy method: switch to RistrettoPoint")}var se=class{constructor(t){this.ep=t}static calcElligatorRistrettoMap(t){let{d:r}=At,n=I(Xn*t*t),i=I((n+rt)*r2),o=BigInt(-1),s=I((o-r*n)*I(n+r)),{isValid:a,value:c}=la(i,s),f=I(c*t);xr(f)||(f=I(-f)),a||(c=f),a||(o=n);let u=I(o*(n-rt)*n2-s),h=c*c,l=I((c+c)*s),d=I(u*t2),p=I(rt-h),y=I(rt+h);return new tt(I(l*y),I(p*d),I(d*y),I(l*p))}static hashToCurve(t){t=wr(t,64);let r=ca(t.slice(0,32)),n=this.calcElligatorRistrettoMap(r),i=ca(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new se(n.add(o))}static fromHex(t){t=wr(t,32);let{a:r,d:n}=At,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=ca(t);if(!c2(Zn(o),t)||xr(o))throw new Error(i);let s=I(o*o),a=I(rt+r*s),c=I(rt-r*s),f=I(a*a),u=I(c*c),h=I(r*n*f-u),{isValid:l,value:d}=eu(I(h*u)),p=I(d*c),y=I(d*p*h),m=I((o+o)*p);xr(m)&&(m=I(-m));let x=I(a*y),b=I(m*x);if(!l||xr(b)||x===Ht)throw new Error(i);return new se(new tt(m,x,rt,b))}toRawBytes(){let{x:t,y:r,z:n,t:i}=this.ep,o=I(I(n+r)*I(n-r)),s=I(t*r),a=I(s*s),{value:c}=eu(I(o*a)),f=I(c*o),u=I(c*s),h=I(f*u*i),l;if(xr(i*h)){let p=I(r*Xn),y=I(t*Xn);t=p,r=y,l=I(f*e2)}else l=u;xr(t*h)&&(r=I(-r));let d=I((n-r)*l);return xr(d)&&(d=I(-d)),Zn(d)}toHex(){return Qn(this.toRawBytes())}toString(){return this.toHex()}equals(t){sa(t);let r=this.ep,n=t.ep,i=I(r.x*n.y)===I(r.y*n.x),o=I(r.y*n.y)===I(r.x*n.x);return i||o}add(t){return sa(t),new se(this.ep.add(t.ep))}subtract(t){return sa(t),new se(this.ep.subtract(t.ep))}multiply(t){return new se(this.ep.multiply(t))}multiplyUnsafe(t){return new se(this.ep.multiplyUnsafe(t))}};se.BASE=new se(tt.BASE);se.ZERO=new se(tt.ZERO);var ua=new WeakMap,It=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,ua.delete(this)}static fromHex(t,r=!0){let{d:n,P:i}=At;t=wr(t,32);let o=t.slice();o[31]=t[31]&-129;let s=jn(o);if(r&&s>=i)throw new Error("Expected 0 < hex < P");if(!r&&s>=ru)throw new Error("Expected 0 < hex < 2**256");let a=I(s*s),c=I(a-rt),f=I(n*a+rt),{isValid:u,value:h}=la(c,f);if(!u)throw new Error("Point.fromHex: invalid y coordinate");let l=(h&rt)===rt;return(t[31]&128)!==0!==l&&(h=I(-h)),new It(h,s)}static async fromPrivateKey(t){return(await ao(t)).point}toRawBytes(){let t=Zn(this.y);return t[31]|=this.x&rt?128:0,t}toHex(){return Qn(this.toRawBytes())}toX25519(){let{y:t}=this,r=I((rt+t)*so(rt-t));return Zn(r)}isTorsionFree(){return tt.fromAffine(this).isTorsionFree()}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new It(I(-this.x),this.y)}add(t){return tt.fromAffine(this).add(tt.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return tt.fromAffine(this).multiply(t,this).toAffine()}};It.BASE=new It(At.Gx,At.Gy);It.ZERO=new It(Ht,rt);var Kr=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromHex(t){let r=wr(t,64),n=It.fromHex(r.slice(0,32),!1),i=jn(r.slice(32,64));return new Kr(n,i)}assertValidity(){let{r:t,s:r}=this;if(!(t instanceof It))throw new Error("Expected Point instance");return oo(r,At.l,!1),this}toRawBytes(){let t=new Uint8Array(64);return t.set(this.r.toRawBytes()),t.set(Zn(this.s),32),t}toHex(){return Qn(this.toRawBytes())}};function tu(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var i2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Qn(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=i2[e[r]];return t}function ha(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function nu(e){let r=e.toString(16).padStart(64,"0");return ha(r)}function Zn(e){return nu(e).reverse()}function xr(e){return(I(e)&rt)===rt}function jn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+Qn(Uint8Array.from(e).reverse()))}var o2=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function ca(e){return I(jn(e)&o2)}function I(e,t=At.P){let r=e%t;return r>=Ht?r:t+r}function so(e,t=At.P){if(e===Ht||t<=Ht)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=I(e,t),n=t,i=Ht,o=rt,s=rt,a=Ht;for(;r!==Ht;){let f=n/r,u=n%r,h=i-s*f,l=o-a*f;n=r,r=u,i=s,o=a,s=h,a=l}if(n!==rt)throw new Error("invert: does not exist");return I(i,t)}function s2(e,t=At.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===Ht?o:(r[a]=o,I(o*s,t)),rt),i=so(n,t);return e.reduceRight((o,s,a)=>s===Ht?o:(r[a]=I(o*r[a],t),I(o*s,t)),i),r}function Ve(e,t){let{P:r}=At,n=e;for(;t-- >Ht;)n*=n,n%=r;return n}function a2(e){let{P:t}=At,r=BigInt(5),n=BigInt(10),i=BigInt(20),o=BigInt(40),s=BigInt(80),c=e*e%t*e%t,f=Ve(c,vr)*c%t,u=Ve(f,rt)*e%t,h=Ve(u,r)*u%t,l=Ve(h,n)*h%t,d=Ve(l,i)*l%t,p=Ve(d,o)*d%t,y=Ve(p,s)*p%t,m=Ve(y,s)*p%t,x=Ve(m,n)*h%t;return{pow_p_5_8:Ve(x,vr)*e%t,b2:c}}function la(e,t){let r=I(t*t*t),n=I(r*r*t),i=a2(e*n).pow_p_5_8,o=I(e*r*i),s=I(t*o*o),a=o,c=I(o*Xn),f=s===e,u=s===I(-e),h=s===I(-e*Xn);return f&&(o=a),(u||h)&&(o=c),xr(o)&&(o=I(-o)),{isValid:f||u,value:o}}function eu(e){return la(rt,e)}function io(e){return I(jn(e),At.l)}function c2(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function wr(e,t){let r=e instanceof Uint8Array?Uint8Array.from(e):ha(e);if(typeof t=="number"&&r.length!==t)throw new Error(`Expected ${t} bytes`);return r}function oo(e,t,r=!0){if(!t)throw new TypeError("Specify max value");if(typeof e=="number"&&Number.isSafeInteger(e)&&(e=BigInt(e)),typeof e=="bigint"&&e<t){if(r){if(Ht<e)return e}else if(Ht<=e)return e}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function f2(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function u2(e){if(e=typeof e=="bigint"||typeof e=="number"?nu(oo(e,ru)):wr(e),e.length!==32)throw new Error("Expected 32 bytes");return e}function h2(e){let t=f2(e.slice(0,32)),r=e.slice(32,64),n=io(t),i=It.BASE.multiply(n),o=i.toRawBytes();return{head:t,prefix:r,scalar:n,point:i,pointBytes:o}}var fa;async function ao(e){return h2(await br.sha512(u2(e)))}async function pa(e){return(await ao(e)).pointBytes}async function iu(e,t){e=wr(e);let{prefix:r,scalar:n,pointBytes:i}=await ao(t),o=io(await br.sha512(r,e)),s=It.BASE.multiply(o),a=io(await br.sha512(s.toRawBytes(),i,e)),c=I(o+a*n,At.l);return new Kr(s,c).toRawBytes()}function l2(e,t,r){t=wr(t),r instanceof It||(r=It.fromHex(r,!1));let{r:n,s:i}=e instanceof Kr?e.assertValidity():Kr.fromHex(e),o=tt.BASE.multiplyUnsafe(i);return{r:n,s:i,SB:o,pub:r,msg:t}}function p2(e,t,r,n){let i=io(n),o=tt.fromAffine(e).multiplyUnsafe(i);return tt.fromAffine(t).add(o).subtract(r).multiplyUnsafe(At.h).equals(tt.ZERO)}async function ou(e,t,r){let{r:n,SB:i,msg:o,pub:s}=l2(e,t,r),a=await br.sha512(n.toRawBytes(),s.toRawBytes(),o);return p2(s,n,i,a)}It.BASE._setWindowSize(8);var mr={node:jg,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},br={bytesToHex:Qn,hexToBytes:ha,concatBytes:tu,getExtendedPublicKey:ao,mod:I,invert:so,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:e=>{if(e=wr(e),e.length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return I(jn(e),At.l-rt)+rt},randomBytes:(e=32)=>{if(mr.web)return mr.web.getRandomValues(new Uint8Array(e));if(mr.node){let{randomBytes:t}=mr.node;return new Uint8Array(t(e).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>br.randomBytes(32),sha512:async(...e)=>{let t=tu(...e);if(mr.web){let r=await mr.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(r)}else{if(mr.node)return Uint8Array.from(mr.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(e=8,t=It.BASE){let r=t.equals(It.BASE)?t:new It(t.x,t.y);return r._setWindowSize(e),r.multiply(vr),r},sha512Sync:void 0};Object.defineProperties(br,{sha512Sync:{configurable:!1,get(){return fa},set(e){fa||(fa=e)}}});var pn=32,nr=64,co=32;async function su(){let e=br.randomPrivateKey(),t=await pa(e);return{privateKey:uu(e,t),publicKey:t}}async function au(e){if(e.length!==co)throw new TypeError('"seed" must be 32 bytes in length.');if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');let t=e,r=await pa(t);return{privateKey:uu(t,r),publicKey:r}}async function cu(e,t){let r=e.subarray(0,co);return iu(t,r)}async function fu(e,t,r){return ou(t,r,e)}function uu(e,t){let r=new Uint8Array(nr);for(let n=0;n<co;n++)r[n]=e[n],r[co+n]=t[n];return r}var ae={get(e=globalThis){let t=e.crypto;if(t==null||t.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return t}};var da={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function ya(e){let t=e?.algorithm??"AES-GCM",r=e?.keyLength??16,n=e?.nonceLength??12,i=e?.digest??"SHA-256",o=e?.saltLength??16,s=e?.iterations??32767,a=ae.get();r*=8;async function c(h,l){let d=a.getRandomValues(new Uint8Array(o)),p=a.getRandomValues(new Uint8Array(n)),y={name:t,iv:p};typeof l=="string"&&(l=Kt(l));let m;if(l.length===0){m=await a.subtle.importKey("jwk",da,{name:"AES-GCM"},!0,["encrypt"]);try{let b={name:"PBKDF2",salt:d,iterations:s,hash:{name:i}},w=await a.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveKey"]);m=await a.subtle.deriveKey(b,w,{name:t,length:r},!0,["encrypt"])}catch{m=await a.subtle.importKey("jwk",da,{name:"AES-GCM"},!0,["encrypt"])}}else{let b={name:"PBKDF2",salt:d,iterations:s,hash:{name:i}},w=await a.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveKey"]);m=await a.subtle.deriveKey(b,w,{name:t,length:r},!0,["encrypt"])}let x=await a.subtle.encrypt(y,m,h);return xt([d,y.iv,new Uint8Array(x)])}async function f(h,l){let d=h.subarray(0,o),p=h.subarray(o,o+n),y=h.subarray(o+n),m={name:t,iv:p};typeof l=="string"&&(l=Kt(l));let x;if(l.length===0)try{let w={name:"PBKDF2",salt:d,iterations:s,hash:{name:i}},C=await a.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(w,C,{name:t,length:r},!0,["decrypt"])}catch{x=await a.subtle.importKey("jwk",da,{name:"AES-GCM"},!0,["decrypt"])}else{let w={name:"PBKDF2",salt:d,iterations:s,hash:{name:i}},C=await a.subtle.importKey("raw",l,{name:"PBKDF2"},!1,["deriveKey"]);x=await a.subtle.deriveKey(w,C,{name:t,length:r},!0,["decrypt"])}let b=await a.subtle.decrypt(m,x,y);return new Uint8Array(b)}return{encrypt:c,decrypt:f}}async function dn(e,t){let n=await ya().encrypt(e,t);return un.encode(n)}var Ia=mt(wa(),1),ju=mt(zu(),1),Ju=mt(Mr(),1),Ta=mt(_a(),1),th=mt(Qu(),1);function A2(){Ju.default._configure(),Ia.default._configure(ju.default),Ta.default._configure(th.default)}A2();var eh=["uint64","int64","sint64","fixed64","sfixed64"];function B2(e){for(let t of eh){if(e[t]==null)continue;let r=e[t];e[t]=function(){return BigInt(r.call(this).toString())}}return e}function La(e){return B2(new Ia.default(e))}function C2(e){for(let t of eh){if(e[t]==null)continue;let r=e[t];e[t]=function(n){return r.call(this,n.toString())}}return e}function Ra(){return C2(Ta.default.create())}function Vr(e,t){let r=La(e instanceof Uint8Array?e:e.subarray());return t.decode(r)}function Hr(e,t){let r=Ra();return t.encode(e,r,{lengthDelimited:!1}),r.finish()}var gn;(function(e){e[e.VARINT=0]="VARINT",e[e.BIT64=1]="BIT64",e[e.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",e[e.START_GROUP=3]="START_GROUP",e[e.END_GROUP=4]="END_GROUP",e[e.BIT32=5]="BIT32"})(gn||(gn={}));function po(e,t,r,n){return{name:e,type:t,encode:r,decode:n}}function Pa(e){function t(i){if(e[i.toString()]==null)throw new Error("Invalid enum value");return e[i]}let r=function(o,s){let a=t(o);s.int32(a)},n=function(o){let s=o.int32();return t(s)};return po("enum",gn.VARINT,r,n)}function qr(e,t){return po("message",gn.LENGTH_DELIMITED,e,t)}var Tt;(function(e){e.RSA="RSA",e.Ed25519="Ed25519",e.Secp256k1="Secp256k1"})(Tt||(Tt={}));var Na;(function(e){e[e.RSA=0]="RSA",e[e.Ed25519=1]="Ed25519",e[e.Secp256k1=2]="Secp256k1"})(Na||(Na={}));(function(e){e.codec=()=>Pa(Na)})(Tt||(Tt={}));var ze;(function(e){let t;e.codec=()=>(t==null&&(t=qr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Tt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Type=Tt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(s&7);break}}return i})),t),e.encode=r=>Hr(r,e.codec()),e.decode=r=>Vr(r,e.codec())})(ze||(ze={}));var Ge;(function(e){let t;e.codec=()=>(t==null&&(t=qr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),r.Type!=null&&(n.uint32(8),Tt.codec().encode(r.Type,n)),r.Data!=null&&(n.uint32(18),n.bytes(r.Data)),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.Type=Tt.codec().decode(r);break;case 2:i.Data=r.bytes();break;default:r.skipType(s&7);break}}return i})),t),e.encode=r=>Hr(r,e.codec()),e.decode=r=>Vr(r,e.codec())})(Ge||(Ge={}));var ei=class{_key;constructor(t){this._key=mn(t,pn)}async verify(t,r){return fu(this._key,r,t)}marshal(){return this._key}get bytes(){return ze.encode({Type:Tt.Ed25519,Data:this.marshal()}).subarray()}equals(t){return kt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Gt.digest(this.bytes);return t}},zr=class{_key;_publicKey;constructor(t,r){this._key=mn(t,nr),this._publicKey=mn(r,pn)}async sign(t){return cu(this._key,t)}get public(){return new ei(this._publicKey)}marshal(){return this._key}get bytes(){return Ge.encode({Type:Tt.Ed25519,Data:this.marshal()}).subarray()}equals(t){return kt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Gt.digest(this.bytes);return t}async id(){let t=gr.digest(this.public.bytes);return Nt.encode(t.bytes).substring(1)}async export(t,r="libp2p-key"){if(r==="libp2p-key")return dn(this.bytes,t);throw new yt(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function _2(e){if(e.length>nr){e=mn(e,nr+pn);let n=e.subarray(0,nr),i=e.subarray(nr,e.length);return new zr(n,i)}e=mn(e,nr);let t=e.subarray(0,nr),r=e.subarray(pn);return new zr(t,r)}function I2(e){return e=mn(e,pn),new ei(e)}async function T2(){let{privateKey:e,publicKey:t}=await su();return new zr(e,t)}async function rh(e){let{privateKey:t,publicKey:r}=await au(e);return new zr(t,r)}function mn(e,t){if(e=Uint8Array.from(e??[]),e.length!==t)throw new yt(`Key must be a Uint8Array of length ${t}, got ${e.length}`,"ERR_INVALID_KEY_TYPE");return e}function Z(e,t="utf8"){let r=no[t];if(r==null)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}var a8=mt(Dt(),1),c8=mt(ji(),1),nh=mt(vt(),1);function Te(e,t){let r=Uint8Array.from(e.abs().toByteArray());if(r=r[0]===0?r.subarray(1):r,t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=xt([new Uint8Array(t-r.length),r])}return Z(r,"base64url")}function le(e){let t=ih(e);return new nh.default.jsbn.BigInteger(Z(t,"base16"),16)}function ih(e,t){let r=Kt(e,"base64urlpad");if(t!=null){if(r.length>t)throw new Error("byte array longer than desired length");r=xt([new Uint8Array(t-r.length),r])}return r}var L2={"P-256":256,"P-384":384,"P-521":521},R2=Object.keys(L2),v8=R2.join(" / ");var Ga={};Ft(Ga,{RsaPrivateKey:()=>An,RsaPublicKey:()=>ci,fromJwk:()=>nm,generateKeyPair:()=>im,unmarshalRsaPrivateKey:()=>em,unmarshalRsaPublicKey:()=>rm});var ai=mt(vt(),1);var n3=mt(fh(),1);var U2=mt(Lr(),1);var nt=BigInt(0),Ct=BigInt(1),Br=BigInt(2),ii=BigInt(3),uh=BigInt(8),Pt=Object.freeze({a:nt,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:Ct,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),hh=(e,t)=>(e+t/Br)/t,go={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=Pt,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Ct*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),a=hh(o*e,t),c=hh(-n*e,t),f=U(e-a*r-c*i,t),u=U(-a*n-c*o,t),h=f>s,l=u>s;if(h&&(f=t-f),l&&(u=t-u),f>s||u>s)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:h,k1:f,k2neg:l,k2:u}}},Le=32,wn=32,k2=32,lh=Le+1,ph=2*Le+1;function dh(e){let{a:t,b:r}=Pt,n=U(e*e),i=U(n*e);return U(i+t*e+r)}var mo=Pt.a===nt,wo=class extends Error{constructor(t){super(t)}};function yh(e){if(!(e instanceof at))throw new TypeError("JacobianPoint expected")}var at=class{constructor(t,r,n){this.x=t,this.y=r,this.z=n}static fromAffine(t){if(!(t instanceof pt))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(pt.ZERO)?at.ZERO:new at(t.x,t.y,Ct)}static toAffineBatch(t){let r=O2(t.map(n=>n.z));return t.map((n,i)=>n.toAffine(r[i]))}static normalizeZ(t){return at.toAffineBatch(t).map(at.fromAffine)}equals(t){yh(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t,c=U(i*i),f=U(a*a),u=U(r*f),h=U(o*c),l=U(U(n*a)*f),d=U(U(s*i)*c);return u===h&&l===d}negate(){return new at(this.x,U(-this.y),this.z)}double(){let{x:t,y:r,z:n}=this,i=U(t*t),o=U(r*r),s=U(o*o),a=t+o,c=U(Br*(U(a*a)-i-s)),f=U(ii*i),u=U(f*f),h=U(u-Br*c),l=U(f*(c-h)-uh*s),d=U(Br*r*n);return new at(h,l,d)}add(t){yh(t);let{x:r,y:n,z:i}=this,{x:o,y:s,z:a}=t;if(o===nt||s===nt)return this;if(r===nt||n===nt)return t;let c=U(i*i),f=U(a*a),u=U(r*f),h=U(o*c),l=U(U(n*a)*f),d=U(U(s*i)*c),p=U(h-u),y=U(d-l);if(p===nt)return y===nt?this.double():at.ZERO;let m=U(p*p),x=U(p*m),b=U(u*m),w=U(y*y-x-Br*b),C=U(y*(b-w)-l*x),A=U(i*a*p);return new at(w,C,A)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){let r=at.ZERO;if(typeof t=="bigint"&&t===nt)return r;let n=xh(t);if(n===Ct)return this;if(!mo){let h=r,l=this;for(;n>nt;)n&Ct&&(h=h.add(l)),l=l.double(),n>>=Ct;return h}let{k1neg:i,k1:o,k2neg:s,k2:a}=go.splitScalar(n),c=r,f=r,u=this;for(;o>nt||a>nt;)o&Ct&&(c=c.add(u)),a&Ct&&(f=f.add(u)),u=u.double(),o>>=Ct,a>>=Ct;return i&&(c=c.negate()),s&&(f=f.negate()),f=new at(U(f.x*go.beta),f.y,f.z),c.add(f)}precomputeWindow(t){let r=mo?128/t+1:256/t+1,n=[],i=this,o=i;for(let s=0;s<r;s++){o=i,n.push(o);for(let a=1;a<2**(t-1);a++)o=o.add(i),n.push(o);i=o.double()}return n}wNAF(t,r){!r&&this.equals(at.BASE)&&(r=pt.BASE);let n=r&&r._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=r&&Fa.get(r);i||(i=this.precomputeWindow(n),r&&n!==1&&(i=at.normalizeZ(i),Fa.set(r,i)));let o=at.ZERO,s=at.BASE,a=1+(mo?128/n:256/n),c=2**(n-1),f=BigInt(2**n-1),u=2**n,h=BigInt(n);for(let l=0;l<a;l++){let d=l*c,p=Number(t&f);t>>=h,p>c&&(p-=u,t+=Ct);let y=d,m=d+Math.abs(p)-1,x=l%2!==0,b=p<0;p===0?s=s.add(xo(x,i[y])):o=o.add(xo(b,i[m]))}return{p:o,f:s}}multiply(t,r){let n=xh(t),i,o;if(mo){let{k1neg:s,k1:a,k2neg:c,k2:f}=go.splitScalar(n),{p:u,f:h}=this.wNAF(a,r),{p:l,f:d}=this.wNAF(f,r);u=xo(s,u),l=xo(c,l),l=new at(U(l.x*go.beta),l.y,l.z),i=u.add(l),o=h.add(d)}else{let{p:s,f:a}=this.wNAF(n,r);i=s,o=a}return at.normalizeZ([i,o])[0]}toAffine(t){let{x:r,y:n,z:i}=this,o=this.equals(at.ZERO);t==null&&(t=o?uh:Sn(i));let s=t,a=U(s*s),c=U(a*s),f=U(r*a),u=U(n*c),h=U(i*s);if(o)return pt.ZERO;if(h!==Ct)throw new Error("invZ was invalid");return new pt(f,u)}};at.BASE=new at(Pt.Gx,Pt.Gy,Ct);at.ZERO=new at(nt,Ct,nt);function xo(e,t){let r=t.negate();return e?r:t}var Fa=new WeakMap,pt=class{constructor(t,r){this.x=t,this.y=r}_setWindowSize(t){this._WINDOW_SIZE=t,Fa.delete(this)}hasEvenY(){return this.y%Br===nt}static fromCompressedHex(t){let r=t.length===32,n=Cr(r?t:t.subarray(1));if(!Ka(n))throw new Error("Point is not on curve");let i=dh(n),o=M2(i),s=(o&Ct)===Ct;r?s&&(o=U(-o)):(t[0]&1)===1!==s&&(o=U(-o));let a=new pt(n,o);return a.assertValidity(),a}static fromUncompressedHex(t){let r=Cr(t.subarray(1,Le+1)),n=Cr(t.subarray(Le+1,Le*2+1)),i=new pt(r,n);return i.assertValidity(),i}static fromHex(t){let r=En(t),n=r.length,i=r[0];if(n===Le)return this.fromCompressedHex(r);if(n===lh&&(i===2||i===3))return this.fromCompressedHex(r);if(n===ph&&i===4)return this.fromUncompressedHex(r);throw new Error(`Point.fromHex: received invalid point. Expected 32-${lh} compressed bytes or ${ph} uncompressed bytes, not ${n}`)}static fromPrivateKey(t){return pt.BASE.multiply(Eo(t))}static fromSignature(t,r,n){let{r:i,s:o}=vh(r);if(![0,1,2,3].includes(n))throw new Error("Cannot recover: invalid recovery bit");let s=Va(En(t)),{n:a}=Pt,c=n===2||n===3?i+a:i,f=Sn(c,a),u=U(-s*f,a),h=U(o*f,a),l=n&1?"03":"02",d=pt.fromHex(l+xn(c)),p=pt.BASE.multiplyAndAddUnsafe(d,u,h);if(!p)throw new Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(t=!1){return $r(this.toHex(t))}toHex(t=!1){let r=xn(this.x);return t?`${this.hasEvenY()?"02":"03"}${r}`:`04${r}${xn(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let t="Point is not on elliptic curve",{x:r,y:n}=this;if(!Ka(r)||!Ka(n))throw new Error(t);let i=U(n*n),o=dh(r);if(U(i-o)!==nt)throw new Error(t)}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new pt(this.x,U(-this.y))}double(){return at.fromAffine(this).double().toAffine()}add(t){return at.fromAffine(this).add(at.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return at.fromAffine(this).multiply(t,this).toAffine()}multiplyAndAddUnsafe(t,r,n){let i=at.fromAffine(this),o=r===nt||r===Ct||this!==pt.BASE?i.multiplyUnsafe(r):i.multiply(r),s=at.fromAffine(t).multiplyUnsafe(n),a=o.add(s);return a.equals(at.ZERO)?void 0:a.toAffine()}};pt.BASE=new pt(Pt.Gx,Pt.Gy);pt.ZERO=new pt(nt,nt);function gh(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function mh(e){if(e.length<2||e[0]!==2)throw new Error(`Invalid signature integer tag: ${bn(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw new Error("Invalid signature integer: wrong length");if(r[0]===0&&r[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:Cr(r),left:e.subarray(t+2)}}function D2(e){if(e.length<2||e[0]!=48)throw new Error(`Invalid signature tag: ${bn(e)}`);if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");let{data:t,left:r}=mh(e.subarray(2)),{data:n,left:i}=mh(r);if(i.length)throw new Error(`Invalid signature: left bytes after parsing: ${bn(i)}`);return{r:t,s:n}}var $e=class{constructor(t,r){this.r=t,this.s=r,this.assertValidity()}static fromCompact(t){let r=t instanceof Uint8Array,n="Signature.fromCompact";if(typeof t!="string"&&!r)throw new TypeError(`${n}: Expected string or Uint8Array`);let i=r?bn(t):t;if(i.length!==128)throw new Error(`${n}: Expected 64-byte hex`);return new $e(bo(i.slice(0,64)),bo(i.slice(64,128)))}static fromDER(t){let r=t instanceof Uint8Array;if(typeof t!="string"&&!r)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");let{r:n,s:i}=D2(r?t:$r(t));return new $e(n,i)}static fromHex(t){return this.fromDER(t)}assertValidity(){let{r:t,s:r}=this;if(!si(t))throw new Error("Invalid Signature: r must be 0 < r < n");if(!si(r))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let t=Pt.n>>Ct;return this.s>t}normalizeS(){return this.hasHighS()?new $e(this.r,U(-this.s,Pt.n)):this}toDERRawBytes(){return $r(this.toDERHex())}toDERHex(){let t=gh(ni(this.s)),r=gh(ni(this.r)),n=t.length/2,i=r.length/2,o=ni(n),s=ni(i);return`30${ni(i+n+4)}02${s}${r}02${o}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return $r(this.toCompactHex())}toCompactHex(){return xn(this.r)+xn(this.s)}};function Ar(...e){if(!e.every(n=>n instanceof Uint8Array))throw new Error("Uint8Array list expected");if(e.length===1)return e[0];let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t);for(let n=0,i=0;n<e.length;n++){let o=e[n];r.set(o,i),i+=o.length}return r}var K2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=K2[e[r]];return t}var F2=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function xn(e){if(typeof e!="bigint")throw new Error("Expected bigint");if(!(nt<=e&&e<F2))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function Ma(e){let t=$r(xn(e));if(t.length!==32)throw new Error("Error: expected 32 bytes");return t}function ni(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function bo(e){if(typeof e!="string")throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function $r(e){if(typeof e!="string")throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let n=r*2,i=e.slice(n,n+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[r]=o}return t}function Cr(e){return bo(bn(e))}function En(e){return e instanceof Uint8Array?Uint8Array.from(e):$r(e)}function xh(e){if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if(typeof e=="bigint"&&si(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function U(e,t=Pt.P){let r=e%t;return r>=nt?r:t+r}function we(e,t){let{P:r}=Pt,n=e;for(;t-- >nt;)n*=n,n%=r;return n}function M2(e){let{P:t}=Pt,r=BigInt(6),n=BigInt(11),i=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,f=c*c*e%t,u=we(f,ii)*f%t,h=we(u,ii)*f%t,l=we(h,Br)*c%t,d=we(l,n)*l%t,p=we(d,i)*d%t,y=we(p,s)*p%t,m=we(y,a)*y%t,x=we(m,s)*p%t,b=we(x,ii)*f%t,w=we(b,o)*d%t,C=we(w,r)*c%t,A=we(C,Br);if(A*A%t!==e)throw new Error("Cannot find square root");return A}function Sn(e,t=Pt.P){if(e===nt||t<=nt)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=U(e,t),n=t,i=nt,o=Ct,s=Ct,a=nt;for(;r!==nt;){let f=n/r,u=n%r,h=i-s*f,l=o-a*f;n=r,r=u,i=s,o=a,s=h,a=l}if(n!==Ct)throw new Error("invert: does not exist");return U(i,t)}function O2(e,t=Pt.P){let r=new Array(e.length),n=e.reduce((o,s,a)=>s===nt?o:(r[a]=o,U(o*s,t)),Ct),i=Sn(n,t);return e.reduceRight((o,s,a)=>s===nt?o:(r[a]=U(o*r[a],t),U(o*s,t)),i),r}function V2(e){let t=e.length*8-wn*8,r=Cr(e);return t>0?r>>BigInt(t):r}function Va(e,t=!1){let r=V2(e);if(t)return r;let{n}=Pt;return r>=n?r-n:r}var vn,oi,Oa=class{constructor(t,r){if(this.hashLen=t,this.qByteLen=r,typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}hmac(...t){return Re.hmacSha256(this.k,...t)}hmacSync(...t){return oi(this.k,...t)}checkSync(){if(typeof oi!="function")throw new wo("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(t=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),t),this.v=await this.hmac(this.v),t.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),t),this.v=await this.hmac(this.v))}reseedSync(t=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),t),this.v=this.hmacSync(this.v),t.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),t),this.v=this.hmacSync(this.v))}async generate(){this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=await this.hmac(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return Ar(...r)}generateSync(){this.checkSync(),this.incr();let t=0,r=[];for(;t<this.qByteLen;){this.v=this.hmacSync(this.v);let n=this.v.slice();r.push(n),t+=this.v.length}return Ar(...r)}};function si(e){return nt<e&&e<Pt.n}function Ka(e){return nt<e&&e<Pt.P}function H2(e,t,r,n=!0){let{n:i}=Pt,o=Va(e,!0);if(!si(o))return;let s=Sn(o,i),a=pt.BASE.multiply(o),c=U(a.x,i);if(c===nt)return;let f=U(s*U(t+r*c,i),i);if(f===nt)return;let u=new $e(c,f),h=(a.x===u.r?0:2)|Number(a.y&Ct);return n&&u.hasHighS()&&(u=u.normalizeS(),h^=1),{sig:u,recovery:h}}function Eo(e){let t;if(typeof e=="bigint")t=e;else if(typeof e=="number"&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if(typeof e=="string"){if(e.length!==2*wn)throw new Error("Expected 32 bytes of private key");t=bo(e)}else if(e instanceof Uint8Array){if(e.length!==wn)throw new Error("Expected 32 bytes of private key");t=Cr(e)}else throw new TypeError("Expected valid private key");if(!si(t))throw new Error("Expected private key: 0 < key < n");return t}function q2(e){return e instanceof pt?(e.assertValidity(),e):pt.fromHex(e)}function vh(e){if(e instanceof $e)return e.assertValidity(),e;try{return $e.fromDER(e)}catch{return $e.fromCompact(e)}}function Ha(e,t=!1){return pt.fromPrivateKey(e).toRawBytes(t)}function wh(e){let t=e.length>Le?e.slice(0,Le):e;return Cr(t)}function z2(e){let t=wh(e),r=U(t,Pt.n);return bh(r<nt?t:r)}function bh(e){return Ma(e)}function G2(e,t,r){if(e==null)throw new Error(`sign: expected valid message hash, not "${e}"`);let n=En(e),i=Eo(t),o=[bh(i),z2(n)];if(r!=null){r===!0&&(r=Re.randomBytes(Le));let c=En(r);if(c.length!==Le)throw new Error(`sign: Expected ${Le} bytes of extra data`);o.push(c)}let s=Ar(...o),a=wh(n);return{seed:s,m:a,d:i}}function $2(e,t){let{sig:r,recovery:n}=e,{der:i,recovered:o}=Object.assign({canonical:!0,der:!0},t),s=i?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,n]:s}async function Eh(e,t,r={}){let{seed:n,m:i,d:o}=G2(e,t,r.extraEntropy),s=new Oa(k2,wn);await s.reseed(n);let a;for(;!(a=H2(await s.generate(),i,o,r.canonical));)await s.reseed();return $2(a,r)}var W2={strict:!0};function Sh(e,t,r,n=W2){let i;try{i=vh(e),t=En(t)}catch{return!1}let{r:o,s}=i;if(n.strict&&i.hasHighS())return!1;let a=Va(t),c;try{c=q2(r)}catch{return!1}let{n:f}=Pt,u=Sn(s,f),h=U(a*u,f),l=U(o*u,f),d=pt.BASE.multiplyAndAddUnsafe(c,h,l);return d?U(d.x,f)===o:!1}pt.BASE._setWindowSize(8);var pe={node:U2,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0};var vo={},Re={bytesToHex:bn,hexToBytes:$r,concatBytes:Ar,mod:U,invert:Sn,isValidPrivateKey(e){try{return Eo(e),!0}catch{return!1}},_bigintTo32Bytes:Ma,_normalizePrivateKey:Eo,hashToPrivateKey:e=>{e=En(e);let t=wn+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");let r=U(Cr(e),Pt.n-Ct)+Ct;return Ma(r)},randomBytes:(e=32)=>{if(pe.web)return pe.web.getRandomValues(new Uint8Array(e));if(pe.node){let{randomBytes:t}=pe.node;return Uint8Array.from(t(e))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>Re.hashToPrivateKey(Re.randomBytes(wn+8)),precompute(e=8,t=pt.BASE){let r=t===pt.BASE?t:new pt(t.x,t.y);return r._setWindowSize(e),r.multiply(ii),r},sha256:async(...e)=>{if(pe.web){let t=await pe.web.subtle.digest("SHA-256",Ar(...e));return new Uint8Array(t)}else if(pe.node){let{createHash:t}=pe.node,r=t("sha256");return e.forEach(n=>r.update(n)),Uint8Array.from(r.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(pe.web){let r=await pe.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),n=Ar(...t),i=await pe.web.subtle.sign("HMAC",r,n);return new Uint8Array(i)}else if(pe.node){let{createHmac:r}=pe.node,n=r("sha256",e);return t.forEach(i=>n.update(i)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...t)=>{let r=vo[e];if(r===void 0){let n=await Re.sha256(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Ar(n,n),vo[e]=r}return Re.sha256(r,...t)},taggedHashSync:(e,...t)=>{if(typeof vn!="function")throw new wo("sha256Sync is undefined, you need to set it");let r=vo[e];if(r===void 0){let n=vn(Uint8Array.from(e,i=>i.charCodeAt(0)));r=Ar(n,n),vo[e]=r}return vn(r,...t)},_JacobianPoint:at};Object.defineProperties(Re,{sha256Sync:{configurable:!1,get(){return vn},set(e){vn||(vn=e)}},hmacSha256Sync:{configurable:!1,get(){return oi},set(e){oi||(oi=e)}}});function So(e){if(isNaN(e)||e<=0)throw new yt("random bytes length must be a Number bigger than 0","ERR_INVALID_LENGTH");return Re.randomBytes(e)}var M8=mt(eo(),1),qa=mt(vt(),1);function Ah(e,t){return t.map(r=>le(e[r]))}function Bh(e){return qa.default.pki.setRsaPrivateKey(...Ah(e,["n","e","d","p","q","dp","dq","qi"]))}function Ch(e){return qa.default.pki.setRsaPublicKey(...Ah(e,["n","e"]))}var Wr={};Ft(Wr,{jwkToPkcs1:()=>Z2,jwkToPkix:()=>j2,pkcs1ToJwk:()=>X2,pkixToJwk:()=>Q2});var H8=mt(qn(),1),q8=mt(eo(),1);var ir=mt(vt(),1);function X2(e){let t=ir.default.asn1.fromDer(Z(e,"ascii")),r=ir.default.pki.privateKeyFromAsn1(t);return{kty:"RSA",n:Te(r.n),e:Te(r.e),d:Te(r.d),p:Te(r.p),q:Te(r.q),dp:Te(r.dP),dq:Te(r.dQ),qi:Te(r.qInv),alg:"RS256"}}function Z2(e){if(e.n==null||e.e==null||e.d==null||e.p==null||e.q==null||e.dp==null||e.dq==null||e.qi==null)throw new yt("JWK was missing components","ERR_INVALID_PARAMETERS");let t=ir.default.pki.privateKeyToAsn1({n:le(e.n),e:le(e.e),d:le(e.d),p:le(e.p),q:le(e.q),dP:le(e.dp),dQ:le(e.dq),qInv:le(e.qi)});return Kt(ir.default.asn1.toDer(t).getBytes(),"ascii")}function Q2(e){let t=ir.default.asn1.fromDer(Z(e,"ascii")),r=ir.default.pki.publicKeyFromAsn1(t);return{kty:"RSA",n:Te(r.n),e:Te(r.e)}}function j2(e){if(e.n==null||e.e==null)throw new yt("JWK was missing components","ERR_INVALID_PARAMETERS");let t=ir.default.pki.publicKeyToAsn1({n:le(e.n),e:le(e.e)});return Kt(ir.default.asn1.toDer(t).getBytes(),"ascii")}async function _h(e){let t=await ae.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),r=await Lh(t);return{privateKey:r[0],publicKey:r[1]}}async function za(e){let r=[await ae.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await J2(e)],n=await Lh({privateKey:r[0],publicKey:r[1]});return{privateKey:n[0],publicKey:n[1]}}async function Ih(e,t){let r=await ae.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),n=await ae.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},r,Uint8Array.from(t));return new Uint8Array(n,0,n.byteLength)}async function Th(e,t,r){let n=await ae.get().subtle.importKey("jwk",e,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return ae.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},n,t,r)}async function Lh(e){if(e.privateKey==null||e.publicKey==null)throw new yt("Private and public key are required","ERR_INVALID_PARAMETERS");return Promise.all([ae.get().subtle.exportKey("jwk",e.privateKey),ae.get().subtle.exportKey("jwk",e.publicKey)])}async function J2(e){return ae.get().subtle.importKey("jwk",{kty:e.kty,n:e.n,e:e.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function Rh(e,t,r,n){let i=t?Ch(e):Bh(e),o=Z(Uint8Array.from(r),"ascii"),s=n(o,i);return Kt(s,"ascii")}function Ph(e,t){return Rh(e,!0,t,(r,n)=>n.encrypt(r))}function Nh(e,t){return Rh(e,!1,t,(r,n)=>n.decrypt(r))}var ci=class{_key;constructor(t){this._key=t}async verify(t,r){return Th(this._key,r,t)}marshal(){return Wr.jwkToPkix(this._key)}get bytes(){return ze.encode({Type:Tt.RSA,Data:this.marshal()}).subarray()}encrypt(t){return Ph(this._key,t)}equals(t){return kt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Gt.digest(this.bytes);return t}},An=class{_key;_publicKey;constructor(t,r){this._key=t,this._publicKey=r}genSecret(){return So(16)}async sign(t){return Ih(this._key,t)}get public(){if(this._publicKey==null)throw new yt("public key not provided","ERR_PUBKEY_NOT_PROVIDED");return new ci(this._publicKey)}decrypt(t){return Nh(this._key,t)}marshal(){return Wr.jwkToPkcs1(this._key)}get bytes(){return Ge.encode({Type:Tt.RSA,Data:this.marshal()}).subarray()}equals(t){return kt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Gt.digest(this.bytes);return t}async id(){let t=await this.public.hash();return Z(t,"base58btc")}async export(t,r="pkcs-8"){if(r==="pkcs-8"){let n=new ai.default.util.ByteBuffer(this.marshal()),i=ai.default.asn1.fromDer(n),o=ai.default.pki.privateKeyFromAsn1(i),s={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return ai.default.pki.encryptRsaPrivateKey(o,t,s)}else{if(r==="libp2p-key")return dn(this.bytes,t);throw new yt(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}}};async function em(e){let t=Wr.pkcs1ToJwk(e),r=await za(t);return new An(r.privateKey,r.publicKey)}function rm(e){let t=Wr.pkixToJwk(e);return new ci(t)}async function nm(e){let t=await za(e);return new An(t.privateKey,t.publicKey)}async function im(e){let t=await _h(e);return new An(t.privateKey,t.publicKey)}var Wa={};Ft(Wa,{Secp256k1PrivateKey:()=>ui,Secp256k1PublicKey:()=>fi,generateKeyPair:()=>cm,unmarshalSecp256k1PrivateKey:()=>sm,unmarshalSecp256k1PublicKey:()=>am});function Uh(){return Re.randomPrivateKey()}async function kh(e,t){let{digest:r}=await Gt.digest(t);try{return await Eh(r,e)}catch(n){throw new yt(String(n),"ERR_INVALID_INPUT")}}async function Dh(e,t,r){try{let{digest:n}=await Gt.digest(r);return Sh(t,n,e)}catch(n){throw new yt(String(n),"ERR_INVALID_INPUT")}}function Kh(e){return pt.fromHex(e).toRawBytes(!0)}function Fh(e){try{Ha(e,!0)}catch(t){throw new yt(String(t),"ERR_INVALID_PRIVATE_KEY")}}function $a(e){try{pt.fromHex(e)}catch(t){throw new yt(String(t),"ERR_INVALID_PUBLIC_KEY")}}function Mh(e){try{return Ha(e,!0)}catch(t){throw new yt(String(t),"ERR_INVALID_PRIVATE_KEY")}}var fi=class{_key;constructor(t){$a(t),this._key=t}async verify(t,r){return Dh(this._key,r,t)}marshal(){return Kh(this._key)}get bytes(){return ze.encode({Type:Tt.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return kt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Gt.digest(this.bytes);return t}},ui=class{_key;_publicKey;constructor(t,r){this._key=t,this._publicKey=r??Mh(t),Fh(this._key),$a(this._publicKey)}async sign(t){return kh(this._key,t)}get public(){return new fi(this._publicKey)}marshal(){return this._key}get bytes(){return Ge.encode({Type:Tt.Secp256k1,Data:this.marshal()}).subarray()}equals(t){return kt(this.bytes,t.bytes)}async hash(){let{bytes:t}=await Gt.digest(this.bytes);return t}async id(){let t=await this.public.hash();return Z(t,"base58btc")}async export(t,r="libp2p-key"){if(r==="libp2p-key")return dn(this.bytes,t);throw new yt(`export format '${r}' is not supported`,"ERR_INVALID_EXPORT_FORMAT")}};function sm(e){return new ui(e)}function am(e){return new fi(e)}async function cm(){let e=Uh();return new ui(e)}var Yr={rsa:Ga,ed25519:Ua,secp256k1:Wa};function Oh(e){let t=Object.keys(Yr).join(" / ");return new yt(`invalid or unsupported key type ${e}. Must be ${t}`,"ERR_UNSUPPORTED_KEY_TYPE")}function Vh(e){let t=ze.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case Tt.RSA:return Yr.rsa.unmarshalRsaPublicKey(r);case Tt.Ed25519:return Yr.ed25519.unmarshalEd25519PublicKey(r);case Tt.Secp256k1:return Yr.secp256k1.unmarshalSecp256k1PublicKey(r);default:throw Oh(t.Type??"RSA")}}async function Hh(e){let t=Ge.decode(e),r=t.Data??new Uint8Array;switch(t.Type){case Tt.RSA:return Yr.rsa.unmarshalRsaPrivateKey(r);case Tt.Ed25519:return Yr.ed25519.unmarshalEd25519PrivateKey(r);case Tt.Secp256k1:return Yr.secp256k1.unmarshalSecp256k1PrivateKey(r);default:throw Oh(t.Type??"RSA")}}var qh=Symbol.for("@libp2p/peer-id");var um=Symbol.for("nodejs.util.inspect.custom"),zh=Object.values(Oe).map(e=>e.decoder).reduce((e,t)=>e.or(t),Oe.identity.decoder),Gh=114,Ya=36,Xa=37,hi=class{type;multihash;privateKey;publicKey;string;constructor(t){this.type=t.type,this.multihash=t.multihash,this.privateKey=t.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[qh]=!0;toString(){return this.string==null&&(this.string=Nt.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return wt.createV1(Gh,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(t){if(t instanceof Uint8Array)return kt(this.multihash.bytes,t);if(typeof t=="string")return Za(t).equals(this);if(t?.multihash?.bytes!=null)return kt(this.multihash.bytes,t.multihash.bytes);throw new Error("not valid Id")}[um](){return`PeerId(${this.toString()})`}},Bn=class extends hi{type="RSA";publicKey;constructor(t){super({...t,type:"RSA"}),this.publicKey=t.publicKey}},Cn=class extends hi{type="Ed25519";publicKey;constructor(t){super({...t,type:"Ed25519"}),this.publicKey=t.multihash.digest}},_n=class extends hi{type="secp256k1";publicKey;constructor(t){super({...t,type:"secp256k1"}),this.publicKey=t.multihash.digest}};function Za(e,t){if(t=t??zh,e.charAt(0)==="1"||e.charAt(0)==="Q"){let r=yr(Nt.decode(`z${e}`));return e.startsWith("12D")?new Cn({multihash:r}):e.startsWith("16U")?new _n({multihash:r}):new Bn({multihash:r})}return hm(zh.decode(e))}function hm(e){try{let t=yr(e);if(t.code===gr.code){if(t.digest.length===Ya)return new Cn({multihash:t});if(t.digest.length===Xa)return new _n({multihash:t})}if(t.code===Gt.code)return new Bn({multihash:t})}catch{return lm(wt.decode(e))}throw new Error("Supplied PeerID CID is invalid")}function lm(e){if(e==null||e.multihash==null||e.version==null||e.version===1&&e.code!==Gh)throw new Error("Supplied PeerID CID is invalid");let t=e.multihash;if(t.code===Gt.code)return new Bn({multihash:e.multihash});if(t.code===gr.code){if(t.digest.length===Ya)return new Cn({multihash:e.multihash});if(t.digest.length===Xa)return new _n({multihash:e.multihash})}throw new Error("Supplied PeerID CID is invalid")}async function Qa(e,t){return e.length===Ya?new Cn({multihash:Ce(gr.code,e),privateKey:t}):e.length===Xa?new _n({multihash:Ce(gr.code,e),privateKey:t}):new Bn({multihash:await Gt.digest(e),publicKey:e,privateKey:t})}var Ao;(function(e){let t;e.codec=()=>(t==null&&(t=qr((r,n,i={})=>{if(i.lengthDelimited!==!1&&n.fork(),r.webtransportCerthashes!=null)for(let o of r.webtransportCerthashes)n.uint32(10),n.bytes(o);i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={webtransportCerthashes:[]},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.webtransportCerthashes.push(r.bytes());break;default:r.skipType(s&7);break}}return i})),t),e.encode=r=>Hr(r,e.codec()),e.decode=r=>Vr(r,e.codec())})(Ao||(Ao={}));var li;(function(e){let t;e.codec=()=>(t==null&&(t=qr((r,n,i={})=>{i.lengthDelimited!==!1&&n.fork(),(i.writeDefaults===!0||r.identityKey!=null&&r.identityKey.byteLength>0)&&(n.uint32(10),n.bytes(r.identityKey??new Uint8Array(0))),(i.writeDefaults===!0||r.identitySig!=null&&r.identitySig.byteLength>0)&&(n.uint32(18),n.bytes(r.identitySig??new Uint8Array(0))),r.extensions!=null&&(n.uint32(34),Ao.codec().encode(r.extensions,n,{writeDefaults:!1})),i.lengthDelimited!==!1&&n.ldelim()},(r,n)=>{let i={identityKey:new Uint8Array(0),identitySig:new Uint8Array(0)},o=n==null?r.len:r.pos+n;for(;r.pos<o;){let s=r.uint32();switch(s>>>3){case 1:i.identityKey=r.bytes();break;case 2:i.identitySig=r.bytes();break;case 4:i.extensions=Ao.codec().decode(r,r.uint32());break;default:r.skipType(s&7);break}}return i})),t),e.encode=r=>Hr(r,e.codec()),e.decode=r=>Vr(r,e.codec())})(li||(li={}));async function $h(e,t,r){let n=await dm(e,Wh(t));if(e.publicKey==null)throw new Error("PublicKey was missing from local PeerId");return pm(e.publicKey,n,r)}function pm(e,t,r){return li.encode({identityKey:e,identitySig:t,extensions:r??{webtransportCerthashes:[]}}).subarray()}async function dm(e,t){if(e.privateKey==null)throw new Error("PrivateKey was missing from PeerId");return(await Hh(e.privateKey)).sign(t)}async function ja(e){return Qa(e.identityKey)}function Ja(e){return li.decode(e)}function Wh(e){let t=Kt("noise-libp2p-static-key:");return xt([t,e],t.length+e.length)}async function t0(e,t,r){let n=await Qa(t.identityKey);if(!n.equals(r))throw new Error(`Payload identity key ${n.toString()} does not match expected remote peer ${r.toString()}`);let i=Wh(e);if(n.publicKey==null)throw new Error("PublicKey was missing from PeerId");if(t.identitySig==null)throw new Error("Signature was missing from message");if(!await Vh(n.publicKey).verify(i,t.identitySig))throw new Error("Static key doesn't match to peer that signed payload!");return n}function pi(e){return!(!(e instanceof Uint8Array)||e.length!==32)}var ye=mt(jh(),1);ye.default.formatters.b=e=>e==null?"undefined":Nt.baseEncode(e);ye.default.formatters.t=e=>e==null?"undefined":Be.baseEncode(e);ye.default.formatters.m=e=>e==null?"undefined":un.baseEncode(e);ye.default.formatters.p=e=>e==null?"undefined":e.toString();ye.default.formatters.c=e=>e==null?"undefined":e.toString();ye.default.formatters.k=e=>e==null?"undefined":e.toString();ye.default.formatters.a=e=>e==null?"undefined":e.toString();function _m(e){let t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}function _o(e){let t=_m(`${e}:trace`);return ye.default.enabled(`${e}:trace`)&&ye.default.names.map(r=>r.toString()).find(r=>r.includes(":trace"))!=null&&(t=(0,ye.default)(`${e}:trace`)),Object.assign((0,ye.default)(e),{error:(0,ye.default)(`${e}:error`),trace:t})}var zt=_o("libp2p:noise");var be;R0?be=zt:be=Object.assign(()=>{},{enabled:!1,trace:()=>{},error:()=>{}});function Jh(e){be(`LOCAL_STATIC_PUBLIC_KEY ${Z(e.publicKey,"hex")}`),be(`LOCAL_STATIC_PRIVATE_KEY ${Z(e.privateKey,"hex")}`)}function e0(e){e?(be(`LOCAL_PUBLIC_EPHEMERAL_KEY ${Z(e.publicKey,"hex")}`),be(`LOCAL_PRIVATE_EPHEMERAL_KEY ${Z(e.privateKey,"hex")}`)):be("Missing local ephemeral keys.")}function tl(e){be(`REMOTE_STATIC_PUBLIC_KEY ${Z(e,"hex")}`)}function r0(e){be(`REMOTE_EPHEMERAL_PUBLIC_KEY ${Z(e,"hex")}`)}function el(e){e.cs1&&e.cs2?(be(`CIPHER_STATE_1 ${e.cs1.n.getUint64()} ${Z(e.cs1.k,"hex")}`),be(`CIPHER_STATE_2 ${e.cs2.n.getUint64()} ${Z(e.cs2.k,"hex")}`)):be("Missing cipher state.")}var Im="Cipherstate has reached maximum n, a new handshake must be performed",Io=class{n;bytes;view;constructor(t=0){this.n=t,this.bytes=new Uint8Array(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,t,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>4294967295)throw new Error(Im)}};var To=class{crypto;constructor(t){this.crypto=t}encryptWithAd(t,r,n){let i=this.encrypt(t.k,t.n,r,n);return t.n.increment(),i}decryptWithAd(t,r,n,i){let{plaintext:o,valid:s}=this.decrypt(t.k,t.n,r,n,i);return s&&t.n.increment(),{plaintext:o,valid:s}}hasKey(t){return!this.isEmptyKey(t.k)}createEmptyKey(){return new Uint8Array(32)}isEmptyKey(t){let r=this.createEmptyKey();return kt(r,t)}encrypt(t,r,n,i){return r.assertValue(),this.crypto.chaCha20Poly1305Encrypt(i,r.getBytes(),n,t)}encryptAndHash(t,r){let n;return this.hasKey(t.cs)?n=this.encryptWithAd(t.cs,t.h,r):n=r,this.mixHash(t,n),n}decrypt(t,r,n,i,o){r.assertValue();let s=this.crypto.chaCha20Poly1305Decrypt(i,r.getBytes(),n,t,o);return s?{plaintext:s,valid:!0}:{plaintext:new Uint8Array(0),valid:!1}}decryptAndHash(t,r){let n,i=!0;return this.hasKey(t.cs)?{plaintext:n,valid:i}=this.decryptWithAd(t.cs,t.h,r):n=r,this.mixHash(t,r),{plaintext:n,valid:i}}dh(t,r){try{let n=this.crypto.generateX25519SharedKey(t,r);return n.length===32?n:n.subarray(0,32)}catch(n){let i=n;return zt.error(i),new Uint8Array(32)}}mixHash(t,r){t.h=this.getHash(t.h,r)}getHash(t,r){return this.crypto.hashSHA256(xt([t,r],t.length+r.length))}mixKey(t,r){let[n,i]=this.crypto.getHKDF(t.ck,r);t.cs=this.initializeKey(i),t.ck=n}initializeKey(t){return{k:t,n:new Io}}initializeSymmetric(t){let r=Kt(t,"utf-8"),n=this.hashProtocolName(r),i=n,o=this.createEmptyKey();return{cs:this.initializeKey(o),ck:i,h:n}}hashProtocolName(t){if(t.length<=32){let r=new Uint8Array(32);return r.set(t),r}else return this.getHash(t,new Uint8Array(0))}split(t){let[r,n]=this.crypto.getHKDF(t.ck,new Uint8Array(0)),i=this.initializeKey(r),o=this.initializeKey(n);return{cs1:i,cs2:o}}writeMessageRegular(t,r){let n=this.encryptWithAd(t,new Uint8Array(0),r),i=this.createEmptyKey(),o=new Uint8Array(0);return{ne:i,ns:o,ciphertext:n}}readMessageRegular(t,r){return this.decryptWithAd(t,new Uint8Array(0),r.ciphertext)}};var Lo=class extends To{initializeInitiator(t,r,n,i){let o="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(o);this.mixHash(s,t);let a=new Uint8Array(32);return{ss:s,s:r,rs:n,psk:i,re:a}}initializeResponder(t,r,n,i){let o="Noise_XX_25519_ChaChaPoly_SHA256",s=this.initializeSymmetric(o);this.mixHash(s,t);let a=new Uint8Array(32);return{ss:s,s:r,rs:n,psk:i,re:a}}writeMessageA(t,r,n){let i=new Uint8Array(0);n!==void 0?t.e=n:t.e=this.crypto.generateX25519KeyPair();let o=t.e.publicKey;this.mixHash(t.ss,o);let s=this.encryptAndHash(t.ss,r);return{ne:o,ns:i,ciphertext:s}}writeMessageB(t,r){t.e=this.crypto.generateX25519KeyPair();let n=t.e.publicKey;this.mixHash(t.ss,n),this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));let i=t.s.publicKey,o=this.encryptAndHash(t.ss,i);this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));let s=this.encryptAndHash(t.ss,r);return{ne:n,ns:o,ciphertext:s}}writeMessageC(t,r){let n=t.s.publicKey,i=this.encryptAndHash(t.ss,n);this.mixKey(t.ss,this.dh(t.s.privateKey,t.re));let o=this.encryptAndHash(t.ss,r),a={ne:this.createEmptyKey(),ns:i,ciphertext:o},{cs1:c,cs2:f}=this.split(t.ss);return{h:t.ss.h,messageBuffer:a,cs1:c,cs2:f}}readMessageA(t,r){return pi(r.ne)&&(t.re=r.ne),this.mixHash(t.ss,t.re),this.decryptAndHash(t.ss,r.ciphertext)}readMessageB(t,r){if(pi(r.ne)&&(t.re=r.ne),this.mixHash(t.ss,t.re),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.re));let{plaintext:n,valid:i}=this.decryptAndHash(t.ss,r.ns);i&&pi(n)&&(t.rs=n),this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));let{plaintext:o,valid:s}=this.decryptAndHash(t.ss,r.ciphertext);return{plaintext:o,valid:i&&s}}readMessageC(t,r){let{plaintext:n,valid:i}=this.decryptAndHash(t.ss,r.ns);if(i&&pi(n)&&(t.rs=n),!t.e)throw new Error("Handshake state `e` param is missing.");this.mixKey(t.ss,this.dh(t.e.privateKey,t.rs));let{plaintext:o,valid:s}=this.decryptAndHash(t.ss,r.ciphertext),{cs1:a,cs2:c}=this.split(t.ss);return{h:t.ss.h,plaintext:o,valid:i&&s,cs1:a,cs2:c}}initSession(t,r,n){let i=this.createEmptyKey(),o=new Uint8Array(32),s;return t?s=this.initializeInitiator(r,n,o,i):s=this.initializeResponder(r,n,o,i),{hs:s,i:t,mc:0}}sendMessage(t,r,n){let i;if(t.mc===0)i=this.writeMessageA(t.hs,r,n);else if(t.mc===1)i=this.writeMessageB(t.hs,r);else if(t.mc===2){let{h:o,messageBuffer:s,cs1:a,cs2:c}=this.writeMessageC(t.hs,r);i=s,t.h=o,t.cs1=a,t.cs2=c}else if(t.mc>2)if(t.i){if(!t.cs1)throw new Error("CS1 (cipher state) is not defined");i=this.writeMessageRegular(t.cs1,r)}else{if(!t.cs2)throw new Error("CS2 (cipher state) is not defined");i=this.writeMessageRegular(t.cs2,r)}else throw new Error("Session invalid.");return t.mc++,i}recvMessage(t,r){let n=new Uint8Array(0),i=!1;if(t.mc===0)({plaintext:n,valid:i}=this.readMessageA(t.hs,r));else if(t.mc===1)({plaintext:n,valid:i}=this.readMessageB(t.hs,r));else if(t.mc===2){let{h:o,plaintext:s,valid:a,cs1:c,cs2:f}=this.readMessageC(t.hs,r);n=s,i=a,t.h=o,t.cs1=c,t.cs2=f}return t.mc++,{plaintext:n,valid:i}}};var Ro=class{isInitiator;session;remotePeer;remoteExtensions={webtransportCerthashes:[]};payload;connection;xx;staticKeypair;prologue;constructor(t,r,n,i,o,s,a,c){this.isInitiator=t,this.payload=r,this.prologue=n,this.staticKeypair=o,this.connection=s,a&&(this.remotePeer=a),this.xx=c??new Lo(i),this.session=this.xx.initSession(this.isInitiator,this.prologue,this.staticKeypair)}async propose(){if(Jh(this.session.hs.s),this.isInitiator){zt.trace("Stage 0 - Initiator starting to send first message.");let t=this.xx.sendMessage(this.session,new Uint8Array(0));this.connection.writeLP(sc(t)),zt.trace("Stage 0 - Initiator finished sending first message."),e0(this.session.hs.e)}else{zt.trace("Stage 0 - Responder waiting to receive first message...");let t=fc((await this.connection.readLP()).subarray()),{valid:r}=this.xx.recvMessage(this.session,t);if(!r)throw new fr("xx handshake stage 0 validation fail");zt.trace("Stage 0 - Responder received first message."),r0(this.session.hs.re)}}async exchange(){if(this.isInitiator){zt.trace("Stage 1 - Initiator waiting to receive first message from responder...");let t=uc((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,t);if(!n)throw new fr("xx handshake stage 1 validation fail");zt.trace("Stage 1 - Initiator received the message."),r0(this.session.hs.re),tl(this.session.hs.rs),zt.trace("Initiator going to check remote's signature...");try{let i=Ja(r);this.remotePeer=this.remotePeer||await ja(i),await t0(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let o=i;throw new nn(`Error occurred while verifying signed payload: ${o.message}`)}zt.trace("All good with the signature!")}else{zt.trace("Stage 1 - Responder sending out first message with signed payload and static key.");let t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(ac(t)),zt.trace("Stage 1 - Responder sent the second handshake message with signed payload."),e0(this.session.hs.e)}}async finish(){if(this.isInitiator){zt.trace("Stage 2 - Initiator sending third handshake message.");let t=this.xx.sendMessage(this.session,this.payload);this.connection.writeLP(cc(t)),zt.trace("Stage 2 - Initiator sent message with signed payload.")}else{zt.trace("Stage 2 - Responder waiting for third handshake message...");let t=hc((await this.connection.readLP()).subarray()),{plaintext:r,valid:n}=this.xx.recvMessage(this.session,t);if(!n)throw new fr("xx handshake stage 2 validation fail");zt.trace("Stage 2 - Responder received the message, finished handshake.");try{let i=Ja(r);this.remotePeer=this.remotePeer||await ja(i),await t0(this.session.hs.rs,i,this.remotePeer),this.setRemoteNoiseExtension(i.extensions)}catch(i){let o=i;throw new nn(`Error occurred while verifying signed payload: ${o.message}`)}}el(this.session)}encrypt(t,r){let n=this.getCS(r);return this.xx.encryptWithAd(n,new Uint8Array(0),t)}decrypt(t,r,n){let i=this.getCS(r,!1);return this.xx.decryptWithAd(i,new Uint8Array(0),t,n)}getRemoteStaticKey(){return this.session.hs.rs}getCS(t,r=!0){if(!t.cs1||!t.cs2)throw new fr("Handshake not completed properly, cipher state does not exist.");return this.isInitiator?r?t.cs1:t.cs2:r?t.cs2:t.cs1}setRemoteNoiseExtension(t){t&&(this.remoteExtensions=t)}};function rl(e){return{xxHandshakeSuccesses:e.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:e.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:e.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:e.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:e.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}var Po=class{protocol="/noise";crypto;prologue;staticKeys;extensions;metrics;constructor(t={}){let{staticNoiseKey:r,extensions:n,crypto:i,prologueBytes:o,metrics:s}=t;this.crypto=i??ls,this.extensions=n,this.metrics=s?rl(s):void 0,r?this.staticKeys=this.crypto.generateX25519KeyPairFromSeed(r):this.staticKeys=this.crypto.generateX25519KeyPair(),this.prologue=o??new Uint8Array(0)}async secureOutbound(t,r,n){let i=zo(r,{lengthEncoder:rn,lengthDecoder:Fn,maxDataLength:65535}),o=await this.performHandshake({connection:i,isInitiator:!0,localPeer:t,remotePeer:n});return{conn:await this.createSecureConnection(i,o),remoteExtensions:o.remoteExtensions,remotePeer:o.remotePeer}}async secureInbound(t,r,n){let i=zo(r,{lengthEncoder:rn,lengthDecoder:Fn,maxDataLength:65535}),o=await this.performHandshake({connection:i,isInitiator:!1,localPeer:t,remotePeer:n});return{conn:await this.createSecureConnection(i,o),remotePeer:o.remotePeer,remoteExtensions:o.remoteExtensions}}async performHandshake(t){let r=await $h(t.localPeer,this.staticKeys.publicKey,this.extensions);return this.performXXHandshake(t,r)}async performXXHandshake(t,r){let{isInitiator:n,remotePeer:i,connection:o}=t,s=new Ro(n,r,this.prologue,this.crypto,this.staticKeys,o,i);try{await s.propose(),await s.exchange(),await s.finish(),this.metrics?.xxHandshakeSuccesses.increment()}catch(a){if(this.metrics?.xxHandshakeErrors.increment(),a instanceof Error)throw a.message=`Error occurred during XX handshake: ${a.message}`,a}return s}async createSecureConnection(t,r){let[n,i]=B0(),o=t.unwrap();return await I0(n,pc(r,this.metrics),o,s=>Un(s,{lengthDecoder:Fn}),dc(r,this.metrics),n),i}};function nl(e={}){return()=>new Po(e)}var ol=Symbol.for("@libp2p/transport");var il;(function(e){e[e.FATAL_ALL=0]="FATAL_ALL",e[e.NO_FATAL=1]="NO_FATAL"})(il||(il={}));var g0=mt(No(),1);var Pn=mt(No(),1);var Uo=class{index=0;input="";new(t){return this.index=0,this.input=t,this}readAtomically(t){let r=this.index,n=t();return n===void 0&&(this.index=r),n}parseWith(t){let r=t();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(t){return this.readAtomically(()=>{let r=this.readChar();if(r===t)return r})}readSeparator(t,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(t)===void 0))return n()})}readNumber(t,r,n,i){return this.readAtomically(()=>{let o=0,s=0,a=this.peekChar();if(a===void 0)return;let c=a==="0",f=2**(8*i)-1;for(;;){let u=this.readAtomically(()=>{let h=this.readChar();if(h===void 0)return;let l=Number.parseInt(h,t);if(!Number.isNaN(l))return l});if(u===void 0)break;if(o*=t,o+=u,o>f||(s+=1,r!==void 0&&s>r))return}if(s!==0)return!n&&c&&s>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{let t=new Uint8Array(4);for(let r=0;r<t.length;r++){let n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;t[r]=n}return t})}readIPv6Addr(){let t=r=>{for(let n=0;n<r.length/2;n++){let i=n*2;if(n<r.length-3){let s=this.readSeparator(":",n,()=>this.readIPv4Addr());if(s!==void 0)return r[i]=s[0],r[i+1]=s[1],r[i+2]=s[2],r[i+3]=s[3],[i+4,!0]}let o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[i,!1];r[i]=o>>8,r[i+1]=o&255}return[r.length,!1]};return this.readAtomically(()=>{let r=new Uint8Array(16),[n,i]=t(r);if(n===16)return r;if(i||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;let o=new Uint8Array(14),s=16-(n+2),[a]=t(o.subarray(0,s));return r.set(o.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};var yl=45,Hm=15,Rn=new Uo;function o0(e){if(!(e.length>Hm))return Rn.new(e).parseWith(()=>Rn.readIPv4Addr())}function s0(e){if(!(e.length>yl))return Rn.new(e).parseWith(()=>Rn.readIPv6Addr())}function ko(e){if(!(e.length>yl))return Rn.new(e).parseWith(()=>Rn.readIPAddr())}var nE=parseInt("0xFFFF",16),iE=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);var We=mt(No(),1);function xl(e){return!!o0(e)}function vl(e){return!!s0(e)}function Do(e){return!!ko(e)}var wl=xl,Wm=vl,a0=function(e){let t=0;if(e=e.toString().trim(),wl(e)){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(n=>{r[t++]=parseInt(n,10)&255}),r}if(Wm(e)){let r=e.split(":",8),n;for(n=0;n<r.length;n++){let o=wl(r[n]),s;o&&(s=a0(r[n]),r[n]=Z(s.slice(0,2),"base16")),s!=null&&++n<8&&r.splice(n,0,Z(s.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);let o=[n,1];for(n=9-r.length;n>0;n--)o.push("0");r.splice.apply(r,o)}let i=new Uint8Array(t+16);for(n=0;n<r.length;n++){let o=parseInt(r[n],16);i[t++]=o>>8&255,i[t++]=o&255}return i}throw new Error("invalid ip address")},bl=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(r===4){let i=[];for(let o=0;o<r;o++)i.push(e[t+o]);return i.join(".")}if(r===16){let i=[];for(let o=0;o<r;o+=2)i.push(n.getUint16(t+o).toString(16));return i.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""};var di={},c0={},Xm=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]];Xm.forEach(e=>{let t=Zm(...e);c0[t.code]=t,di[t.name]=t});function Zm(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:!!n,path:!!i}}function Y(e){if(typeof e=="number"){if(c0[e]!=null)return c0[e];throw new Error(`no protocol with code: ${e}`)}else if(typeof e=="string"){if(di[e]!=null)return di[e];throw new Error(`no protocol with name: ${e}`)}throw new Error(`invalid protocol id type: ${typeof e}`)}var VE=Y("ip4"),HE=Y("ip6"),qE=Y("ipcidr");function Cl(e,t){switch(Y(e).code){case 4:case 41:return jm(t);case 42:return Al(t);case 6:case 273:case 33:case 132:return Il(t).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Al(t);case 421:return rx(t);case 444:return Bl(t);case 445:return Bl(t);case 466:return ex(t);default:return Z(t,"base16")}}function _l(e,t){switch(Y(e).code){case 4:return El(t);case 41:return El(t);case 42:return Sl(t);case 6:case 273:case 33:case 132:return u0(parseInt(t,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Sl(t);case 421:return Jm(t);case 444:return nx(t);case 445:return ix(t);case 466:return tx(t);default:return Kt(t,"base16")}}var f0=Object.values(Oe).map(e=>e.decoder),Qm=function(){let e=f0[0].or(f0[1]);return f0.slice(2).forEach(t=>e=e.or(t)),e}();function El(e){if(!Do(e))throw new Error("invalid ip address");return a0(e)}function jm(e){let t=bl(e,0,e.length);if(t==null)throw new Error("ipBuff is required");if(!Do(t))throw new Error("invalid ip address");return t}function u0(e){let t=new ArrayBuffer(2);return new DataView(t).setUint16(0,e),new Uint8Array(t)}function Il(e){return new DataView(e.buffer).getUint16(e.byteOffset)}function Sl(e){let t=Kt(e),r=Uint8Array.from(We.default.encode(t.length));return xt([r,t],r.length+t.length)}function Al(e){let t=We.default.decode(e);if(e=e.slice(We.default.decode.bytes),e.length!==t)throw new Error("inconsistent lengths");return Z(e)}function Jm(e){let t;e[0]==="Q"||e[0]==="1"?t=yr(Nt.decode(`z${e}`)).bytes:t=wt.parse(e).multihash.bytes;let r=Uint8Array.from(We.default.encode(t.length));return xt([r,t],r.length+t.length)}function tx(e){let t=Qm.decode(e),r=Uint8Array.from(We.default.encode(t.length));return xt([r,t],r.length+t.length)}function ex(e){let t=We.default.decode(e),r=e.slice(We.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return"u"+Z(r,"base64url")}function rx(e){let t=We.default.decode(e),r=e.slice(We.default.decode.bytes);if(r.length!==t)throw new Error("inconsistent lengths");return Z(r,"base58btc")}function nx(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==16)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=Be.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=u0(n);return xt([r,i],r.length+i.length)}function ix(e){let t=e.split(":");if(t.length!==2)throw new Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(t[0].length!==56)throw new Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=Be.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");let i=u0(n);return xt([r,i],r.length+i.length)}function Bl(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=Z(t,"base32"),i=Il(r);return`${n}:${i}`}function ox(e){let t=[],r=e.split("/").slice(1);if(r.length===1&&r[0]==="")return[];for(let n=0;n<r.length;n++){let i=r[n],o=Y(i);if(o.size===0){t.push([i]);continue}if(n++,n>=r.length)throw Ll("invalid address: "+e);if(o.path===!0){t.push([i,y0(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}function sx(e){let t=[];return e.map(r=>{let n=Mo(r);return t.push(n.name),r.length>1&&r[1]!=null&&t.push(r[1]),null}),y0(t.join("/"))}function ax(e){return e.map(t=>{Array.isArray(t)||(t=[t]);let r=Mo(t);return t.length>1?[r.code,_l(r.code,t[1])]:[r.code]})}function h0(e){return e.map(t=>{let r=Mo(t);return t[1]!=null?[r.code,Cl(r.code,t[1])]:[r.code]})}function l0(e){return Fo(xt(e.map(t=>{let r=Mo(t),n=Uint8Array.from(Pn.default.encode(r.code));return t.length>1&&t[1]!=null&&(n=xt([n,t[1]])),n})))}function p0(e,t){return e.size>0?e.size/8:e.size===0?0:Pn.default.decode(t)+(Pn.default.decode.bytes??0)}function Ko(e){let t=[],r=0;for(;r<e.length;){let n=Pn.default.decode(e,r),i=Pn.default.decode.bytes??0,o=Y(n),s=p0(o,e.slice(r+i));if(s===0){t.push([n]),r+=i;continue}let a=e.slice(r+i,r+i+s);if(r+=s+i,r>e.length)throw Ll("Invalid address Uint8Array: "+Z(e,"base16"));t.push([n,a])}return t}function d0(e){let t=Ko(e),r=h0(t);return sx(r)}function cx(e){e=y0(e);let t=ox(e),r=ax(t);return l0(r)}function Tl(e){return cx(e)}function Fo(e){let t=fx(e);if(t!=null)throw t;return Uint8Array.from(e)}function fx(e){try{Ko(e)}catch(t){return t}}function y0(e){return"/"+e.trim().split("/").filter(t=>t).join("/")}function Ll(e){return new Error("Error parsing address: "+e)}function Mo(e){return Y(e[0])}var hx=Symbol.for("nodejs.util.inspect.custom"),lx=[Y("dns").code,Y("dns4").code,Y("dns6").code,Y("dnsaddr").code],px=new Map,Rl=Symbol.for("@multiformats/js-multiaddr/multiaddr");function dx(e){return!!e?.[Rl]}var _r=class{bytes;#e;#r;#n;#t;[Rl]=!0;constructor(t){if(t==null&&(t=""),t instanceof Uint8Array)this.bytes=Fo(t);else if(typeof t=="string"){if(t.length>0&&t.charAt(0)!=="/")throw new Error(`multiaddr "${t}" must start with a "/"`);this.bytes=Tl(t)}else if(dx(t))this.bytes=Fo(t.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return this.#e==null&&(this.#e=d0(this.bytes)),this.#e}toJSON(){return this.toString()}toOptions(){let t,r,n,i,o="",s=Y("tcp"),a=Y("udp"),c=Y("ip4"),f=Y("ip6"),u=Y("dns6"),h=Y("ip6zone");for(let[d,p]of this.stringTuples())d===h.code&&(o=`%${p??""}`),lx.includes(d)&&(r=s.name,i=443,n=`${p??""}${o}`,t=d===u.code?6:4),(d===s.code||d===a.code)&&(r=Y(d).name,i=parseInt(p??"")),(d===c.code||d===f.code)&&(r=Y(d).name,n=`${p??""}${o}`,t=d===f.code?6:4);if(t==null||r==null||n==null||i==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:t,host:n,transport:r,port:i}}protos(){return this.protoCodes().map(t=>Object.assign({},Y(t)))}protoCodes(){let t=[],r=this.bytes,n=0;for(;n<r.length;){let i=g0.default.decode(r,n),o=g0.default.decode.bytes??0,s=Y(i),a=p0(s,r.slice(n+o));n+=a+o,t.push(i)}return t}protoNames(){return this.protos().map(t=>t.name)}tuples(){return this.#r==null&&(this.#r=Ko(this.bytes)),this.#r}stringTuples(){return this.#n==null&&(this.#n=h0(this.tuples())),this.#n}encapsulate(t){return t=new _r(t),new _r(this.toString()+t.toString())}decapsulate(t){let r=t.toString(),n=this.toString(),i=n.lastIndexOf(r);if(i<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${t.toString()}`);return new _r(n.slice(0,i))}decapsulateCode(t){let r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===t)return new _r(l0(r.slice(0,n)));return this}getPeerId(){try{let r=this.stringTuples().filter(n=>n[0]===di.ipfs.code).pop();if(r?.[1]!=null){let n=r[1];return n[0]==="Q"||n[0]==="1"?Z(Nt.decode(`z${n}`),"base58btc"):Z(wt.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){if(this.#t===void 0)try{this.#t=this.stringTuples().filter(t=>Y(t[0]).path===!0)[0][1],this.#t==null&&(this.#t=null)}catch{this.#t=null}return this.#t}equals(t){return kt(this.bytes,t.bytes)}async resolve(t){let r=this.protos().find(o=>o.resolvable);if(r==null)return[this];let n=px.get(r.name);if(n==null)throw new yt(`no available resolver for ${r.name}`,"ERR_NO_AVAILABLE_RESOLVER");return(await n(this,t)).map(o=>new _r(o))}nodeAddress(){let t=this.toOptions();if(t.transport!=="tcp"&&t.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${t.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:t.family,address:t.host,port:t.port}}isThinWaistAddress(t){let r=(t??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[hx](){return`Multiaddr(${d0(this.bytes)})`}};var ce=_o("libp2p:webtransport"),yx=Object.values(Oe).map(e=>e.decoder).reduce((e,t)=>e.or(t));function gx(e){return Me.decode(yx.decode(e))}function Pl(){return{source:{[Symbol.asyncIterator](){return{async next(){return new Promise(()=>{})}}}},sink:async e=>new Promise(()=>{})}}async function Nl(e,t,r,n,i){let o=e.writable.getWriter(),s=e.readable.getReader();await o.ready;function a(){let l=n.findIndex(d=>d===h);l!==-1&&(n.splice(l,1),h.stat.timeline.close=Date.now(),i?.(h))}let c=!1,f=!1;(async function(){let l=await o.closed.catch(d=>d);if(l!=null){let d=l.message;d.includes("aborted by the remote server")||d.includes("STOP_SENDING")||ce.error(`WebTransport writer closed unexpectedly: streamId=${t} err=${l.message}`)}c=!0,c&&f&&a()})().catch(()=>{ce.error("WebTransport failed to cleanup closed stream")}),async function(){let l=await s.closed.catch(d=>d);l!=null&&ce.error(`WebTransport reader closed unexpectedly: streamId=${t} err=${l.message}`),f=!0,c&&f&&a()}().catch(()=>{ce.error("WebTransport failed to cleanup closed stream")});let u=!1,h={id:t,abort(l){c||(o.abort(),c=!0),h.closeRead(),f=!0,a()},close(){h.closeRead(),h.closeWrite(),a()},closeRead(){f||(s.cancel().catch(l=>{l.toString().includes("RESET_STREAM")===!0&&(c=!0)}),f=!0),c&&a()},closeWrite(){c||(c=!0,o.close().catch(l=>{l.toString().includes("RESET_STREAM")===!0&&(f=!0)})),f&&a()},reset(){h.close()},stat:{direction:r,timeline:{open:Date.now()}},metadata:{},source:async function*(){for(;;){let l=await s.read();if(l.done===!0){f=!0,c&&a();return}yield new te(l.value)}}(),sink:async function(l){if(u)throw new Error("sink already called on stream");u=!0;try{for await(let d of l)if(d instanceof Uint8Array)await o.write(d);else for(let p of d)await o.write(p)}finally{h.closeWrite()}}};return h}function mx(e){let t=e.stringTuples(),{url:r,certhashes:n,remotePeer:i}=t.reduce((o,[s,a])=>{switch(s){case Y("ip6").code:case Y("dns6").code:a?.includes(":")===!0&&(a=`[${a}]`);case Y("ip4").code:case Y("dns4").code:if(o.seenHost||o.seenPort)throw new Error("Invalid multiaddr, saw host and already saw the host or port");return{...o,url:`${o.url}${a??""}`,seenHost:!0};case Y("quic").code:case Y("quic-v1").code:case Y("webtransport").code:if(!o.seenHost||!o.seenPort)throw new Error("Invalid multiaddr, Didn't see host and port, but saw quic/webtransport");return o;case Y("udp").code:if(o.seenPort)throw new Error("Invalid multiaddr, saw port but already saw the port");return{...o,url:`${o.url}:${a??""}`,seenPort:!0};case Y("certhash").code:if(!o.seenHost||!o.seenPort)throw new Error("Invalid multiaddr, saw the certhash before seeing the host and port");return{...o,certhashes:o.certhashes.concat([gx(a??"")])};case Y("p2p").code:return{...o,remotePeer:Za(a??"")};default:throw new Error(`unexpected component in multiaddr: ${s} ${Y(s).name} ${a??""} `)}},{url:"https://",seenHost:!1,seenPort:!1,certhashes:[]});return{url:r,certhashes:n,remotePeer:i}}function Ul(e,t){return t.filter(n=>!!e.find(i=>{if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(i[o]!==n[o])return!1;return!0})).length===t.length}var m0=class{components;config;constructor(t,r={}){this.components=t,this.config={maxInboundStreams:r.maxInboundStreams??1e3}}[Symbol.toStringTag]="@libp2p/webtransport";[ol]=!0;async dial(t,r){ce("dialing %s",t);let n=this.components.peerId;if(n===void 0)throw new Error("Need a local peerid");r=r??{};let{url:i,certhashes:o,remotePeer:s}=mx(t);if(o.length===0)throw new Error("Expected multiaddr to contain certhashes");let a=new WebTransport(`${i}/.well-known/libp2p-webtransport?type=noise`,{serverCertificateHashes:o.map(f=>({algorithm:"sha-256",value:f.digest}))});if(a.closed.catch(f=>{ce.error("WebTransport transport closed due to:",f)}),await a.ready,s==null)throw new Error("Need a target peerid");if(!await this.authenticateWebTransport(a,n,s,o))throw new Error("Failed to authenticate webtransport");let c={close:async f=>{f!=null&&ce("Closing webtransport with err:",f),a.close()},remoteAddr:t,timeline:{open:Date.now()},...Pl()};a.closed.catch(f=>{ce.error("WebTransport connection closed:",f),c.timeline.close=Date.now()});try{r?.signal?.throwIfAborted()}catch(f){throw a.close(),f}return r.upgrader.upgradeOutbound(c,{skipEncryption:!0,muxerFactory:this.webtransportMuxer(a),skipProtection:!0})}async authenticateWebTransport(t,r,n,i){let o=await t.createBidirectionalStream(),s=o.writable.getWriter(),a=o.readable.getReader();await s.ready;let c={source:async function*(){for(;;){let h=await a.read();if(h.value!=null&&(yield h.value),h.done===!0)break}}(),sink:async function(h){for await(let l of h)await s.write(l)}},f=nl()(),{remoteExtensions:u}=await f.secureOutbound(r,c,n);if(s.close().catch(h=>{ce.error(`Failed to close authentication stream writer: ${h.message}`)}),a.cancel().catch(h=>{ce.error(`Failed to close authentication stream reader: ${h.message}`)}),!Ul(u?.webtransportCerthashes??[],i.map(h=>h.bytes)))throw new Error("Our certhashes are not a subset of the remote's reported certhashes");return!0}webtransportMuxer(t){let r=0,n=this.config;return{protocol:"webtransport",createStreamMuxer:i=>{typeof i=="function"&&(i={onIncomingStream:i});let o=[];(async function(){let a=t.incomingBidirectionalStreams.getReader();for(;;){let{done:c,value:f}=await a.read();if(c===!0)break;if(o.length>=n.maxInboundStreams)f.writable.close().catch(u=>{ce.error(`Failed to close inbound stream that crossed our maxInboundStream limit: ${u.message}`)}),f.readable.cancel().catch(u=>{ce.error(`Failed to close inbound stream that crossed our maxInboundStream limit: ${u.message}`)});else{let u=await Nl(f,String(r++),"inbound",o,i?.onStreamEnd);o.push(u),i?.onIncomingStream?.(u)}}})().catch(()=>{ce.error("WebTransport failed to receive incoming stream")});let s={protocol:"webtransport",streams:o,newStream:async a=>{let c=await t.createBidirectionalStream(),f=await Nl(c,String(r++),i?.direction??"outbound",o,i?.onStreamEnd);return o.push(f),f},close:a=>{a!=null&&ce("Closing webtransport muxer with err:",a),t.close()},...Pl()};try{i?.signal?.throwIfAborted()}catch(a){throw t.close(),a}return s}}}createListener(t){throw new Error("Webtransport servers are not supported in Node or the browser")}filter(t){return t.filter(r=>r.protoNames().includes("webtransport"))}};function xx(e={}){return t=>new m0(t,e)}return Vl(vx);})();
//! TODO unclear how to add backpressure here?
/*! Bundled license information:

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ed25519/lib/esm/index.js:
  (*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)

@noble/secp256k1/lib/esm/index.js:
  (*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) *)
*/
return Libp2PWebtransport}));
